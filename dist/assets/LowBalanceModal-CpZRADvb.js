import{r as f,d as p,g,j as e,T as j,X as N,G as k}from"./index-CxovqTKt.js";import{T as m}from"./trending-down-GxuaOiB8.js";import"./vendor--Eh9ivFN.js";import"./genai-IPx1z701.js";const A=({isOpen:u,onClose:d,records:n})=>{const l=f.useMemo(()=>{const t={},r=[...n].sort((s,a)=>p(s,a)),c=new Set;r.filter(s=>s.solicitudType==="PA").forEach(s=>{c.has(s.rut)||(t[s.rut]||(t[s.rut]={nombre:s.funcionario,rut:s.rut,saldoPA:null,saldoFL:null}),t[s.rut].saldoPA=s.diasHaber-s.cantidadDias,c.add(s.rut))});const x=new Set;return r.filter(s=>s.solicitudType==="FL").forEach(s=>{x.has(s.rut)||(t[s.rut]||(t[s.rut]={nombre:s.funcionario,rut:s.rut,saldoPA:null,saldoFL:null}),t[s.rut].saldoFL=g(s,0),x.add(s.rut))}),Object.values(t).filter(s=>s.saldoPA!==null&&s.saldoPA<2||s.saldoFL!==null&&s.saldoFL<2).sort((s,a)=>{const h=Math.min(s.saldoPA??999,s.saldoFL??999),b=Math.min(a.saldoPA??999,a.saldoFL??999);return h-b})},[n]);if(!u)return null;const o=t=>t===null?"text-slate-400 dark:text-slate-500":t<0?"text-red-600 dark:text-red-400":t<1?"text-red-500 dark:text-red-400":t<2?"text-amber-600 dark:text-amber-400":"text-emerald-600 dark:text-emerald-400",i=t=>t===null?"bg-slate-50 dark:bg-slate-700/50":t<0?"bg-red-50 dark:bg-red-900/30":t<2?"bg-amber-50 dark:bg-amber-900/30":"bg-emerald-50 dark:bg-emerald-900/30";return e.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",onClick:d,children:[e.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),e.jsxs("div",{className:"relative w-full max-w-2xl max-h-[85vh] bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-amber-500 to-orange-500 p-6 sm:p-8 text-white relative overflow-hidden flex-shrink-0",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-20 scale-150 pointer-events-none",children:e.jsx(j,{size:100})}),e.jsxs("div",{className:"flex items-center justify-between z-10 relative",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-white/20 rounded-2xl backdrop-blur-md shadow-lg",children:e.jsx(m,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-extrabold uppercase tracking-tight",children:"Alerta de Saldo Bajo"}),e.jsxs("p",{className:"text-[10px] sm:text-[11px] font-bold uppercase opacity-80 tracking-wider mt-1",children:[l.length," funcionarios con menos de 2 días"]})]})]}),e.jsx("button",{onClick:d,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all border border-white/20",children:e.jsx(N,{className:"w-5 h-5"})})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6",children:l.length===0?e.jsxs("div",{className:"py-16 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-emerald-100 dark:bg-emerald-900/30 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-8 h-8 text-emerald-500"})}),e.jsx("h3",{className:"text-lg font-bold text-slate-800 dark:text-white mb-2",children:"¡Todo en orden!"}),e.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"No hay funcionarios con saldo bajo en este momento."})]}):e.jsx("div",{className:"space-y-3",children:l.map((t,r)=>e.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 rounded-2xl p-4 border border-slate-200 dark:border-slate-600",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-white dark:bg-slate-600 rounded-xl flex items-center justify-center shadow-sm",children:e.jsx(k,{className:"w-5 h-5 text-slate-400"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-black text-slate-800 dark:text-white uppercase truncate",children:t.nombre}),e.jsx("p",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 font-mono",children:t.rut})]}),e.jsxs("div",{className:"flex gap-2",children:[t.saldoPA!==null&&t.saldoPA<2&&e.jsxs("div",{className:`px-3 py-2 rounded-xl text-center ${i(t.saldoPA)}`,children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase",children:"PA"}),e.jsx("p",{className:`text-lg font-black ${o(t.saldoPA)}`,children:t.saldoPA.toFixed(1)})]}),t.saldoFL!==null&&t.saldoFL<2&&e.jsxs("div",{className:`px-3 py-2 rounded-xl text-center ${i(t.saldoFL)}`,children:[e.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase",children:"FL"}),e.jsx("p",{className:`text-lg font-black ${o(t.saldoFL)}`,children:t.saldoFL.toFixed(1)})]})]})]})},t.rut))})}),e.jsx("div",{className:"p-4 sm:p-6 border-t border-slate-200 dark:border-slate-700 bg-slate-50 dark:bg-slate-800/50 flex-shrink-0",children:e.jsx("p",{className:"text-[9px] sm:text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest text-center",children:"Los funcionarios listados tienen menos de 2 días disponibles"})})]})]})};export{A as default};
