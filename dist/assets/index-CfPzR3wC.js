const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/EmployeeListModal-CJpOoM4S.js","assets/upload-B3LaaoXE.js","assets/trending-down-BD76qis3.js","assets/vendor--Eh9ivFN.js","assets/genai-IPx1z701.js","assets/Dashboard-DpbXo4cz.js","assets/LowBalanceModal-DxlctVa5.js","assets/DecreeBookModal-DStNvdRD.js","assets/CalendarView-CefPYSli.js","assets/ThemeSelector-BrsyILku.js","assets/check-6aO9XKTL.js","assets/Settings-BUrAzoWq.js","assets/Reports-CHxXZtXc.js","assets/colorUtils-iuXnZW-F.js","assets/AIAssistant-CJwteysE.js","assets/LeaveRequests-DcWd6PlC.js","assets/EmployeeList-C8JLAxWY.js"])))=>i.map(i=>d[i]);
import{r as Xv,g as Hp,a as jw,c as Ku}from"./vendor--Eh9ivFN.js";import"./genai-IPx1z701.js";function Rw(r,e){for(var n=0;n<e.length;n++){const a=e[n];if(typeof a!="string"&&!Array.isArray(a)){for(const o in a)if(o!=="default"&&!(o in r)){const c=Object.getOwnPropertyDescriptor(a,o);c&&Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:()=>a[o]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function a(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();var Bf={exports:{}},Ol={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bb;function Dw(){if(Bb)return Ol;Bb=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(a,o,c){var u=null;if(c!==void 0&&(u=""+c),o.key!==void 0&&(u=""+o.key),"key"in o){c={};for(var f in o)f!=="key"&&(c[f]=o[f])}else c=o;return o=c.ref,{$$typeof:r,type:a,key:u,ref:o!==void 0?o:null,props:c}}return Ol.Fragment=e,Ol.jsx=n,Ol.jsxs=n,Ol}var $b;function Ow(){return $b||($b=1,Bf.exports=Dw()),Bf.exports}var h=Ow(),K=Xv();const Qs=Hp(K),i6=Rw({__proto__:null,default:Qs},[K]);var $f={exports:{}},Il={},Ff={exports:{}},Vf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fb;function Iw(){return Fb||(Fb=1,(function(r){function e(Q,X){var _e=Q.length;Q.push(X);e:for(;0<_e;){var re=_e-1>>>1,te=Q[re];if(0<o(te,X))Q[re]=X,Q[_e]=te,_e=re;else break e}}function n(Q){return Q.length===0?null:Q[0]}function a(Q){if(Q.length===0)return null;var X=Q[0],_e=Q.pop();if(_e!==X){Q[0]=_e;e:for(var re=0,te=Q.length,W=te>>>1;re<W;){var Z=2*(re+1)-1,pe=Q[Z],ne=Z+1,ie=Q[ne];if(0>o(pe,_e))ne<te&&0>o(ie,pe)?(Q[re]=ie,Q[ne]=_e,re=ne):(Q[re]=pe,Q[Z]=_e,re=Z);else if(ne<te&&0>o(ie,_e))Q[re]=ie,Q[ne]=_e,re=ne;else break e}}return X}function o(Q,X){var _e=Q.sortIndex-X.sortIndex;return _e!==0?_e:Q.id-X.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;r.unstable_now=function(){return c.now()}}else{var u=Date,f=u.now();r.unstable_now=function(){return u.now()-f}}var m=[],b=[],x=1,_=null,E=3,y=!1,A=!1,k=!1,N=!1,C=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function V(Q){for(var X=n(b);X!==null;){if(X.callback===null)a(b);else if(X.startTime<=Q)a(b),X.sortIndex=X.expirationTime,e(m,X);else break;X=n(b)}}function H(Q){if(k=!1,V(Q),!A)if(n(m)!==null)A=!0,G||(G=!0,D());else{var X=n(b);X!==null&&ge(H,X.startTime-Q)}}var G=!1,M=-1,j=5,O=-1;function F(){return N?!0:!(r.unstable_now()-O<j)}function q(){if(N=!1,G){var Q=r.unstable_now();O=Q;var X=!0;try{e:{A=!1,k&&(k=!1,I(M),M=-1),y=!0;var _e=E;try{t:{for(V(Q),_=n(m);_!==null&&!(_.expirationTime>Q&&F());){var re=_.callback;if(typeof re=="function"){_.callback=null,E=_.priorityLevel;var te=re(_.expirationTime<=Q);if(Q=r.unstable_now(),typeof te=="function"){_.callback=te,V(Q),X=!0;break t}_===n(m)&&a(m),V(Q)}else a(m);_=n(m)}if(_!==null)X=!0;else{var W=n(b);W!==null&&ge(H,W.startTime-Q),X=!1}}break e}finally{_=null,E=_e,y=!1}X=void 0}}finally{X?D():G=!1}}}var D;if(typeof z=="function")D=function(){z(q)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,R=L.port2;L.port1.onmessage=q,D=function(){R.postMessage(null)}}else D=function(){C(q,0)};function ge(Q,X){M=C(function(){Q(r.unstable_now())},X)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(Q){Q.callback=null},r.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Q?Math.floor(1e3/Q):5},r.unstable_getCurrentPriorityLevel=function(){return E},r.unstable_next=function(Q){switch(E){case 1:case 2:case 3:var X=3;break;default:X=E}var _e=E;E=X;try{return Q()}finally{E=_e}},r.unstable_requestPaint=function(){N=!0},r.unstable_runWithPriority=function(Q,X){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var _e=E;E=Q;try{return X()}finally{E=_e}},r.unstable_scheduleCallback=function(Q,X,_e){var re=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?re+_e:re):_e=re,Q){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=_e+te,Q={id:x++,callback:X,priorityLevel:Q,startTime:_e,expirationTime:te,sortIndex:-1},_e>re?(Q.sortIndex=_e,e(b,Q),n(m)===null&&Q===n(b)&&(k?(I(M),M=-1):k=!0,ge(H,_e-re))):(Q.sortIndex=te,e(m,Q),A||y||(A=!0,G||(G=!0,D()))),Q},r.unstable_shouldYield=F,r.unstable_wrapCallback=function(Q){var X=E;return function(){var _e=E;E=X;try{return Q.apply(this,arguments)}finally{E=_e}}}})(Vf)),Vf}var Vb;function Lw(){return Vb||(Vb=1,Ff.exports=Iw()),Ff.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hb;function Uw(){if(Hb)return Il;Hb=1;var r=Lw(),e=Xv(),n=jw();function a(t){var s="https://react.dev/errors/"+t;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)s+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var s=t,i=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(i=s.return),t=s.return;while(t)}return s.tag===3?i:null}function u(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function f(t){if(t.tag===31){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function m(t){if(c(t)!==t)throw Error(a(188))}function b(t){var s=t.alternate;if(!s){if(s=c(t),s===null)throw Error(a(188));return s!==t?null:t}for(var i=t,l=s;;){var p=i.return;if(p===null)break;var g=p.alternate;if(g===null){if(l=p.return,l!==null){i=l;continue}break}if(p.child===g.child){for(g=p.child;g;){if(g===i)return m(p),t;if(g===l)return m(p),s;g=g.sibling}throw Error(a(188))}if(i.return!==l.return)i=p,l=g;else{for(var w=!1,P=p.child;P;){if(P===i){w=!0,i=p,l=g;break}if(P===l){w=!0,l=p,i=g;break}P=P.sibling}if(!w){for(P=g.child;P;){if(P===i){w=!0,i=g,l=p;break}if(P===l){w=!0,l=g,i=p;break}P=P.sibling}if(!w)throw Error(a(189))}}if(i.alternate!==l)throw Error(a(190))}if(i.tag!==3)throw Error(a(188));return i.stateNode.current===i?t:s}function x(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t;for(t=t.child;t!==null;){if(s=x(t),s!==null)return s;t=t.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),y=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),z=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),G=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function D(t){return t===null||typeof t!="object"?null:(t=q&&t[q]||t["@@iterator"],typeof t=="function"?t:null)}var L=Symbol.for("react.client.reference");function R(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===L?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case k:return"Fragment";case C:return"Profiler";case N:return"StrictMode";case H:return"Suspense";case G:return"SuspenseList";case O:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case A:return"Portal";case z:return t.displayName||"Context";case I:return(t._context.displayName||"Context")+".Consumer";case V:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M:return s=t.displayName||null,s!==null?s:R(t.type)||"Memo";case j:s=t._payload,t=t._init;try{return R(t(s))}catch{}}return null}var ge=Array.isArray,Q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},re=[],te=-1;function W(t){return{current:t}}function Z(t){0>te||(t.current=re[te],re[te]=null,te--)}function pe(t,s){te++,re[te]=t.current,t.current=s}var ne=W(null),ie=W(null),Ae=W(null),ke=W(null);function ae(t,s){switch(pe(Ae,s),pe(ie,t),pe(ne,null),s.nodeType){case 9:case 11:t=(t=s.documentElement)&&(t=t.namespaceURI)?cb(t):0;break;default:if(t=s.tagName,s=s.namespaceURI)s=cb(s),t=ub(s,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}Z(ne),pe(ne,t)}function Re(){Z(ne),Z(ie),Z(Ae)}function Te(t){t.memoizedState!==null&&pe(ke,t);var s=ne.current,i=ub(s,t.type);s!==i&&(pe(ie,t),pe(ne,i))}function Ie(t){ie.current===t&&(Z(ne),Z(ie)),ke.current===t&&(Z(ke),Cl._currentValue=_e)}var Be,Ue;function S(t){if(Be===void 0)try{throw Error()}catch(i){var s=i.stack.trim().match(/\n( *(at )?)/);Be=s&&s[1]||"",Ue=-1<i.stack.indexOf(`
    at`)?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Be+t+Ue}var ve=!1;function me(t,s){if(!t||ve)return"";ve=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(s){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(ye){var he=ye}Reflect.construct(t,[],Ee)}else{try{Ee.call()}catch(ye){he=ye}t.call(Ee.prototype)}}else{try{throw Error()}catch(ye){he=ye}(Ee=t())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(ye){if(ye&&he&&typeof ye.stack=="string")return[ye.stack,he.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),w=g[0],P=g[1];if(w&&P){var Y=w.split(`
`),ue=P.split(`
`);for(p=l=0;l<Y.length&&!Y[l].includes("DetermineComponentFrameRoot");)l++;for(;p<ue.length&&!ue[p].includes("DetermineComponentFrameRoot");)p++;if(l===Y.length||p===ue.length)for(l=Y.length-1,p=ue.length-1;1<=l&&0<=p&&Y[l]!==ue[p];)p--;for(;1<=l&&0<=p;l--,p--)if(Y[l]!==ue[p]){if(l!==1||p!==1)do if(l--,p--,0>p||Y[l]!==ue[p]){var xe=`
`+Y[l].replace(" at new "," at ");return t.displayName&&xe.includes("<anonymous>")&&(xe=xe.replace("<anonymous>",t.displayName)),xe}while(1<=l&&0<=p);break}}}finally{ve=!1,Error.prepareStackTrace=i}return(i=t?t.displayName||t.name:"")?S(i):""}function U(t,s){switch(t.tag){case 26:case 27:case 5:return S(t.type);case 16:return S("Lazy");case 13:return t.child!==s&&s!==null?S("Suspense Fallback"):S("Suspense");case 19:return S("SuspenseList");case 0:case 15:return me(t.type,!1);case 11:return me(t.type.render,!1);case 1:return me(t.type,!0);case 31:return S("Activity");default:return""}}function B(t){try{var s="",i=null;do s+=U(t,i),i=t,t=t.return;while(t);return s}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var J=Object.prototype.hasOwnProperty,de=r.unstable_scheduleCallback,we=r.unstable_cancelCallback,oe=r.unstable_shouldYield,Ce=r.unstable_requestPaint,je=r.unstable_now,Ne=r.unstable_getCurrentPriorityLevel,Pe=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,Je=r.unstable_NormalPriority,sn=r.unstable_LowPriority,Kn=r.unstable_IdlePriority,Vt=r.log,ds=r.unstable_setDisableYieldValue,ot=null,nt=null;function rn(t){if(typeof Vt=="function"&&ds(t),nt&&typeof nt.setStrictMode=="function")try{nt.setStrictMode(ot,t)}catch{}}var ht=Math.clz32?Math.clz32:Ir,nr=Math.log,sr=Math.LN2;function Ir(t){return t>>>=0,t===0?32:31-(nr(t)/sr|0)|0}var kn=256,Jn=262144,xt=4194304;function un(t){var s=t&42;if(s!==0)return s;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Yn(t,s,i){var l=t.pendingLanes;if(l===0)return 0;var p=0,g=t.suspendedLanes,w=t.pingedLanes;t=t.warmLanes;var P=l&134217727;return P!==0?(l=P&~g,l!==0?p=un(l):(w&=P,w!==0?p=un(w):i||(i=P&~t,i!==0&&(p=un(i))))):(P=l&~g,P!==0?p=un(P):w!==0?p=un(w):i||(i=l&~t,i!==0&&(p=un(i)))),p===0?0:s!==0&&s!==p&&(s&g)===0&&(g=p&-p,i=s&-s,g>=i||g===32&&(i&4194048)!==0)?s:p}function Sn(t,s){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&s)===0}function vi(t,s){switch(t){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _i(){var t=xt;return xt<<=1,(xt&62914560)===0&&(xt=4194304),t}function Wn(t){for(var s=[],i=0;31>i;i++)s.push(t);return s}function rr(t,s){t.pendingLanes|=s,s!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function Lo(t,s,i,l,p,g){var w=t.pendingLanes;t.pendingLanes=i,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=i,t.entangledLanes&=i,t.errorRecoveryDisabledLanes&=i,t.shellSuspendCounter=0;var P=t.entanglements,Y=t.expirationTimes,ue=t.hiddenUpdates;for(i=w&~i;0<i;){var xe=31-ht(i),Ee=1<<xe;P[xe]=0,Y[xe]=-1;var he=ue[xe];if(he!==null)for(ue[xe]=null,xe=0;xe<he.length;xe++){var ye=he[xe];ye!==null&&(ye.lane&=-536870913)}i&=~Ee}l!==0&&fe(t,l,0),g!==0&&p===0&&t.tag!==0&&(t.suspendedLanes|=g&~(w&~s))}function fe(t,s,i){t.pendingLanes|=s,t.suspendedLanes&=~s;var l=31-ht(s);t.entangledLanes|=s,t.entanglements[l]=t.entanglements[l]|1073741824|i&261930}function Le(t,s){var i=t.entangledLanes|=s;for(t=t.entanglements;i;){var l=31-ht(i),p=1<<l;p&s|t[l]&s&&(t[l]|=s),i&=~p}}function Fe(t,s){var i=s&-s;return i=(i&42)!==0?1:Ye(i),(i&(t.suspendedLanes|s))!==0?0:i}function Ye(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function tt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function On(){var t=X.p;return t!==0?t:(t=window.event,t===void 0?32:Ob(t.type))}function Lt(t,s){var i=X.p;try{return X.p=t,s()}finally{X.p=i}}var Qt=Math.random().toString(36).slice(2),jt="__reactFiber$"+Qt,an="__reactProps$"+Qt,Cs="__reactContainer$"+Qt,xi="__reactEvents$"+Qt,qd="__reactListeners$"+Qt,Ac="__reactHandles$"+Qt,Tc="__reactResources$"+Qt,js="__reactMarker$"+Qt;function wi(t){delete t[jt],delete t[an],delete t[xi],delete t[qd],delete t[Ac]}function Rs(t){var s=t[jt];if(s)return s;for(var i=t.parentNode;i;){if(s=i[Cs]||i[jt]){if(i=s.alternate,s.child!==null||i!==null&&i.child!==null)for(t=bb(t);t!==null;){if(i=t[jt])return i;t=bb(t)}return s}t=i,i=t.parentNode}return null}function Xn(t){if(t=t[jt]||t[Cs]){var s=t.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return t}return null}function In(t){var s=t.tag;if(s===5||s===26||s===27||s===6)return t.stateNode;throw Error(a(33))}function Ds(t){var s=t[Tc];return s||(s=t[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Ht(t){t[js]=!0}var Uo=new Set,Mo={};function Os(t,s){Is(t,s),Is(t+"Capture",s)}function Is(t,s){for(Mo[t]=s,t=0;t<s.length;t++)Uo.add(s[t])}var Po=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zo={},Bo={};function Nc(t){return J.call(Bo,t)?!0:J.call(zo,t)?!1:Po.test(t)?Bo[t]=!0:(zo[t]=!0,!1)}function ki(t,s,i){if(Nc(s))if(i===null)t.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":t.removeAttribute(s);return;case"boolean":var l=s.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(s);return}}t.setAttribute(s,""+i)}}function Ln(t,s,i){if(i===null)t.removeAttribute(s);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(s);return}t.setAttribute(s,""+i)}}function qt(t,s,i,l){if(l===null)t.removeAttribute(i);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttributeNS(s,i,""+l)}}function on(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Lr(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $o(t,s,i){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,s);if(!t.hasOwnProperty(s)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var p=l.get,g=l.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return p.call(this)},set:function(w){i=""+w,g.call(this,w)}}),Object.defineProperty(t,s,{enumerable:l.enumerable}),{getValue:function(){return i},setValue:function(w){i=""+w},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function bt(t){if(!t._valueTracker){var s=Lr(t)?"checked":"value";t._valueTracker=$o(t,s,""+t[s])}}function Ta(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var i=s.getValue(),l="";return t&&(l=Lr(t)?t.checked?"true":"false":t.value),t=l,t!==i?(s.setValue(t),!0):!1}function Ls(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Na=/[\n"\\]/g;function En(t){return t.replace(Na,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Si(t,s,i,l,p,g,w,P){t.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?t.type=w:t.removeAttribute("type"),s!=null?w==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+on(s)):t.value!==""+on(s)&&(t.value=""+on(s)):w!=="submit"&&w!=="reset"||t.removeAttribute("value"),s!=null?Fo(t,w,on(s)):i!=null?Fo(t,w,on(i)):l!=null&&t.removeAttribute("value"),p==null&&g!=null&&(t.defaultChecked=!!g),p!=null&&(t.checked=p&&typeof p!="function"&&typeof p!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?t.name=""+on(P):t.removeAttribute("name")}function Cc(t,s,i,l,p,g,w,P){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(t.type=g),s!=null||i!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){bt(t);return}i=i!=null?""+on(i):"",s=s!=null?""+on(s):i,P||s===t.value||(t.value=s),t.defaultValue=s}l=l??p,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=P?t.checked:!!l,t.defaultChecked=!!l,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(t.name=w),bt(t)}function Fo(t,s,i){s==="number"&&Ls(t.ownerDocument)===t||t.defaultValue===""+i||(t.defaultValue=""+i)}function Ur(t,s,i,l){if(t=t.options,s){s={};for(var p=0;p<i.length;p++)s["$"+i[p]]=!0;for(i=0;i<t.length;i++)p=s.hasOwnProperty("$"+t[i].value),t[i].selected!==p&&(t[i].selected=p),p&&l&&(t[i].defaultSelected=!0)}else{for(i=""+on(i),s=null,p=0;p<t.length;p++){if(t[p].value===i){t[p].selected=!0,l&&(t[p].defaultSelected=!0);return}s!==null||t[p].disabled||(s=t[p])}s!==null&&(s.selected=!0)}}function jc(t,s,i){if(s!=null&&(s=""+on(s),s!==t.value&&(t.value=s),i==null)){t.defaultValue!==s&&(t.defaultValue=s);return}t.defaultValue=i!=null?""+on(i):""}function Mr(t,s,i,l){if(s==null){if(l!=null){if(i!=null)throw Error(a(92));if(ge(l)){if(1<l.length)throw Error(a(93));l=l[0]}i=l}i==null&&(i=""),s=i}i=on(s),t.defaultValue=i,l=t.textContent,l===i&&l!==""&&l!==null&&(t.value=l),bt(t)}function An(t,s){if(s){var i=t.firstChild;if(i&&i===t.lastChild&&i.nodeType===3){i.nodeValue=s;return}}t.textContent=s}var Rc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vo(t,s,i){var l=s.indexOf("--")===0;i==null||typeof i=="boolean"||i===""?l?t.setProperty(s,""):s==="float"?t.cssFloat="":t[s]="":l?t.setProperty(s,i):typeof i!="number"||i===0||Rc.has(s)?s==="float"?t.cssFloat=i:t[s]=(""+i).trim():t[s]=i+"px"}function Ho(t,s,i){if(s!=null&&typeof s!="object")throw Error(a(62));if(t=t.style,i!=null){for(var l in i)!i.hasOwnProperty(l)||s!=null&&s.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var p in s)l=s[p],s.hasOwnProperty(p)&&i[p]!==l&&Vo(t,p,l)}else for(var g in s)s.hasOwnProperty(g)&&Vo(t,g,s[g])}function Ei(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ai(t){return Pr.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function hs(){}var qo=null;function Zn(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var zr=null,Us=null;function Ca(t){var s=Xn(t);if(s&&(t=s.stateNode)){var i=t[an]||null;e:switch(t=s.stateNode,s.type){case"input":if(Si(t,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),s=i.name,i.type==="radio"&&s!=null){for(i=t;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+En(""+s)+'"][type="radio"]'),s=0;s<i.length;s++){var l=i[s];if(l!==t&&l.form===t.form){var p=l[an]||null;if(!p)throw Error(a(90));Si(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(s=0;s<i.length;s++)l=i[s],l.form===t.form&&Ta(l)}break e;case"textarea":jc(t,i.value,i.defaultValue);break e;case"select":s=i.value,s!=null&&Ur(t,!!i.multiple,s,!1)}}}var Ti=!1;function Br(t,s,i){if(Ti)return t(s,i);Ti=!0;try{var l=t(s);return l}finally{if(Ti=!1,(zr!==null||Us!==null)&&(Eu(),zr&&(s=zr,t=Us,Us=zr=null,Ca(s),t)))for(s=0;s<t.length;s++)Ca(t[s])}}function fs(t,s){var i=t.stateNode;if(i===null)return null;var l=i[an]||null;if(l===null)return null;i=l[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(i&&typeof i!="function")throw Error(a(231,s,typeof i));return i}var Qn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=!1;if(Qn)try{var Et={};Object.defineProperty(Et,"passive",{get:function(){ja=!0}}),window.addEventListener("test",Et,Et),window.removeEventListener("test",Et,Et)}catch{ja=!1}var Ms=null,Go=null,Ra=null;function Ko(){if(Ra)return Ra;var t,s=Go,i=s.length,l,p="value"in Ms?Ms.value:Ms.textContent,g=p.length;for(t=0;t<i&&s[t]===p[t];t++);var w=i-t;for(l=1;l<=w&&s[i-l]===p[g-l];l++);return Ra=p.slice(t,1<l?1-l:void 0)}function Da(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ar(){return!0}function ps(){return!1}function dn(t){function s(i,l,p,g,w){this._reactName=i,this._targetInst=p,this.type=l,this.nativeEvent=g,this.target=w,this.currentTarget=null;for(var P in t)t.hasOwnProperty(P)&&(i=t[P],this[P]=i?i(g):g[P]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ar:ps,this.isPropagationStopped=ps,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),s}var ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=dn(ir),$r=_({},ir,{view:0,detail:0}),Jo=dn($r),Fr,Ni,zs,Ci=_({},$r,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==zs&&(zs&&t.type==="mousemove"?(Fr=t.screenX-zs.screenX,Ni=t.screenY-zs.screenY):Ni=Fr=0,zs=t),Fr)},movementY:function(t){return"movementY"in t?t.movementY:Ni}}),Yo=dn(Ci),Oa=_({},Ci,{dataTransfer:0}),Oc=dn(Oa),Ic=_({},$r,{relatedTarget:0}),Ia=dn(Ic),Wo=_({},ir,{animationName:0,elapsedTime:0,pseudoElement:0}),Lc=dn(Wo),ji=_({},ir,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Uc=dn(ji),Mc=_({},ir,{data:0}),Bs=dn(Mc),Pc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $c(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Bc[t])?!!s[t]:!1}function yn(){return $c}var Fc=_({},$r,{key:function(t){if(t.key){var s=Pc[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Da(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?zc[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(t){return t.type==="keypress"?Da(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Da(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Vc=dn(Fc),Vr=_({},Ci,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),d=dn(Vr),v=_({},$r,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn}),T=dn(v),$=_({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0}),le=dn($),be=_({},Ci,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),De=dn(be),Xe=_({},ir,{newState:0,oldState:0}),Bt=dn(Xe),yt=[9,13,27,32],Ut=Qn&&"CompositionEvent"in window,vn=null;Qn&&"documentMode"in document&&(vn=document.documentMode);var or=Qn&&"TextEvent"in window&&!vn,ms=Qn&&(!Ut||vn&&8<vn&&11>=vn),gs=" ",La=!1;function Ri(t,s){switch(t){case"keyup":return yt.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function v0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Di=!1;function ex(t,s){switch(t){case"compositionend":return v0(s);case"keypress":return s.which!==32?null:(La=!0,gs);case"textInput":return t=s.data,t===gs&&La?null:t;default:return null}}function tx(t,s){if(Di)return t==="compositionend"||!Ut&&Ri(t,s)?(t=Ko(),Ra=Go=Ms=null,Di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ms&&s.locale!=="ko"?null:s.data;default:return null}}var nx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _0(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!nx[t.type]:s==="textarea"}function x0(t,s,i,l){zr?Us?Us.push(l):Us=[l]:zr=l,s=Du(s,"onChange"),0<s.length&&(i=new Ps("onChange","change",null,i,l),t.push({event:i,listeners:s}))}var Xo=null,Zo=null;function sx(t){sb(t,0)}function Hc(t){var s=In(t);if(Ta(s))return t}function w0(t,s){if(t==="change")return s}var k0=!1;if(Qn){var Gd;if(Qn){var Kd="oninput"in document;if(!Kd){var S0=document.createElement("div");S0.setAttribute("oninput","return;"),Kd=typeof S0.oninput=="function"}Gd=Kd}else Gd=!1;k0=Gd&&(!document.documentMode||9<document.documentMode)}function E0(){Xo&&(Xo.detachEvent("onpropertychange",A0),Zo=Xo=null)}function A0(t){if(t.propertyName==="value"&&Hc(Zo)){var s=[];x0(s,Zo,t,Zn(t)),Br(sx,s)}}function rx(t,s,i){t==="focusin"?(E0(),Xo=s,Zo=i,Xo.attachEvent("onpropertychange",A0)):t==="focusout"&&E0()}function ax(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Hc(Zo)}function ix(t,s){if(t==="click")return Hc(s)}function ox(t,s){if(t==="input"||t==="change")return Hc(s)}function lx(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Un=typeof Object.is=="function"?Object.is:lx;function Qo(t,s){if(Un(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var i=Object.keys(t),l=Object.keys(s);if(i.length!==l.length)return!1;for(l=0;l<i.length;l++){var p=i[l];if(!J.call(s,p)||!Un(t[p],s[p]))return!1}return!0}function T0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function N0(t,s){var i=T0(t);t=0;for(var l;i;){if(i.nodeType===3){if(l=t+i.textContent.length,t<=s&&l>=s)return{node:i,offset:s-t};t=l}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=T0(i)}}function C0(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?C0(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function j0(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var s=Ls(t.document);s instanceof t.HTMLIFrameElement;){try{var i=typeof s.contentWindow.location.href=="string"}catch{i=!1}if(i)t=s.contentWindow;else break;s=Ls(t.document)}return s}function Jd(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}var cx=Qn&&"documentMode"in document&&11>=document.documentMode,Oi=null,Yd=null,el=null,Wd=!1;function R0(t,s,i){var l=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Wd||Oi==null||Oi!==Ls(l)||(l=Oi,"selectionStart"in l&&Jd(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),el&&Qo(el,l)||(el=l,l=Du(Yd,"onSelect"),0<l.length&&(s=new Ps("onSelect","select",null,s,i),t.push({event:s,listeners:l}),s.target=Oi)))}function Ua(t,s){var i={};return i[t.toLowerCase()]=s.toLowerCase(),i["Webkit"+t]="webkit"+s,i["Moz"+t]="moz"+s,i}var Ii={animationend:Ua("Animation","AnimationEnd"),animationiteration:Ua("Animation","AnimationIteration"),animationstart:Ua("Animation","AnimationStart"),transitionrun:Ua("Transition","TransitionRun"),transitionstart:Ua("Transition","TransitionStart"),transitioncancel:Ua("Transition","TransitionCancel"),transitionend:Ua("Transition","TransitionEnd")},Xd={},D0={};Qn&&(D0=document.createElement("div").style,"AnimationEvent"in window||(delete Ii.animationend.animation,delete Ii.animationiteration.animation,delete Ii.animationstart.animation),"TransitionEvent"in window||delete Ii.transitionend.transition);function Ma(t){if(Xd[t])return Xd[t];if(!Ii[t])return t;var s=Ii[t],i;for(i in s)if(s.hasOwnProperty(i)&&i in D0)return Xd[t]=s[i];return t}var O0=Ma("animationend"),I0=Ma("animationiteration"),L0=Ma("animationstart"),ux=Ma("transitionrun"),dx=Ma("transitionstart"),hx=Ma("transitioncancel"),U0=Ma("transitionend"),M0=new Map,Zd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zd.push("scrollEnd");function bs(t,s){M0.set(t,s),Os(s,[t])}var qc=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},es=[],Li=0,Qd=0;function Gc(){for(var t=Li,s=Qd=Li=0;s<t;){var i=es[s];es[s++]=null;var l=es[s];es[s++]=null;var p=es[s];es[s++]=null;var g=es[s];if(es[s++]=null,l!==null&&p!==null){var w=l.pending;w===null?p.next=p:(p.next=w.next,w.next=p),l.pending=p}g!==0&&P0(i,p,g)}}function Kc(t,s,i,l){es[Li++]=t,es[Li++]=s,es[Li++]=i,es[Li++]=l,Qd|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function eh(t,s,i,l){return Kc(t,s,i,l),Jc(t)}function Pa(t,s){return Kc(t,null,null,s),Jc(t)}function P0(t,s,i){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i);for(var p=!1,g=t.return;g!==null;)g.childLanes|=i,l=g.alternate,l!==null&&(l.childLanes|=i),g.tag===22&&(t=g.stateNode,t===null||t._visibility&1||(p=!0)),t=g,g=g.return;return t.tag===3?(g=t.stateNode,p&&s!==null&&(p=31-ht(i),t=g.hiddenUpdates,l=t[p],l===null?t[p]=[s]:l.push(s),s.lane=i|536870912),g):null}function Jc(t){if(50<wl)throw wl=0,uf=null,Error(a(185));for(var s=t.return;s!==null;)t=s,s=t.return;return t.tag===3?t.stateNode:null}var Ui={};function fx(t,s,i,l){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(t,s,i,l){return new fx(t,s,i,l)}function th(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lr(t,s){var i=t.alternate;return i===null?(i=Mn(t.tag,s,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=s,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&65011712,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,s=t.dependencies,i.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i.refCleanup=t.refCleanup,i}function z0(t,s){t.flags&=65011714;var i=t.alternate;return i===null?(t.childLanes=0,t.lanes=s,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,t.type=i.type,s=i.dependencies,t.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),t}function Yc(t,s,i,l,p,g){var w=0;if(l=t,typeof t=="function")th(t)&&(w=1);else if(typeof t=="string")w=yw(t,i,ne.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case O:return t=Mn(31,i,s,p),t.elementType=O,t.lanes=g,t;case k:return za(i.children,p,g,s);case N:w=8,p|=24;break;case C:return t=Mn(12,i,s,p|2),t.elementType=C,t.lanes=g,t;case H:return t=Mn(13,i,s,p),t.elementType=H,t.lanes=g,t;case G:return t=Mn(19,i,s,p),t.elementType=G,t.lanes=g,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case z:w=10;break e;case I:w=9;break e;case V:w=11;break e;case M:w=14;break e;case j:w=16,l=null;break e}w=29,i=Error(a(130,t===null?"null":typeof t,"")),l=null}return s=Mn(w,i,s,p),s.elementType=t,s.type=l,s.lanes=g,s}function za(t,s,i,l){return t=Mn(7,t,l,s),t.lanes=i,t}function nh(t,s,i){return t=Mn(6,t,null,s),t.lanes=i,t}function B0(t){var s=Mn(18,null,null,0);return s.stateNode=t,s}function sh(t,s,i){return s=Mn(4,t.children!==null?t.children:[],t.key,s),s.lanes=i,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}var $0=new WeakMap;function ts(t,s){if(typeof t=="object"&&t!==null){var i=$0.get(t);return i!==void 0?i:(s={value:t,source:s,stack:B(s)},$0.set(t,s),s)}return{value:t,source:s,stack:B(s)}}var Mi=[],Pi=0,Wc=null,tl=0,ns=[],ss=0,Hr=null,$s=1,Fs="";function cr(t,s){Mi[Pi++]=tl,Mi[Pi++]=Wc,Wc=t,tl=s}function F0(t,s,i){ns[ss++]=$s,ns[ss++]=Fs,ns[ss++]=Hr,Hr=t;var l=$s;t=Fs;var p=32-ht(l)-1;l&=~(1<<p),i+=1;var g=32-ht(s)+p;if(30<g){var w=p-p%5;g=(l&(1<<w)-1).toString(32),l>>=w,p-=w,$s=1<<32-ht(s)+p|i<<p|l,Fs=g+t}else $s=1<<g|i<<p|l,Fs=t}function rh(t){t.return!==null&&(cr(t,1),F0(t,1,0))}function ah(t){for(;t===Wc;)Wc=Mi[--Pi],Mi[Pi]=null,tl=Mi[--Pi],Mi[Pi]=null;for(;t===Hr;)Hr=ns[--ss],ns[ss]=null,Fs=ns[--ss],ns[ss]=null,$s=ns[--ss],ns[ss]=null}function V0(t,s){ns[ss++]=$s,ns[ss++]=Fs,ns[ss++]=Hr,$s=s.id,Fs=s.overflow,Hr=t}var hn=null,Rt=null,lt=!1,qr=null,rs=!1,ih=Error(a(519));function Gr(t){var s=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw nl(ts(s,t)),ih}function H0(t){var s=t.stateNode,i=t.type,l=t.memoizedProps;switch(s[jt]=t,s[an]=l,i){case"dialog":rt("cancel",s),rt("close",s);break;case"iframe":case"object":case"embed":rt("load",s);break;case"video":case"audio":for(i=0;i<Sl.length;i++)rt(Sl[i],s);break;case"source":rt("error",s);break;case"img":case"image":case"link":rt("error",s),rt("load",s);break;case"details":rt("toggle",s);break;case"input":rt("invalid",s),Cc(s,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":rt("invalid",s);break;case"textarea":rt("invalid",s),Mr(s,l.value,l.defaultValue,l.children)}i=l.children,typeof i!="string"&&typeof i!="number"&&typeof i!="bigint"||s.textContent===""+i||l.suppressHydrationWarning===!0||ob(s.textContent,i)?(l.popover!=null&&(rt("beforetoggle",s),rt("toggle",s)),l.onScroll!=null&&rt("scroll",s),l.onScrollEnd!=null&&rt("scrollend",s),l.onClick!=null&&(s.onclick=hs),s=!0):s=!1,s||Gr(t,!0)}function q0(t){for(hn=t.return;hn;)switch(hn.tag){case 5:case 31:case 13:rs=!1;return;case 27:case 3:rs=!0;return;default:hn=hn.return}}function zi(t){if(t!==hn)return!1;if(!lt)return q0(t),lt=!0,!1;var s=t.tag,i;if((i=s!==3&&s!==27)&&((i=s===5)&&(i=t.type,i=!(i!=="form"&&i!=="button")||Ef(t.type,t.memoizedProps)),i=!i),i&&Rt&&Gr(t),q0(t),s===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Rt=gb(t)}else if(s===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(317));Rt=gb(t)}else s===27?(s=Rt,ia(t.type)?(t=jf,jf=null,Rt=t):Rt=s):Rt=hn?is(t.stateNode.nextSibling):null;return!0}function Ba(){Rt=hn=null,lt=!1}function oh(){var t=qr;return t!==null&&(jn===null?jn=t:jn.push.apply(jn,t),qr=null),t}function nl(t){qr===null?qr=[t]:qr.push(t)}var lh=W(null),$a=null,ur=null;function Kr(t,s,i){pe(lh,s._currentValue),s._currentValue=i}function dr(t){t._currentValue=lh.current,Z(lh)}function ch(t,s,i){for(;t!==null;){var l=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,l!==null&&(l.childLanes|=s)):l!==null&&(l.childLanes&s)!==s&&(l.childLanes|=s),t===i)break;t=t.return}}function uh(t,s,i,l){var p=t.child;for(p!==null&&(p.return=t);p!==null;){var g=p.dependencies;if(g!==null){var w=p.child;g=g.firstContext;e:for(;g!==null;){var P=g;g=p;for(var Y=0;Y<s.length;Y++)if(P.context===s[Y]){g.lanes|=i,P=g.alternate,P!==null&&(P.lanes|=i),ch(g.return,i,t),l||(w=null);break e}g=P.next}}else if(p.tag===18){if(w=p.return,w===null)throw Error(a(341));w.lanes|=i,g=w.alternate,g!==null&&(g.lanes|=i),ch(w,i,t),w=null}else w=p.child;if(w!==null)w.return=p;else for(w=p;w!==null;){if(w===t){w=null;break}if(p=w.sibling,p!==null){p.return=w.return,w=p;break}w=w.return}p=w}}function Bi(t,s,i,l){t=null;for(var p=s,g=!1;p!==null;){if(!g){if((p.flags&524288)!==0)g=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var w=p.alternate;if(w===null)throw Error(a(387));if(w=w.memoizedProps,w!==null){var P=p.type;Un(p.pendingProps.value,w.value)||(t!==null?t.push(P):t=[P])}}else if(p===ke.current){if(w=p.alternate,w===null)throw Error(a(387));w.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(t!==null?t.push(Cl):t=[Cl])}p=p.return}t!==null&&uh(s,t,i,l),s.flags|=262144}function Xc(t){for(t=t.firstContext;t!==null;){if(!Un(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Fa(t){$a=t,ur=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function fn(t){return G0($a,t)}function Zc(t,s){return $a===null&&Fa(t),G0(t,s)}function G0(t,s){var i=s._currentValue;if(s={context:s,memoizedValue:i,next:null},ur===null){if(t===null)throw Error(a(308));ur=s,t.dependencies={lanes:0,firstContext:s},t.flags|=524288}else ur=ur.next=s;return i}var px=typeof AbortController<"u"?AbortController:function(){var t=[],s=this.signal={aborted:!1,addEventListener:function(i,l){t.push(l)}};this.abort=function(){s.aborted=!0,t.forEach(function(i){return i()})}},mx=r.unstable_scheduleCallback,gx=r.unstable_NormalPriority,Gt={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function dh(){return{controller:new px,data:new Map,refCount:0}}function sl(t){t.refCount--,t.refCount===0&&mx(gx,function(){t.controller.abort()})}var rl=null,hh=0,$i=0,Fi=null;function bx(t,s){if(rl===null){var i=rl=[];hh=0,$i=gf(),Fi={status:"pending",value:void 0,then:function(l){i.push(l)}}}return hh++,s.then(K0,K0),s}function K0(){if(--hh===0&&rl!==null){Fi!==null&&(Fi.status="fulfilled");var t=rl;rl=null,$i=0,Fi=null;for(var s=0;s<t.length;s++)(0,t[s])()}}function yx(t,s){var i=[],l={status:"pending",value:null,reason:null,then:function(p){i.push(p)}};return t.then(function(){l.status="fulfilled",l.value=s;for(var p=0;p<i.length;p++)(0,i[p])(s)},function(p){for(l.status="rejected",l.reason=p,p=0;p<i.length;p++)(0,i[p])(void 0)}),l}var J0=Q.S;Q.S=function(t,s){Rg=je(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&bx(t,s),J0!==null&&J0(t,s)};var Va=W(null);function fh(){var t=Va.current;return t!==null?t:At.pooledCache}function Qc(t,s){s===null?pe(Va,Va.current):pe(Va,s.pool)}function Y0(){var t=fh();return t===null?null:{parent:Gt._currentValue,pool:t}}var Vi=Error(a(460)),ph=Error(a(474)),eu=Error(a(542)),tu={then:function(){}};function W0(t){return t=t.status,t==="fulfilled"||t==="rejected"}function X0(t,s,i){switch(i=t[i],i===void 0?t.push(s):i!==s&&(s.then(hs,hs),s=i),s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Q0(t),t;default:if(typeof s.status=="string")s.then(hs,hs);else{if(t=At,t!==null&&100<t.shellSuspendCounter)throw Error(a(482));t=s,t.status="pending",t.then(function(l){if(s.status==="pending"){var p=s;p.status="fulfilled",p.value=l}},function(l){if(s.status==="pending"){var p=s;p.status="rejected",p.reason=l}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw t=s.reason,Q0(t),t}throw qa=s,Vi}}function Ha(t){try{var s=t._init;return s(t._payload)}catch(i){throw i!==null&&typeof i=="object"&&typeof i.then=="function"?(qa=i,Vi):i}}var qa=null;function Z0(){if(qa===null)throw Error(a(459));var t=qa;return qa=null,t}function Q0(t){if(t===Vi||t===eu)throw Error(a(483))}var Hi=null,al=0;function nu(t){var s=al;return al+=1,Hi===null&&(Hi=[]),X0(Hi,t,s)}function il(t,s){s=s.props.ref,t.ref=s!==void 0?s:null}function su(t,s){throw s.$$typeof===E?Error(a(525)):(t=Object.prototype.toString.call(s),Error(a(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t)))}function em(t){function s(se,ee){if(t){var ce=se.deletions;ce===null?(se.deletions=[ee],se.flags|=16):ce.push(ee)}}function i(se,ee){if(!t)return null;for(;ee!==null;)s(se,ee),ee=ee.sibling;return null}function l(se){for(var ee=new Map;se!==null;)se.key!==null?ee.set(se.key,se):ee.set(se.index,se),se=se.sibling;return ee}function p(se,ee){return se=lr(se,ee),se.index=0,se.sibling=null,se}function g(se,ee,ce){return se.index=ce,t?(ce=se.alternate,ce!==null?(ce=ce.index,ce<ee?(se.flags|=67108866,ee):ce):(se.flags|=67108866,ee)):(se.flags|=1048576,ee)}function w(se){return t&&se.alternate===null&&(se.flags|=67108866),se}function P(se,ee,ce,Se){return ee===null||ee.tag!==6?(ee=nh(ce,se.mode,Se),ee.return=se,ee):(ee=p(ee,ce),ee.return=se,ee)}function Y(se,ee,ce,Se){var Ve=ce.type;return Ve===k?xe(se,ee,ce.props.children,Se,ce.key):ee!==null&&(ee.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===j&&Ha(Ve)===ee.type)?(ee=p(ee,ce.props),il(ee,ce),ee.return=se,ee):(ee=Yc(ce.type,ce.key,ce.props,null,se.mode,Se),il(ee,ce),ee.return=se,ee)}function ue(se,ee,ce,Se){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ce.containerInfo||ee.stateNode.implementation!==ce.implementation?(ee=sh(ce,se.mode,Se),ee.return=se,ee):(ee=p(ee,ce.children||[]),ee.return=se,ee)}function xe(se,ee,ce,Se,Ve){return ee===null||ee.tag!==7?(ee=za(ce,se.mode,Se,Ve),ee.return=se,ee):(ee=p(ee,ce),ee.return=se,ee)}function Ee(se,ee,ce){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=nh(""+ee,se.mode,ce),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case y:return ce=Yc(ee.type,ee.key,ee.props,null,se.mode,ce),il(ce,ee),ce.return=se,ce;case A:return ee=sh(ee,se.mode,ce),ee.return=se,ee;case j:return ee=Ha(ee),Ee(se,ee,ce)}if(ge(ee)||D(ee))return ee=za(ee,se.mode,ce,null),ee.return=se,ee;if(typeof ee.then=="function")return Ee(se,nu(ee),ce);if(ee.$$typeof===z)return Ee(se,Zc(se,ee),ce);su(se,ee)}return null}function he(se,ee,ce,Se){var Ve=ee!==null?ee.key:null;if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return Ve!==null?null:P(se,ee,""+ce,Se);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:return ce.key===Ve?Y(se,ee,ce,Se):null;case A:return ce.key===Ve?ue(se,ee,ce,Se):null;case j:return ce=Ha(ce),he(se,ee,ce,Se)}if(ge(ce)||D(ce))return Ve!==null?null:xe(se,ee,ce,Se,null);if(typeof ce.then=="function")return he(se,ee,nu(ce),Se);if(ce.$$typeof===z)return he(se,ee,Zc(se,ce),Se);su(se,ce)}return null}function ye(se,ee,ce,Se,Ve){if(typeof Se=="string"&&Se!==""||typeof Se=="number"||typeof Se=="bigint")return se=se.get(ce)||null,P(ee,se,""+Se,Ve);if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case y:return se=se.get(Se.key===null?ce:Se.key)||null,Y(ee,se,Se,Ve);case A:return se=se.get(Se.key===null?ce:Se.key)||null,ue(ee,se,Se,Ve);case j:return Se=Ha(Se),ye(se,ee,ce,Se,Ve)}if(ge(Se)||D(Se))return se=se.get(ce)||null,xe(ee,se,Se,Ve,null);if(typeof Se.then=="function")return ye(se,ee,ce,nu(Se),Ve);if(Se.$$typeof===z)return ye(se,ee,ce,Zc(ee,Se),Ve);su(ee,Se)}return null}function Me(se,ee,ce,Se){for(var Ve=null,ft=null,ze=ee,Qe=ee=0,it=null;ze!==null&&Qe<ce.length;Qe++){ze.index>Qe?(it=ze,ze=null):it=ze.sibling;var pt=he(se,ze,ce[Qe],Se);if(pt===null){ze===null&&(ze=it);break}t&&ze&&pt.alternate===null&&s(se,ze),ee=g(pt,ee,Qe),ft===null?Ve=pt:ft.sibling=pt,ft=pt,ze=it}if(Qe===ce.length)return i(se,ze),lt&&cr(se,Qe),Ve;if(ze===null){for(;Qe<ce.length;Qe++)ze=Ee(se,ce[Qe],Se),ze!==null&&(ee=g(ze,ee,Qe),ft===null?Ve=ze:ft.sibling=ze,ft=ze);return lt&&cr(se,Qe),Ve}for(ze=l(ze);Qe<ce.length;Qe++)it=ye(ze,se,Qe,ce[Qe],Se),it!==null&&(t&&it.alternate!==null&&ze.delete(it.key===null?Qe:it.key),ee=g(it,ee,Qe),ft===null?Ve=it:ft.sibling=it,ft=it);return t&&ze.forEach(function(da){return s(se,da)}),lt&&cr(se,Qe),Ve}function He(se,ee,ce,Se){if(ce==null)throw Error(a(151));for(var Ve=null,ft=null,ze=ee,Qe=ee=0,it=null,pt=ce.next();ze!==null&&!pt.done;Qe++,pt=ce.next()){ze.index>Qe?(it=ze,ze=null):it=ze.sibling;var da=he(se,ze,pt.value,Se);if(da===null){ze===null&&(ze=it);break}t&&ze&&da.alternate===null&&s(se,ze),ee=g(da,ee,Qe),ft===null?Ve=da:ft.sibling=da,ft=da,ze=it}if(pt.done)return i(se,ze),lt&&cr(se,Qe),Ve;if(ze===null){for(;!pt.done;Qe++,pt=ce.next())pt=Ee(se,pt.value,Se),pt!==null&&(ee=g(pt,ee,Qe),ft===null?Ve=pt:ft.sibling=pt,ft=pt);return lt&&cr(se,Qe),Ve}for(ze=l(ze);!pt.done;Qe++,pt=ce.next())pt=ye(ze,se,Qe,pt.value,Se),pt!==null&&(t&&pt.alternate!==null&&ze.delete(pt.key===null?Qe:pt.key),ee=g(pt,ee,Qe),ft===null?Ve=pt:ft.sibling=pt,ft=pt);return t&&ze.forEach(function(Cw){return s(se,Cw)}),lt&&cr(se,Qe),Ve}function St(se,ee,ce,Se){if(typeof ce=="object"&&ce!==null&&ce.type===k&&ce.key===null&&(ce=ce.props.children),typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case y:e:{for(var Ve=ce.key;ee!==null;){if(ee.key===Ve){if(Ve=ce.type,Ve===k){if(ee.tag===7){i(se,ee.sibling),Se=p(ee,ce.props.children),Se.return=se,se=Se;break e}}else if(ee.elementType===Ve||typeof Ve=="object"&&Ve!==null&&Ve.$$typeof===j&&Ha(Ve)===ee.type){i(se,ee.sibling),Se=p(ee,ce.props),il(Se,ce),Se.return=se,se=Se;break e}i(se,ee);break}else s(se,ee);ee=ee.sibling}ce.type===k?(Se=za(ce.props.children,se.mode,Se,ce.key),Se.return=se,se=Se):(Se=Yc(ce.type,ce.key,ce.props,null,se.mode,Se),il(Se,ce),Se.return=se,se=Se)}return w(se);case A:e:{for(Ve=ce.key;ee!==null;){if(ee.key===Ve)if(ee.tag===4&&ee.stateNode.containerInfo===ce.containerInfo&&ee.stateNode.implementation===ce.implementation){i(se,ee.sibling),Se=p(ee,ce.children||[]),Se.return=se,se=Se;break e}else{i(se,ee);break}else s(se,ee);ee=ee.sibling}Se=sh(ce,se.mode,Se),Se.return=se,se=Se}return w(se);case j:return ce=Ha(ce),St(se,ee,ce,Se)}if(ge(ce))return Me(se,ee,ce,Se);if(D(ce)){if(Ve=D(ce),typeof Ve!="function")throw Error(a(150));return ce=Ve.call(ce),He(se,ee,ce,Se)}if(typeof ce.then=="function")return St(se,ee,nu(ce),Se);if(ce.$$typeof===z)return St(se,ee,Zc(se,ce),Se);su(se,ce)}return typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint"?(ce=""+ce,ee!==null&&ee.tag===6?(i(se,ee.sibling),Se=p(ee,ce),Se.return=se,se=Se):(i(se,ee),Se=nh(ce,se.mode,Se),Se.return=se,se=Se),w(se)):i(se,ee)}return function(se,ee,ce,Se){try{al=0;var Ve=St(se,ee,ce,Se);return Hi=null,Ve}catch(ze){if(ze===Vi||ze===eu)throw ze;var ft=Mn(29,ze,null,se.mode);return ft.lanes=Se,ft.return=se,ft}finally{}}}var Ga=em(!0),tm=em(!1),Jr=!1;function mh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Yr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wr(t,s,i){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(mt&2)!==0){var p=l.pending;return p===null?s.next=s:(s.next=p.next,p.next=s),l.pending=s,s=Jc(t),P0(t,null,i),s}return Kc(t,l,s,i),Jc(t)}function ol(t,s,i){if(s=s.updateQueue,s!==null&&(s=s.shared,(i&4194048)!==0)){var l=s.lanes;l&=t.pendingLanes,i|=l,s.lanes=i,Le(t,i)}}function bh(t,s){var i=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,i===l)){var p=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var w={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};g===null?p=g=w:g=g.next=w,i=i.next}while(i!==null);g===null?p=g=s:g=g.next=s}else p=g=s;i={baseState:l.baseState,firstBaseUpdate:p,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=s:t.next=s,i.lastBaseUpdate=s}var yh=!1;function ll(){if(yh){var t=Fi;if(t!==null)throw t}}function cl(t,s,i,l){yh=!1;var p=t.updateQueue;Jr=!1;var g=p.firstBaseUpdate,w=p.lastBaseUpdate,P=p.shared.pending;if(P!==null){p.shared.pending=null;var Y=P,ue=Y.next;Y.next=null,w===null?g=ue:w.next=ue,w=Y;var xe=t.alternate;xe!==null&&(xe=xe.updateQueue,P=xe.lastBaseUpdate,P!==w&&(P===null?xe.firstBaseUpdate=ue:P.next=ue,xe.lastBaseUpdate=Y))}if(g!==null){var Ee=p.baseState;w=0,xe=ue=Y=null,P=g;do{var he=P.lane&-536870913,ye=he!==P.lane;if(ye?(at&he)===he:(l&he)===he){he!==0&&he===$i&&(yh=!0),xe!==null&&(xe=xe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var Me=t,He=P;he=s;var St=i;switch(He.tag){case 1:if(Me=He.payload,typeof Me=="function"){Ee=Me.call(St,Ee,he);break e}Ee=Me;break e;case 3:Me.flags=Me.flags&-65537|128;case 0:if(Me=He.payload,he=typeof Me=="function"?Me.call(St,Ee,he):Me,he==null)break e;Ee=_({},Ee,he);break e;case 2:Jr=!0}}he=P.callback,he!==null&&(t.flags|=64,ye&&(t.flags|=8192),ye=p.callbacks,ye===null?p.callbacks=[he]:ye.push(he))}else ye={lane:he,tag:P.tag,payload:P.payload,callback:P.callback,next:null},xe===null?(ue=xe=ye,Y=Ee):xe=xe.next=ye,w|=he;if(P=P.next,P===null){if(P=p.shared.pending,P===null)break;ye=P,P=ye.next,ye.next=null,p.lastBaseUpdate=ye,p.shared.pending=null}}while(!0);xe===null&&(Y=Ee),p.baseState=Y,p.firstBaseUpdate=ue,p.lastBaseUpdate=xe,g===null&&(p.shared.lanes=0),ta|=w,t.lanes=w,t.memoizedState=Ee}}function nm(t,s){if(typeof t!="function")throw Error(a(191,t));t.call(s)}function sm(t,s){var i=t.callbacks;if(i!==null)for(t.callbacks=null,t=0;t<i.length;t++)nm(i[t],s)}var qi=W(null),ru=W(0);function rm(t,s){t=_r,pe(ru,t),pe(qi,s),_r=t|s.baseLanes}function vh(){pe(ru,_r),pe(qi,qi.current)}function _h(){_r=ru.current,Z(qi),Z(ru)}var Pn=W(null),as=null;function Xr(t){var s=t.alternate;pe($t,$t.current&1),pe(Pn,t),as===null&&(s===null||qi.current!==null||s.memoizedState!==null)&&(as=t)}function xh(t){pe($t,$t.current),pe(Pn,t),as===null&&(as=t)}function am(t){t.tag===22?(pe($t,$t.current),pe(Pn,t),as===null&&(as=t)):Zr()}function Zr(){pe($t,$t.current),pe(Pn,Pn.current)}function zn(t){Z(Pn),as===t&&(as=null),Z($t)}var $t=W(0);function au(t){for(var s=t;s!==null;){if(s.tag===13){var i=s.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Nf(i)||Cf(i)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var hr=0,Ze=null,wt=null,Kt=null,iu=!1,Gi=!1,Ka=!1,ou=0,ul=0,Ki=null,vx=0;function Mt(){throw Error(a(321))}function wh(t,s){if(s===null)return!1;for(var i=0;i<s.length&&i<t.length;i++)if(!Un(t[i],s[i]))return!1;return!0}function kh(t,s,i,l,p,g){return hr=g,Ze=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,Q.H=t===null||t.memoizedState===null?Fm:Ph,Ka=!1,g=i(l,p),Ka=!1,Gi&&(g=om(s,i,l,p)),im(t),g}function im(t){Q.H=fl;var s=wt!==null&&wt.next!==null;if(hr=0,Kt=wt=Ze=null,iu=!1,ul=0,Ki=null,s)throw Error(a(300));t===null||Jt||(t=t.dependencies,t!==null&&Xc(t)&&(Jt=!0))}function om(t,s,i,l){Ze=t;var p=0;do{if(Gi&&(Ki=null),ul=0,Gi=!1,25<=p)throw Error(a(301));if(p+=1,Kt=wt=null,t.updateQueue!=null){var g=t.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}Q.H=Vm,g=s(i,l)}while(Gi);return g}function _x(){var t=Q.H,s=t.useState()[0];return s=typeof s.then=="function"?dl(s):s,t=t.useState()[0],(wt!==null?wt.memoizedState:null)!==t&&(Ze.flags|=1024),s}function Sh(){var t=ou!==0;return ou=0,t}function Eh(t,s,i){s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~i}function Ah(t){if(iu){for(t=t.memoizedState;t!==null;){var s=t.queue;s!==null&&(s.pending=null),t=t.next}iu=!1}hr=0,Kt=wt=Ze=null,Gi=!1,ul=ou=0,Ki=null}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?Ze.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function Ft(){if(wt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=wt.next;var s=Kt===null?Ze.memoizedState:Kt.next;if(s!==null)Kt=s,wt=t;else{if(t===null)throw Ze.alternate===null?Error(a(467)):Error(a(310));wt=t,t={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},Kt===null?Ze.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function lu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function dl(t){var s=ul;return ul+=1,Ki===null&&(Ki=[]),t=X0(Ki,t,s),s=Ze,(Kt===null?s.memoizedState:Kt.next)===null&&(s=s.alternate,Q.H=s===null||s.memoizedState===null?Fm:Ph),t}function cu(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return dl(t);if(t.$$typeof===z)return fn(t)}throw Error(a(438,String(t)))}function Th(t){var s=null,i=Ze.updateQueue;if(i!==null&&(s=i.memoCache),s==null){var l=Ze.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(s={data:l.data.map(function(p){return p.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),i===null&&(i=lu(),Ze.updateQueue=i),i.memoCache=s,i=s.data[s.index],i===void 0)for(i=s.data[s.index]=Array(t),l=0;l<t;l++)i[l]=F;return s.index++,i}function fr(t,s){return typeof s=="function"?s(t):s}function uu(t){var s=Ft();return Nh(s,wt,t)}function Nh(t,s,i){var l=t.queue;if(l===null)throw Error(a(311));l.lastRenderedReducer=i;var p=t.baseQueue,g=l.pending;if(g!==null){if(p!==null){var w=p.next;p.next=g.next,g.next=w}s.baseQueue=p=g,l.pending=null}if(g=t.baseState,p===null)t.memoizedState=g;else{s=p.next;var P=w=null,Y=null,ue=s,xe=!1;do{var Ee=ue.lane&-536870913;if(Ee!==ue.lane?(at&Ee)===Ee:(hr&Ee)===Ee){var he=ue.revertLane;if(he===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ee===$i&&(xe=!0);else if((hr&he)===he){ue=ue.next,he===$i&&(xe=!0);continue}else Ee={lane:0,revertLane:ue.revertLane,gesture:null,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Y===null?(P=Y=Ee,w=g):Y=Y.next=Ee,Ze.lanes|=he,ta|=he;Ee=ue.action,Ka&&i(g,Ee),g=ue.hasEagerState?ue.eagerState:i(g,Ee)}else he={lane:Ee,revertLane:ue.revertLane,gesture:ue.gesture,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},Y===null?(P=Y=he,w=g):Y=Y.next=he,Ze.lanes|=Ee,ta|=Ee;ue=ue.next}while(ue!==null&&ue!==s);if(Y===null?w=g:Y.next=P,!Un(g,t.memoizedState)&&(Jt=!0,xe&&(i=Fi,i!==null)))throw i;t.memoizedState=g,t.baseState=w,t.baseQueue=Y,l.lastRenderedState=g}return p===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ch(t){var s=Ft(),i=s.queue;if(i===null)throw Error(a(311));i.lastRenderedReducer=t;var l=i.dispatch,p=i.pending,g=s.memoizedState;if(p!==null){i.pending=null;var w=p=p.next;do g=t(g,w.action),w=w.next;while(w!==p);Un(g,s.memoizedState)||(Jt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),i.lastRenderedState=g}return[g,l]}function lm(t,s,i){var l=Ze,p=Ft(),g=lt;if(g){if(i===void 0)throw Error(a(407));i=i()}else i=s();var w=!Un((wt||p).memoizedState,i);if(w&&(p.memoizedState=i,Jt=!0),p=p.queue,Dh(dm.bind(null,l,p,t),[t]),p.getSnapshot!==s||w||Kt!==null&&Kt.memoizedState.tag&1){if(l.flags|=2048,Ji(9,{destroy:void 0},um.bind(null,l,p,i,s),null),At===null)throw Error(a(349));g||(hr&127)!==0||cm(l,s,i)}return i}function cm(t,s,i){t.flags|=16384,t={getSnapshot:s,value:i},s=Ze.updateQueue,s===null?(s=lu(),Ze.updateQueue=s,s.stores=[t]):(i=s.stores,i===null?s.stores=[t]:i.push(t))}function um(t,s,i,l){s.value=i,s.getSnapshot=l,hm(s)&&fm(t)}function dm(t,s,i){return i(function(){hm(s)&&fm(t)})}function hm(t){var s=t.getSnapshot;t=t.value;try{var i=s();return!Un(t,i)}catch{return!0}}function fm(t){var s=Pa(t,2);s!==null&&Rn(s,t,2)}function jh(t){var s=_n();if(typeof t=="function"){var i=t;if(t=i(),Ka){rn(!0);try{i()}finally{rn(!1)}}}return s.memoizedState=s.baseState=t,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:t},s}function pm(t,s,i,l){return t.baseState=i,Nh(t,wt,typeof l=="function"?l:fr)}function xx(t,s,i,l,p){if(fu(t))throw Error(a(485));if(t=s.action,t!==null){var g={payload:p,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){g.listeners.push(w)}};Q.T!==null?i(!0):g.isTransition=!1,l(g),i=s.pending,i===null?(g.next=s.pending=g,mm(s,g)):(g.next=i.next,s.pending=i.next=g)}}function mm(t,s){var i=s.action,l=s.payload,p=t.state;if(s.isTransition){var g=Q.T,w={};Q.T=w;try{var P=i(p,l),Y=Q.S;Y!==null&&Y(w,P),gm(t,s,P)}catch(ue){Rh(t,s,ue)}finally{g!==null&&w.types!==null&&(g.types=w.types),Q.T=g}}else try{g=i(p,l),gm(t,s,g)}catch(ue){Rh(t,s,ue)}}function gm(t,s,i){i!==null&&typeof i=="object"&&typeof i.then=="function"?i.then(function(l){bm(t,s,l)},function(l){return Rh(t,s,l)}):bm(t,s,i)}function bm(t,s,i){s.status="fulfilled",s.value=i,ym(s),t.state=i,s=t.pending,s!==null&&(i=s.next,i===s?t.pending=null:(i=i.next,s.next=i,mm(t,i)))}function Rh(t,s,i){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do s.status="rejected",s.reason=i,ym(s),s=s.next;while(s!==l)}t.action=null}function ym(t){t=t.listeners;for(var s=0;s<t.length;s++)(0,t[s])()}function vm(t,s){return s}function _m(t,s){if(lt){var i=At.formState;if(i!==null){e:{var l=Ze;if(lt){if(Rt){t:{for(var p=Rt,g=rs;p.nodeType!==8;){if(!g){p=null;break t}if(p=is(p.nextSibling),p===null){p=null;break t}}g=p.data,p=g==="F!"||g==="F"?p:null}if(p){Rt=is(p.nextSibling),l=p.data==="F!";break e}}Gr(l)}l=!1}l&&(s=i[0])}}return i=_n(),i.memoizedState=i.baseState=s,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vm,lastRenderedState:s},i.queue=l,i=zm.bind(null,Ze,l),l.dispatch=i,l=jh(!1),g=Mh.bind(null,Ze,!1,l.queue),l=_n(),p={state:s,dispatch:null,action:t,pending:null},l.queue=p,i=xx.bind(null,Ze,p,g,i),p.dispatch=i,l.memoizedState=t,[s,i,!1]}function xm(t){var s=Ft();return wm(s,wt,t)}function wm(t,s,i){if(s=Nh(t,s,vm)[0],t=uu(fr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var l=dl(s)}catch(w){throw w===Vi?eu:w}else l=s;s=Ft();var p=s.queue,g=p.dispatch;return i!==s.memoizedState&&(Ze.flags|=2048,Ji(9,{destroy:void 0},wx.bind(null,p,i),null)),[l,g,t]}function wx(t,s){t.action=s}function km(t){var s=Ft(),i=wt;if(i!==null)return wm(s,i,t);Ft(),s=s.memoizedState,i=Ft();var l=i.queue.dispatch;return i.memoizedState=t,[s,l,!1]}function Ji(t,s,i,l){return t={tag:t,create:i,deps:l,inst:s,next:null},s=Ze.updateQueue,s===null&&(s=lu(),Ze.updateQueue=s),i=s.lastEffect,i===null?s.lastEffect=t.next=t:(l=i.next,i.next=t,t.next=l,s.lastEffect=t),t}function Sm(){return Ft().memoizedState}function du(t,s,i,l){var p=_n();Ze.flags|=t,p.memoizedState=Ji(1|s,{destroy:void 0},i,l===void 0?null:l)}function hu(t,s,i,l){var p=Ft();l=l===void 0?null:l;var g=p.memoizedState.inst;wt!==null&&l!==null&&wh(l,wt.memoizedState.deps)?p.memoizedState=Ji(s,g,i,l):(Ze.flags|=t,p.memoizedState=Ji(1|s,g,i,l))}function Em(t,s){du(8390656,8,t,s)}function Dh(t,s){hu(2048,8,t,s)}function kx(t){Ze.flags|=4;var s=Ze.updateQueue;if(s===null)s=lu(),Ze.updateQueue=s,s.events=[t];else{var i=s.events;i===null?s.events=[t]:i.push(t)}}function Am(t){var s=Ft().memoizedState;return kx({ref:s,nextImpl:t}),function(){if((mt&2)!==0)throw Error(a(440));return s.impl.apply(void 0,arguments)}}function Tm(t,s){return hu(4,2,t,s)}function Nm(t,s){return hu(4,4,t,s)}function Cm(t,s){if(typeof s=="function"){t=t();var i=s(t);return function(){typeof i=="function"?i():s(null)}}if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function jm(t,s,i){i=i!=null?i.concat([t]):null,hu(4,4,Cm.bind(null,s,t),i)}function Oh(){}function Rm(t,s){var i=Ft();s=s===void 0?null:s;var l=i.memoizedState;return s!==null&&wh(s,l[1])?l[0]:(i.memoizedState=[t,s],t)}function Dm(t,s){var i=Ft();s=s===void 0?null:s;var l=i.memoizedState;if(s!==null&&wh(s,l[1]))return l[0];if(l=t(),Ka){rn(!0);try{t()}finally{rn(!1)}}return i.memoizedState=[l,s],l}function Ih(t,s,i){return i===void 0||(hr&1073741824)!==0&&(at&261930)===0?t.memoizedState=s:(t.memoizedState=i,t=Og(),Ze.lanes|=t,ta|=t,i)}function Om(t,s,i,l){return Un(i,s)?i:qi.current!==null?(t=Ih(t,i,l),Un(t,s)||(Jt=!0),t):(hr&42)===0||(hr&1073741824)!==0&&(at&261930)===0?(Jt=!0,t.memoizedState=i):(t=Og(),Ze.lanes|=t,ta|=t,s)}function Im(t,s,i,l,p){var g=X.p;X.p=g!==0&&8>g?g:8;var w=Q.T,P={};Q.T=P,Mh(t,!1,s,i);try{var Y=p(),ue=Q.S;if(ue!==null&&ue(P,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var xe=yx(Y,l);hl(t,s,xe,Fn(t))}else hl(t,s,l,Fn(t))}catch(Ee){hl(t,s,{then:function(){},status:"rejected",reason:Ee},Fn())}finally{X.p=g,w!==null&&P.types!==null&&(w.types=P.types),Q.T=w}}function Sx(){}function Lh(t,s,i,l){if(t.tag!==5)throw Error(a(476));var p=Lm(t).queue;Im(t,p,s,_e,i===null?Sx:function(){return Um(t),i(l)})}function Lm(t){var s=t.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:_e},next:null};var i={};return s.next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fr,lastRenderedState:i},next:null},t.memoizedState=s,t=t.alternate,t!==null&&(t.memoizedState=s),s}function Um(t){var s=Lm(t);s.next===null&&(s=t.alternate.memoizedState),hl(t,s.next.queue,{},Fn())}function Uh(){return fn(Cl)}function Mm(){return Ft().memoizedState}function Pm(){return Ft().memoizedState}function Ex(t){for(var s=t.return;s!==null;){switch(s.tag){case 24:case 3:var i=Fn();t=Yr(i);var l=Wr(s,t,i);l!==null&&(Rn(l,s,i),ol(l,s,i)),s={cache:dh()},t.payload=s;return}s=s.return}}function Ax(t,s,i){var l=Fn();i={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},fu(t)?Bm(s,i):(i=eh(t,s,i,l),i!==null&&(Rn(i,t,l),$m(i,s,l)))}function zm(t,s,i){var l=Fn();hl(t,s,i,l)}function hl(t,s,i,l){var p={lane:l,revertLane:0,gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null};if(fu(t))Bm(s,p);else{var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var w=s.lastRenderedState,P=g(w,i);if(p.hasEagerState=!0,p.eagerState=P,Un(P,w))return Kc(t,s,p,0),At===null&&Gc(),!1}catch{}finally{}if(i=eh(t,s,p,l),i!==null)return Rn(i,t,l),$m(i,s,l),!0}return!1}function Mh(t,s,i,l){if(l={lane:2,revertLane:gf(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},fu(t)){if(s)throw Error(a(479))}else s=eh(t,i,l,2),s!==null&&Rn(s,t,2)}function fu(t){var s=t.alternate;return t===Ze||s!==null&&s===Ze}function Bm(t,s){Gi=iu=!0;var i=t.pending;i===null?s.next=s:(s.next=i.next,i.next=s),t.pending=s}function $m(t,s,i){if((i&4194048)!==0){var l=s.lanes;l&=t.pendingLanes,i|=l,s.lanes=i,Le(t,i)}}var fl={readContext:fn,use:cu,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt};fl.useEffectEvent=Mt;var Fm={readContext:fn,use:cu,useCallback:function(t,s){return _n().memoizedState=[t,s===void 0?null:s],t},useContext:fn,useEffect:Em,useImperativeHandle:function(t,s,i){i=i!=null?i.concat([t]):null,du(4194308,4,Cm.bind(null,s,t),i)},useLayoutEffect:function(t,s){return du(4194308,4,t,s)},useInsertionEffect:function(t,s){du(4,2,t,s)},useMemo:function(t,s){var i=_n();s=s===void 0?null:s;var l=t();if(Ka){rn(!0);try{t()}finally{rn(!1)}}return i.memoizedState=[l,s],l},useReducer:function(t,s,i){var l=_n();if(i!==void 0){var p=i(s);if(Ka){rn(!0);try{i(s)}finally{rn(!1)}}}else p=s;return l.memoizedState=l.baseState=p,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:p},l.queue=t,t=t.dispatch=Ax.bind(null,Ze,t),[l.memoizedState,t]},useRef:function(t){var s=_n();return t={current:t},s.memoizedState=t},useState:function(t){t=jh(t);var s=t.queue,i=zm.bind(null,Ze,s);return s.dispatch=i,[t.memoizedState,i]},useDebugValue:Oh,useDeferredValue:function(t,s){var i=_n();return Ih(i,t,s)},useTransition:function(){var t=jh(!1);return t=Im.bind(null,Ze,t.queue,!0,!1),_n().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,s,i){var l=Ze,p=_n();if(lt){if(i===void 0)throw Error(a(407));i=i()}else{if(i=s(),At===null)throw Error(a(349));(at&127)!==0||cm(l,s,i)}p.memoizedState=i;var g={value:i,getSnapshot:s};return p.queue=g,Em(dm.bind(null,l,g,t),[t]),l.flags|=2048,Ji(9,{destroy:void 0},um.bind(null,l,g,i,s),null),i},useId:function(){var t=_n(),s=At.identifierPrefix;if(lt){var i=Fs,l=$s;i=(l&~(1<<32-ht(l)-1)).toString(32)+i,s="_"+s+"R_"+i,i=ou++,0<i&&(s+="H"+i.toString(32)),s+="_"}else i=vx++,s="_"+s+"r_"+i.toString(32)+"_";return t.memoizedState=s},useHostTransitionStatus:Uh,useFormState:_m,useActionState:_m,useOptimistic:function(t){var s=_n();s.memoizedState=s.baseState=t;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=i,s=Mh.bind(null,Ze,!0,i),i.dispatch=s,[t,s]},useMemoCache:Th,useCacheRefresh:function(){return _n().memoizedState=Ex.bind(null,Ze)},useEffectEvent:function(t){var s=_n(),i={impl:t};return s.memoizedState=i,function(){if((mt&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}},Ph={readContext:fn,use:cu,useCallback:Rm,useContext:fn,useEffect:Dh,useImperativeHandle:jm,useInsertionEffect:Tm,useLayoutEffect:Nm,useMemo:Dm,useReducer:uu,useRef:Sm,useState:function(){return uu(fr)},useDebugValue:Oh,useDeferredValue:function(t,s){var i=Ft();return Om(i,wt.memoizedState,t,s)},useTransition:function(){var t=uu(fr)[0],s=Ft().memoizedState;return[typeof t=="boolean"?t:dl(t),s]},useSyncExternalStore:lm,useId:Mm,useHostTransitionStatus:Uh,useFormState:xm,useActionState:xm,useOptimistic:function(t,s){var i=Ft();return pm(i,wt,t,s)},useMemoCache:Th,useCacheRefresh:Pm};Ph.useEffectEvent=Am;var Vm={readContext:fn,use:cu,useCallback:Rm,useContext:fn,useEffect:Dh,useImperativeHandle:jm,useInsertionEffect:Tm,useLayoutEffect:Nm,useMemo:Dm,useReducer:Ch,useRef:Sm,useState:function(){return Ch(fr)},useDebugValue:Oh,useDeferredValue:function(t,s){var i=Ft();return wt===null?Ih(i,t,s):Om(i,wt.memoizedState,t,s)},useTransition:function(){var t=Ch(fr)[0],s=Ft().memoizedState;return[typeof t=="boolean"?t:dl(t),s]},useSyncExternalStore:lm,useId:Mm,useHostTransitionStatus:Uh,useFormState:km,useActionState:km,useOptimistic:function(t,s){var i=Ft();return wt!==null?pm(i,wt,t,s):(i.baseState=t,[t,i.queue.dispatch])},useMemoCache:Th,useCacheRefresh:Pm};Vm.useEffectEvent=Am;function zh(t,s,i,l){s=t.memoizedState,i=i(l,s),i=i==null?s:_({},s,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Bh={enqueueSetState:function(t,s,i){t=t._reactInternals;var l=Fn(),p=Yr(l);p.payload=s,i!=null&&(p.callback=i),s=Wr(t,p,l),s!==null&&(Rn(s,t,l),ol(s,t,l))},enqueueReplaceState:function(t,s,i){t=t._reactInternals;var l=Fn(),p=Yr(l);p.tag=1,p.payload=s,i!=null&&(p.callback=i),s=Wr(t,p,l),s!==null&&(Rn(s,t,l),ol(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var i=Fn(),l=Yr(i);l.tag=2,s!=null&&(l.callback=s),s=Wr(t,l,i),s!==null&&(Rn(s,t,i),ol(s,t,i))}};function Hm(t,s,i,l,p,g,w){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,g,w):s.prototype&&s.prototype.isPureReactComponent?!Qo(i,l)||!Qo(p,g):!0}function qm(t,s,i,l){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(i,l),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(i,l),s.state!==t&&Bh.enqueueReplaceState(s,s.state,null)}function Ja(t,s){var i=s;if("ref"in s){i={};for(var l in s)l!=="ref"&&(i[l]=s[l])}if(t=t.defaultProps){i===s&&(i=_({},i));for(var p in t)i[p]===void 0&&(i[p]=t[p])}return i}function Gm(t){qc(t)}function Km(t){console.error(t)}function Jm(t){qc(t)}function pu(t,s){try{var i=t.onUncaughtError;i(s.value,{componentStack:s.stack})}catch(l){setTimeout(function(){throw l})}}function Ym(t,s,i){try{var l=t.onCaughtError;l(i.value,{componentStack:i.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function $h(t,s,i){return i=Yr(i),i.tag=3,i.payload={element:null},i.callback=function(){pu(t,s)},i}function Wm(t){return t=Yr(t),t.tag=3,t}function Xm(t,s,i,l){var p=i.type.getDerivedStateFromError;if(typeof p=="function"){var g=l.value;t.payload=function(){return p(g)},t.callback=function(){Ym(s,i,l)}}var w=i.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(t.callback=function(){Ym(s,i,l),typeof p!="function"&&(na===null?na=new Set([this]):na.add(this));var P=l.stack;this.componentDidCatch(l.value,{componentStack:P!==null?P:""})})}function Tx(t,s,i,l,p){if(i.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(s=i.alternate,s!==null&&Bi(s,i,p,!0),i=Pn.current,i!==null){switch(i.tag){case 31:case 13:return as===null?Au():i.alternate===null&&Pt===0&&(Pt=3),i.flags&=-257,i.flags|=65536,i.lanes=p,l===tu?i.flags|=16384:(s=i.updateQueue,s===null?i.updateQueue=new Set([l]):s.add(l),ff(t,l,p)),!1;case 22:return i.flags|=65536,l===tu?i.flags|=16384:(s=i.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([l])},i.updateQueue=s):(i=s.retryQueue,i===null?s.retryQueue=new Set([l]):i.add(l)),ff(t,l,p)),!1}throw Error(a(435,i.tag))}return ff(t,l,p),Au(),!1}if(lt)return s=Pn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=p,l!==ih&&(t=Error(a(422),{cause:l}),nl(ts(t,i)))):(l!==ih&&(s=Error(a(423),{cause:l}),nl(ts(s,i))),t=t.current.alternate,t.flags|=65536,p&=-p,t.lanes|=p,l=ts(l,i),p=$h(t.stateNode,l,p),bh(t,p),Pt!==4&&(Pt=2)),!1;var g=Error(a(520),{cause:l});if(g=ts(g,i),xl===null?xl=[g]:xl.push(g),Pt!==4&&(Pt=2),s===null)return!0;l=ts(l,i),i=s;do{switch(i.tag){case 3:return i.flags|=65536,t=p&-p,i.lanes|=t,t=$h(i.stateNode,l,t),bh(i,t),!1;case 1:if(s=i.type,g=i.stateNode,(i.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(na===null||!na.has(g))))return i.flags|=65536,p&=-p,i.lanes|=p,p=Wm(p),Xm(p,t,i,l),bh(i,p),!1}i=i.return}while(i!==null);return!1}var Fh=Error(a(461)),Jt=!1;function pn(t,s,i,l){s.child=t===null?tm(s,null,i,l):Ga(s,t.child,i,l)}function Zm(t,s,i,l,p){i=i.render;var g=s.ref;if("ref"in l){var w={};for(var P in l)P!=="ref"&&(w[P]=l[P])}else w=l;return Fa(s),l=kh(t,s,i,w,g,p),P=Sh(),t!==null&&!Jt?(Eh(t,s,p),pr(t,s,p)):(lt&&P&&rh(s),s.flags|=1,pn(t,s,l,p),s.child)}function Qm(t,s,i,l,p){if(t===null){var g=i.type;return typeof g=="function"&&!th(g)&&g.defaultProps===void 0&&i.compare===null?(s.tag=15,s.type=g,eg(t,s,g,l,p)):(t=Yc(i.type,null,l,s,s.mode,p),t.ref=s.ref,t.return=s,s.child=t)}if(g=t.child,!Wh(t,p)){var w=g.memoizedProps;if(i=i.compare,i=i!==null?i:Qo,i(w,l)&&t.ref===s.ref)return pr(t,s,p)}return s.flags|=1,t=lr(g,l),t.ref=s.ref,t.return=s,s.child=t}function eg(t,s,i,l,p){if(t!==null){var g=t.memoizedProps;if(Qo(g,l)&&t.ref===s.ref)if(Jt=!1,s.pendingProps=l=g,Wh(t,p))(t.flags&131072)!==0&&(Jt=!0);else return s.lanes=t.lanes,pr(t,s,p)}return Vh(t,s,i,l,p)}function tg(t,s,i,l){var p=l.children,g=t!==null?t.memoizedState:null;if(t===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|i:i,t!==null){for(l=s.child=t.child,p=0;l!==null;)p=p|l.lanes|l.childLanes,l=l.sibling;l=p&~g}else l=0,s.child=null;return ng(t,s,g,i,l)}if((i&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},t!==null&&Qc(s,g!==null?g.cachePool:null),g!==null?rm(s,g):vh(),am(s);else return l=s.lanes=536870912,ng(t,s,g!==null?g.baseLanes|i:i,i,l)}else g!==null?(Qc(s,g.cachePool),rm(s,g),Zr(),s.memoizedState=null):(t!==null&&Qc(s,null),vh(),Zr());return pn(t,s,p,i),s.child}function pl(t,s){return t!==null&&t.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function ng(t,s,i,l,p){var g=fh();return g=g===null?null:{parent:Gt._currentValue,pool:g},s.memoizedState={baseLanes:i,cachePool:g},t!==null&&Qc(s,null),vh(),am(s),t!==null&&Bi(t,s,l,!0),s.childLanes=p,null}function mu(t,s){return s=bu({mode:s.mode,children:s.children},t.mode),s.ref=t.ref,t.child=s,s.return=t,s}function sg(t,s,i){return Ga(s,t.child,null,i),t=mu(s,s.pendingProps),t.flags|=2,zn(s),s.memoizedState=null,t}function Nx(t,s,i){var l=s.pendingProps,p=(s.flags&128)!==0;if(s.flags&=-129,t===null){if(lt){if(l.mode==="hidden")return t=mu(s,l),s.lanes=536870912,pl(null,t);if(xh(s),(t=Rt)?(t=mb(t,rs),t=t!==null&&t.data==="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Hr!==null?{id:$s,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},i=B0(t),i.return=s,s.child=i,hn=s,Rt=null)):t=null,t===null)throw Gr(s);return s.lanes=536870912,null}return mu(s,l)}var g=t.memoizedState;if(g!==null){var w=g.dehydrated;if(xh(s),p)if(s.flags&256)s.flags&=-257,s=sg(t,s,i);else if(s.memoizedState!==null)s.child=t.child,s.flags|=128,s=null;else throw Error(a(558));else if(Jt||Bi(t,s,i,!1),p=(i&t.childLanes)!==0,Jt||p){if(l=At,l!==null&&(w=Fe(l,i),w!==0&&w!==g.retryLane))throw g.retryLane=w,Pa(t,w),Rn(l,t,w),Fh;Au(),s=sg(t,s,i)}else t=g.treeContext,Rt=is(w.nextSibling),hn=s,lt=!0,qr=null,rs=!1,t!==null&&V0(s,t),s=mu(s,l),s.flags|=4096;return s}return t=lr(t.child,{mode:l.mode,children:l.children}),t.ref=s.ref,s.child=t,t.return=s,t}function gu(t,s){var i=s.ref;if(i===null)t!==null&&t.ref!==null&&(s.flags|=4194816);else{if(typeof i!="function"&&typeof i!="object")throw Error(a(284));(t===null||t.ref!==i)&&(s.flags|=4194816)}}function Vh(t,s,i,l,p){return Fa(s),i=kh(t,s,i,l,void 0,p),l=Sh(),t!==null&&!Jt?(Eh(t,s,p),pr(t,s,p)):(lt&&l&&rh(s),s.flags|=1,pn(t,s,i,p),s.child)}function rg(t,s,i,l,p,g){return Fa(s),s.updateQueue=null,i=om(s,l,i,p),im(t),l=Sh(),t!==null&&!Jt?(Eh(t,s,g),pr(t,s,g)):(lt&&l&&rh(s),s.flags|=1,pn(t,s,i,g),s.child)}function ag(t,s,i,l,p){if(Fa(s),s.stateNode===null){var g=Ui,w=i.contextType;typeof w=="object"&&w!==null&&(g=fn(w)),g=new i(l,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Bh,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=l,g.state=s.memoizedState,g.refs={},mh(s),w=i.contextType,g.context=typeof w=="object"&&w!==null?fn(w):Ui,g.state=s.memoizedState,w=i.getDerivedStateFromProps,typeof w=="function"&&(zh(s,i,w,l),g.state=s.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(w=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),w!==g.state&&Bh.enqueueReplaceState(g,g.state,null),cl(s,l,g,p),ll(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!0}else if(t===null){g=s.stateNode;var P=s.memoizedProps,Y=Ja(i,P);g.props=Y;var ue=g.context,xe=i.contextType;w=Ui,typeof xe=="object"&&xe!==null&&(w=fn(xe));var Ee=i.getDerivedStateFromProps;xe=typeof Ee=="function"||typeof g.getSnapshotBeforeUpdate=="function",P=s.pendingProps!==P,xe||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(P||ue!==w)&&qm(s,g,l,w),Jr=!1;var he=s.memoizedState;g.state=he,cl(s,l,g,p),ll(),ue=s.memoizedState,P||he!==ue||Jr?(typeof Ee=="function"&&(zh(s,i,Ee,l),ue=s.memoizedState),(Y=Jr||Hm(s,i,Y,l,he,ue,w))?(xe||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=l,s.memoizedState=ue),g.props=l,g.state=ue,g.context=w,l=Y):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),l=!1)}else{g=s.stateNode,gh(t,s),w=s.memoizedProps,xe=Ja(i,w),g.props=xe,Ee=s.pendingProps,he=g.context,ue=i.contextType,Y=Ui,typeof ue=="object"&&ue!==null&&(Y=fn(ue)),P=i.getDerivedStateFromProps,(ue=typeof P=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w!==Ee||he!==Y)&&qm(s,g,l,Y),Jr=!1,he=s.memoizedState,g.state=he,cl(s,l,g,p),ll();var ye=s.memoizedState;w!==Ee||he!==ye||Jr||t!==null&&t.dependencies!==null&&Xc(t.dependencies)?(typeof P=="function"&&(zh(s,i,P,l),ye=s.memoizedState),(xe=Jr||Hm(s,i,xe,l,he,ye,Y)||t!==null&&t.dependencies!==null&&Xc(t.dependencies))?(ue||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,ye,Y),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,ye,Y)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||w===t.memoizedProps&&he===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&he===t.memoizedState||(s.flags|=1024),s.memoizedProps=l,s.memoizedState=ye),g.props=l,g.state=ye,g.context=Y,l=xe):(typeof g.componentDidUpdate!="function"||w===t.memoizedProps&&he===t.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||w===t.memoizedProps&&he===t.memoizedState||(s.flags|=1024),l=!1)}return g=l,gu(t,s),l=(s.flags&128)!==0,g||l?(g=s.stateNode,i=l&&typeof i.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,t!==null&&l?(s.child=Ga(s,t.child,null,p),s.child=Ga(s,null,i,p)):pn(t,s,i,p),s.memoizedState=g.state,t=s.child):t=pr(t,s,p),t}function ig(t,s,i,l){return Ba(),s.flags|=256,pn(t,s,i,l),s.child}var Hh={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function qh(t){return{baseLanes:t,cachePool:Y0()}}function Gh(t,s,i){return t=t!==null?t.childLanes&~i:0,s&&(t|=$n),t}function og(t,s,i){var l=s.pendingProps,p=!1,g=(s.flags&128)!==0,w;if((w=g)||(w=t!==null&&t.memoizedState===null?!1:($t.current&2)!==0),w&&(p=!0,s.flags&=-129),w=(s.flags&32)!==0,s.flags&=-33,t===null){if(lt){if(p?Xr(s):Zr(),(t=Rt)?(t=mb(t,rs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(s.memoizedState={dehydrated:t,treeContext:Hr!==null?{id:$s,overflow:Fs}:null,retryLane:536870912,hydrationErrors:null},i=B0(t),i.return=s,s.child=i,hn=s,Rt=null)):t=null,t===null)throw Gr(s);return Cf(t)?s.lanes=32:s.lanes=536870912,null}var P=l.children;return l=l.fallback,p?(Zr(),p=s.mode,P=bu({mode:"hidden",children:P},p),l=za(l,p,i,null),P.return=s,l.return=s,P.sibling=l,s.child=P,l=s.child,l.memoizedState=qh(i),l.childLanes=Gh(t,w,i),s.memoizedState=Hh,pl(null,l)):(Xr(s),Kh(s,P))}var Y=t.memoizedState;if(Y!==null&&(P=Y.dehydrated,P!==null)){if(g)s.flags&256?(Xr(s),s.flags&=-257,s=Jh(t,s,i)):s.memoizedState!==null?(Zr(),s.child=t.child,s.flags|=128,s=null):(Zr(),P=l.fallback,p=s.mode,l=bu({mode:"visible",children:l.children},p),P=za(P,p,i,null),P.flags|=2,l.return=s,P.return=s,l.sibling=P,s.child=l,Ga(s,t.child,null,i),l=s.child,l.memoizedState=qh(i),l.childLanes=Gh(t,w,i),s.memoizedState=Hh,s=pl(null,l));else if(Xr(s),Cf(P)){if(w=P.nextSibling&&P.nextSibling.dataset,w)var ue=w.dgst;w=ue,l=Error(a(419)),l.stack="",l.digest=w,nl({value:l,source:null,stack:null}),s=Jh(t,s,i)}else if(Jt||Bi(t,s,i,!1),w=(i&t.childLanes)!==0,Jt||w){if(w=At,w!==null&&(l=Fe(w,i),l!==0&&l!==Y.retryLane))throw Y.retryLane=l,Pa(t,l),Rn(w,t,l),Fh;Nf(P)||Au(),s=Jh(t,s,i)}else Nf(P)?(s.flags|=192,s.child=t.child,s=null):(t=Y.treeContext,Rt=is(P.nextSibling),hn=s,lt=!0,qr=null,rs=!1,t!==null&&V0(s,t),s=Kh(s,l.children),s.flags|=4096);return s}return p?(Zr(),P=l.fallback,p=s.mode,Y=t.child,ue=Y.sibling,l=lr(Y,{mode:"hidden",children:l.children}),l.subtreeFlags=Y.subtreeFlags&65011712,ue!==null?P=lr(ue,P):(P=za(P,p,i,null),P.flags|=2),P.return=s,l.return=s,l.sibling=P,s.child=l,pl(null,l),l=s.child,P=t.child.memoizedState,P===null?P=qh(i):(p=P.cachePool,p!==null?(Y=Gt._currentValue,p=p.parent!==Y?{parent:Y,pool:Y}:p):p=Y0(),P={baseLanes:P.baseLanes|i,cachePool:p}),l.memoizedState=P,l.childLanes=Gh(t,w,i),s.memoizedState=Hh,pl(t.child,l)):(Xr(s),i=t.child,t=i.sibling,i=lr(i,{mode:"visible",children:l.children}),i.return=s,i.sibling=null,t!==null&&(w=s.deletions,w===null?(s.deletions=[t],s.flags|=16):w.push(t)),s.child=i,s.memoizedState=null,i)}function Kh(t,s){return s=bu({mode:"visible",children:s},t.mode),s.return=t,t.child=s}function bu(t,s){return t=Mn(22,t,null,s),t.lanes=0,t}function Jh(t,s,i){return Ga(s,t.child,null,i),t=Kh(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function lg(t,s,i){t.lanes|=s;var l=t.alternate;l!==null&&(l.lanes|=s),ch(t.return,s,i)}function Yh(t,s,i,l,p,g){var w=t.memoizedState;w===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:l,tail:i,tailMode:p,treeForkCount:g}:(w.isBackwards=s,w.rendering=null,w.renderingStartTime=0,w.last=l,w.tail=i,w.tailMode=p,w.treeForkCount=g)}function cg(t,s,i){var l=s.pendingProps,p=l.revealOrder,g=l.tail;l=l.children;var w=$t.current,P=(w&2)!==0;if(P?(w=w&1|2,s.flags|=128):w&=1,pe($t,w),pn(t,s,l,i),l=lt?tl:0,!P&&t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lg(t,i,s);else if(t.tag===19)lg(t,i,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(p){case"forwards":for(i=s.child,p=null;i!==null;)t=i.alternate,t!==null&&au(t)===null&&(p=i),i=i.sibling;i=p,i===null?(p=s.child,s.child=null):(p=i.sibling,i.sibling=null),Yh(s,!1,p,i,g,l);break;case"backwards":case"unstable_legacy-backwards":for(i=null,p=s.child,s.child=null;p!==null;){if(t=p.alternate,t!==null&&au(t)===null){s.child=p;break}t=p.sibling,p.sibling=i,i=p,p=t}Yh(s,!0,i,null,g,l);break;case"together":Yh(s,!1,null,null,void 0,l);break;default:s.memoizedState=null}return s.child}function pr(t,s,i){if(t!==null&&(s.dependencies=t.dependencies),ta|=s.lanes,(i&s.childLanes)===0)if(t!==null){if(Bi(t,s,i,!1),(i&s.childLanes)===0)return null}else return null;if(t!==null&&s.child!==t.child)throw Error(a(153));if(s.child!==null){for(t=s.child,i=lr(t,t.pendingProps),s.child=i,i.return=s;t.sibling!==null;)t=t.sibling,i=i.sibling=lr(t,t.pendingProps),i.return=s;i.sibling=null}return s.child}function Wh(t,s){return(t.lanes&s)!==0?!0:(t=t.dependencies,!!(t!==null&&Xc(t)))}function Cx(t,s,i){switch(s.tag){case 3:ae(s,s.stateNode.containerInfo),Kr(s,Gt,t.memoizedState.cache),Ba();break;case 27:case 5:Te(s);break;case 4:ae(s,s.stateNode.containerInfo);break;case 10:Kr(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,xh(s),null;break;case 13:var l=s.memoizedState;if(l!==null)return l.dehydrated!==null?(Xr(s),s.flags|=128,null):(i&s.child.childLanes)!==0?og(t,s,i):(Xr(s),t=pr(t,s,i),t!==null?t.sibling:null);Xr(s);break;case 19:var p=(t.flags&128)!==0;if(l=(i&s.childLanes)!==0,l||(Bi(t,s,i,!1),l=(i&s.childLanes)!==0),p){if(l)return cg(t,s,i);s.flags|=128}if(p=s.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),pe($t,$t.current),l)break;return null;case 22:return s.lanes=0,tg(t,s,i,s.pendingProps);case 24:Kr(s,Gt,t.memoizedState.cache)}return pr(t,s,i)}function ug(t,s,i){if(t!==null)if(t.memoizedProps!==s.pendingProps)Jt=!0;else{if(!Wh(t,i)&&(s.flags&128)===0)return Jt=!1,Cx(t,s,i);Jt=(t.flags&131072)!==0}else Jt=!1,lt&&(s.flags&1048576)!==0&&F0(s,tl,s.index);switch(s.lanes=0,s.tag){case 16:e:{var l=s.pendingProps;if(t=Ha(s.elementType),s.type=t,typeof t=="function")th(t)?(l=Ja(t,l),s.tag=1,s=ag(null,s,t,l,i)):(s.tag=0,s=Vh(null,s,t,l,i));else{if(t!=null){var p=t.$$typeof;if(p===V){s.tag=11,s=Zm(null,s,t,l,i);break e}else if(p===M){s.tag=14,s=Qm(null,s,t,l,i);break e}}throw s=R(t)||t,Error(a(306,s,""))}}return s;case 0:return Vh(t,s,s.type,s.pendingProps,i);case 1:return l=s.type,p=Ja(l,s.pendingProps),ag(t,s,l,p,i);case 3:e:{if(ae(s,s.stateNode.containerInfo),t===null)throw Error(a(387));l=s.pendingProps;var g=s.memoizedState;p=g.element,gh(t,s),cl(s,l,null,i);var w=s.memoizedState;if(l=w.cache,Kr(s,Gt,l),l!==g.cache&&uh(s,[Gt],i,!0),ll(),l=w.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:w.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=ig(t,s,l,i);break e}else if(l!==p){p=ts(Error(a(424)),s),nl(p),s=ig(t,s,l,i);break e}else{switch(t=s.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(Rt=is(t.firstChild),hn=s,lt=!0,qr=null,rs=!0,i=tm(s,null,l,i),s.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling}else{if(Ba(),l===p){s=pr(t,s,i);break e}pn(t,s,l,i)}s=s.child}return s;case 26:return gu(t,s),t===null?(i=xb(s.type,null,s.pendingProps,null))?s.memoizedState=i:lt||(i=s.type,t=s.pendingProps,l=Ou(Ae.current).createElement(i),l[jt]=s,l[an]=t,mn(l,i,t),Ht(l),s.stateNode=l):s.memoizedState=xb(s.type,t.memoizedProps,s.pendingProps,t.memoizedState),null;case 27:return Te(s),t===null&&lt&&(l=s.stateNode=yb(s.type,s.pendingProps,Ae.current),hn=s,rs=!0,p=Rt,ia(s.type)?(jf=p,Rt=is(l.firstChild)):Rt=p),pn(t,s,s.pendingProps.children,i),gu(t,s),t===null&&(s.flags|=4194304),s.child;case 5:return t===null&&lt&&((p=l=Rt)&&(l=aw(l,s.type,s.pendingProps,rs),l!==null?(s.stateNode=l,hn=s,Rt=is(l.firstChild),rs=!1,p=!0):p=!1),p||Gr(s)),Te(s),p=s.type,g=s.pendingProps,w=t!==null?t.memoizedProps:null,l=g.children,Ef(p,g)?l=null:w!==null&&Ef(p,w)&&(s.flags|=32),s.memoizedState!==null&&(p=kh(t,s,_x,null,null,i),Cl._currentValue=p),gu(t,s),pn(t,s,l,i),s.child;case 6:return t===null&&lt&&((t=i=Rt)&&(i=iw(i,s.pendingProps,rs),i!==null?(s.stateNode=i,hn=s,Rt=null,t=!0):t=!1),t||Gr(s)),null;case 13:return og(t,s,i);case 4:return ae(s,s.stateNode.containerInfo),l=s.pendingProps,t===null?s.child=Ga(s,null,l,i):pn(t,s,l,i),s.child;case 11:return Zm(t,s,s.type,s.pendingProps,i);case 7:return pn(t,s,s.pendingProps,i),s.child;case 8:return pn(t,s,s.pendingProps.children,i),s.child;case 12:return pn(t,s,s.pendingProps.children,i),s.child;case 10:return l=s.pendingProps,Kr(s,s.type,l.value),pn(t,s,l.children,i),s.child;case 9:return p=s.type._context,l=s.pendingProps.children,Fa(s),p=fn(p),l=l(p),s.flags|=1,pn(t,s,l,i),s.child;case 14:return Qm(t,s,s.type,s.pendingProps,i);case 15:return eg(t,s,s.type,s.pendingProps,i);case 19:return cg(t,s,i);case 31:return Nx(t,s,i);case 22:return tg(t,s,i,s.pendingProps);case 24:return Fa(s),l=fn(Gt),t===null?(p=fh(),p===null&&(p=At,g=dh(),p.pooledCache=g,g.refCount++,g!==null&&(p.pooledCacheLanes|=i),p=g),s.memoizedState={parent:l,cache:p},mh(s),Kr(s,Gt,p)):((t.lanes&i)!==0&&(gh(t,s),cl(s,null,null,i),ll()),p=t.memoizedState,g=s.memoizedState,p.parent!==l?(p={parent:l,cache:l},s.memoizedState=p,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=p),Kr(s,Gt,l)):(l=g.cache,Kr(s,Gt,l),l!==p.cache&&uh(s,[Gt],i,!0))),pn(t,s,s.pendingProps.children,i),s.child;case 29:throw s.pendingProps}throw Error(a(156,s.tag))}function mr(t){t.flags|=4}function Xh(t,s,i,l,p){if((s=(t.mode&32)!==0)&&(s=!1),s){if(t.flags|=16777216,(p&335544128)===p)if(t.stateNode.complete)t.flags|=8192;else if(Mg())t.flags|=8192;else throw qa=tu,ph}else t.flags&=-16777217}function dg(t,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ab(s))if(Mg())t.flags|=8192;else throw qa=tu,ph}function yu(t,s){s!==null&&(t.flags|=4),t.flags&16384&&(s=t.tag!==22?_i():536870912,t.lanes|=s,Zi|=s)}function ml(t,s){if(!lt)switch(t.tailMode){case"hidden":s=t.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var l=null;i!==null;)i.alternate!==null&&(l=i),i=i.sibling;l===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function Dt(t){var s=t.alternate!==null&&t.alternate.child===t.child,i=0,l=0;if(s)for(var p=t.child;p!==null;)i|=p.lanes|p.childLanes,l|=p.subtreeFlags&65011712,l|=p.flags&65011712,p.return=t,p=p.sibling;else for(p=t.child;p!==null;)i|=p.lanes|p.childLanes,l|=p.subtreeFlags,l|=p.flags,p.return=t,p=p.sibling;return t.subtreeFlags|=l,t.childLanes=i,s}function jx(t,s,i){var l=s.pendingProps;switch(ah(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(s),null;case 1:return Dt(s),null;case 3:return i=s.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),s.memoizedState.cache!==l&&(s.flags|=2048),dr(Gt),Re(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(zi(s)?mr(s):t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,oh())),Dt(s),null;case 26:var p=s.type,g=s.memoizedState;return t===null?(mr(s),g!==null?(Dt(s),dg(s,g)):(Dt(s),Xh(s,p,null,l,i))):g?g!==t.memoizedState?(mr(s),Dt(s),dg(s,g)):(Dt(s),s.flags&=-16777217):(t=t.memoizedProps,t!==l&&mr(s),Dt(s),Xh(s,p,t,l,i)),null;case 27:if(Ie(s),i=Ae.current,p=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&mr(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return Dt(s),null}t=ne.current,zi(s)?H0(s):(t=yb(p,l,i),s.stateNode=t,mr(s))}return Dt(s),null;case 5:if(Ie(s),p=s.type,t!==null&&s.stateNode!=null)t.memoizedProps!==l&&mr(s);else{if(!l){if(s.stateNode===null)throw Error(a(166));return Dt(s),null}if(g=ne.current,zi(s))H0(s);else{var w=Ou(Ae.current);switch(g){case 1:g=w.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:g=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":g=w.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":g=w.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":g=w.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof l.is=="string"?w.createElement("select",{is:l.is}):w.createElement("select"),l.multiple?g.multiple=!0:l.size&&(g.size=l.size);break;default:g=typeof l.is=="string"?w.createElement(p,{is:l.is}):w.createElement(p)}}g[jt]=s,g[an]=l;e:for(w=s.child;w!==null;){if(w.tag===5||w.tag===6)g.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===s)break e;for(;w.sibling===null;){if(w.return===null||w.return===s)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}s.stateNode=g;e:switch(mn(g,p,l),p){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&mr(s)}}return Dt(s),Xh(s,s.type,t===null?null:t.memoizedProps,s.pendingProps,i),null;case 6:if(t&&s.stateNode!=null)t.memoizedProps!==l&&mr(s);else{if(typeof l!="string"&&s.stateNode===null)throw Error(a(166));if(t=Ae.current,zi(s)){if(t=s.stateNode,i=s.memoizedProps,l=null,p=hn,p!==null)switch(p.tag){case 27:case 5:l=p.memoizedProps}t[jt]=s,t=!!(t.nodeValue===i||l!==null&&l.suppressHydrationWarning===!0||ob(t.nodeValue,i)),t||Gr(s,!0)}else t=Ou(t).createTextNode(l),t[jt]=s,s.stateNode=t}return Dt(s),null;case 31:if(i=s.memoizedState,t===null||t.memoizedState!==null){if(l=zi(s),i!==null){if(t===null){if(!l)throw Error(a(318));if(t=s.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(a(557));t[jt]=s}else Ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),t=!1}else i=oh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=i),t=!0;if(!t)return s.flags&256?(zn(s),s):(zn(s),null);if((s.flags&128)!==0)throw Error(a(558))}return Dt(s),null;case 13:if(l=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(p=zi(s),l!==null&&l.dehydrated!==null){if(t===null){if(!p)throw Error(a(318));if(p=s.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(a(317));p[jt]=s}else Ba(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Dt(s),p=!1}else p=oh(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=p),p=!0;if(!p)return s.flags&256?(zn(s),s):(zn(s),null)}return zn(s),(s.flags&128)!==0?(s.lanes=i,s):(i=l!==null,t=t!==null&&t.memoizedState!==null,i&&(l=s.child,p=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(p=l.alternate.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==p&&(l.flags|=2048)),i!==t&&i&&(s.child.flags|=8192),yu(s,s.updateQueue),Dt(s),null);case 4:return Re(),t===null&&_f(s.stateNode.containerInfo),Dt(s),null;case 10:return dr(s.type),Dt(s),null;case 19:if(Z($t),l=s.memoizedState,l===null)return Dt(s),null;if(p=(s.flags&128)!==0,g=l.rendering,g===null)if(p)ml(l,!1);else{if(Pt!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(g=au(t),g!==null){for(s.flags|=128,ml(l,!1),t=g.updateQueue,s.updateQueue=t,yu(s,t),s.subtreeFlags=0,t=i,i=s.child;i!==null;)z0(i,t),i=i.sibling;return pe($t,$t.current&1|2),lt&&cr(s,l.treeForkCount),s.child}t=t.sibling}l.tail!==null&&je()>ku&&(s.flags|=128,p=!0,ml(l,!1),s.lanes=4194304)}else{if(!p)if(t=au(g),t!==null){if(s.flags|=128,p=!0,t=t.updateQueue,s.updateQueue=t,yu(s,t),ml(l,!0),l.tail===null&&l.tailMode==="hidden"&&!g.alternate&&!lt)return Dt(s),null}else 2*je()-l.renderingStartTime>ku&&i!==536870912&&(s.flags|=128,p=!0,ml(l,!1),s.lanes=4194304);l.isBackwards?(g.sibling=s.child,s.child=g):(t=l.last,t!==null?t.sibling=g:s.child=g,l.last=g)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=je(),t.sibling=null,i=$t.current,pe($t,p?i&1|2:i&1),lt&&cr(s,l.treeForkCount),t):(Dt(s),null);case 22:case 23:return zn(s),_h(),l=s.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(s.flags|=8192):l&&(s.flags|=8192),l?(i&536870912)!==0&&(s.flags&128)===0&&(Dt(s),s.subtreeFlags&6&&(s.flags|=8192)):Dt(s),i=s.updateQueue,i!==null&&yu(s,i.retryQueue),i=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),l=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(l=s.memoizedState.cachePool.pool),l!==i&&(s.flags|=2048),t!==null&&Z(Va),null;case 24:return i=null,t!==null&&(i=t.memoizedState.cache),s.memoizedState.cache!==i&&(s.flags|=2048),dr(Gt),Dt(s),null;case 25:return null;case 30:return null}throw Error(a(156,s.tag))}function Rx(t,s){switch(ah(s),s.tag){case 1:return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return dr(Gt),Re(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 26:case 27:case 5:return Ie(s),null;case 31:if(s.memoizedState!==null){if(zn(s),s.alternate===null)throw Error(a(340));Ba()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 13:if(zn(s),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(a(340));Ba()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Z($t),null;case 4:return Re(),null;case 10:return dr(s.type),null;case 22:case 23:return zn(s),_h(),t!==null&&Z(Va),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 24:return dr(Gt),null;case 25:return null;default:return null}}function hg(t,s){switch(ah(s),s.tag){case 3:dr(Gt),Re();break;case 26:case 27:case 5:Ie(s);break;case 4:Re();break;case 31:s.memoizedState!==null&&zn(s);break;case 13:zn(s);break;case 19:Z($t);break;case 10:dr(s.type);break;case 22:case 23:zn(s),_h(),t!==null&&Z(Va);break;case 24:dr(Gt)}}function gl(t,s){try{var i=s.updateQueue,l=i!==null?i.lastEffect:null;if(l!==null){var p=l.next;i=p;do{if((i.tag&t)===t){l=void 0;var g=i.create,w=i.inst;l=g(),w.destroy=l}i=i.next}while(i!==p)}}catch(P){_t(s,s.return,P)}}function Qr(t,s,i){try{var l=s.updateQueue,p=l!==null?l.lastEffect:null;if(p!==null){var g=p.next;l=g;do{if((l.tag&t)===t){var w=l.inst,P=w.destroy;if(P!==void 0){w.destroy=void 0,p=s;var Y=i,ue=P;try{ue()}catch(xe){_t(p,Y,xe)}}}l=l.next}while(l!==g)}}catch(xe){_t(s,s.return,xe)}}function fg(t){var s=t.updateQueue;if(s!==null){var i=t.stateNode;try{sm(s,i)}catch(l){_t(t,t.return,l)}}}function pg(t,s,i){i.props=Ja(t.type,t.memoizedProps),i.state=t.memoizedState;try{i.componentWillUnmount()}catch(l){_t(t,s,l)}}function bl(t,s){try{var i=t.ref;if(i!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof i=="function"?t.refCleanup=i(l):i.current=l}}catch(p){_t(t,s,p)}}function Vs(t,s){var i=t.ref,l=t.refCleanup;if(i!==null)if(typeof l=="function")try{l()}catch(p){_t(t,s,p)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof i=="function")try{i(null)}catch(p){_t(t,s,p)}else i.current=null}function mg(t){var s=t.type,i=t.memoizedProps,l=t.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":i.autoFocus&&l.focus();break e;case"img":i.src?l.src=i.src:i.srcSet&&(l.srcset=i.srcSet)}}catch(p){_t(t,t.return,p)}}function Zh(t,s,i){try{var l=t.stateNode;Qx(l,t.type,i,s),l[an]=s}catch(p){_t(t,t.return,p)}}function gg(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ia(t.type)||t.tag===4}function Qh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gg(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ia(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ef(t,s,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i).insertBefore(t,s):(s=i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,s.appendChild(t),i=i._reactRootContainer,i!=null||s.onclick!==null||(s.onclick=hs));else if(l!==4&&(l===27&&ia(t.type)&&(i=t.stateNode,s=null),t=t.child,t!==null))for(ef(t,s,i),t=t.sibling;t!==null;)ef(t,s,i),t=t.sibling}function vu(t,s,i){var l=t.tag;if(l===5||l===6)t=t.stateNode,s?i.insertBefore(t,s):i.appendChild(t);else if(l!==4&&(l===27&&ia(t.type)&&(i=t.stateNode),t=t.child,t!==null))for(vu(t,s,i),t=t.sibling;t!==null;)vu(t,s,i),t=t.sibling}function bg(t){var s=t.stateNode,i=t.memoizedProps;try{for(var l=t.type,p=s.attributes;p.length;)s.removeAttributeNode(p[0]);mn(s,l,i),s[jt]=t,s[an]=i}catch(g){_t(t,t.return,g)}}var gr=!1,Yt=!1,tf=!1,yg=typeof WeakSet=="function"?WeakSet:Set,ln=null;function Dx(t,s){if(t=t.containerInfo,kf=Bu,t=j0(t),Jd(t)){if("selectionStart"in t)var i={start:t.selectionStart,end:t.selectionEnd};else e:{i=(i=t.ownerDocument)&&i.defaultView||window;var l=i.getSelection&&i.getSelection();if(l&&l.rangeCount!==0){i=l.anchorNode;var p=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{i.nodeType,g.nodeType}catch{i=null;break e}var w=0,P=-1,Y=-1,ue=0,xe=0,Ee=t,he=null;t:for(;;){for(var ye;Ee!==i||p!==0&&Ee.nodeType!==3||(P=w+p),Ee!==g||l!==0&&Ee.nodeType!==3||(Y=w+l),Ee.nodeType===3&&(w+=Ee.nodeValue.length),(ye=Ee.firstChild)!==null;)he=Ee,Ee=ye;for(;;){if(Ee===t)break t;if(he===i&&++ue===p&&(P=w),he===g&&++xe===l&&(Y=w),(ye=Ee.nextSibling)!==null)break;Ee=he,he=Ee.parentNode}Ee=ye}i=P===-1||Y===-1?null:{start:P,end:Y}}else i=null}i=i||{start:0,end:0}}else i=null;for(Sf={focusedElem:t,selectionRange:i},Bu=!1,ln=s;ln!==null;)if(s=ln,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,ln=t;else for(;ln!==null;){switch(s=ln,g=s.alternate,t=s.flags,s.tag){case 0:if((t&4)!==0&&(t=s.updateQueue,t=t!==null?t.events:null,t!==null))for(i=0;i<t.length;i++)p=t[i],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&g!==null){t=void 0,i=s,p=g.memoizedProps,g=g.memoizedState,l=i.stateNode;try{var Me=Ja(i.type,p);t=l.getSnapshotBeforeUpdate(Me,g),l.__reactInternalSnapshotBeforeUpdate=t}catch(He){_t(i,i.return,He)}}break;case 3:if((t&1024)!==0){if(t=s.stateNode.containerInfo,i=t.nodeType,i===9)Tf(t);else if(i===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Tf(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(a(163))}if(t=s.sibling,t!==null){t.return=s.return,ln=t;break}ln=s.return}}function vg(t,s,i){var l=i.flags;switch(i.tag){case 0:case 11:case 15:yr(t,i),l&4&&gl(5,i);break;case 1:if(yr(t,i),l&4)if(t=i.stateNode,s===null)try{t.componentDidMount()}catch(w){_t(i,i.return,w)}else{var p=Ja(i.type,s.memoizedProps);s=s.memoizedState;try{t.componentDidUpdate(p,s,t.__reactInternalSnapshotBeforeUpdate)}catch(w){_t(i,i.return,w)}}l&64&&fg(i),l&512&&bl(i,i.return);break;case 3:if(yr(t,i),l&64&&(t=i.updateQueue,t!==null)){if(s=null,i.child!==null)switch(i.child.tag){case 27:case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}try{sm(t,s)}catch(w){_t(i,i.return,w)}}break;case 27:s===null&&l&4&&bg(i);case 26:case 5:yr(t,i),s===null&&l&4&&mg(i),l&512&&bl(i,i.return);break;case 12:yr(t,i);break;case 31:yr(t,i),l&4&&wg(t,i);break;case 13:yr(t,i),l&4&&kg(t,i),l&64&&(t=i.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(i=$x.bind(null,i),ow(t,i))));break;case 22:if(l=i.memoizedState!==null||gr,!l){s=s!==null&&s.memoizedState!==null||Yt,p=gr;var g=Yt;gr=l,(Yt=s)&&!g?vr(t,i,(i.subtreeFlags&8772)!==0):yr(t,i),gr=p,Yt=g}break;case 30:break;default:yr(t,i)}}function _g(t){var s=t.alternate;s!==null&&(t.alternate=null,_g(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&wi(s)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var Ot=null,Tn=!1;function br(t,s,i){for(i=i.child;i!==null;)xg(t,s,i),i=i.sibling}function xg(t,s,i){if(nt&&typeof nt.onCommitFiberUnmount=="function")try{nt.onCommitFiberUnmount(ot,i)}catch{}switch(i.tag){case 26:Yt||Vs(i,s),br(t,s,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode,i.parentNode.removeChild(i));break;case 27:Yt||Vs(i,s);var l=Ot,p=Tn;ia(i.type)&&(Ot=i.stateNode,Tn=!1),br(t,s,i),Al(i.stateNode),Ot=l,Tn=p;break;case 5:Yt||Vs(i,s);case 6:if(l=Ot,p=Tn,Ot=null,br(t,s,i),Ot=l,Tn=p,Ot!==null)if(Tn)try{(Ot.nodeType===9?Ot.body:Ot.nodeName==="HTML"?Ot.ownerDocument.body:Ot).removeChild(i.stateNode)}catch(g){_t(i,s,g)}else try{Ot.removeChild(i.stateNode)}catch(g){_t(i,s,g)}break;case 18:Ot!==null&&(Tn?(t=Ot,fb(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,i.stateNode),io(t)):fb(Ot,i.stateNode));break;case 4:l=Ot,p=Tn,Ot=i.stateNode.containerInfo,Tn=!0,br(t,s,i),Ot=l,Tn=p;break;case 0:case 11:case 14:case 15:Qr(2,i,s),Yt||Qr(4,i,s),br(t,s,i);break;case 1:Yt||(Vs(i,s),l=i.stateNode,typeof l.componentWillUnmount=="function"&&pg(i,s,l)),br(t,s,i);break;case 21:br(t,s,i);break;case 22:Yt=(l=Yt)||i.memoizedState!==null,br(t,s,i),Yt=l;break;default:br(t,s,i)}}function wg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{io(t)}catch(i){_t(s,s.return,i)}}}function kg(t,s){if(s.memoizedState===null&&(t=s.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{io(t)}catch(i){_t(s,s.return,i)}}function Ox(t){switch(t.tag){case 31:case 13:case 19:var s=t.stateNode;return s===null&&(s=t.stateNode=new yg),s;case 22:return t=t.stateNode,s=t._retryCache,s===null&&(s=t._retryCache=new yg),s;default:throw Error(a(435,t.tag))}}function _u(t,s){var i=Ox(t);s.forEach(function(l){if(!i.has(l)){i.add(l);var p=Fx.bind(null,t,l);l.then(p,p)}})}function Nn(t,s){var i=s.deletions;if(i!==null)for(var l=0;l<i.length;l++){var p=i[l],g=t,w=s,P=w;e:for(;P!==null;){switch(P.tag){case 27:if(ia(P.type)){Ot=P.stateNode,Tn=!1;break e}break;case 5:Ot=P.stateNode,Tn=!1;break e;case 3:case 4:Ot=P.stateNode.containerInfo,Tn=!0;break e}P=P.return}if(Ot===null)throw Error(a(160));xg(g,w,p),Ot=null,Tn=!1,g=p.alternate,g!==null&&(g.return=null),p.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Sg(s,t),s=s.sibling}var ys=null;function Sg(t,s){var i=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:Nn(s,t),Cn(t),l&4&&(Qr(3,t,t.return),gl(3,t),Qr(5,t,t.return));break;case 1:Nn(s,t),Cn(t),l&512&&(Yt||i===null||Vs(i,i.return)),l&64&&gr&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(i=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=i===null?l:i.concat(l))));break;case 26:var p=ys;if(Nn(s,t),Cn(t),l&512&&(Yt||i===null||Vs(i,i.return)),l&4){var g=i!==null?i.memoizedState:null;if(l=t.memoizedState,i===null)if(l===null)if(t.stateNode===null){e:{l=t.type,i=t.memoizedProps,p=p.ownerDocument||p;t:switch(l){case"title":g=p.getElementsByTagName("title")[0],(!g||g[js]||g[jt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=p.createElement(l),p.head.insertBefore(g,p.querySelector("head > title"))),mn(g,l,i),g[jt]=t,Ht(g),l=g;break e;case"link":var w=Sb("link","href",p).get(l+(i.href||""));if(w){for(var P=0;P<w.length;P++)if(g=w[P],g.getAttribute("href")===(i.href==null||i.href===""?null:i.href)&&g.getAttribute("rel")===(i.rel==null?null:i.rel)&&g.getAttribute("title")===(i.title==null?null:i.title)&&g.getAttribute("crossorigin")===(i.crossOrigin==null?null:i.crossOrigin)){w.splice(P,1);break t}}g=p.createElement(l),mn(g,l,i),p.head.appendChild(g);break;case"meta":if(w=Sb("meta","content",p).get(l+(i.content||""))){for(P=0;P<w.length;P++)if(g=w[P],g.getAttribute("content")===(i.content==null?null:""+i.content)&&g.getAttribute("name")===(i.name==null?null:i.name)&&g.getAttribute("property")===(i.property==null?null:i.property)&&g.getAttribute("http-equiv")===(i.httpEquiv==null?null:i.httpEquiv)&&g.getAttribute("charset")===(i.charSet==null?null:i.charSet)){w.splice(P,1);break t}}g=p.createElement(l),mn(g,l,i),p.head.appendChild(g);break;default:throw Error(a(468,l))}g[jt]=t,Ht(g),l=g}t.stateNode=l}else Eb(p,t.type,t.stateNode);else t.stateNode=kb(p,l,t.memoizedProps);else g!==l?(g===null?i.stateNode!==null&&(i=i.stateNode,i.parentNode.removeChild(i)):g.count--,l===null?Eb(p,t.type,t.stateNode):kb(p,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Zh(t,t.memoizedProps,i.memoizedProps)}break;case 27:Nn(s,t),Cn(t),l&512&&(Yt||i===null||Vs(i,i.return)),i!==null&&l&4&&Zh(t,t.memoizedProps,i.memoizedProps);break;case 5:if(Nn(s,t),Cn(t),l&512&&(Yt||i===null||Vs(i,i.return)),t.flags&32){p=t.stateNode;try{An(p,"")}catch(Me){_t(t,t.return,Me)}}l&4&&t.stateNode!=null&&(p=t.memoizedProps,Zh(t,p,i!==null?i.memoizedProps:p)),l&1024&&(tf=!0);break;case 6:if(Nn(s,t),Cn(t),l&4){if(t.stateNode===null)throw Error(a(162));l=t.memoizedProps,i=t.stateNode;try{i.nodeValue=l}catch(Me){_t(t,t.return,Me)}}break;case 3:if(Uu=null,p=ys,ys=Iu(s.containerInfo),Nn(s,t),ys=p,Cn(t),l&4&&i!==null&&i.memoizedState.isDehydrated)try{io(s.containerInfo)}catch(Me){_t(t,t.return,Me)}tf&&(tf=!1,Eg(t));break;case 4:l=ys,ys=Iu(t.stateNode.containerInfo),Nn(s,t),Cn(t),ys=l;break;case 12:Nn(s,t),Cn(t);break;case 31:Nn(s,t),Cn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 13:Nn(s,t),Cn(t),t.child.flags&8192&&t.memoizedState!==null!=(i!==null&&i.memoizedState!==null)&&(wu=je()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 22:p=t.memoizedState!==null;var Y=i!==null&&i.memoizedState!==null,ue=gr,xe=Yt;if(gr=ue||p,Yt=xe||Y,Nn(s,t),Yt=xe,gr=ue,Cn(t),l&8192)e:for(s=t.stateNode,s._visibility=p?s._visibility&-2:s._visibility|1,p&&(i===null||Y||gr||Yt||Ya(t)),i=null,s=t;;){if(s.tag===5||s.tag===26){if(i===null){Y=i=s;try{if(g=Y.stateNode,p)w=g.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{P=Y.stateNode;var Ee=Y.memoizedProps.style,he=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;P.style.display=he==null||typeof he=="boolean"?"":(""+he).trim()}}catch(Me){_t(Y,Y.return,Me)}}}else if(s.tag===6){if(i===null){Y=s;try{Y.stateNode.nodeValue=p?"":Y.memoizedProps}catch(Me){_t(Y,Y.return,Me)}}}else if(s.tag===18){if(i===null){Y=s;try{var ye=Y.stateNode;p?pb(ye,!0):pb(Y.stateNode,!1)}catch(Me){_t(Y,Y.return,Me)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===t)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;s.sibling===null;){if(s.return===null||s.return===t)break e;i===s&&(i=null),s=s.return}i===s&&(i=null),s.sibling.return=s.return,s=s.sibling}l&4&&(l=t.updateQueue,l!==null&&(i=l.retryQueue,i!==null&&(l.retryQueue=null,_u(t,i))));break;case 19:Nn(s,t),Cn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,_u(t,l)));break;case 30:break;case 21:break;default:Nn(s,t),Cn(t)}}function Cn(t){var s=t.flags;if(s&2){try{for(var i,l=t.return;l!==null;){if(gg(l)){i=l;break}l=l.return}if(i==null)throw Error(a(160));switch(i.tag){case 27:var p=i.stateNode,g=Qh(t);vu(t,g,p);break;case 5:var w=i.stateNode;i.flags&32&&(An(w,""),i.flags&=-33);var P=Qh(t);vu(t,P,w);break;case 3:case 4:var Y=i.stateNode.containerInfo,ue=Qh(t);ef(t,ue,Y);break;default:throw Error(a(161))}}catch(xe){_t(t,t.return,xe)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Eg(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var s=t;Eg(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),t=t.sibling}}function yr(t,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)vg(t,s.alternate,s),s=s.sibling}function Ya(t){for(t=t.child;t!==null;){var s=t;switch(s.tag){case 0:case 11:case 14:case 15:Qr(4,s,s.return),Ya(s);break;case 1:Vs(s,s.return);var i=s.stateNode;typeof i.componentWillUnmount=="function"&&pg(s,s.return,i),Ya(s);break;case 27:Al(s.stateNode);case 26:case 5:Vs(s,s.return),Ya(s);break;case 22:s.memoizedState===null&&Ya(s);break;case 30:Ya(s);break;default:Ya(s)}t=t.sibling}}function vr(t,s,i){for(i=i&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var l=s.alternate,p=t,g=s,w=g.flags;switch(g.tag){case 0:case 11:case 15:vr(p,g,i),gl(4,g);break;case 1:if(vr(p,g,i),l=g,p=l.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(ue){_t(l,l.return,ue)}if(l=g,p=l.updateQueue,p!==null){var P=l.stateNode;try{var Y=p.shared.hiddenCallbacks;if(Y!==null)for(p.shared.hiddenCallbacks=null,p=0;p<Y.length;p++)nm(Y[p],P)}catch(ue){_t(l,l.return,ue)}}i&&w&64&&fg(g),bl(g,g.return);break;case 27:bg(g);case 26:case 5:vr(p,g,i),i&&l===null&&w&4&&mg(g),bl(g,g.return);break;case 12:vr(p,g,i);break;case 31:vr(p,g,i),i&&w&4&&wg(p,g);break;case 13:vr(p,g,i),i&&w&4&&kg(p,g);break;case 22:g.memoizedState===null&&vr(p,g,i),bl(g,g.return);break;case 30:break;default:vr(p,g,i)}s=s.sibling}}function nf(t,s){var i=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),t=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(t=s.memoizedState.cachePool.pool),t!==i&&(t!=null&&t.refCount++,i!=null&&sl(i))}function sf(t,s){t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&sl(t))}function vs(t,s,i,l){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ag(t,s,i,l),s=s.sibling}function Ag(t,s,i,l){var p=s.flags;switch(s.tag){case 0:case 11:case 15:vs(t,s,i,l),p&2048&&gl(9,s);break;case 1:vs(t,s,i,l);break;case 3:vs(t,s,i,l),p&2048&&(t=null,s.alternate!==null&&(t=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==t&&(s.refCount++,t!=null&&sl(t)));break;case 12:if(p&2048){vs(t,s,i,l),t=s.stateNode;try{var g=s.memoizedProps,w=g.id,P=g.onPostCommit;typeof P=="function"&&P(w,s.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Y){_t(s,s.return,Y)}}else vs(t,s,i,l);break;case 31:vs(t,s,i,l);break;case 13:vs(t,s,i,l);break;case 23:break;case 22:g=s.stateNode,w=s.alternate,s.memoizedState!==null?g._visibility&2?vs(t,s,i,l):yl(t,s):g._visibility&2?vs(t,s,i,l):(g._visibility|=2,Yi(t,s,i,l,(s.subtreeFlags&10256)!==0||!1)),p&2048&&nf(w,s);break;case 24:vs(t,s,i,l),p&2048&&sf(s.alternate,s);break;default:vs(t,s,i,l)}}function Yi(t,s,i,l,p){for(p=p&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=t,w=s,P=i,Y=l,ue=w.flags;switch(w.tag){case 0:case 11:case 15:Yi(g,w,P,Y,p),gl(8,w);break;case 23:break;case 22:var xe=w.stateNode;w.memoizedState!==null?xe._visibility&2?Yi(g,w,P,Y,p):yl(g,w):(xe._visibility|=2,Yi(g,w,P,Y,p)),p&&ue&2048&&nf(w.alternate,w);break;case 24:Yi(g,w,P,Y,p),p&&ue&2048&&sf(w.alternate,w);break;default:Yi(g,w,P,Y,p)}s=s.sibling}}function yl(t,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var i=t,l=s,p=l.flags;switch(l.tag){case 22:yl(i,l),p&2048&&nf(l.alternate,l);break;case 24:yl(i,l),p&2048&&sf(l.alternate,l);break;default:yl(i,l)}s=s.sibling}}var vl=8192;function Wi(t,s,i){if(t.subtreeFlags&vl)for(t=t.child;t!==null;)Tg(t,s,i),t=t.sibling}function Tg(t,s,i){switch(t.tag){case 26:Wi(t,s,i),t.flags&vl&&t.memoizedState!==null&&vw(i,ys,t.memoizedState,t.memoizedProps);break;case 5:Wi(t,s,i);break;case 3:case 4:var l=ys;ys=Iu(t.stateNode.containerInfo),Wi(t,s,i),ys=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=vl,vl=16777216,Wi(t,s,i),vl=l):Wi(t,s,i));break;default:Wi(t,s,i)}}function Ng(t){var s=t.alternate;if(s!==null&&(t=s.child,t!==null)){s.child=null;do s=t.sibling,t.sibling=null,t=s;while(t!==null)}}function _l(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var l=s[i];ln=l,jg(l,t)}Ng(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Cg(t),t=t.sibling}function Cg(t){switch(t.tag){case 0:case 11:case 15:_l(t),t.flags&2048&&Qr(9,t,t.return);break;case 3:_l(t);break;case 12:_l(t);break;case 22:var s=t.stateNode;t.memoizedState!==null&&s._visibility&2&&(t.return===null||t.return.tag!==13)?(s._visibility&=-3,xu(t)):_l(t);break;default:_l(t)}}function xu(t){var s=t.deletions;if((t.flags&16)!==0){if(s!==null)for(var i=0;i<s.length;i++){var l=s[i];ln=l,jg(l,t)}Ng(t)}for(t=t.child;t!==null;){switch(s=t,s.tag){case 0:case 11:case 15:Qr(8,s,s.return),xu(s);break;case 22:i=s.stateNode,i._visibility&2&&(i._visibility&=-3,xu(s));break;default:xu(s)}t=t.sibling}}function jg(t,s){for(;ln!==null;){var i=ln;switch(i.tag){case 0:case 11:case 15:Qr(8,i,s);break;case 23:case 22:if(i.memoizedState!==null&&i.memoizedState.cachePool!==null){var l=i.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:sl(i.memoizedState.cache)}if(l=i.child,l!==null)l.return=i,ln=l;else e:for(i=t;ln!==null;){l=ln;var p=l.sibling,g=l.return;if(_g(l),l===i){ln=null;break e}if(p!==null){p.return=g,ln=p;break e}ln=g}}}var Ix={getCacheForType:function(t){var s=fn(Gt),i=s.data.get(t);return i===void 0&&(i=t(),s.data.set(t,i)),i},cacheSignal:function(){return fn(Gt).controller.signal}},Lx=typeof WeakMap=="function"?WeakMap:Map,mt=0,At=null,st=null,at=0,vt=0,Bn=null,ea=!1,Xi=!1,rf=!1,_r=0,Pt=0,ta=0,Wa=0,af=0,$n=0,Zi=0,xl=null,jn=null,of=!1,wu=0,Rg=0,ku=1/0,Su=null,na=null,en=0,sa=null,Qi=null,xr=0,lf=0,cf=null,Dg=null,wl=0,uf=null;function Fn(){return(mt&2)!==0&&at!==0?at&-at:Q.T!==null?gf():On()}function Og(){if($n===0)if((at&536870912)===0||lt){var t=Jn;Jn<<=1,(Jn&3932160)===0&&(Jn=262144),$n=t}else $n=536870912;return t=Pn.current,t!==null&&(t.flags|=32),$n}function Rn(t,s,i){(t===At&&(vt===2||vt===9)||t.cancelPendingCommit!==null)&&(eo(t,0),ra(t,at,$n,!1)),rr(t,i),((mt&2)===0||t!==At)&&(t===At&&((mt&2)===0&&(Wa|=i),Pt===4&&ra(t,at,$n,!1)),Hs(t))}function Ig(t,s,i){if((mt&6)!==0)throw Error(a(327));var l=!i&&(s&127)===0&&(s&t.expiredLanes)===0||Sn(t,s),p=l?Px(t,s):hf(t,s,!0),g=l;do{if(p===0){Xi&&!l&&ra(t,s,0,!1);break}else{if(i=t.current.alternate,g&&!Ux(i)){p=hf(t,s,!1),g=!1;continue}if(p===2){if(g=s,t.errorRecoveryDisabledLanes&g)var w=0;else w=t.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){s=w;e:{var P=t;p=xl;var Y=P.current.memoizedState.isDehydrated;if(Y&&(eo(P,w).flags|=256),w=hf(P,w,!1),w!==2){if(rf&&!Y){P.errorRecoveryDisabledLanes|=g,Wa|=g,p=4;break e}g=jn,jn=p,g!==null&&(jn===null?jn=g:jn.push.apply(jn,g))}p=w}if(g=!1,p!==2)continue}}if(p===1){eo(t,0),ra(t,s,0,!0);break}e:{switch(l=t,g=p,g){case 0:case 1:throw Error(a(345));case 4:if((s&4194048)!==s)break;case 6:ra(l,s,$n,!ea);break e;case 2:jn=null;break;case 3:case 5:break;default:throw Error(a(329))}if((s&62914560)===s&&(p=wu+300-je(),10<p)){if(ra(l,s,$n,!ea),Yn(l,0,!0)!==0)break e;xr=s,l.timeoutHandle=db(Lg.bind(null,l,i,jn,Su,of,s,$n,Wa,Zi,ea,g,"Throttled",-0,0),p);break e}Lg(l,i,jn,Su,of,s,$n,Wa,Zi,ea,g,null,-0,0)}}break}while(!0);Hs(t)}function Lg(t,s,i,l,p,g,w,P,Y,ue,xe,Ee,he,ye){if(t.timeoutHandle=-1,Ee=s.subtreeFlags,Ee&8192||(Ee&16785408)===16785408){Ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:hs},Tg(s,g,Ee);var Me=(g&62914560)===g?wu-je():(g&4194048)===g?Rg-je():0;if(Me=_w(Ee,Me),Me!==null){xr=g,t.cancelPendingCommit=Me(Vg.bind(null,t,s,g,i,l,p,w,P,Y,xe,Ee,null,he,ye)),ra(t,g,w,!ue);return}}Vg(t,s,g,i,l,p,w,P,Y)}function Ux(t){for(var s=t;;){var i=s.tag;if((i===0||i===11||i===15)&&s.flags&16384&&(i=s.updateQueue,i!==null&&(i=i.stores,i!==null)))for(var l=0;l<i.length;l++){var p=i[l],g=p.getSnapshot;p=p.value;try{if(!Un(g(),p))return!1}catch{return!1}}if(i=s.child,s.subtreeFlags&16384&&i!==null)i.return=s,s=i;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function ra(t,s,i,l){s&=~af,s&=~Wa,t.suspendedLanes|=s,t.pingedLanes&=~s,l&&(t.warmLanes|=s),l=t.expirationTimes;for(var p=s;0<p;){var g=31-ht(p),w=1<<g;l[g]=-1,p&=~w}i!==0&&fe(t,i,s)}function Eu(){return(mt&6)===0?(kl(0),!1):!0}function df(){if(st!==null){if(vt===0)var t=st.return;else t=st,ur=$a=null,Ah(t),Hi=null,al=0,t=st;for(;t!==null;)hg(t.alternate,t),t=t.return;st=null}}function eo(t,s){var i=t.timeoutHandle;i!==-1&&(t.timeoutHandle=-1,nw(i)),i=t.cancelPendingCommit,i!==null&&(t.cancelPendingCommit=null,i()),xr=0,df(),At=t,st=i=lr(t.current,null),at=s,vt=0,Bn=null,ea=!1,Xi=Sn(t,s),rf=!1,Zi=$n=af=Wa=ta=Pt=0,jn=xl=null,of=!1,(s&8)!==0&&(s|=s&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=s;0<l;){var p=31-ht(l),g=1<<p;s|=t[p],l&=~g}return _r=s,Gc(),i}function Ug(t,s){Ze=null,Q.H=fl,s===Vi||s===eu?(s=Z0(),vt=3):s===ph?(s=Z0(),vt=4):vt=s===Fh?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Bn=s,st===null&&(Pt=1,pu(t,ts(s,t.current)))}function Mg(){var t=Pn.current;return t===null?!0:(at&4194048)===at?as===null:(at&62914560)===at||(at&536870912)!==0?t===as:!1}function Pg(){var t=Q.H;return Q.H=fl,t===null?fl:t}function zg(){var t=Q.A;return Q.A=Ix,t}function Au(){Pt=4,ea||(at&4194048)!==at&&Pn.current!==null||(Xi=!0),(ta&134217727)===0&&(Wa&134217727)===0||At===null||ra(At,at,$n,!1)}function hf(t,s,i){var l=mt;mt|=2;var p=Pg(),g=zg();(At!==t||at!==s)&&(Su=null,eo(t,s)),s=!1;var w=Pt;e:do try{if(vt!==0&&st!==null){var P=st,Y=Bn;switch(vt){case 8:df(),w=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(s=!0);var ue=vt;if(vt=0,Bn=null,to(t,P,Y,ue),i&&Xi){w=0;break e}break;default:ue=vt,vt=0,Bn=null,to(t,P,Y,ue)}}Mx(),w=Pt;break}catch(xe){Ug(t,xe)}while(!0);return s&&t.shellSuspendCounter++,ur=$a=null,mt=l,Q.H=p,Q.A=g,st===null&&(At=null,at=0,Gc()),w}function Mx(){for(;st!==null;)Bg(st)}function Px(t,s){var i=mt;mt|=2;var l=Pg(),p=zg();At!==t||at!==s?(Su=null,ku=je()+500,eo(t,s)):Xi=Sn(t,s);e:do try{if(vt!==0&&st!==null){s=st;var g=Bn;t:switch(vt){case 1:vt=0,Bn=null,to(t,s,g,1);break;case 2:case 9:if(W0(g)){vt=0,Bn=null,$g(s);break}s=function(){vt!==2&&vt!==9||At!==t||(vt=7),Hs(t)},g.then(s,s);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:W0(g)?(vt=0,Bn=null,$g(s)):(vt=0,Bn=null,to(t,s,g,7));break;case 5:var w=null;switch(st.tag){case 26:w=st.memoizedState;case 5:case 27:var P=st;if(w?Ab(w):P.stateNode.complete){vt=0,Bn=null;var Y=P.sibling;if(Y!==null)st=Y;else{var ue=P.return;ue!==null?(st=ue,Tu(ue)):st=null}break t}}vt=0,Bn=null,to(t,s,g,5);break;case 6:vt=0,Bn=null,to(t,s,g,6);break;case 8:df(),Pt=6;break e;default:throw Error(a(462))}}zx();break}catch(xe){Ug(t,xe)}while(!0);return ur=$a=null,Q.H=l,Q.A=p,mt=i,st!==null?0:(At=null,at=0,Gc(),Pt)}function zx(){for(;st!==null&&!oe();)Bg(st)}function Bg(t){var s=ug(t.alternate,t,_r);t.memoizedProps=t.pendingProps,s===null?Tu(t):st=s}function $g(t){var s=t,i=s.alternate;switch(s.tag){case 15:case 0:s=rg(i,s,s.pendingProps,s.type,void 0,at);break;case 11:s=rg(i,s,s.pendingProps,s.type.render,s.ref,at);break;case 5:Ah(s);default:hg(i,s),s=st=z0(s,_r),s=ug(i,s,_r)}t.memoizedProps=t.pendingProps,s===null?Tu(t):st=s}function to(t,s,i,l){ur=$a=null,Ah(s),Hi=null,al=0;var p=s.return;try{if(Tx(t,p,s,i,at)){Pt=1,pu(t,ts(i,t.current)),st=null;return}}catch(g){if(p!==null)throw st=p,g;Pt=1,pu(t,ts(i,t.current)),st=null;return}s.flags&32768?(lt||l===1?t=!0:Xi||(at&536870912)!==0?t=!1:(ea=t=!0,(l===2||l===9||l===3||l===6)&&(l=Pn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Fg(s,t)):Tu(s)}function Tu(t){var s=t;do{if((s.flags&32768)!==0){Fg(s,ea);return}t=s.return;var i=jx(s.alternate,s,_r);if(i!==null){st=i;return}if(s=s.sibling,s!==null){st=s;return}st=s=t}while(s!==null);Pt===0&&(Pt=5)}function Fg(t,s){do{var i=Rx(t.alternate,t);if(i!==null){i.flags&=32767,st=i;return}if(i=t.return,i!==null&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!s&&(t=t.sibling,t!==null)){st=t;return}st=t=i}while(t!==null);Pt=6,st=null}function Vg(t,s,i,l,p,g,w,P,Y){t.cancelPendingCommit=null;do Nu();while(en!==0);if((mt&6)!==0)throw Error(a(327));if(s!==null){if(s===t.current)throw Error(a(177));if(g=s.lanes|s.childLanes,g|=Qd,Lo(t,i,g,w,P,Y),t===At&&(st=At=null,at=0),Qi=s,sa=t,xr=i,lf=g,cf=p,Dg=l,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Vx(Je,function(){return Jg(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||l){l=Q.T,Q.T=null,p=X.p,X.p=2,w=mt,mt|=4;try{Dx(t,s,i)}finally{mt=w,X.p=p,Q.T=l}}en=1,Hg(),qg(),Gg()}}function Hg(){if(en===1){en=0;var t=sa,s=Qi,i=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||i){i=Q.T,Q.T=null;var l=X.p;X.p=2;var p=mt;mt|=4;try{Sg(s,t);var g=Sf,w=j0(t.containerInfo),P=g.focusedElem,Y=g.selectionRange;if(w!==P&&P&&P.ownerDocument&&C0(P.ownerDocument.documentElement,P)){if(Y!==null&&Jd(P)){var ue=Y.start,xe=Y.end;if(xe===void 0&&(xe=ue),"selectionStart"in P)P.selectionStart=ue,P.selectionEnd=Math.min(xe,P.value.length);else{var Ee=P.ownerDocument||document,he=Ee&&Ee.defaultView||window;if(he.getSelection){var ye=he.getSelection(),Me=P.textContent.length,He=Math.min(Y.start,Me),St=Y.end===void 0?He:Math.min(Y.end,Me);!ye.extend&&He>St&&(w=St,St=He,He=w);var se=N0(P,He),ee=N0(P,St);if(se&&ee&&(ye.rangeCount!==1||ye.anchorNode!==se.node||ye.anchorOffset!==se.offset||ye.focusNode!==ee.node||ye.focusOffset!==ee.offset)){var ce=Ee.createRange();ce.setStart(se.node,se.offset),ye.removeAllRanges(),He>St?(ye.addRange(ce),ye.extend(ee.node,ee.offset)):(ce.setEnd(ee.node,ee.offset),ye.addRange(ce))}}}}for(Ee=[],ye=P;ye=ye.parentNode;)ye.nodeType===1&&Ee.push({element:ye,left:ye.scrollLeft,top:ye.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<Ee.length;P++){var Se=Ee[P];Se.element.scrollLeft=Se.left,Se.element.scrollTop=Se.top}}Bu=!!kf,Sf=kf=null}finally{mt=p,X.p=l,Q.T=i}}t.current=s,en=2}}function qg(){if(en===2){en=0;var t=sa,s=Qi,i=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||i){i=Q.T,Q.T=null;var l=X.p;X.p=2;var p=mt;mt|=4;try{vg(t,s.alternate,s)}finally{mt=p,X.p=l,Q.T=i}}en=3}}function Gg(){if(en===4||en===3){en=0,Ce();var t=sa,s=Qi,i=xr,l=Dg;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?en=5:(en=0,Qi=sa=null,Kg(t,t.pendingLanes));var p=t.pendingLanes;if(p===0&&(na=null),tt(i),s=s.stateNode,nt&&typeof nt.onCommitFiberRoot=="function")try{nt.onCommitFiberRoot(ot,s,void 0,(s.current.flags&128)===128)}catch{}if(l!==null){s=Q.T,p=X.p,X.p=2,Q.T=null;try{for(var g=t.onRecoverableError,w=0;w<l.length;w++){var P=l[w];g(P.value,{componentStack:P.stack})}}finally{Q.T=s,X.p=p}}(xr&3)!==0&&Nu(),Hs(t),p=t.pendingLanes,(i&261930)!==0&&(p&42)!==0?t===uf?wl++:(wl=0,uf=t):wl=0,kl(0)}}function Kg(t,s){(t.pooledCacheLanes&=s)===0&&(s=t.pooledCache,s!=null&&(t.pooledCache=null,sl(s)))}function Nu(){return Hg(),qg(),Gg(),Jg()}function Jg(){if(en!==5)return!1;var t=sa,s=lf;lf=0;var i=tt(xr),l=Q.T,p=X.p;try{X.p=32>i?32:i,Q.T=null,i=cf,cf=null;var g=sa,w=xr;if(en=0,Qi=sa=null,xr=0,(mt&6)!==0)throw Error(a(331));var P=mt;if(mt|=4,Cg(g.current),Ag(g,g.current,w,i),mt=P,kl(0,!1),nt&&typeof nt.onPostCommitFiberRoot=="function")try{nt.onPostCommitFiberRoot(ot,g)}catch{}return!0}finally{X.p=p,Q.T=l,Kg(t,s)}}function Yg(t,s,i){s=ts(i,s),s=$h(t.stateNode,s,2),t=Wr(t,s,2),t!==null&&(rr(t,2),Hs(t))}function _t(t,s,i){if(t.tag===3)Yg(t,t,i);else for(;s!==null;){if(s.tag===3){Yg(s,t,i);break}else if(s.tag===1){var l=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(na===null||!na.has(l))){t=ts(i,t),i=Wm(2),l=Wr(s,i,2),l!==null&&(Xm(i,l,s,t),rr(l,2),Hs(l));break}}s=s.return}}function ff(t,s,i){var l=t.pingCache;if(l===null){l=t.pingCache=new Lx;var p=new Set;l.set(s,p)}else p=l.get(s),p===void 0&&(p=new Set,l.set(s,p));p.has(i)||(rf=!0,p.add(i),t=Bx.bind(null,t,s,i),s.then(t,t))}function Bx(t,s,i){var l=t.pingCache;l!==null&&l.delete(s),t.pingedLanes|=t.suspendedLanes&i,t.warmLanes&=~i,At===t&&(at&i)===i&&(Pt===4||Pt===3&&(at&62914560)===at&&300>je()-wu?(mt&2)===0&&eo(t,0):af|=i,Zi===at&&(Zi=0)),Hs(t)}function Wg(t,s){s===0&&(s=_i()),t=Pa(t,s),t!==null&&(rr(t,s),Hs(t))}function $x(t){var s=t.memoizedState,i=0;s!==null&&(i=s.retryLane),Wg(t,i)}function Fx(t,s){var i=0;switch(t.tag){case 31:case 13:var l=t.stateNode,p=t.memoizedState;p!==null&&(i=p.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(a(314))}l!==null&&l.delete(s),Wg(t,i)}function Vx(t,s){return de(t,s)}var Cu=null,no=null,pf=!1,ju=!1,mf=!1,aa=0;function Hs(t){t!==no&&t.next===null&&(no===null?Cu=no=t:no=no.next=t),ju=!0,pf||(pf=!0,qx())}function kl(t,s){if(!mf&&ju){mf=!0;do for(var i=!1,l=Cu;l!==null;){if(t!==0){var p=l.pendingLanes;if(p===0)var g=0;else{var w=l.suspendedLanes,P=l.pingedLanes;g=(1<<31-ht(42|t)+1)-1,g&=p&~(w&~P),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(i=!0,eb(l,g))}else g=at,g=Yn(l,l===At?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Sn(l,g)||(i=!0,eb(l,g));l=l.next}while(i);mf=!1}}function Hx(){Xg()}function Xg(){ju=pf=!1;var t=0;aa!==0&&tw()&&(t=aa);for(var s=je(),i=null,l=Cu;l!==null;){var p=l.next,g=Zg(l,s);g===0?(l.next=null,i===null?Cu=p:i.next=p,p===null&&(no=i)):(i=l,(t!==0||(g&3)!==0)&&(ju=!0)),l=p}en!==0&&en!==5||kl(t),aa!==0&&(aa=0)}function Zg(t,s){for(var i=t.suspendedLanes,l=t.pingedLanes,p=t.expirationTimes,g=t.pendingLanes&-62914561;0<g;){var w=31-ht(g),P=1<<w,Y=p[w];Y===-1?((P&i)===0||(P&l)!==0)&&(p[w]=vi(P,s)):Y<=s&&(t.expiredLanes|=P),g&=~P}if(s=At,i=at,i=Yn(t,t===s?i:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,i===0||t===s&&(vt===2||vt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&we(l),t.callbackNode=null,t.callbackPriority=0;if((i&3)===0||Sn(t,i)){if(s=i&-i,s===t.callbackPriority)return s;switch(l!==null&&we(l),tt(i)){case 2:case 8:i=et;break;case 32:i=Je;break;case 268435456:i=Kn;break;default:i=Je}return l=Qg.bind(null,t),i=de(i,l),t.callbackPriority=s,t.callbackNode=i,s}return l!==null&&l!==null&&we(l),t.callbackPriority=2,t.callbackNode=null,2}function Qg(t,s){if(en!==0&&en!==5)return t.callbackNode=null,t.callbackPriority=0,null;var i=t.callbackNode;if(Nu()&&t.callbackNode!==i)return null;var l=at;return l=Yn(t,t===At?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Ig(t,l,s),Zg(t,je()),t.callbackNode!=null&&t.callbackNode===i?Qg.bind(null,t):null)}function eb(t,s){if(Nu())return null;Ig(t,s,!0)}function qx(){sw(function(){(mt&6)!==0?de(Pe,Hx):Xg()})}function gf(){if(aa===0){var t=$i;t===0&&(t=kn,kn<<=1,(kn&261888)===0&&(kn=256)),aa=t}return aa}function tb(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ai(""+t)}function nb(t,s){var i=s.ownerDocument.createElement("input");return i.name=s.name,i.value=s.value,t.id&&i.setAttribute("form",t.id),s.parentNode.insertBefore(i,s),t=new FormData(t),i.parentNode.removeChild(i),t}function Gx(t,s,i,l,p){if(s==="submit"&&i&&i.stateNode===p){var g=tb((p[an]||null).action),w=l.submitter;w&&(s=(s=w[an]||null)?tb(s.formAction):w.getAttribute("formAction"),s!==null&&(g=s,w=null));var P=new Ps("action","action",null,l,p);t.push({event:P,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(aa!==0){var Y=w?nb(p,w):new FormData(p);Lh(i,{pending:!0,data:Y,method:p.method,action:g},null,Y)}}else typeof g=="function"&&(P.preventDefault(),Y=w?nb(p,w):new FormData(p),Lh(i,{pending:!0,data:Y,method:p.method,action:g},g,Y))},currentTarget:p}]})}}for(var bf=0;bf<Zd.length;bf++){var yf=Zd[bf],Kx=yf.toLowerCase(),Jx=yf[0].toUpperCase()+yf.slice(1);bs(Kx,"on"+Jx)}bs(O0,"onAnimationEnd"),bs(I0,"onAnimationIteration"),bs(L0,"onAnimationStart"),bs("dblclick","onDoubleClick"),bs("focusin","onFocus"),bs("focusout","onBlur"),bs(ux,"onTransitionRun"),bs(dx,"onTransitionStart"),bs(hx,"onTransitionCancel"),bs(U0,"onTransitionEnd"),Is("onMouseEnter",["mouseout","mouseover"]),Is("onMouseLeave",["mouseout","mouseover"]),Is("onPointerEnter",["pointerout","pointerover"]),Is("onPointerLeave",["pointerout","pointerover"]),Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Os("onBeforeInput",["compositionend","keypress","textInput","paste"]),Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Sl));function sb(t,s){s=(s&4)!==0;for(var i=0;i<t.length;i++){var l=t[i],p=l.event;l=l.listeners;e:{var g=void 0;if(s)for(var w=l.length-1;0<=w;w--){var P=l[w],Y=P.instance,ue=P.currentTarget;if(P=P.listener,Y!==g&&p.isPropagationStopped())break e;g=P,p.currentTarget=ue;try{g(p)}catch(xe){qc(xe)}p.currentTarget=null,g=Y}else for(w=0;w<l.length;w++){if(P=l[w],Y=P.instance,ue=P.currentTarget,P=P.listener,Y!==g&&p.isPropagationStopped())break e;g=P,p.currentTarget=ue;try{g(p)}catch(xe){qc(xe)}p.currentTarget=null,g=Y}}}}function rt(t,s){var i=s[xi];i===void 0&&(i=s[xi]=new Set);var l=t+"__bubble";i.has(l)||(rb(s,t,2,!1),i.add(l))}function vf(t,s,i){var l=0;s&&(l|=4),rb(i,t,l,s)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function _f(t){if(!t[Ru]){t[Ru]=!0,Uo.forEach(function(i){i!=="selectionchange"&&(Yx.has(i)||vf(i,!1,t),vf(i,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ru]||(s[Ru]=!0,vf("selectionchange",!1,s))}}function rb(t,s,i,l){switch(Ob(s)){case 2:var p=kw;break;case 8:p=Sw;break;default:p=Lf}i=p.bind(null,s,i,t),p=void 0,!ja||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(p=!0),l?p!==void 0?t.addEventListener(s,i,{capture:!0,passive:p}):t.addEventListener(s,i,!0):p!==void 0?t.addEventListener(s,i,{passive:p}):t.addEventListener(s,i,!1)}function xf(t,s,i,l,p){var g=l;if((s&1)===0&&(s&2)===0&&l!==null)e:for(;;){if(l===null)return;var w=l.tag;if(w===3||w===4){var P=l.stateNode.containerInfo;if(P===p)break;if(w===4)for(w=l.return;w!==null;){var Y=w.tag;if((Y===3||Y===4)&&w.stateNode.containerInfo===p)return;w=w.return}for(;P!==null;){if(w=Rs(P),w===null)return;if(Y=w.tag,Y===5||Y===6||Y===26||Y===27){l=g=w;continue e}P=P.parentNode}}l=l.return}Br(function(){var ue=g,xe=Zn(i),Ee=[];e:{var he=M0.get(t);if(he!==void 0){var ye=Ps,Me=t;switch(t){case"keypress":if(Da(i)===0)break e;case"keydown":case"keyup":ye=Vc;break;case"focusin":Me="focus",ye=Ia;break;case"focusout":Me="blur",ye=Ia;break;case"beforeblur":case"afterblur":ye=Ia;break;case"click":if(i.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ye=Yo;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ye=Oc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ye=T;break;case O0:case I0:case L0:ye=Lc;break;case U0:ye=le;break;case"scroll":case"scrollend":ye=Jo;break;case"wheel":ye=De;break;case"copy":case"cut":case"paste":ye=Uc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ye=d;break;case"toggle":case"beforetoggle":ye=Bt}var He=(s&4)!==0,St=!He&&(t==="scroll"||t==="scrollend"),se=He?he!==null?he+"Capture":null:he;He=[];for(var ee=ue,ce;ee!==null;){var Se=ee;if(ce=Se.stateNode,Se=Se.tag,Se!==5&&Se!==26&&Se!==27||ce===null||se===null||(Se=fs(ee,se),Se!=null&&He.push(El(ee,Se,ce))),St)break;ee=ee.return}0<He.length&&(he=new ye(he,Me,null,i,xe),Ee.push({event:he,listeners:He}))}}if((s&7)===0){e:{if(he=t==="mouseover"||t==="pointerover",ye=t==="mouseout"||t==="pointerout",he&&i!==qo&&(Me=i.relatedTarget||i.fromElement)&&(Rs(Me)||Me[Cs]))break e;if((ye||he)&&(he=xe.window===xe?xe:(he=xe.ownerDocument)?he.defaultView||he.parentWindow:window,ye?(Me=i.relatedTarget||i.toElement,ye=ue,Me=Me?Rs(Me):null,Me!==null&&(St=c(Me),He=Me.tag,Me!==St||He!==5&&He!==27&&He!==6)&&(Me=null)):(ye=null,Me=ue),ye!==Me)){if(He=Yo,Se="onMouseLeave",se="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(He=d,Se="onPointerLeave",se="onPointerEnter",ee="pointer"),St=ye==null?he:In(ye),ce=Me==null?he:In(Me),he=new He(Se,ee+"leave",ye,i,xe),he.target=St,he.relatedTarget=ce,Se=null,Rs(xe)===ue&&(He=new He(se,ee+"enter",Me,i,xe),He.target=ce,He.relatedTarget=St,Se=He),St=Se,ye&&Me)t:{for(He=Wx,se=ye,ee=Me,ce=0,Se=se;Se;Se=He(Se))ce++;Se=0;for(var Ve=ee;Ve;Ve=He(Ve))Se++;for(;0<ce-Se;)se=He(se),ce--;for(;0<Se-ce;)ee=He(ee),Se--;for(;ce--;){if(se===ee||ee!==null&&se===ee.alternate){He=se;break t}se=He(se),ee=He(ee)}He=null}else He=null;ye!==null&&ab(Ee,he,ye,He,!1),Me!==null&&St!==null&&ab(Ee,St,Me,He,!0)}}e:{if(he=ue?In(ue):window,ye=he.nodeName&&he.nodeName.toLowerCase(),ye==="select"||ye==="input"&&he.type==="file")var ft=w0;else if(_0(he))if(k0)ft=ox;else{ft=ax;var ze=rx}else ye=he.nodeName,!ye||ye.toLowerCase()!=="input"||he.type!=="checkbox"&&he.type!=="radio"?ue&&Ei(ue.elementType)&&(ft=w0):ft=ix;if(ft&&(ft=ft(t,ue))){x0(Ee,ft,i,xe);break e}ze&&ze(t,he,ue),t==="focusout"&&ue&&he.type==="number"&&ue.memoizedProps.value!=null&&Fo(he,"number",he.value)}switch(ze=ue?In(ue):window,t){case"focusin":(_0(ze)||ze.contentEditable==="true")&&(Oi=ze,Yd=ue,el=null);break;case"focusout":el=Yd=Oi=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,R0(Ee,i,xe);break;case"selectionchange":if(cx)break;case"keydown":case"keyup":R0(Ee,i,xe)}var Qe;if(Ut)e:{switch(t){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else Di?Ri(t,i)&&(it="onCompositionEnd"):t==="keydown"&&i.keyCode===229&&(it="onCompositionStart");it&&(ms&&i.locale!=="ko"&&(Di||it!=="onCompositionStart"?it==="onCompositionEnd"&&Di&&(Qe=Ko()):(Ms=xe,Go="value"in Ms?Ms.value:Ms.textContent,Di=!0)),ze=Du(ue,it),0<ze.length&&(it=new Bs(it,t,null,i,xe),Ee.push({event:it,listeners:ze}),Qe?it.data=Qe:(Qe=v0(i),Qe!==null&&(it.data=Qe)))),(Qe=or?ex(t,i):tx(t,i))&&(it=Du(ue,"onBeforeInput"),0<it.length&&(ze=new Bs("onBeforeInput","beforeinput",null,i,xe),Ee.push({event:ze,listeners:it}),ze.data=Qe)),Gx(Ee,t,ue,i,xe)}sb(Ee,s)})}function El(t,s,i){return{instance:t,listener:s,currentTarget:i}}function Du(t,s){for(var i=s+"Capture",l=[];t!==null;){var p=t,g=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||g===null||(p=fs(t,i),p!=null&&l.unshift(El(t,p,g)),p=fs(t,s),p!=null&&l.push(El(t,p,g))),t.tag===3)return l;t=t.return}return[]}function Wx(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function ab(t,s,i,l,p){for(var g=s._reactName,w=[];i!==null&&i!==l;){var P=i,Y=P.alternate,ue=P.stateNode;if(P=P.tag,Y!==null&&Y===l)break;P!==5&&P!==26&&P!==27||ue===null||(Y=ue,p?(ue=fs(i,g),ue!=null&&w.unshift(El(i,ue,Y))):p||(ue=fs(i,g),ue!=null&&w.push(El(i,ue,Y)))),i=i.return}w.length!==0&&t.push({event:s,listeners:w})}var Xx=/\r\n?/g,Zx=/\u0000|\uFFFD/g;function ib(t){return(typeof t=="string"?t:""+t).replace(Xx,`
`).replace(Zx,"")}function ob(t,s){return s=ib(s),ib(t)===s}function kt(t,s,i,l,p,g){switch(i){case"children":typeof l=="string"?s==="body"||s==="textarea"&&l===""||An(t,l):(typeof l=="number"||typeof l=="bigint")&&s!=="body"&&An(t,""+l);break;case"className":Ln(t,"class",l);break;case"tabIndex":Ln(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Ln(t,i,l);break;case"style":Ho(t,l,g);break;case"data":if(s!=="object"){Ln(t,"data",l);break}case"src":case"href":if(l===""&&(s!=="a"||i!=="href")){t.removeAttribute(i);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=Ai(""+l),t.setAttribute(i,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(i==="formAction"?(s!=="input"&&kt(t,s,"name",p.name,p,null),kt(t,s,"formEncType",p.formEncType,p,null),kt(t,s,"formMethod",p.formMethod,p,null),kt(t,s,"formTarget",p.formTarget,p,null)):(kt(t,s,"encType",p.encType,p,null),kt(t,s,"method",p.method,p,null),kt(t,s,"target",p.target,p,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(i);break}l=Ai(""+l),t.setAttribute(i,l);break;case"onClick":l!=null&&(t.onclick=hs);break;case"onScroll":l!=null&&rt("scroll",t);break;case"onScrollEnd":l!=null&&rt("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(i=l.__html,i!=null){if(p.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}i=Ai(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""+l):t.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,""):t.removeAttribute(i);break;case"capture":case"download":l===!0?t.setAttribute(i,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(i,l):t.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(i,l):t.removeAttribute(i);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(i):t.setAttribute(i,l);break;case"popover":rt("beforetoggle",t),rt("toggle",t),ki(t,"popover",l);break;case"xlinkActuate":qt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":qt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":qt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":qt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":qt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":qt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":qt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":qt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":qt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ki(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(i=Dc.get(i)||i,ki(t,i,l))}}function wf(t,s,i,l,p,g){switch(i){case"style":Ho(t,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(a(61));if(i=l.__html,i!=null){if(p.children!=null)throw Error(a(60));t.innerHTML=i}}break;case"children":typeof l=="string"?An(t,l):(typeof l=="number"||typeof l=="bigint")&&An(t,""+l);break;case"onScroll":l!=null&&rt("scroll",t);break;case"onScrollEnd":l!=null&&rt("scrollend",t);break;case"onClick":l!=null&&(t.onclick=hs);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Mo.hasOwnProperty(i))e:{if(i[0]==="o"&&i[1]==="n"&&(p=i.endsWith("Capture"),s=i.slice(2,p?i.length-7:void 0),g=t[an]||null,g=g!=null?g[i]:null,typeof g=="function"&&t.removeEventListener(s,g,p),typeof l=="function")){typeof g!="function"&&g!==null&&(i in t?t[i]=null:t.hasAttribute(i)&&t.removeAttribute(i)),t.addEventListener(s,l,p);break e}i in t?t[i]=l:l===!0?t.setAttribute(i,""):ki(t,i,l)}}}function mn(t,s,i){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",t),rt("load",t);var l=!1,p=!1,g;for(g in i)if(i.hasOwnProperty(g)){var w=i[g];if(w!=null)switch(g){case"src":l=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:kt(t,s,g,w,i,null)}}p&&kt(t,s,"srcSet",i.srcSet,i,null),l&&kt(t,s,"src",i.src,i,null);return;case"input":rt("invalid",t);var P=g=w=p=null,Y=null,ue=null;for(l in i)if(i.hasOwnProperty(l)){var xe=i[l];if(xe!=null)switch(l){case"name":p=xe;break;case"type":w=xe;break;case"checked":Y=xe;break;case"defaultChecked":ue=xe;break;case"value":g=xe;break;case"defaultValue":P=xe;break;case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(a(137,s));break;default:kt(t,s,l,xe,i,null)}}Cc(t,g,P,Y,ue,w,p,!1);return;case"select":rt("invalid",t),l=w=g=null;for(p in i)if(i.hasOwnProperty(p)&&(P=i[p],P!=null))switch(p){case"value":g=P;break;case"defaultValue":w=P;break;case"multiple":l=P;default:kt(t,s,p,P,i,null)}s=g,i=w,t.multiple=!!l,s!=null?Ur(t,!!l,s,!1):i!=null&&Ur(t,!!l,i,!0);return;case"textarea":rt("invalid",t),g=p=l=null;for(w in i)if(i.hasOwnProperty(w)&&(P=i[w],P!=null))switch(w){case"value":l=P;break;case"defaultValue":p=P;break;case"children":g=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(a(91));break;default:kt(t,s,w,P,i,null)}Mr(t,l,p,g);return;case"option":for(Y in i)if(i.hasOwnProperty(Y)&&(l=i[Y],l!=null))switch(Y){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:kt(t,s,Y,l,i,null)}return;case"dialog":rt("beforetoggle",t),rt("toggle",t),rt("cancel",t),rt("close",t);break;case"iframe":case"object":rt("load",t);break;case"video":case"audio":for(l=0;l<Sl.length;l++)rt(Sl[l],t);break;case"image":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"embed":case"source":case"link":rt("error",t),rt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in i)if(i.hasOwnProperty(ue)&&(l=i[ue],l!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,s));default:kt(t,s,ue,l,i,null)}return;default:if(Ei(s)){for(xe in i)i.hasOwnProperty(xe)&&(l=i[xe],l!==void 0&&wf(t,s,xe,l,i,void 0));return}}for(P in i)i.hasOwnProperty(P)&&(l=i[P],l!=null&&kt(t,s,P,l,i,null))}function Qx(t,s,i,l){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,g=null,w=null,P=null,Y=null,ue=null,xe=null;for(ye in i){var Ee=i[ye];if(i.hasOwnProperty(ye)&&Ee!=null)switch(ye){case"checked":break;case"value":break;case"defaultValue":Y=Ee;default:l.hasOwnProperty(ye)||kt(t,s,ye,null,l,Ee)}}for(var he in l){var ye=l[he];if(Ee=i[he],l.hasOwnProperty(he)&&(ye!=null||Ee!=null))switch(he){case"type":g=ye;break;case"name":p=ye;break;case"checked":ue=ye;break;case"defaultChecked":xe=ye;break;case"value":w=ye;break;case"defaultValue":P=ye;break;case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(a(137,s));break;default:ye!==Ee&&kt(t,s,he,ye,l,Ee)}}Si(t,w,P,Y,ue,xe,g,p);return;case"select":ye=w=P=he=null;for(g in i)if(Y=i[g],i.hasOwnProperty(g)&&Y!=null)switch(g){case"value":break;case"multiple":ye=Y;default:l.hasOwnProperty(g)||kt(t,s,g,null,l,Y)}for(p in l)if(g=l[p],Y=i[p],l.hasOwnProperty(p)&&(g!=null||Y!=null))switch(p){case"value":he=g;break;case"defaultValue":P=g;break;case"multiple":w=g;default:g!==Y&&kt(t,s,p,g,l,Y)}s=P,i=w,l=ye,he!=null?Ur(t,!!i,he,!1):!!l!=!!i&&(s!=null?Ur(t,!!i,s,!0):Ur(t,!!i,i?[]:"",!1));return;case"textarea":ye=he=null;for(P in i)if(p=i[P],i.hasOwnProperty(P)&&p!=null&&!l.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:kt(t,s,P,null,l,p)}for(w in l)if(p=l[w],g=i[w],l.hasOwnProperty(w)&&(p!=null||g!=null))switch(w){case"value":he=p;break;case"defaultValue":ye=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(a(91));break;default:p!==g&&kt(t,s,w,p,l,g)}jc(t,he,ye);return;case"option":for(var Me in i)if(he=i[Me],i.hasOwnProperty(Me)&&he!=null&&!l.hasOwnProperty(Me))switch(Me){case"selected":t.selected=!1;break;default:kt(t,s,Me,null,l,he)}for(Y in l)if(he=l[Y],ye=i[Y],l.hasOwnProperty(Y)&&he!==ye&&(he!=null||ye!=null))switch(Y){case"selected":t.selected=he&&typeof he!="function"&&typeof he!="symbol";break;default:kt(t,s,Y,he,l,ye)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in i)he=i[He],i.hasOwnProperty(He)&&he!=null&&!l.hasOwnProperty(He)&&kt(t,s,He,null,l,he);for(ue in l)if(he=l[ue],ye=i[ue],l.hasOwnProperty(ue)&&he!==ye&&(he!=null||ye!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(a(137,s));break;default:kt(t,s,ue,he,l,ye)}return;default:if(Ei(s)){for(var St in i)he=i[St],i.hasOwnProperty(St)&&he!==void 0&&!l.hasOwnProperty(St)&&wf(t,s,St,void 0,l,he);for(xe in l)he=l[xe],ye=i[xe],!l.hasOwnProperty(xe)||he===ye||he===void 0&&ye===void 0||wf(t,s,xe,he,l,ye);return}}for(var se in i)he=i[se],i.hasOwnProperty(se)&&he!=null&&!l.hasOwnProperty(se)&&kt(t,s,se,null,l,he);for(Ee in l)he=l[Ee],ye=i[Ee],!l.hasOwnProperty(Ee)||he===ye||he==null&&ye==null||kt(t,s,Ee,he,l,ye)}function lb(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ew(){if(typeof performance.getEntriesByType=="function"){for(var t=0,s=0,i=performance.getEntriesByType("resource"),l=0;l<i.length;l++){var p=i[l],g=p.transferSize,w=p.initiatorType,P=p.duration;if(g&&P&&lb(w)){for(w=0,P=p.responseEnd,l+=1;l<i.length;l++){var Y=i[l],ue=Y.startTime;if(ue>P)break;var xe=Y.transferSize,Ee=Y.initiatorType;xe&&lb(Ee)&&(Y=Y.responseEnd,w+=xe*(Y<P?1:(P-ue)/(Y-ue)))}if(--l,s+=8*(g+w)/(p.duration/1e3),t++,10<t)break}}if(0<t)return s/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var kf=null,Sf=null;function Ou(t){return t.nodeType===9?t:t.ownerDocument}function cb(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ub(t,s){if(t===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&s==="foreignObject"?0:t}function Ef(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Af=null;function tw(){var t=window.event;return t&&t.type==="popstate"?t===Af?!1:(Af=t,!0):(Af=null,!1)}var db=typeof setTimeout=="function"?setTimeout:void 0,nw=typeof clearTimeout=="function"?clearTimeout:void 0,hb=typeof Promise=="function"?Promise:void 0,sw=typeof queueMicrotask=="function"?queueMicrotask:typeof hb<"u"?function(t){return hb.resolve(null).then(t).catch(rw)}:db;function rw(t){setTimeout(function(){throw t})}function ia(t){return t==="head"}function fb(t,s){var i=s,l=0;do{var p=i.nextSibling;if(t.removeChild(i),p&&p.nodeType===8)if(i=p.data,i==="/$"||i==="/&"){if(l===0){t.removeChild(p),io(s);return}l--}else if(i==="$"||i==="$?"||i==="$~"||i==="$!"||i==="&")l++;else if(i==="html")Al(t.ownerDocument.documentElement);else if(i==="head"){i=t.ownerDocument.head,Al(i);for(var g=i.firstChild;g;){var w=g.nextSibling,P=g.nodeName;g[js]||P==="SCRIPT"||P==="STYLE"||P==="LINK"&&g.rel.toLowerCase()==="stylesheet"||i.removeChild(g),g=w}}else i==="body"&&Al(t.ownerDocument.body);i=p}while(i);io(s)}function pb(t,s){var i=t;t=0;do{var l=i.nextSibling;if(i.nodeType===1?s?(i._stashedDisplay=i.style.display,i.style.display="none"):(i.style.display=i._stashedDisplay||"",i.getAttribute("style")===""&&i.removeAttribute("style")):i.nodeType===3&&(s?(i._stashedText=i.nodeValue,i.nodeValue=""):i.nodeValue=i._stashedText||""),l&&l.nodeType===8)if(i=l.data,i==="/$"){if(t===0)break;t--}else i!=="$"&&i!=="$?"&&i!=="$~"&&i!=="$!"||t++;i=l}while(i)}function Tf(t){var s=t.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var i=s;switch(s=s.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":Tf(i),wi(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(i.rel.toLowerCase()==="stylesheet")continue}t.removeChild(i)}}function aw(t,s,i,l){for(;t.nodeType===1;){var p=i;if(t.nodeName.toLowerCase()!==s.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[js])switch(s){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(g=t.getAttribute("rel"),g==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(g!==p.rel||t.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||t.getAttribute("title")!==(p.title==null?null:p.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(g=t.getAttribute("src"),(g!==(p.src==null?null:p.src)||t.getAttribute("type")!==(p.type==null?null:p.type)||t.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&g&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(s==="input"&&t.type==="hidden"){var g=p.name==null?null:""+p.name;if(p.type==="hidden"&&t.getAttribute("name")===g)return t}else return t;if(t=is(t.nextSibling),t===null)break}return null}function iw(t,s,i){if(s==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=is(t.nextSibling),t===null))return null;return t}function mb(t,s){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!s||(t=is(t.nextSibling),t===null))return null;return t}function Nf(t){return t.data==="$?"||t.data==="$~"}function Cf(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function ow(t,s){var i=t.ownerDocument;if(t.data==="$~")t._reactRetry=s;else if(t.data!=="$?"||i.readyState!=="loading")s();else{var l=function(){s(),i.removeEventListener("DOMContentLoaded",l)};i.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function is(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return t}var jf=null;function gb(t){t=t.nextSibling;for(var s=0;t;){if(t.nodeType===8){var i=t.data;if(i==="/$"||i==="/&"){if(s===0)return is(t.nextSibling);s--}else i!=="$"&&i!=="$!"&&i!=="$?"&&i!=="$~"&&i!=="&"||s++}t=t.nextSibling}return null}function bb(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var i=t.data;if(i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"){if(s===0)return t;s--}else i!=="/$"&&i!=="/&"||s++}t=t.previousSibling}return null}function yb(t,s,i){switch(s=Ou(i),t){case"html":if(t=s.documentElement,!t)throw Error(a(452));return t;case"head":if(t=s.head,!t)throw Error(a(453));return t;case"body":if(t=s.body,!t)throw Error(a(454));return t;default:throw Error(a(451))}}function Al(t){for(var s=t.attributes;s.length;)t.removeAttributeNode(s[0]);wi(t)}var os=new Map,vb=new Set;function Iu(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var wr=X.d;X.d={f:lw,r:cw,D:uw,C:dw,L:hw,m:fw,X:mw,S:pw,M:gw};function lw(){var t=wr.f(),s=Eu();return t||s}function cw(t){var s=Xn(t);s!==null&&s.tag===5&&s.type==="form"?Um(s):wr.r(t)}var so=typeof document>"u"?null:document;function _b(t,s,i){var l=so;if(l&&typeof s=="string"&&s){var p=En(s);p='link[rel="'+t+'"][href="'+p+'"]',typeof i=="string"&&(p+='[crossorigin="'+i+'"]'),vb.has(p)||(vb.add(p),t={rel:t,crossOrigin:i,href:s},l.querySelector(p)===null&&(s=l.createElement("link"),mn(s,"link",t),Ht(s),l.head.appendChild(s)))}}function uw(t){wr.D(t),_b("dns-prefetch",t,null)}function dw(t,s){wr.C(t,s),_b("preconnect",t,s)}function hw(t,s,i){wr.L(t,s,i);var l=so;if(l&&t&&s){var p='link[rel="preload"][as="'+En(s)+'"]';s==="image"&&i&&i.imageSrcSet?(p+='[imagesrcset="'+En(i.imageSrcSet)+'"]',typeof i.imageSizes=="string"&&(p+='[imagesizes="'+En(i.imageSizes)+'"]')):p+='[href="'+En(t)+'"]';var g=p;switch(s){case"style":g=ro(t);break;case"script":g=ao(t)}os.has(g)||(t=_({rel:"preload",href:s==="image"&&i&&i.imageSrcSet?void 0:t,as:s},i),os.set(g,t),l.querySelector(p)!==null||s==="style"&&l.querySelector(Tl(g))||s==="script"&&l.querySelector(Nl(g))||(s=l.createElement("link"),mn(s,"link",t),Ht(s),l.head.appendChild(s)))}}function fw(t,s){wr.m(t,s);var i=so;if(i&&t){var l=s&&typeof s.as=="string"?s.as:"script",p='link[rel="modulepreload"][as="'+En(l)+'"][href="'+En(t)+'"]',g=p;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ao(t)}if(!os.has(g)&&(t=_({rel:"modulepreload",href:t},s),os.set(g,t),i.querySelector(p)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Nl(g)))return}l=i.createElement("link"),mn(l,"link",t),Ht(l),i.head.appendChild(l)}}}function pw(t,s,i){wr.S(t,s,i);var l=so;if(l&&t){var p=Ds(l).hoistableStyles,g=ro(t);s=s||"default";var w=p.get(g);if(!w){var P={loading:0,preload:null};if(w=l.querySelector(Tl(g)))P.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":s},i),(i=os.get(g))&&Rf(t,i);var Y=w=l.createElement("link");Ht(Y),mn(Y,"link",t),Y._p=new Promise(function(ue,xe){Y.onload=ue,Y.onerror=xe}),Y.addEventListener("load",function(){P.loading|=1}),Y.addEventListener("error",function(){P.loading|=2}),P.loading|=4,Lu(w,s,l)}w={type:"stylesheet",instance:w,count:1,state:P},p.set(g,w)}}}function mw(t,s){wr.X(t,s);var i=so;if(i&&t){var l=Ds(i).hoistableScripts,p=ao(t),g=l.get(p);g||(g=i.querySelector(Nl(p)),g||(t=_({src:t,async:!0},s),(s=os.get(p))&&Df(t,s),g=i.createElement("script"),Ht(g),mn(g,"link",t),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(p,g))}}function gw(t,s){wr.M(t,s);var i=so;if(i&&t){var l=Ds(i).hoistableScripts,p=ao(t),g=l.get(p);g||(g=i.querySelector(Nl(p)),g||(t=_({src:t,async:!0,type:"module"},s),(s=os.get(p))&&Df(t,s),g=i.createElement("script"),Ht(g),mn(g,"link",t),i.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(p,g))}}function xb(t,s,i,l){var p=(p=Ae.current)?Iu(p):null;if(!p)throw Error(a(446));switch(t){case"meta":case"title":return null;case"style":return typeof i.precedence=="string"&&typeof i.href=="string"?(s=ro(i.href),i=Ds(p).hoistableStyles,l=i.get(s),l||(l={type:"style",instance:null,count:0,state:null},i.set(s,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(i.rel==="stylesheet"&&typeof i.href=="string"&&typeof i.precedence=="string"){t=ro(i.href);var g=Ds(p).hoistableStyles,w=g.get(t);if(w||(p=p.ownerDocument||p,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(t,w),(g=p.querySelector(Tl(t)))&&!g._p&&(w.instance=g,w.state.loading=5),os.has(t)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},os.set(t,i),g||bw(p,t,i,w.state))),s&&l===null)throw Error(a(528,""));return w}if(s&&l!==null)throw Error(a(529,""));return null;case"script":return s=i.async,i=i.src,typeof i=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ao(i),i=Ds(p).hoistableScripts,l=i.get(s),l||(l={type:"script",instance:null,count:0,state:null},i.set(s,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,t))}}function ro(t){return'href="'+En(t)+'"'}function Tl(t){return'link[rel="stylesheet"]['+t+"]"}function wb(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function bw(t,s,i,l){t.querySelector('link[rel="preload"][as="style"]['+s+"]")?l.loading=1:(s=t.createElement("link"),l.preload=s,s.addEventListener("load",function(){return l.loading|=1}),s.addEventListener("error",function(){return l.loading|=2}),mn(s,"link",i),Ht(s),t.head.appendChild(s))}function ao(t){return'[src="'+En(t)+'"]'}function Nl(t){return"script[async]"+t}function kb(t,s,i){if(s.count++,s.instance===null)switch(s.type){case"style":var l=t.querySelector('style[data-href~="'+En(i.href)+'"]');if(l)return s.instance=l,Ht(l),l;var p=_({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Ht(l),mn(l,"style",p),Lu(l,i.precedence,t),s.instance=l;case"stylesheet":p=ro(i.href);var g=t.querySelector(Tl(p));if(g)return s.state.loading|=4,s.instance=g,Ht(g),g;l=wb(i),(p=os.get(p))&&Rf(l,p),g=(t.ownerDocument||t).createElement("link"),Ht(g);var w=g;return w._p=new Promise(function(P,Y){w.onload=P,w.onerror=Y}),mn(g,"link",l),s.state.loading|=4,Lu(g,i.precedence,t),s.instance=g;case"script":return g=ao(i.src),(p=t.querySelector(Nl(g)))?(s.instance=p,Ht(p),p):(l=i,(p=os.get(g))&&(l=_({},i),Df(l,p)),t=t.ownerDocument||t,p=t.createElement("script"),Ht(p),mn(p,"link",l),t.head.appendChild(p),s.instance=p);case"void":return null;default:throw Error(a(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(l=s.instance,s.state.loading|=4,Lu(l,i.precedence,t));return s.instance}function Lu(t,s,i){for(var l=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=l.length?l[l.length-1]:null,g=p,w=0;w<l.length;w++){var P=l[w];if(P.dataset.precedence===s)g=P;else if(g!==p)break}g?g.parentNode.insertBefore(t,g.nextSibling):(s=i.nodeType===9?i.head:i,s.insertBefore(t,s.firstChild))}function Rf(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.title==null&&(t.title=s.title)}function Df(t,s){t.crossOrigin==null&&(t.crossOrigin=s.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=s.referrerPolicy),t.integrity==null&&(t.integrity=s.integrity)}var Uu=null;function Sb(t,s,i){if(Uu===null){var l=new Map,p=Uu=new Map;p.set(i,l)}else p=Uu,l=p.get(i),l||(l=new Map,p.set(i,l));if(l.has(t))return l;for(l.set(t,null),i=i.getElementsByTagName(t),p=0;p<i.length;p++){var g=i[p];if(!(g[js]||g[jt]||t==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var w=g.getAttribute(s)||"";w=t+w;var P=l.get(w);P?P.push(g):l.set(w,[g])}}return l}function Eb(t,s,i){t=t.ownerDocument||t,t.head.insertBefore(i,s==="title"?t.querySelector("head > title"):null)}function yw(t,s,i){if(i===1||s.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return t=s.disabled,typeof s.precedence=="string"&&t==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function Ab(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function vw(t,s,i,l){if(i.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var p=ro(l.href),g=s.querySelector(Tl(p));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(t.count++,t=Mu.bind(t),s.then(t,t)),i.state.loading|=4,i.instance=g,Ht(g);return}g=s.ownerDocument||s,l=wb(l),(p=os.get(p))&&Rf(l,p),g=g.createElement("link"),Ht(g);var w=g;w._p=new Promise(function(P,Y){w.onload=P,w.onerror=Y}),mn(g,"link",l),i.instance=g}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(t.count++,i=Mu.bind(t),s.addEventListener("load",i),s.addEventListener("error",i))}}var Of=0;function _w(t,s){return t.stylesheets&&t.count===0&&zu(t,t.stylesheets),0<t.count||0<t.imgCount?function(i){var l=setTimeout(function(){if(t.stylesheets&&zu(t,t.stylesheets),t.unsuspend){var g=t.unsuspend;t.unsuspend=null,g()}},6e4+s);0<t.imgBytes&&Of===0&&(Of=62500*ew());var p=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&zu(t,t.stylesheets),t.unsuspend)){var g=t.unsuspend;t.unsuspend=null,g()}},(t.imgBytes>Of?50:800)+s);return t.unsuspend=i,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(p)}}:null}function Mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zu(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Pu=null;function zu(t,s){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Pu=new Map,s.forEach(xw,t),Pu=null,Mu.call(t))}function xw(t,s){if(!(s.state.loading&4)){var i=Pu.get(t);if(i)var l=i.get(null);else{i=new Map,Pu.set(t,i);for(var p=t.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<p.length;g++){var w=p[g];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(i.set(w.dataset.precedence,w),l=w)}l&&i.set(null,l)}p=s.instance,w=p.getAttribute("data-precedence"),g=i.get(w)||l,g===l&&i.set(null,p),i.set(w,p),this.count++,l=Mu.bind(this),p.addEventListener("load",l),p.addEventListener("error",l),g?g.parentNode.insertBefore(p,g.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(p,t.firstChild)),s.state.loading|=4}}var Cl={$$typeof:z,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function ww(t,s,i,l,p,g,w,P,Y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wn(0),this.hiddenUpdates=Wn(null),this.identifierPrefix=l,this.onUncaughtError=p,this.onCaughtError=g,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function Tb(t,s,i,l,p,g,w,P,Y,ue,xe,Ee){return t=new ww(t,s,i,w,Y,ue,xe,Ee,P),s=1,g===!0&&(s|=24),g=Mn(3,null,null,s),t.current=g,g.stateNode=t,s=dh(),s.refCount++,t.pooledCache=s,s.refCount++,g.memoizedState={element:l,isDehydrated:i,cache:s},mh(g),t}function Nb(t){return t?(t=Ui,t):Ui}function Cb(t,s,i,l,p,g){p=Nb(p),l.context===null?l.context=p:l.pendingContext=p,l=Yr(s),l.payload={element:i},g=g===void 0?null:g,g!==null&&(l.callback=g),i=Wr(t,l,s),i!==null&&(Rn(i,t,s),ol(i,t,s))}function jb(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<s?i:s}}function If(t,s){jb(t,s),(t=t.alternate)&&jb(t,s)}function Rb(t){if(t.tag===13||t.tag===31){var s=Pa(t,67108864);s!==null&&Rn(s,t,67108864),If(t,67108864)}}function Db(t){if(t.tag===13||t.tag===31){var s=Fn();s=Ye(s);var i=Pa(t,s);i!==null&&Rn(i,t,s),If(t,s)}}var Bu=!0;function kw(t,s,i,l){var p=Q.T;Q.T=null;var g=X.p;try{X.p=2,Lf(t,s,i,l)}finally{X.p=g,Q.T=p}}function Sw(t,s,i,l){var p=Q.T;Q.T=null;var g=X.p;try{X.p=8,Lf(t,s,i,l)}finally{X.p=g,Q.T=p}}function Lf(t,s,i,l){if(Bu){var p=Uf(l);if(p===null)xf(t,s,l,$u,i),Ib(t,l);else if(Aw(p,t,s,i,l))l.stopPropagation();else if(Ib(t,l),s&4&&-1<Ew.indexOf(t)){for(;p!==null;){var g=Xn(p);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var w=un(g.pendingLanes);if(w!==0){var P=g;for(P.pendingLanes|=2,P.entangledLanes|=2;w;){var Y=1<<31-ht(w);P.entanglements[1]|=Y,w&=~Y}Hs(g),(mt&6)===0&&(ku=je()+500,kl(0))}}break;case 31:case 13:P=Pa(g,2),P!==null&&Rn(P,g,2),Eu(),If(g,2)}if(g=Uf(l),g===null&&xf(t,s,l,$u,i),g===p)break;p=g}p!==null&&l.stopPropagation()}else xf(t,s,l,null,i)}}function Uf(t){return t=Zn(t),Mf(t)}var $u=null;function Mf(t){if($u=null,t=Rs(t),t!==null){var s=c(t);if(s===null)t=null;else{var i=s.tag;if(i===13){if(t=u(s),t!==null)return t;t=null}else if(i===31){if(t=f(s),t!==null)return t;t=null}else if(i===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null)}}return $u=t,null}function Ob(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Pe:return 2;case et:return 8;case Je:case sn:return 32;case Kn:return 268435456;default:return 32}default:return 32}}var Pf=!1,oa=null,la=null,ca=null,jl=new Map,Rl=new Map,ua=[],Ew="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ib(t,s){switch(t){case"focusin":case"focusout":oa=null;break;case"dragenter":case"dragleave":la=null;break;case"mouseover":case"mouseout":ca=null;break;case"pointerover":case"pointerout":jl.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rl.delete(s.pointerId)}}function Dl(t,s,i,l,p,g){return t===null||t.nativeEvent!==g?(t={blockedOn:s,domEventName:i,eventSystemFlags:l,nativeEvent:g,targetContainers:[p]},s!==null&&(s=Xn(s),s!==null&&Rb(s)),t):(t.eventSystemFlags|=l,s=t.targetContainers,p!==null&&s.indexOf(p)===-1&&s.push(p),t)}function Aw(t,s,i,l,p){switch(s){case"focusin":return oa=Dl(oa,t,s,i,l,p),!0;case"dragenter":return la=Dl(la,t,s,i,l,p),!0;case"mouseover":return ca=Dl(ca,t,s,i,l,p),!0;case"pointerover":var g=p.pointerId;return jl.set(g,Dl(jl.get(g)||null,t,s,i,l,p)),!0;case"gotpointercapture":return g=p.pointerId,Rl.set(g,Dl(Rl.get(g)||null,t,s,i,l,p)),!0}return!1}function Lb(t){var s=Rs(t.target);if(s!==null){var i=c(s);if(i!==null){if(s=i.tag,s===13){if(s=u(i),s!==null){t.blockedOn=s,Lt(t.priority,function(){Db(i)});return}}else if(s===31){if(s=f(i),s!==null){t.blockedOn=s,Lt(t.priority,function(){Db(i)});return}}else if(s===3&&i.stateNode.current.memoizedState.isDehydrated){t.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fu(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var i=Uf(t.nativeEvent);if(i===null){i=t.nativeEvent;var l=new i.constructor(i.type,i);qo=l,i.target.dispatchEvent(l),qo=null}else return s=Xn(i),s!==null&&Rb(s),t.blockedOn=i,!1;s.shift()}return!0}function Ub(t,s,i){Fu(t)&&i.delete(s)}function Tw(){Pf=!1,oa!==null&&Fu(oa)&&(oa=null),la!==null&&Fu(la)&&(la=null),ca!==null&&Fu(ca)&&(ca=null),jl.forEach(Ub),Rl.forEach(Ub)}function Vu(t,s){t.blockedOn===s&&(t.blockedOn=null,Pf||(Pf=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Tw)))}var Hu=null;function Mb(t){Hu!==t&&(Hu=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Hu===t&&(Hu=null);for(var s=0;s<t.length;s+=3){var i=t[s],l=t[s+1],p=t[s+2];if(typeof l!="function"){if(Mf(l||i)===null)continue;break}var g=Xn(i);g!==null&&(t.splice(s,3),s-=3,Lh(g,{pending:!0,data:p,method:i.method,action:l},l,p))}}))}function io(t){function s(Y){return Vu(Y,t)}oa!==null&&Vu(oa,t),la!==null&&Vu(la,t),ca!==null&&Vu(ca,t),jl.forEach(s),Rl.forEach(s);for(var i=0;i<ua.length;i++){var l=ua[i];l.blockedOn===t&&(l.blockedOn=null)}for(;0<ua.length&&(i=ua[0],i.blockedOn===null);)Lb(i),i.blockedOn===null&&ua.shift();if(i=(t.ownerDocument||t).$$reactFormReplay,i!=null)for(l=0;l<i.length;l+=3){var p=i[l],g=i[l+1],w=p[an]||null;if(typeof g=="function")w||Mb(i);else if(w){var P=null;if(g&&g.hasAttribute("formAction")){if(p=g,w=g[an]||null)P=w.formAction;else if(Mf(p)!==null)continue}else P=w.action;typeof P=="function"?i[l+1]=P:(i.splice(l,3),l-=3),Mb(i)}}}function Pb(){function t(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(w){return p=w})},focusReset:"manual",scroll:"manual"})}function s(){p!==null&&(p(),p=null),l||setTimeout(i,20)}function i(){if(!l&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,p=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(i,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),p!==null&&(p(),p=null)}}}function zf(t){this._internalRoot=t}qu.prototype.render=zf.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(a(409));var i=s.current,l=Fn();Cb(i,l,t,s,null,null)},qu.prototype.unmount=zf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Cb(t.current,2,null,t,null,null),Eu(),s[Cs]=null}};function qu(t){this._internalRoot=t}qu.prototype.unstable_scheduleHydration=function(t){if(t){var s=On();t={blockedOn:null,target:t,priority:s};for(var i=0;i<ua.length&&s!==0&&s<ua[i].priority;i++);ua.splice(i,0,t),i===0&&Lb(t)}};var zb=e.version;if(zb!=="19.2.4")throw Error(a(527,zb,"19.2.4"));X.findDOMNode=function(t){var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(a(188)):(t=Object.keys(t).join(","),Error(a(268,t)));return t=b(s),t=t!==null?x(t):null,t=t===null?null:t.stateNode,t};var Nw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gu.isDisabled&&Gu.supportsFiber)try{ot=Gu.inject(Nw),nt=Gu}catch{}}return Il.createRoot=function(t,s){if(!o(t))throw Error(a(299));var i=!1,l="",p=Gm,g=Km,w=Jm;return s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onUncaughtError!==void 0&&(p=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(w=s.onRecoverableError)),s=Tb(t,1,!1,null,null,i,l,null,p,g,w,Pb),t[Cs]=s.current,_f(t),new zf(s)},Il.hydrateRoot=function(t,s,i){if(!o(t))throw Error(a(299));var l=!1,p="",g=Gm,w=Km,P=Jm,Y=null;return i!=null&&(i.unstable_strictMode===!0&&(l=!0),i.identifierPrefix!==void 0&&(p=i.identifierPrefix),i.onUncaughtError!==void 0&&(g=i.onUncaughtError),i.onCaughtError!==void 0&&(w=i.onCaughtError),i.onRecoverableError!==void 0&&(P=i.onRecoverableError),i.formState!==void 0&&(Y=i.formState)),s=Tb(t,1,!0,s,i??null,l,p,Y,g,w,P,Pb),s.context=Nb(null),i=s.current,l=Fn(),l=Ye(l),p=Yr(l),p.callback=null,Wr(i,p,l),i=l,s.current.lanes=i,rr(s,i),Hs(s),t[Cs]=s.current,_f(t),new qu(s)},Il.version="19.2.4",Il}var qb;function Mw(){if(qb)return $f.exports;qb=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),$f.exports=Uw(),$f.exports}var Pw=Mw();const zw=Hp(Pw),Bw="modulepreload",$w=function(r){return"/"+r},Gb={},cs=function(e,n,a){let o=Promise.resolve();if(n&&n.length>0){let u=function(b){return Promise.all(b.map(x=>Promise.resolve(x).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));o=u(n.map(b=>{if(b=$w(b),b in Gb)return;Gb[b]=!0;const x=b.endsWith(".css"),_=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${b}"]${_}`))return;const E=document.createElement("link");if(E.rel=x?"stylesheet":Bw,x||(E.as="script"),E.crossOrigin="",E.href=b,m&&E.setAttribute("nonce",m),document.head.appendChild(E),x)return new Promise((y,A)=>{E.addEventListener("load",y),E.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${b}`)))})}))}function c(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return o.then(u=>{for(const f of u||[])f.status==="rejected"&&c(f.reason);return e().catch(c)})},Fw=()=>{};var Kb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=function(r){const e=[];let n=0;for(let a=0;a<r.length;a++){let o=r.charCodeAt(a);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&a+1<r.length&&(r.charCodeAt(a+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++a)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},Vw=function(r){const e=[];let n=0,a=0;for(;n<r.length;){const o=r[n++];if(o<128)e[a++]=String.fromCharCode(o);else if(o>191&&o<224){const c=r[n++];e[a++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=r[n++],u=r[n++],f=r[n++],m=((o&7)<<18|(c&63)<<12|(u&63)<<6|f&63)-65536;e[a++]=String.fromCharCode(55296+(m>>10)),e[a++]=String.fromCharCode(56320+(m&1023))}else{const c=r[n++],u=r[n++];e[a++]=String.fromCharCode((o&15)<<12|(c&63)<<6|u&63)}}return e.join("")},Qv={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let o=0;o<r.length;o+=3){const c=r[o],u=o+1<r.length,f=u?r[o+1]:0,m=o+2<r.length,b=m?r[o+2]:0,x=c>>2,_=(c&3)<<4|f>>4;let E=(f&15)<<2|b>>6,y=b&63;m||(y=64,u||(E=64)),a.push(n[x],n[_],n[E],n[y])}return a.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(Zv(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):Vw(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let o=0;o<r.length;){const c=n[r.charAt(o++)],f=o<r.length?n[r.charAt(o)]:0;++o;const b=o<r.length?n[r.charAt(o)]:64;++o;const _=o<r.length?n[r.charAt(o)]:64;if(++o,c==null||f==null||b==null||_==null)throw new Hw;const E=c<<2|f>>4;if(a.push(E),b!==64){const y=f<<4&240|b>>2;if(a.push(y),_!==64){const A=b<<6&192|_;a.push(A)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class Hw extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qw=function(r){const e=Zv(r);return Qv.encodeByteArray(e,!0)},md=function(r){return qw(r).replace(/\./g,"")},e1=function(r){try{return Qv.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kw=()=>Gw().__FIREBASE_DEFAULTS__,Jw=()=>{if(typeof process>"u"||typeof Kb>"u")return;const r=Kb.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},Yw=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&e1(r[1]);return e&&JSON.parse(e)},qp=()=>{try{return Fw()||Kw()||Jw()||Yw()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},t1=r=>{var e,n;return(n=(e=qp())==null?void 0:e.emulatorHosts)==null?void 0:n[r]},n1=r=>{const e=t1(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const a=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),a]:[e.substring(0,n),a]},s1=()=>{var r;return(r=qp())==null?void 0:r.config},r1=r=>{var e;return(e=qp())==null?void 0:e[`_${r}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ww=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,a)=>{n?this.reject(n):this.resolve(a),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,a))}}};/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Gp(r){return(await fetch(r,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},a=e||"demo-project",o=r.iat||0,c=r.sub||r.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u={iss:`https://securetoken.google.com/${a}`,aud:a,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...r};return[md(JSON.stringify(n)),md(JSON.stringify(u)),""].join(".")}const ql={};function Xw(){const r={prod:[],emulator:[]};for(const e of Object.keys(ql))ql[e]?r.emulator.push(e):r.prod.push(e);return r}function Zw(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let Jb=!1;function Kp(r,e){if(typeof window>"u"||typeof document>"u"||!Ro(window.location.host)||ql[r]===e||ql[r]||Jb)return;ql[r]=e;function n(E){return`__firebase__banner__${E}`}const a="__firebase__banner",c=Xw().prod.length>0;function u(){const E=document.getElementById(a);E&&E.remove()}function f(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function m(E,y){E.setAttribute("width","24"),E.setAttribute("id",y),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function b(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{Jb=!0,u()},E}function x(E,y){E.setAttribute("id",y),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function _(){const E=Zw(a),y=n("text"),A=document.getElementById(y)||document.createElement("span"),k=n("learnmore"),N=document.getElementById(k)||document.createElement("a"),C=n("preprendIcon"),I=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const z=E.element;f(z),x(N,k);const V=b();m(I,C),z.append(I,A,N,V),document.body.appendChild(z)}c?(A.innerText="Preview backend disconnected.",I.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(I.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qw(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wn())}function e2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function t2(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function n2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function s2(){const r=wn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function r2(){try{return typeof indexedDB=="object"}catch{return!1}}function a2(){return new Promise((r,e)=>{try{let n=!0;const a="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(a);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(a),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)==null?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2="FirebaseError";class tr extends Error{constructor(e,n,a){super(n),this.code=e,this.customData=a,this.name=i2,Object.setPrototypeOf(this,tr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mc.prototype.create)}}class mc{constructor(e,n,a){this.service=e,this.serviceName=n,this.errors=a}create(e,...n){const a=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],u=c?o2(c,a):"Error",f=`${this.serviceName}: ${u} (${o}).`;return new tr(o,f,a)}}function o2(r,e){return r.replace(l2,(n,a)=>{const o=e[a];return o!=null?String(o):`<${a}?>`})}const l2=/\{\$([^}]+)}/g;function c2(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ui(r,e){if(r===e)return!0;const n=Object.keys(r),a=Object.keys(e);for(const o of n){if(!a.includes(o))return!1;const c=r[o],u=e[o];if(Yb(c)&&Yb(u)){if(!ui(c,u))return!1}else if(c!==u)return!1}for(const o of a)if(!n.includes(o))return!1;return!0}function Yb(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gc(r){const e=[];for(const[n,a]of Object.entries(r))Array.isArray(a)?a.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(a));return e.length?"&"+e.join("&"):""}function $l(r){const e={};return r.replace(/^\?/,"").split("&").forEach(a=>{if(a){const[o,c]=a.split("=");e[decodeURIComponent(o)]=decodeURIComponent(c)}}),e}function Fl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function u2(r,e){const n=new d2(r,e);return n.subscribe.bind(n)}class d2{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(a=>{this.error(a)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,a){let o;if(e===void 0&&n===void 0&&a===void 0)throw new Error("Missing Observer.");h2(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:a},o.next===void 0&&(o.next=Hf),o.error===void 0&&(o.error=Hf),o.complete===void 0&&(o.complete=Hf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function h2(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function us(r){return r&&r._delegate?r._delegate:r}class ka{constructor(e,n,a){this.name=e,this.instanceFactory=n,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const a=new Ww;if(this.instancesDeferred.set(n,a),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&a.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(a)return null;throw o}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(m2(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch{}for(const[n,a]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});a.resolve(c)}catch{}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,a=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:a,options:n});for(const[c,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(c);a===f&&u.resolve(o)}return o}onInit(e,n){const a=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(a)??new Set;o.add(e),this.onInitCallbacks.set(a,o);const c=this.instances.get(a);return c&&e(c,a),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const a=this.onInitCallbacks.get(n);if(a)for(const o of a)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let a=this.instances.get(e);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:p2(e),options:n}),this.instances.set(e,a),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(a,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,a)}catch{}return a||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function p2(r){return r===Qa?void 0:r}function m2(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new f2(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gt;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(gt||(gt={}));const b2={debug:gt.DEBUG,verbose:gt.VERBOSE,info:gt.INFO,warn:gt.WARN,error:gt.ERROR,silent:gt.SILENT},y2=gt.INFO,v2={[gt.DEBUG]:"log",[gt.VERBOSE]:"log",[gt.INFO]:"info",[gt.WARN]:"warn",[gt.ERROR]:"error"},_2=(r,e,...n)=>{if(e<r.logLevel)return;const a=new Date().toISOString(),o=v2[e];if(o)console[o](`[${a}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Jp{constructor(e){this.name=e,this._logLevel=y2,this._logHandler=_2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in gt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?b2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,gt.DEBUG,...e),this._logHandler(this,gt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,gt.VERBOSE,...e),this._logHandler(this,gt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,gt.INFO,...e),this._logHandler(this,gt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,gt.WARN,...e),this._logHandler(this,gt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,gt.ERROR,...e),this._logHandler(this,gt.ERROR,...e)}}const x2=(r,e)=>e.some(n=>r instanceof n);let Wb,Xb;function w2(){return Wb||(Wb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k2(){return Xb||(Xb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const i1=new WeakMap,bp=new WeakMap,o1=new WeakMap,qf=new WeakMap,Yp=new WeakMap;function S2(r){const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("success",c),r.removeEventListener("error",u)},c=()=>{n(xa(r.result)),o()},u=()=>{a(r.error),o()};r.addEventListener("success",c),r.addEventListener("error",u)});return e.then(n=>{n instanceof IDBCursor&&i1.set(n,r)}).catch(()=>{}),Yp.set(e,r),e}function E2(r){if(bp.has(r))return;const e=new Promise((n,a)=>{const o=()=>{r.removeEventListener("complete",c),r.removeEventListener("error",u),r.removeEventListener("abort",u)},c=()=>{n(),o()},u=()=>{a(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",c),r.addEventListener("error",u),r.addEventListener("abort",u)});bp.set(r,e)}let yp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return bp.get(r);if(e==="objectStoreNames")return r.objectStoreNames||o1.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xa(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function A2(r){yp=r(yp)}function T2(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const a=r.call(Gf(this),e,...n);return o1.set(a,e.sort?e.sort():[e]),xa(a)}:k2().includes(r)?function(...e){return r.apply(Gf(this),e),xa(i1.get(this))}:function(...e){return xa(r.apply(Gf(this),e))}}function N2(r){return typeof r=="function"?T2(r):(r instanceof IDBTransaction&&E2(r),x2(r,w2())?new Proxy(r,yp):r)}function xa(r){if(r instanceof IDBRequest)return S2(r);if(qf.has(r))return qf.get(r);const e=N2(r);return e!==r&&(qf.set(r,e),Yp.set(e,r)),e}const Gf=r=>Yp.get(r);function C2(r,e,{blocked:n,upgrade:a,blocking:o,terminated:c}={}){const u=indexedDB.open(r,e),f=xa(u);return a&&u.addEventListener("upgradeneeded",m=>{a(xa(u.result),m.oldVersion,m.newVersion,xa(u.transaction),m)}),n&&u.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),f.then(m=>{c&&m.addEventListener("close",()=>c()),o&&m.addEventListener("versionchange",b=>o(b.oldVersion,b.newVersion,b))}).catch(()=>{}),f}const j2=["get","getKey","getAll","getAllKeys","count"],R2=["put","add","delete","clear"],Kf=new Map;function Zb(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Kf.get(e))return Kf.get(e);const n=e.replace(/FromIndex$/,""),a=e!==n,o=R2.includes(n);if(!(n in(a?IDBIndex:IDBObjectStore).prototype)||!(o||j2.includes(n)))return;const c=async function(u,...f){const m=this.transaction(u,o?"readwrite":"readonly");let b=m.store;return a&&(b=b.index(f.shift())),(await Promise.all([b[n](...f),o&&m.done]))[0]};return Kf.set(e,c),c}A2(r=>({...r,get:(e,n,a)=>Zb(e,n)||r.get(e,n,a),has:(e,n)=>!!Zb(e,n)||r.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(O2(n)){const a=n.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(n=>n).join(" ")}}function O2(r){const e=r.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vp="@firebase/app",Qb="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cr=new Jp("@firebase/app"),I2="@firebase/app-compat",L2="@firebase/analytics-compat",U2="@firebase/analytics",M2="@firebase/app-check-compat",P2="@firebase/app-check",z2="@firebase/auth",B2="@firebase/auth-compat",$2="@firebase/database",F2="@firebase/data-connect",V2="@firebase/database-compat",H2="@firebase/functions",q2="@firebase/functions-compat",G2="@firebase/installations",K2="@firebase/installations-compat",J2="@firebase/messaging",Y2="@firebase/messaging-compat",W2="@firebase/performance",X2="@firebase/performance-compat",Z2="@firebase/remote-config",Q2="@firebase/remote-config-compat",ek="@firebase/storage",tk="@firebase/storage-compat",nk="@firebase/firestore",sk="@firebase/ai",rk="@firebase/firestore-compat",ak="firebase",ik="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p="[DEFAULT]",ok={[vp]:"fire-core",[I2]:"fire-core-compat",[U2]:"fire-analytics",[L2]:"fire-analytics-compat",[P2]:"fire-app-check",[M2]:"fire-app-check-compat",[z2]:"fire-auth",[B2]:"fire-auth-compat",[$2]:"fire-rtdb",[F2]:"fire-data-connect",[V2]:"fire-rtdb-compat",[H2]:"fire-fn",[q2]:"fire-fn-compat",[G2]:"fire-iid",[K2]:"fire-iid-compat",[J2]:"fire-fcm",[Y2]:"fire-fcm-compat",[W2]:"fire-perf",[X2]:"fire-perf-compat",[Z2]:"fire-rc",[Q2]:"fire-rc-compat",[ek]:"fire-gcs",[tk]:"fire-gcs-compat",[nk]:"fire-fst",[rk]:"fire-fst-compat",[sk]:"fire-vertex","fire-js":"fire-js",[ak]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=new Map,lk=new Map,xp=new Map;function ey(r,e){try{r.container.addComponent(e)}catch(n){Cr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function di(r){const e=r.name;if(xp.has(e))return Cr.debug(`There were multiple attempts to register component ${e}.`),!1;xp.set(e,r);for(const n of gd.values())ey(n,r);for(const n of lk.values())ey(n,r);return!0}function Ld(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Hn(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ck={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},wa=new mc("app","Firebase",ck);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uk{constructor(e,n,a){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new ka("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw wa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bi=ik;function l1(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const a={name:_p,automaticDataCollectionEnabled:!0,...e},o=a.name;if(typeof o!="string"||!o)throw wa.create("bad-app-name",{appName:String(o)});if(n||(n=s1()),!n)throw wa.create("no-options");const c=gd.get(o);if(c){if(ui(n,c.options)&&ui(a,c.config))return c;throw wa.create("duplicate-app",{appName:o})}const u=new g2(o);for(const m of xp.values())u.addComponent(m);const f=new uk(n,a,u);return gd.set(o,f),f}function Wp(r=_p){const e=gd.get(r);if(!e&&r===_p&&s1())return l1();if(!e)throw wa.create("no-app",{appName:r});return e}function Ys(r,e,n){let a=ok[r]??r;n&&(a+=`-${n}`);const o=a.match(/\s|\//),c=e.match(/\s|\//);if(o||c){const u=[`Unable to register library "${a}" with version "${e}":`];o&&u.push(`library name "${a}" contains illegal characters (whitespace or "/")`),o&&c&&u.push("and"),c&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Cr.warn(u.join(" "));return}di(new ka(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk="firebase-heartbeat-database",hk=1,tc="firebase-heartbeat-store";let Jf=null;function c1(){return Jf||(Jf=C2(dk,hk,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(tc)}catch(n){console.warn(n)}}}}).catch(r=>{throw wa.create("idb-open",{originalErrorMessage:r.message})})),Jf}async function fk(r){try{const n=(await c1()).transaction(tc),a=await n.objectStore(tc).get(u1(r));return await n.done,a}catch(e){if(e instanceof tr)Cr.warn(e.message);else{const n=wa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Cr.warn(n.message)}}}async function ty(r,e){try{const a=(await c1()).transaction(tc,"readwrite");await a.objectStore(tc).put(e,u1(r)),await a.done}catch(n){if(n instanceof tr)Cr.warn(n.message);else{const a=wa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Cr.warn(a.message)}}}function u1(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk=1024,mk=30;class gk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new yk(n),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=ny();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(u=>u.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>mk){const u=vk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(a){Cr.warn(a)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ny(),{heartbeatsToSend:a,unsentEntries:o}=bk(this._heartbeatsCache.heartbeats),c=md(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return Cr.warn(n),""}}}function ny(){return new Date().toISOString().substring(0,10)}function bk(r,e=pk){const n=[];let a=r.slice();for(const o of r){const c=n.find(u=>u.agent===o.agent);if(c){if(c.dates.push(o.date),sy(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),sy(n)>e){n.pop();break}a=a.slice(1)}return{heartbeatsToSend:n,unsentEntries:a}}class yk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return r2()?a2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await fk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const a=await this.read();return ty(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function sy(r){return md(JSON.stringify({version:2,heartbeats:r})).length}function vk(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let a=1;a<r.length;a++)r[a].date<n&&(n=r[a].date,e=a);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _k(r){di(new ka("platform-logger",e=>new D2(e),"PRIVATE")),di(new ka("heartbeat",e=>new gk(e),"PRIVATE")),Ys(vp,Qb,r),Ys(vp,Qb,"esm2020"),Ys("fire-js","")}_k("");function d1(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xk=d1,h1=new mc("auth","Firebase",d1());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bd=new Jp("@firebase/auth");function wk(r,...e){bd.logLevel<=gt.WARN&&bd.warn(`Auth (${bi}): ${r}`,...e)}function cd(r,...e){bd.logLevel<=gt.ERROR&&bd.error(`Auth (${bi}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ns(r,...e){throw Xp(r,...e)}function Ws(r,...e){return Xp(r,...e)}function f1(r,e,n){const a={...xk(),[e]:n};return new mc("auth","Firebase",a).create(e,{appName:r.name})}function Nr(r){return f1(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Xp(r,...e){if(typeof r!="string"){const n=e[0],a=[...e.slice(1)];return a[0]&&(a[0].appName=r.name),r._errorFactory.create(n,...a)}return h1.create(r,...e)}function Ke(r,e,...n){if(!r)throw Xp(e,...n)}function Ar(r){const e="INTERNAL ASSERTION FAILED: "+r;throw cd(e),new Error(e)}function jr(r,e){r||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wp(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.href)||""}function kk(){return ry()==="http:"||ry()==="https:"}function ry(){var r;return typeof self<"u"&&((r=self.location)==null?void 0:r.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(kk()||t2()||"connection"in navigator)?navigator.onLine:!0}function Ek(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=Qw()||n2()}get(){return Sk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zp(r,e){jr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{static initialize(e,n,a){this.fetchImpl=e,n&&(this.headersImpl=n),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Nk=new bc(3e4,6e4);function Rr(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Dr(r,e,n,a,o={}){return m1(r,o,async()=>{let c={},u={};a&&(e==="GET"?u=a:c={body:JSON.stringify(a)});const f=gc({key:r.config.apiKey,...u}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const b={method:e,headers:m,...c};return e2()||(b.referrerPolicy="no-referrer"),r.emulatorConfig&&Ro(r.emulatorConfig.host)&&(b.credentials="include"),p1.fetch()(await g1(r,r.config.apiHost,n,f),b)})}async function m1(r,e,n){r._canInitEmulator=!1;const a={...Ak,...e};try{const o=new jk(r),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const u=await c.json();if("needConfirmation"in u)throw Ju(r,"account-exists-with-different-credential",u);if(c.ok&&!("errorMessage"in u))return u;{const f=c.ok?u.errorMessage:u.error.message,[m,b]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ju(r,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw Ju(r,"email-already-in-use",u);if(m==="USER_DISABLED")throw Ju(r,"user-disabled",u);const x=a[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(b)throw f1(r,x,b);Ns(r,x)}}catch(o){if(o instanceof tr)throw o;Ns(r,"network-request-failed",{message:String(o)})}}async function yc(r,e,n,a,o={}){const c=await Dr(r,e,n,a,o);return"mfaPendingCredential"in c&&Ns(r,"multi-factor-auth-required",{_serverResponse:c}),c}async function g1(r,e,n,a){const o=`${e}${n}?${a}`,c=r,u=c.config.emulator?Zp(r.config,o):`${r.config.apiScheme}://${o}`;return Tk.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(u).toString():u}function Ck(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class jk{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,a)=>{this.timer=setTimeout(()=>a(Ws(this.auth,"network-request-failed")),Nk.get())})}}function Ju(r,e,n){const a={appName:r.name};n.email&&(a.email=n.email),n.phoneNumber&&(a.phoneNumber=n.phoneNumber);const o=Ws(r,e,a);return o.customData._tokenResponse=n,o}function ay(r){return r!==void 0&&r.enterprise!==void 0}class Rk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Ck(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Dk(r,e){return Dr(r,"GET","/v2/recaptchaConfig",Rr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(r,e){return Dr(r,"POST","/v1/accounts:delete",e)}async function yd(r,e){return Dr(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ik(r,e=!1){return us(r).getIdToken(e)}async function Lk(r,e=!1){const n=us(r),a=await n.getIdToken(e),o=Qp(a);Ke(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,u=c==null?void 0:c.sign_in_provider;return{claims:o,token:a,authTime:Gl(Yf(o.auth_time)),issuedAtTime:Gl(Yf(o.iat)),expirationTime:Gl(Yf(o.exp)),signInProvider:u||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function Yf(r){return Number(r)*1e3}function Qp(r){const[e,n,a]=r.split(".");if(e===void 0||n===void 0||a===void 0)return cd("JWT malformed, contained fewer than 3 sections"),null;try{const o=e1(n);return o?JSON.parse(o):(cd("Failed to decode base64 JWT payload"),null)}catch(o){return cd("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function iy(r){const e=Qp(r);return Ke(e,"internal-error"),Ke(typeof e.exp<"u","internal-error"),Ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(r,e,n=!1){if(n)return e;try{return await e}catch(a){throw a instanceof tr&&Uk(a)&&r.auth.currentUser===r&&await r.auth.signOut(),a}}function Uk({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const a=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vd(r){var _;const e=r.auth,n=await r.getIdToken(),a=await nc(r,yd(e,{idToken:n}));Ke(a==null?void 0:a.users.length,e,"internal-error");const o=a.users[0];r._notifyReloadListener(o);const c=(_=o.providerUserInfo)!=null&&_.length?b1(o.providerUserInfo):[],u=zk(r.providerData,c),f=r.isAnonymous,m=!(r.email&&o.passwordHash)&&!(u!=null&&u.length),b=f?m:!1,x={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new kp(o.createdAt,o.lastLoginAt),isAnonymous:b};Object.assign(r,x)}async function Pk(r){const e=us(r);await vd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zk(r,e){return[...r.filter(a=>!e.some(o=>o.providerId===a.providerId)),...e]}function b1(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bk(r,e){const n=await m1(r,{},async()=>{const a=gc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=r.config,u=await g1(r,o,"/v1/token",`key=${c}`),f=await r._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:a};return r.emulatorConfig&&Ro(r.emulatorConfig.host)&&(m.credentials="include"),p1.fetch()(u,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $k(r,e){return Dr(r,"POST","/v2/accounts:revokeToken",Rr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ke(e.idToken,"internal-error"),Ke(typeof e.idToken<"u","internal-error"),Ke(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ke(e.length!==0,"internal-error");const n=iy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:a,refreshToken:o,expiresIn:c}=await Bk(e,n);this.updateTokensAndExpiration(a,o,Number(c))}updateTokensAndExpiration(e,n,a){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(e,n){const{refreshToken:a,accessToken:o,expirationTime:c}=n,u=new ko;return a&&(Ke(typeof a=="string","internal-error",{appName:e}),u.refreshToken=a),o&&(Ke(typeof o=="string","internal-error",{appName:e}),u.accessToken=o),c&&(Ke(typeof c=="number","internal-error",{appName:e}),u.expirationTime=c),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ko,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ha(r,e){Ke(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class Ss{constructor({uid:e,auth:n,stsTokenManager:a,...o}){this.providerId="firebase",this.proactiveRefresh=new Mk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new kp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await nc(this,this.stsTokenManager.getToken(this.auth,e));return Ke(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Lk(this,e)}reload(){return Pk(this)}_assign(e){this!==e&&(Ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ss({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let a=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),a=!0),n&&await vd(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hn(this.auth.app))return Promise.reject(Nr(this.auth));const e=await this.getIdToken();return await nc(this,Ok(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const a=n.displayName??void 0,o=n.email??void 0,c=n.phoneNumber??void 0,u=n.photoURL??void 0,f=n.tenantId??void 0,m=n._redirectEventId??void 0,b=n.createdAt??void 0,x=n.lastLoginAt??void 0,{uid:_,emailVerified:E,isAnonymous:y,providerData:A,stsTokenManager:k}=n;Ke(_&&k,e,"internal-error");const N=ko.fromJSON(this.name,k);Ke(typeof _=="string",e,"internal-error"),ha(a,e.name),ha(o,e.name),Ke(typeof E=="boolean",e,"internal-error"),Ke(typeof y=="boolean",e,"internal-error"),ha(c,e.name),ha(u,e.name),ha(f,e.name),ha(m,e.name),ha(b,e.name),ha(x,e.name);const C=new Ss({uid:_,auth:e,email:o,emailVerified:E,displayName:a,isAnonymous:y,photoURL:u,phoneNumber:c,tenantId:f,stsTokenManager:N,createdAt:b,lastLoginAt:x});return A&&Array.isArray(A)&&(C.providerData=A.map(I=>({...I}))),m&&(C._redirectEventId=m),C}static async _fromIdTokenResponse(e,n,a=!1){const o=new ko;o.updateFromServerResponse(n);const c=new Ss({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:a});return await vd(c),c}static async _fromGetAccountInfoResponse(e,n,a){const o=n.users[0];Ke(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?b1(o.providerUserInfo):[],u=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),f=new ko;f.updateFromIdToken(a);const m=new Ss({uid:o.localId,auth:e,stsTokenManager:f,isAnonymous:u}),b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new kp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(m,b),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oy=new Map;function Tr(r){jr(r instanceof Function,"Expected a class definition");let e=oy.get(r);return e?(jr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,oy.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}y1.type="NONE";const ly=y1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ud(r,e,n){return`firebase:${r}:${e}:${n}`}class So{constructor(e,n,a){this.persistence=e,this.auth=n,this.userKey=a;const{config:o,name:c}=this.auth;this.fullUserKey=ud(this.userKey,o.apiKey,c),this.fullPersistenceKey=ud("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await yd(this.auth,{idToken:e}).catch(()=>{});return n?Ss._fromGetAccountInfoResponse(this.auth,n,e):null}return Ss._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,a="authUser"){if(!n.length)return new So(Tr(ly),e,a);const o=(await Promise.all(n.map(async b=>{if(await b._isAvailable())return b}))).filter(b=>b);let c=o[0]||Tr(ly);const u=ud(a,e.config.apiKey,e.name);let f=null;for(const b of n)try{const x=await b._get(u);if(x){let _;if(typeof x=="string"){const E=await yd(e,{idToken:x}).catch(()=>{});if(!E)break;_=await Ss._fromGetAccountInfoResponse(e,E,x)}else _=Ss._fromJSON(e,x);b!==c&&(f=_),c=b;break}}catch{}const m=o.filter(b=>b._shouldAllowMigration);return!c._shouldAllowMigration||!m.length?new So(c,e,a):(c=m[0],f&&await c._set(u,f.toJSON()),await Promise.all(n.map(async b=>{if(b!==c)try{await b._remove(u)}catch{}})),new So(c,e,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(w1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(v1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(S1(e))return"Blackberry";if(E1(e))return"Webos";if(_1(e))return"Safari";if((e.includes("chrome/")||x1(e))&&!e.includes("edge/"))return"Chrome";if(k1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=r.match(n);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function v1(r=wn()){return/firefox\//i.test(r)}function _1(r=wn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function x1(r=wn()){return/crios\//i.test(r)}function w1(r=wn()){return/iemobile/i.test(r)}function k1(r=wn()){return/android/i.test(r)}function S1(r=wn()){return/blackberry/i.test(r)}function E1(r=wn()){return/webos/i.test(r)}function e0(r=wn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function Fk(r=wn()){var e;return e0(r)&&!!((e=window.navigator)!=null&&e.standalone)}function Vk(){return s2()&&document.documentMode===10}function A1(r=wn()){return e0(r)||k1(r)||E1(r)||S1(r)||/windows phone/i.test(r)||w1(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(r,e=[]){let n;switch(r){case"Browser":n=cy(wn());break;case"Worker":n=`${cy(wn())}-${r}`;break;default:n=r}const a=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${bi}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const a=c=>new Promise((u,f)=>{try{const m=e(c);u(m)}catch(m){f(m)}});a.onAbort=n,this.queue.push(a);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const a of this.queue)await a(e),a.onAbort&&n.push(a.onAbort)}catch(a){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qk(r,e={}){return Dr(r,"GET","/v2/passwordPolicy",Rr(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk=6;class Kk{constructor(e){var a;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??Gk,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((a=e.allowedNonAlphanumericCharacters)==null?void 0:a.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const a=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;a&&(n.meetsMinPasswordLength=e.length>=a),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let a;for(let o=0;o<e.length;o++)a=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(e,n,a,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jk{constructor(e,n,a,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=a,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uy(this),this.idTokenSubscription=new uy(this),this.beforeStateQueue=new Hk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Tr(n)),this._initializationPromise=this.queue(async()=>{var a,o,c;if(!this._deleted&&(this.persistenceManager=await So.create(this,e),(a=this._resolvePersistenceManagerAvailable)==null||a.call(this),!this._deleted)){if((o=this._popupRedirectResolver)!=null&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)==null?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await yd(this,{idToken:e}),a=await Ss._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(a)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var c;if(Hn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let a=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(c=this.redirectUser)==null?void 0:c._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(a=m.user,o=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await vd(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hn(this.app))return Promise.reject(Nr(this));const n=e?us(e):null;return n&&Ke(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hn(this.app)?Promise.reject(Nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hn(this.app)?Promise.reject(Nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await qk(this),n=new Kk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mc("auth","Firebase",e())}onAuthStateChanged(e,n,a){return this.registerStateListener(this.authStateSubscription,e,n,a)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,a){return this.registerStateListener(this.idTokenSubscription,e,n,a)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const a=this.onAuthStateChanged(()=>{a(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(a.tenantId=this.tenantId),await $k(this,a)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const a=await this.getOrInitRedirectPersistenceManager(n);return e===null?a.removeCurrentUser():a.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Tr(e)||this._popupRedirectResolver;Ke(n,this,"argument-error"),this.redirectPersistenceManager=await So.create(this,[Tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,a;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((a=this.redirectUser)==null?void 0:a._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,a,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ke(f,this,"internal-error"),f.then(()=>{u||c(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,a,o);return()=>{u=!0,m()}}else{const m=e.addObserver(n);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=T1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var o;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((o=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:o.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const a=await this._getAppCheckToken();return a&&(e["X-Firebase-AppCheck"]=a),e}async _getAppCheckToken(){var n;if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&wk(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ea(r){return us(r)}class uy{constructor(e){this.auth=e,this.observer=null,this.addObserver=u2(n=>this.observer=n)}get next(){return Ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ud={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yk(r){Ud=r}function N1(r){return Ud.loadJS(r)}function Wk(){return Ud.recaptchaEnterpriseScript}function Xk(){return Ud.gapiScript}function Zk(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class Qk{constructor(){this.enterprise=new eS}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class eS{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const tS="recaptcha-enterprise",C1="NO_RECAPTCHA";class nS{constructor(e){this.type=tS,this.auth=Ea(e)}async verify(e="verify",n=!1){async function a(c){if(!n){if(c.tenantId==null&&c._agentRecaptchaConfig!=null)return c._agentRecaptchaConfig.siteKey;if(c.tenantId!=null&&c._tenantRecaptchaConfigs[c.tenantId]!==void 0)return c._tenantRecaptchaConfigs[c.tenantId].siteKey}return new Promise(async(u,f)=>{Dk(c,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const b=new Rk(m);return c.tenantId==null?c._agentRecaptchaConfig=b:c._tenantRecaptchaConfigs[c.tenantId]=b,u(b.siteKey)}}).catch(m=>{f(m)})})}function o(c,u,f){const m=window.grecaptcha;ay(m)?m.enterprise.ready(()=>{m.enterprise.execute(c,{action:e}).then(b=>{u(b)}).catch(()=>{u(C1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new Qk().execute("siteKey",{action:"verify"}):new Promise((c,u)=>{a(this.auth).then(f=>{if(!n&&ay(window.grecaptcha))o(f,c,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=Wk();m.length!==0&&(m+=f),N1(m).then(()=>{o(f,c,u)}).catch(b=>{u(b)})}}).catch(f=>{u(f)})})}}async function dy(r,e,n,a=!1,o=!1){const c=new nS(r);let u;if(o)u=C1;else try{u=await c.verify(n)}catch{u=await c.verify(n,!0)}const f={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,b=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:b,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return a?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function _d(r,e,n,a,o){var c;if((c=r._getRecaptchaConfig())!=null&&c.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await dy(r,e,n,n==="getOobCode");return a(r,u)}else return a(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await dy(r,e,n,n==="getOobCode");return a(r,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sS(r,e){const n=Ld(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(ui(c,e??{}))return o;Ns(o,"already-initialized")}return n.initialize({options:e})}function rS(r,e){const n=(e==null?void 0:e.persistence)||[],a=(Array.isArray(n)?n:[n]).map(Tr);e!=null&&e.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(a,e==null?void 0:e.popupRedirectResolver)}function aS(r,e,n){const a=Ea(r);Ke(/^https?:\/\//.test(e),a,"invalid-emulator-scheme");const o=!1,c=j1(e),{host:u,port:f}=iS(e),m=f===null?"":`:${f}`,b={url:`${c}//${u}${m}/`},x=Object.freeze({host:u,port:f,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!a._canInitEmulator){Ke(a.config.emulator&&a.emulatorConfig,a,"emulator-config-failed"),Ke(ui(b,a.config.emulator)&&ui(x,a.emulatorConfig),a,"emulator-config-failed");return}a.config.emulator=b,a.emulatorConfig=x,a.settings.appVerificationDisabledForTesting=!0,Ro(u)?(Gp(`${c}//${u}${m}`),Kp("Auth",!0)):oS()}function j1(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function iS(r){const e=j1(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const a=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(a);if(o){const c=o[1];return{host:c,port:hy(a.substr(c.length+1))}}else{const[c,u]=a.split(":");return{host:c,port:hy(u)}}}function hy(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function oS(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,n){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function lS(r,e){return Dr(r,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cS(r,e){return yc(r,"POST","/v1/accounts:signInWithPassword",Rr(r,e))}async function uS(r,e){return Dr(r,"POST","/v1/accounts:sendOobCode",Rr(r,e))}async function dS(r,e){return uS(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hS(r,e){return yc(r,"POST","/v1/accounts:signInWithEmailLink",Rr(r,e))}async function fS(r,e){return yc(r,"POST","/v1/accounts:signInWithEmailLink",Rr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends t0{constructor(e,n,a,o=null){super("password",a),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new sc(e,n,"password")}static _fromEmailAndCode(e,n,a=null){return new sc(e,n,"emailLink",a)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,n,"signInWithPassword",cS);case"emailLink":return hS(e,{email:this._email,oobCode:this._password});default:Ns(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const a={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return _d(e,a,"signUpPassword",lS);case"emailLink":return fS(e,{idToken:n,email:this._email,oobCode:this._password});default:Ns(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(r,e){return yc(r,"POST","/v1/accounts:signInWithIdp",Rr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pS="http://localhost";class hi extends t0{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new hi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ns("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:a,signInMethod:o,...c}=n;if(!a||!o)return null;const u=new hi(a,o);return u.idToken=c.idToken||void 0,u.accessToken=c.accessToken||void 0,u.secret=c.secret,u.nonce=c.nonce,u.pendingToken=c.pendingToken||null,u}_getIdTokenResponse(e){const n=this.buildRequest();return Eo(e,n)}_linkToIdToken(e,n){const a=this.buildRequest();return a.idToken=n,Eo(e,a)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Eo(e,n)}buildRequest(){const e={requestUri:pS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mS(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function gS(r){const e=$l(Fl(r)).link,n=e?$l(Fl(e)).deep_link_id:null,a=$l(Fl(r)).deep_link_id;return(a?$l(Fl(a)).link:null)||a||n||e||r}class n0{constructor(e){const n=$l(Fl(e)),a=n.apiKey??null,o=n.oobCode??null,c=mS(n.mode??null);Ke(a&&o&&c,"argument-error"),this.apiKey=a,this.operation=c,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=gS(e);try{return new n0(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(){this.providerId=Do.PROVIDER_ID}static credential(e,n){return sc._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const a=n0.parseLink(n);return Ke(a,"argument-error"),sc._fromEmailAndCode(e,a.code,a.tenantId)}}Do.PROVIDER_ID="password";Do.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Do.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vc extends R1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga extends vc{constructor(){super("facebook.com")}static credential(e){return hi._fromParams({providerId:ga.PROVIDER_ID,signInMethod:ga.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ga.credentialFromTaggedObject(e)}static credentialFromError(e){return ga.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ga.credential(e.oauthAccessToken)}catch{return null}}}ga.FACEBOOK_SIGN_IN_METHOD="facebook.com";ga.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba extends vc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return hi._fromParams({providerId:ba.PROVIDER_ID,signInMethod:ba.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ba.credentialFromTaggedObject(e)}static credentialFromError(e){return ba.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:a}=e;if(!n&&!a)return null;try{return ba.credential(n,a)}catch{return null}}}ba.GOOGLE_SIGN_IN_METHOD="google.com";ba.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya extends vc{constructor(){super("github.com")}static credential(e){return hi._fromParams({providerId:ya.PROVIDER_ID,signInMethod:ya.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ya.credentialFromTaggedObject(e)}static credentialFromError(e){return ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ya.credential(e.oauthAccessToken)}catch{return null}}}ya.GITHUB_SIGN_IN_METHOD="github.com";ya.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends vc{constructor(){super("twitter.com")}static credential(e,n){return hi._fromParams({providerId:va.PROVIDER_ID,signInMethod:va.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return va.credentialFromTaggedObject(e)}static credentialFromError(e){return va.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:a}=e;if(!n||!a)return null;try{return va.credential(n,a)}catch{return null}}}va.TWITTER_SIGN_IN_METHOD="twitter.com";va.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bS(r,e){return yc(r,"POST","/v1/accounts:signUp",Rr(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,a,o=!1){const c=await Ss._fromIdTokenResponse(e,a,o),u=fy(a);return new fi({user:c,providerId:u,_tokenResponse:a,operationType:n})}static async _forOperation(e,n,a){await e._updateTokensIfNecessary(a,!0);const o=fy(a);return new fi({user:e,providerId:o,_tokenResponse:a,operationType:n})}}function fy(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd extends tr{constructor(e,n,a,o){super(n.code,n.message),this.operationType=a,this.user=o,Object.setPrototypeOf(this,xd.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(e,n,a,o){return new xd(e,n,a,o)}}function D1(r,e,n,a){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?xd._fromErrorAndOperation(r,c,e,a):c})}async function yS(r,e,n=!1){const a=await nc(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return fi._forOperation(r,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(r,e,n=!1){const{auth:a}=r;if(Hn(a.app))return Promise.reject(Nr(a));const o="reauthenticate";try{const c=await nc(r,D1(a,o,e,r),n);Ke(c.idToken,a,"internal-error");const u=Qp(c.idToken);Ke(u,a,"internal-error");const{sub:f}=u;return Ke(r.uid===f,a,"user-mismatch"),fi._forOperation(r,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&Ns(a,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O1(r,e,n=!1){if(Hn(r.app))return Promise.reject(Nr(r));const a="signIn",o=await D1(r,a,e),c=await fi._fromIdTokenResponse(r,a,o);return n||await r._updateCurrentUser(c.user),c}async function _S(r,e){return O1(Ea(r),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(r){const e=Ea(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xS(r,e,n){const a=Ea(r);await _d(a,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",dS)}async function wS(r,e,n){if(Hn(r.app))return Promise.reject(Nr(r));const a=Ea(r),u=await _d(a,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bS).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&I1(r),m}),f=await fi._fromIdTokenResponse(a,"signIn",u);return await a._updateCurrentUser(f.user),f}function kS(r,e,n){return Hn(r.app)?Promise.reject(Nr(r)):_S(us(r),Do.credential(e,n)).catch(async a=>{throw a.code==="auth/password-does-not-meet-requirements"&&I1(r),a})}function SS(r,e,n,a){return us(r).onIdTokenChanged(e,n,a)}function ES(r,e,n){return us(r).beforeAuthStateChanged(e,n)}function AS(r,e,n,a){return us(r).onAuthStateChanged(e,n,a)}function py(r){return us(r).signOut()}const wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(wd,"1"),this.storage.removeItem(wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS=1e3,NS=10;class U1 extends L1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=A1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const a=this.storage.getItem(n),o=this.localCache[n];a!==o&&e(n,o,a)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const a=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const u=this.storage.getItem(a);!n&&this.localCache[a]===u||this.notifyListeners(a,u)},c=this.storage.getItem(a);Vk()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,NS):o()}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:a}),!0)})},TS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}U1.type="LOCAL";const CS=U1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1 extends L1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}M1.type="SESSION";const P1=M1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jS(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const a=new Md(e);return this.receivers.push(a),a}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:a,eventType:o,data:c}=n.data,u=this.handlersMap[o];if(!(u!=null&&u.size))return;n.ports[0].postMessage({status:"ack",eventId:a,eventType:o});const f=Array.from(u).map(async b=>b(n.origin,c)),m=await jS(f);n.ports[0].postMessage({status:"done",eventId:a,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Md.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s0(r="",e=10){let n="";for(let a=0;a<e;a++)n+=Math.floor(Math.random()*10);return r+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,a=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,u;return new Promise((f,m)=>{const b=s0("",20);o.port1.start();const x=setTimeout(()=>{m(new Error("unsupported_event"))},a);u={messageChannel:o,onMessage(_){const E=_;if(E.data.eventId===b)switch(E.data.status){case"ack":clearTimeout(x),c=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),f(E.data.response);break;default:clearTimeout(x),clearTimeout(c),m(new Error("invalid_response"));break}}},this.handlers.add(u),o.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:b,data:n},[o.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(){return window}function DS(r){Xs().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(){return typeof Xs().WorkerGlobalScope<"u"&&typeof Xs().importScripts=="function"}async function OS(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function IS(){var r;return((r=navigator==null?void 0:navigator.serviceWorker)==null?void 0:r.controller)||null}function LS(){return z1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="firebaseLocalStorageDb",US=1,kd="firebaseLocalStorage",$1="fbase_key";class _c{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pd(r,e){return r.transaction([kd],e?"readwrite":"readonly").objectStore(kd)}function MS(){const r=indexedDB.deleteDatabase(B1);return new _c(r).toPromise()}function Sp(){const r=indexedDB.open(B1,US);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const a=r.result;try{a.createObjectStore(kd,{keyPath:$1})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const a=r.result;a.objectStoreNames.contains(kd)?e(a):(a.close(),await MS(),e(await Sp()))})})}async function my(r,e,n){const a=Pd(r,!0).put({[$1]:e,value:n});return new _c(a).toPromise()}async function PS(r,e){const n=Pd(r,!1).get(e),a=await new _c(n).toPromise();return a===void 0?null:a.value}function gy(r,e){const n=Pd(r,!0).delete(e);return new _c(n).toPromise()}const zS=800,BS=3;class F1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Sp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const a=await this._openDb();return await e(a)}catch(a){if(n++>BS)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Md._getInstance(LS()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,a;if(this.activeServiceWorker=await OS(),!this.activeServiceWorker)return;this.sender=new RS(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(a=e[0])!=null&&a.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||IS()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Sp();return await my(e,wd,"1"),await gy(e,wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(a=>my(a,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(a=>PS(a,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>gy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Pd(o,!1).getAll();return new _c(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],a=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)a.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!a.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const a=this.listeners[e];if(a)for(const o of Array.from(a))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),zS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F1.type="LOCAL";const $S=F1;new bc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(r,e){return e?Tr(e):(Ke(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends t0{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Eo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Eo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Eo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VS(r){return O1(r.auth,new r0(r),r.bypassAuthState)}function HS(r){const{auth:e,user:n}=r;return Ke(n,e,"internal-error"),vS(n,new r0(r),r.bypassAuthState)}async function qS(r){const{auth:e,user:n}=r;return Ke(n,e,"internal-error"),yS(n,new r0(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(e,n,a,o,c=!1){this.auth=e,this.resolver=a,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:a,postBody:o,tenantId:c,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:n,sessionId:a,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(b){this.reject(b)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VS;case"linkViaPopup":case"linkViaRedirect":return qS;case"reauthViaPopup":case"reauthViaRedirect":return HS;default:Ns(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new bc(2e3,1e4);class xo extends V1{constructor(e,n,a,o,c){super(e,n,o,c),this.provider=a,this.authWindow=null,this.pollId=null,xo.currentPopupAction&&xo.currentPopupAction.cancel(),xo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ke(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=s0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ws(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ws(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,xo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,a;if((a=(n=this.authWindow)==null?void 0:n.window)!=null&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ws(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,GS.get())};e()}}xo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS="pendingRedirect",dd=new Map;class JS extends V1{constructor(e,n,a=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,a),this.eventId=null}async execute(){let e=dd.get(this.auth._key());if(!e){try{const a=await YS(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(a)}catch(n){e=()=>Promise.reject(n)}dd.set(this.auth._key(),e)}return this.bypassAuthState||dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function YS(r,e){const n=ZS(e),a=XS(r);if(!await a._isAvailable())return!1;const o=await a._get(n)==="true";return await a._remove(n),o}function WS(r,e){dd.set(r._key(),e)}function XS(r){return Tr(r._redirectPersistence)}function ZS(r){return ud(KS,r.config.apiKey,r.name)}async function QS(r,e,n=!1){if(Hn(r.app))return Promise.reject(Nr(r));const a=Ea(r),o=FS(a,e),u=await new JS(a,o,n).execute();return u&&!n&&(delete u.user._redirectEventId,await a._persistUserIfCurrent(u.user),await a._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE=600*1e3;class tE{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(e,a)&&(n=!0,this.sendToConsumer(e,a),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nE(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var a;if(e.error&&!H1(e)){const o=((a=e.error.code)==null?void 0:a.split("auth/")[1])||"internal-error";n.onError(Ws(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const a=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&a}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eE&&this.cachedEventUids.clear(),this.cachedEventUids.has(by(e))}saveEventToCache(e){this.cachedEventUids.add(by(e)),this.lastProcessedEventTime=Date.now()}}function by(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function H1({type:r,error:e}){return r==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nE(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return H1(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sE(r,e={}){return Dr(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rE=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aE=/^https?/;async function iE(r){if(r.config.emulator)return;const{authorizedDomains:e}=await sE(r);for(const n of e)try{if(oE(n))return}catch{}Ns(r,"unauthorized-domain")}function oE(r){const e=wp(),{protocol:n,hostname:a}=new URL(e);if(r.startsWith("chrome-extension://")){const u=new URL(r);return u.hostname===""&&a===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&u.hostname===a}if(!aE.test(n))return!1;if(rE.test(r))return a===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE=new bc(3e4,6e4);function yy(){const r=Xs().___jsl;if(r!=null&&r.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function cE(r){return new Promise((e,n)=>{var o,c,u;function a(){yy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yy(),n(Ws(r,"network-request-failed"))},timeout:lE.get()})}if((c=(o=Xs().gapi)==null?void 0:o.iframes)!=null&&c.Iframe)e(gapi.iframes.getContext());else if((u=Xs().gapi)!=null&&u.load)a();else{const f=Zk("iframefcb");return Xs()[f]=()=>{gapi.load?a():n(Ws(r,"network-request-failed"))},N1(`${Xk()}?onload=${f}`).catch(m=>n(m))}}).catch(e=>{throw hd=null,e})}let hd=null;function uE(r){return hd=hd||cE(r),hd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=new bc(5e3,15e3),hE="__/auth/iframe",fE="emulator/auth/iframe",pE={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mE=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gE(r){const e=r.config;Ke(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Zp(e,fE):`https://${r.config.authDomain}/${hE}`,a={apiKey:e.apiKey,appName:r.name,v:bi},o=mE.get(r.config.apiHost);o&&(a.eid=o);const c=r._getFrameworks();return c.length&&(a.fw=c.join(",")),`${n}?${gc(a).slice(1)}`}async function bE(r){const e=await uE(r),n=Xs().gapi;return Ke(n,r,"internal-error"),e.open({where:document.body,url:gE(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pE,dontclear:!0},a=>new Promise(async(o,c)=>{await a.restyle({setHideOnLeave:!1});const u=Ws(r,"network-request-failed"),f=Xs().setTimeout(()=>{c(u)},dE.get());function m(){Xs().clearTimeout(f),o(a)}a.ping(m).then(m,()=>{c(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yE={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vE=500,_E=600,xE="_blank",wE="http://localhost";class vy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kE(r,e,n,a=vE,o=_E){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-a)/2,0).toString();let f="";const m={...yE,width:a.toString(),height:o.toString(),top:c,left:u},b=wn().toLowerCase();n&&(f=x1(b)?xE:n),v1(b)&&(e=e||wE,m.scrollbars="yes");const x=Object.entries(m).reduce((E,[y,A])=>`${E}${y}=${A},`,"");if(Fk(b)&&f!=="_self")return SE(e||"",f),new vy(null);const _=window.open(e||"",f,x);Ke(_,r,"popup-blocked");try{_.focus()}catch{}return new vy(_)}function SE(r,e){const n=document.createElement("a");n.href=r,n.target=e;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="__/auth/handler",AE="emulator/auth/handler",TE=encodeURIComponent("fac");async function _y(r,e,n,a,o,c){Ke(r.config.authDomain,r,"auth-domain-config-required"),Ke(r.config.apiKey,r,"invalid-api-key");const u={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:a,v:bi,eventId:o};if(e instanceof R1){e.setDefaultLanguage(r.languageCode),u.providerId=e.providerId||"",c2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[x,_]of Object.entries({}))u[x]=_}if(e instanceof vc){const x=e.getScopes().filter(_=>_!=="");x.length>0&&(u.scopes=x.join(","))}r.tenantId&&(u.tid=r.tenantId);const f=u;for(const x of Object.keys(f))f[x]===void 0&&delete f[x];const m=await r._getAppCheckToken(),b=m?`#${TE}=${encodeURIComponent(m)}`:"";return`${NE(r)}?${gc(f).slice(1)}${b}`}function NE({config:r}){return r.emulator?Zp(r,AE):`https://${r.authDomain}/${EE}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf="webStorageSupport";class CE{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=P1,this._completeRedirectFn=QS,this._overrideRedirectResult=WS}async _openPopup(e,n,a,o){var u;jr((u=this.eventManagers[e._key()])==null?void 0:u.manager,"_initialize() not called before _openPopup()");const c=await _y(e,n,a,wp(),o);return kE(e,c,s0())}async _openRedirect(e,n,a,o){await this._originValidation(e);const c=await _y(e,n,a,wp(),o);return DS(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(jr(c,"If manager is not set, promise should be"),c)}const a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(()=>{delete this.eventManagers[n]}),a}async initAndGetManager(e){const n=await bE(e),a=new tE(e);return n.register("authEvent",o=>(Ke(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:a.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:a},this.iframes[e._key()]=n,a}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wf,{type:Wf},o=>{var u;const c=(u=o==null?void 0:o[0])==null?void 0:u[Wf];c!==void 0&&n(!!c),Ns(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=iE(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return A1()||_1()||e0()}}const jE=CE;var xy="@firebase/auth",wy="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(a=>{e((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function OE(r){di(new ka("auth",(e,{options:n})=>{const a=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=a.options;Ke(u&&!u.includes(":"),"invalid-api-key",{appName:a.name});const m={apiKey:u,authDomain:f,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:T1(r)},b=new Jk(a,o,c,m);return rS(b,n),b},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,a)=>{e.getProvider("auth-internal").initialize()})),di(new ka("auth-internal",e=>{const n=Ea(e.getProvider("auth").getImmediate());return(a=>new RE(a))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ys(xy,wy,DE(r)),Ys(xy,wy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE=300,LE=r1("authIdTokenMaxAge")||IE;let ky=null;const UE=r=>async e=>{const n=e&&await e.getIdTokenResult(),a=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(a&&a>LE)return;const o=n==null?void 0:n.token;ky!==o&&(ky=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function ME(r=Wp()){const e=Ld(r,"auth");if(e.isInitialized())return e.getImmediate();const n=sS(r,{popupRedirectResolver:jE,persistence:[$S,CS,P1]}),a=r1("authTokenSyncURL");if(a&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(a,location.origin);if(location.origin===c.origin){const u=UE(c.toString());ES(n,u,()=>u(n.currentUser)),SS(n,f=>u(f))}}const o=t1("auth");return o&&aS(n,`http://${o}`),n}function PE(){var r;return((r=document.getElementsByTagName("head"))==null?void 0:r[0])??document}Yk({loadJS(r){return new Promise((e,n)=>{const a=document.createElement("script");a.setAttribute("src",r),a.onload=e,a.onerror=o=>{const c=Ws("internal-error");c.customData=o,n(c)},a.type="text/javascript",a.charset="UTF-8",PE().appendChild(a)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});OE("Browser");var zE="firebase",BE="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ys(zE,BE,"app");var Sy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a0;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,j){function O(){}O.prototype=j.prototype,M.F=j.prototype,M.prototype=new O,M.prototype.constructor=M,M.D=function(F,q,D){for(var L=Array(arguments.length-2),R=2;R<arguments.length;R++)L[R-2]=arguments[R];return j.prototype[q].apply(F,L)}}function n(){this.blockSize=-1}function a(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(a,n),a.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(M,j,O){O||(O=0);const F=Array(16);if(typeof j=="string")for(var q=0;q<16;++q)F[q]=j.charCodeAt(O++)|j.charCodeAt(O++)<<8|j.charCodeAt(O++)<<16|j.charCodeAt(O++)<<24;else for(q=0;q<16;++q)F[q]=j[O++]|j[O++]<<8|j[O++]<<16|j[O++]<<24;j=M.g[0],O=M.g[1],q=M.g[2];let D=M.g[3],L;L=j+(D^O&(q^D))+F[0]+3614090360&4294967295,j=O+(L<<7&4294967295|L>>>25),L=D+(q^j&(O^q))+F[1]+3905402710&4294967295,D=j+(L<<12&4294967295|L>>>20),L=q+(O^D&(j^O))+F[2]+606105819&4294967295,q=D+(L<<17&4294967295|L>>>15),L=O+(j^q&(D^j))+F[3]+3250441966&4294967295,O=q+(L<<22&4294967295|L>>>10),L=j+(D^O&(q^D))+F[4]+4118548399&4294967295,j=O+(L<<7&4294967295|L>>>25),L=D+(q^j&(O^q))+F[5]+1200080426&4294967295,D=j+(L<<12&4294967295|L>>>20),L=q+(O^D&(j^O))+F[6]+2821735955&4294967295,q=D+(L<<17&4294967295|L>>>15),L=O+(j^q&(D^j))+F[7]+4249261313&4294967295,O=q+(L<<22&4294967295|L>>>10),L=j+(D^O&(q^D))+F[8]+1770035416&4294967295,j=O+(L<<7&4294967295|L>>>25),L=D+(q^j&(O^q))+F[9]+2336552879&4294967295,D=j+(L<<12&4294967295|L>>>20),L=q+(O^D&(j^O))+F[10]+4294925233&4294967295,q=D+(L<<17&4294967295|L>>>15),L=O+(j^q&(D^j))+F[11]+2304563134&4294967295,O=q+(L<<22&4294967295|L>>>10),L=j+(D^O&(q^D))+F[12]+1804603682&4294967295,j=O+(L<<7&4294967295|L>>>25),L=D+(q^j&(O^q))+F[13]+4254626195&4294967295,D=j+(L<<12&4294967295|L>>>20),L=q+(O^D&(j^O))+F[14]+2792965006&4294967295,q=D+(L<<17&4294967295|L>>>15),L=O+(j^q&(D^j))+F[15]+1236535329&4294967295,O=q+(L<<22&4294967295|L>>>10),L=j+(q^D&(O^q))+F[1]+4129170786&4294967295,j=O+(L<<5&4294967295|L>>>27),L=D+(O^q&(j^O))+F[6]+3225465664&4294967295,D=j+(L<<9&4294967295|L>>>23),L=q+(j^O&(D^j))+F[11]+643717713&4294967295,q=D+(L<<14&4294967295|L>>>18),L=O+(D^j&(q^D))+F[0]+3921069994&4294967295,O=q+(L<<20&4294967295|L>>>12),L=j+(q^D&(O^q))+F[5]+3593408605&4294967295,j=O+(L<<5&4294967295|L>>>27),L=D+(O^q&(j^O))+F[10]+38016083&4294967295,D=j+(L<<9&4294967295|L>>>23),L=q+(j^O&(D^j))+F[15]+3634488961&4294967295,q=D+(L<<14&4294967295|L>>>18),L=O+(D^j&(q^D))+F[4]+3889429448&4294967295,O=q+(L<<20&4294967295|L>>>12),L=j+(q^D&(O^q))+F[9]+568446438&4294967295,j=O+(L<<5&4294967295|L>>>27),L=D+(O^q&(j^O))+F[14]+3275163606&4294967295,D=j+(L<<9&4294967295|L>>>23),L=q+(j^O&(D^j))+F[3]+4107603335&4294967295,q=D+(L<<14&4294967295|L>>>18),L=O+(D^j&(q^D))+F[8]+1163531501&4294967295,O=q+(L<<20&4294967295|L>>>12),L=j+(q^D&(O^q))+F[13]+2850285829&4294967295,j=O+(L<<5&4294967295|L>>>27),L=D+(O^q&(j^O))+F[2]+4243563512&4294967295,D=j+(L<<9&4294967295|L>>>23),L=q+(j^O&(D^j))+F[7]+1735328473&4294967295,q=D+(L<<14&4294967295|L>>>18),L=O+(D^j&(q^D))+F[12]+2368359562&4294967295,O=q+(L<<20&4294967295|L>>>12),L=j+(O^q^D)+F[5]+4294588738&4294967295,j=O+(L<<4&4294967295|L>>>28),L=D+(j^O^q)+F[8]+2272392833&4294967295,D=j+(L<<11&4294967295|L>>>21),L=q+(D^j^O)+F[11]+1839030562&4294967295,q=D+(L<<16&4294967295|L>>>16),L=O+(q^D^j)+F[14]+4259657740&4294967295,O=q+(L<<23&4294967295|L>>>9),L=j+(O^q^D)+F[1]+2763975236&4294967295,j=O+(L<<4&4294967295|L>>>28),L=D+(j^O^q)+F[4]+1272893353&4294967295,D=j+(L<<11&4294967295|L>>>21),L=q+(D^j^O)+F[7]+4139469664&4294967295,q=D+(L<<16&4294967295|L>>>16),L=O+(q^D^j)+F[10]+3200236656&4294967295,O=q+(L<<23&4294967295|L>>>9),L=j+(O^q^D)+F[13]+681279174&4294967295,j=O+(L<<4&4294967295|L>>>28),L=D+(j^O^q)+F[0]+3936430074&4294967295,D=j+(L<<11&4294967295|L>>>21),L=q+(D^j^O)+F[3]+3572445317&4294967295,q=D+(L<<16&4294967295|L>>>16),L=O+(q^D^j)+F[6]+76029189&4294967295,O=q+(L<<23&4294967295|L>>>9),L=j+(O^q^D)+F[9]+3654602809&4294967295,j=O+(L<<4&4294967295|L>>>28),L=D+(j^O^q)+F[12]+3873151461&4294967295,D=j+(L<<11&4294967295|L>>>21),L=q+(D^j^O)+F[15]+530742520&4294967295,q=D+(L<<16&4294967295|L>>>16),L=O+(q^D^j)+F[2]+3299628645&4294967295,O=q+(L<<23&4294967295|L>>>9),L=j+(q^(O|~D))+F[0]+4096336452&4294967295,j=O+(L<<6&4294967295|L>>>26),L=D+(O^(j|~q))+F[7]+1126891415&4294967295,D=j+(L<<10&4294967295|L>>>22),L=q+(j^(D|~O))+F[14]+2878612391&4294967295,q=D+(L<<15&4294967295|L>>>17),L=O+(D^(q|~j))+F[5]+4237533241&4294967295,O=q+(L<<21&4294967295|L>>>11),L=j+(q^(O|~D))+F[12]+1700485571&4294967295,j=O+(L<<6&4294967295|L>>>26),L=D+(O^(j|~q))+F[3]+2399980690&4294967295,D=j+(L<<10&4294967295|L>>>22),L=q+(j^(D|~O))+F[10]+4293915773&4294967295,q=D+(L<<15&4294967295|L>>>17),L=O+(D^(q|~j))+F[1]+2240044497&4294967295,O=q+(L<<21&4294967295|L>>>11),L=j+(q^(O|~D))+F[8]+1873313359&4294967295,j=O+(L<<6&4294967295|L>>>26),L=D+(O^(j|~q))+F[15]+4264355552&4294967295,D=j+(L<<10&4294967295|L>>>22),L=q+(j^(D|~O))+F[6]+2734768916&4294967295,q=D+(L<<15&4294967295|L>>>17),L=O+(D^(q|~j))+F[13]+1309151649&4294967295,O=q+(L<<21&4294967295|L>>>11),L=j+(q^(O|~D))+F[4]+4149444226&4294967295,j=O+(L<<6&4294967295|L>>>26),L=D+(O^(j|~q))+F[11]+3174756917&4294967295,D=j+(L<<10&4294967295|L>>>22),L=q+(j^(D|~O))+F[2]+718787259&4294967295,q=D+(L<<15&4294967295|L>>>17),L=O+(D^(q|~j))+F[9]+3951481745&4294967295,M.g[0]=M.g[0]+j&4294967295,M.g[1]=M.g[1]+(q+(L<<21&4294967295|L>>>11))&4294967295,M.g[2]=M.g[2]+q&4294967295,M.g[3]=M.g[3]+D&4294967295}a.prototype.v=function(M,j){j===void 0&&(j=M.length);const O=j-this.blockSize,F=this.C;let q=this.h,D=0;for(;D<j;){if(q==0)for(;D<=O;)o(this,M,D),D+=this.blockSize;if(typeof M=="string"){for(;D<j;)if(F[q++]=M.charCodeAt(D++),q==this.blockSize){o(this,F),q=0;break}}else for(;D<j;)if(F[q++]=M[D++],q==this.blockSize){o(this,F),q=0;break}}this.h=q,this.o+=j},a.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var j=1;j<M.length-8;++j)M[j]=0;j=this.o*8;for(var O=M.length-8;O<M.length;++O)M[O]=j&255,j/=256;for(this.v(M),M=Array(16),j=0,O=0;O<4;++O)for(let F=0;F<32;F+=8)M[j++]=this.g[O]>>>F&255;return M};function c(M,j){var O=f;return Object.prototype.hasOwnProperty.call(O,M)?O[M]:O[M]=j(M)}function u(M,j){this.h=j;const O=[];let F=!0;for(let q=M.length-1;q>=0;q--){const D=M[q]|0;F&&D==j||(O[q]=D,F=!1)}this.g=O}var f={};function m(M){return-128<=M&&M<128?c(M,function(j){return new u([j|0],j<0?-1:0)}):new u([M|0],M<0?-1:0)}function b(M){if(isNaN(M)||!isFinite(M))return _;if(M<0)return N(b(-M));const j=[];let O=1;for(let F=0;M>=O;F++)j[F]=M/O|0,O*=4294967296;return new u(j,0)}function x(M,j){if(M.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(M.charAt(0)=="-")return N(x(M.substring(1),j));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const O=b(Math.pow(j,8));let F=_;for(let D=0;D<M.length;D+=8){var q=Math.min(8,M.length-D);const L=parseInt(M.substring(D,D+q),j);q<8?(q=b(Math.pow(j,q)),F=F.j(q).add(b(L))):(F=F.j(O),F=F.add(b(L)))}return F}var _=m(0),E=m(1),y=m(16777216);r=u.prototype,r.m=function(){if(k(this))return-N(this).m();let M=0,j=1;for(let O=0;O<this.g.length;O++){const F=this.i(O);M+=(F>=0?F:4294967296+F)*j,j*=4294967296}return M},r.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(A(this))return"0";if(k(this))return"-"+N(this).toString(M);const j=b(Math.pow(M,6));var O=this;let F="";for(;;){const q=V(O,j).g;O=C(O,q.j(j));let D=((O.g.length>0?O.g[0]:O.h)>>>0).toString(M);if(O=q,A(O))return D+F;for(;D.length<6;)D="0"+D;F=D+F}},r.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function A(M){if(M.h!=0)return!1;for(let j=0;j<M.g.length;j++)if(M.g[j]!=0)return!1;return!0}function k(M){return M.h==-1}r.l=function(M){return M=C(this,M),k(M)?-1:A(M)?0:1};function N(M){const j=M.g.length,O=[];for(let F=0;F<j;F++)O[F]=~M.g[F];return new u(O,~M.h).add(E)}r.abs=function(){return k(this)?N(this):this},r.add=function(M){const j=Math.max(this.g.length,M.g.length),O=[];let F=0;for(let q=0;q<=j;q++){let D=F+(this.i(q)&65535)+(M.i(q)&65535),L=(D>>>16)+(this.i(q)>>>16)+(M.i(q)>>>16);F=L>>>16,D&=65535,L&=65535,O[q]=L<<16|D}return new u(O,O[O.length-1]&-2147483648?-1:0)};function C(M,j){return M.add(N(j))}r.j=function(M){if(A(this)||A(M))return _;if(k(this))return k(M)?N(this).j(N(M)):N(N(this).j(M));if(k(M))return N(this.j(N(M)));if(this.l(y)<0&&M.l(y)<0)return b(this.m()*M.m());const j=this.g.length+M.g.length,O=[];for(var F=0;F<2*j;F++)O[F]=0;for(F=0;F<this.g.length;F++)for(let q=0;q<M.g.length;q++){const D=this.i(F)>>>16,L=this.i(F)&65535,R=M.i(q)>>>16,ge=M.i(q)&65535;O[2*F+2*q]+=L*ge,I(O,2*F+2*q),O[2*F+2*q+1]+=D*ge,I(O,2*F+2*q+1),O[2*F+2*q+1]+=L*R,I(O,2*F+2*q+1),O[2*F+2*q+2]+=D*R,I(O,2*F+2*q+2)}for(M=0;M<j;M++)O[M]=O[2*M+1]<<16|O[2*M];for(M=j;M<2*j;M++)O[M]=0;return new u(O,0)};function I(M,j){for(;(M[j]&65535)!=M[j];)M[j+1]+=M[j]>>>16,M[j]&=65535,j++}function z(M,j){this.g=M,this.h=j}function V(M,j){if(A(j))throw Error("division by zero");if(A(M))return new z(_,_);if(k(M))return j=V(N(M),j),new z(N(j.g),N(j.h));if(k(j))return j=V(M,N(j)),new z(N(j.g),j.h);if(M.g.length>30){if(k(M)||k(j))throw Error("slowDivide_ only works with positive integers.");for(var O=E,F=j;F.l(M)<=0;)O=H(O),F=H(F);var q=G(O,1),D=G(F,1);for(F=G(F,2),O=G(O,2);!A(F);){var L=D.add(F);L.l(M)<=0&&(q=q.add(O),D=L),F=G(F,1),O=G(O,1)}return j=C(M,q.j(j)),new z(q,j)}for(q=_;M.l(j)>=0;){for(O=Math.max(1,Math.floor(M.m()/j.m())),F=Math.ceil(Math.log(O)/Math.LN2),F=F<=48?1:Math.pow(2,F-48),D=b(O),L=D.j(j);k(L)||L.l(M)>0;)O-=F,D=b(O),L=D.j(j);A(D)&&(D=E),q=q.add(D),M=C(M,L)}return new z(q,M)}r.B=function(M){return V(this,M).h},r.and=function(M){const j=Math.max(this.g.length,M.g.length),O=[];for(let F=0;F<j;F++)O[F]=this.i(F)&M.i(F);return new u(O,this.h&M.h)},r.or=function(M){const j=Math.max(this.g.length,M.g.length),O=[];for(let F=0;F<j;F++)O[F]=this.i(F)|M.i(F);return new u(O,this.h|M.h)},r.xor=function(M){const j=Math.max(this.g.length,M.g.length),O=[];for(let F=0;F<j;F++)O[F]=this.i(F)^M.i(F);return new u(O,this.h^M.h)};function H(M){const j=M.g.length+1,O=[];for(let F=0;F<j;F++)O[F]=M.i(F)<<1|M.i(F-1)>>>31;return new u(O,M.h)}function G(M,j){const O=j>>5;j%=32;const F=M.g.length-O,q=[];for(let D=0;D<F;D++)q[D]=j>0?M.i(D+O)>>>j|M.i(D+O+1)<<32-j:M.i(D+O);return new u(q,M.h)}a.prototype.digest=a.prototype.A,a.prototype.reset=a.prototype.u,a.prototype.update=a.prototype.v,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.B,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=b,u.fromString=x,a0=u}).apply(typeof Sy<"u"?Sy:typeof self<"u"?self:typeof window<"u"?window:{});var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};(function(){var r,e=Object.defineProperty;function n(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yu=="object"&&Yu];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var a=n(this);function o(d,v){if(v)e:{var T=a;d=d.split(".");for(var $=0;$<d.length-1;$++){var le=d[$];if(!(le in T))break e;T=T[le]}d=d[d.length-1],$=T[d],v=v($),v!=$&&v!=null&&e(T,d,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(d){return d||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(d){return d||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(d){return d||function(v){var T=[],$;for($ in v)Object.prototype.hasOwnProperty.call(v,$)&&T.push([$,v[$]]);return T}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var c=c||{},u=this||self;function f(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function m(d,v,T){return d.call.apply(d.bind,arguments)}function b(d,v,T){return b=m,b.apply(null,arguments)}function x(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var $=T.slice();return $.push.apply($,arguments),d.apply(this,$)}}function _(d,v){function T(){}T.prototype=v.prototype,d.Z=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Ob=function($,le,be){for(var De=Array(arguments.length-2),Xe=2;Xe<arguments.length;Xe++)De[Xe-2]=arguments[Xe];return v.prototype[le].apply($,De)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?d=>d&&AsyncContext.Snapshot.wrap(d):d=>d;function y(d){const v=d.length;if(v>0){const T=Array(v);for(let $=0;$<v;$++)T[$]=d[$];return T}return[]}function A(d,v){for(let $=1;$<arguments.length;$++){const le=arguments[$];var T=typeof le;if(T=T!="object"?T:le?Array.isArray(le)?"array":T:"null",T=="array"||T=="object"&&typeof le.length=="number"){T=d.length||0;const be=le.length||0;d.length=T+be;for(let De=0;De<be;De++)d[T+De]=le[De]}else d.push(le)}}class k{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function N(d){u.setTimeout(()=>{throw d},0)}function C(){var d=M;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class I{constructor(){this.h=this.g=null}add(v,T){const $=z.get();$.set(v,T),this.h?this.h.next=$:this.g=$,this.h=$}}var z=new k(()=>new V,d=>d.reset());class V{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let H,G=!1,M=new I,j=()=>{const d=Promise.resolve(void 0);H=()=>{d.then(O)}};function O(){for(var d;d=C();){try{d.h.call(d.g)}catch(T){N(T)}var v=z;v.j(d),v.h<100&&(v.h++,d.next=v.g,v.g=d)}G=!1}function F(){this.u=this.u,this.C=this.C}F.prototype.u=!1,F.prototype.dispose=function(){this.u||(this.u=!0,this.N())},F.prototype[Symbol.dispose]=function(){this.dispose()},F.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function q(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}q.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!u.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};u.addEventListener("test",T,v),u.removeEventListener("test",T,v)}catch{}return d})();function L(d){return/^[\s\xa0]*$/.test(d)}function R(d,v){q.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d&&this.init(d,v)}_(R,q),R.prototype.init=function(d,v){const T=this.type=d.type,$=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget,v||(T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement)),this.relatedTarget=v,$?(this.clientX=$.clientX!==void 0?$.clientX:$.pageX,this.clientY=$.clientY!==void 0?$.clientY:$.pageY,this.screenX=$.screenX||0,this.screenY=$.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=d.pointerType,this.state=d.state,this.i=d,d.defaultPrevented&&R.Z.h.call(this)},R.prototype.h=function(){R.Z.h.call(this);const d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ge="closure_listenable_"+(Math.random()*1e6|0),Q=0;function X(d,v,T,$,le){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!$,this.ha=le,this.key=++Q,this.da=this.fa=!1}function _e(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function re(d,v,T){for(const $ in d)v.call(T,d[$],$,d)}function te(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function W(d){const v={};for(const T in d)v[T]=d[T];return v}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(d,v){let T,$;for(let le=1;le<arguments.length;le++){$=arguments[le];for(T in $)d[T]=$[T];for(let be=0;be<Z.length;be++)T=Z[be],Object.prototype.hasOwnProperty.call($,T)&&(d[T]=$[T])}}function ne(d){this.src=d,this.g={},this.h=0}ne.prototype.add=function(d,v,T,$,le){const be=d.toString();d=this.g[be],d||(d=this.g[be]=[],this.h++);const De=Ae(d,v,$,le);return De>-1?(v=d[De],T||(v.fa=!1)):(v=new X(v,this.src,be,!!$,le),v.fa=T,d.push(v)),v};function ie(d,v){const T=v.type;if(T in d.g){var $=d.g[T],le=Array.prototype.indexOf.call($,v,void 0),be;(be=le>=0)&&Array.prototype.splice.call($,le,1),be&&(_e(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function Ae(d,v,T,$){for(let le=0;le<d.length;++le){const be=d[le];if(!be.da&&be.listener==v&&be.capture==!!T&&be.ha==$)return le}return-1}var ke="closure_lm_"+(Math.random()*1e6|0),ae={};function Re(d,v,T,$,le){if(Array.isArray(v)){for(let be=0;be<v.length;be++)Re(d,v[be],T,$,le);return null}return T=B(T),d&&d[ge]?d.J(v,T,f($)?!!$.capture:!1,le):Te(d,v,T,!1,$,le)}function Te(d,v,T,$,le,be){if(!v)throw Error("Invalid event type");const De=f(le)?!!le.capture:!!le;let Xe=me(d);if(Xe||(d[ke]=Xe=new ne(d)),T=Xe.add(v,T,$,De,be),T.proxy)return T;if($=Ie(),T.proxy=$,$.src=d,$.listener=T,d.addEventListener)D||(le=De),le===void 0&&(le=!1),d.addEventListener(v.toString(),$,le);else if(d.attachEvent)d.attachEvent(S(v.toString()),$);else if(d.addListener&&d.removeListener)d.addListener($);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Ie(){function d(T){return v.call(d.src,d.listener,T)}const v=ve;return d}function Be(d,v,T,$,le){if(Array.isArray(v))for(var be=0;be<v.length;be++)Be(d,v[be],T,$,le);else $=f($)?!!$.capture:!!$,T=B(T),d&&d[ge]?(d=d.i,be=String(v).toString(),be in d.g&&(v=d.g[be],T=Ae(v,T,$,le),T>-1&&(_e(v[T]),Array.prototype.splice.call(v,T,1),v.length==0&&(delete d.g[be],d.h--)))):d&&(d=me(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ae(v,T,$,le)),(T=d>-1?v[d]:null)&&Ue(T))}function Ue(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ge])ie(v.i,d);else{var T=d.type,$=d.proxy;v.removeEventListener?v.removeEventListener(T,$,d.capture):v.detachEvent?v.detachEvent(S(T),$):v.addListener&&v.removeListener&&v.removeListener($),(T=me(v))?(ie(T,d),T.h==0&&(T.src=null,v[ke]=null)):_e(d)}}}function S(d){return d in ae?ae[d]:ae[d]="on"+d}function ve(d,v){if(d.da)d=!0;else{v=new R(v,this);const T=d.listener,$=d.ha||d.src;d.fa&&Ue(d),d=T.call($,v)}return d}function me(d){return d=d[ke],d instanceof ne?d:null}var U="__closure_events_fn_"+(Math.random()*1e9>>>0);function B(d){return typeof d=="function"?d:(d[U]||(d[U]=function(v){return d.handleEvent(v)}),d[U])}function J(){F.call(this),this.i=new ne(this),this.M=this,this.G=null}_(J,F),J.prototype[ge]=!0,J.prototype.removeEventListener=function(d,v,T,$){Be(this,d,v,T,$)};function de(d,v){var T,$=d.G;if($)for(T=[];$;$=$.G)T.push($);if(d=d.M,$=v.type||v,typeof v=="string")v=new q(v,d);else if(v instanceof q)v.target=v.target||d;else{var le=v;v=new q($,d),pe(v,le)}le=!0;let be,De;if(T)for(De=T.length-1;De>=0;De--)be=v.g=T[De],le=we(be,$,!0,v)&&le;if(be=v.g=d,le=we(be,$,!0,v)&&le,le=we(be,$,!1,v)&&le,T)for(De=0;De<T.length;De++)be=v.g=T[De],le=we(be,$,!1,v)&&le}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var d=this.i;for(const v in d.g){const T=d.g[v];for(let $=0;$<T.length;$++)_e(T[$]);delete d.g[v],d.h--}}this.G=null},J.prototype.J=function(d,v,T,$){return this.i.add(String(d),v,!1,T,$)},J.prototype.K=function(d,v,T,$){return this.i.add(String(d),v,!0,T,$)};function we(d,v,T,$){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();let le=!0;for(let be=0;be<v.length;++be){const De=v[be];if(De&&!De.da&&De.capture==T){const Xe=De.listener,Bt=De.ha||De.src;De.fa&&ie(d.i,De),le=Xe.call(Bt,$)!==!1&&le}}return le&&!$.defaultPrevented}function oe(d,v){if(typeof d!="function")if(d&&typeof d.handleEvent=="function")d=b(d.handleEvent,d);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:u.setTimeout(d,v||0)}function Ce(d){d.g=oe(()=>{d.g=null,d.i&&(d.i=!1,Ce(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class je extends F{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ce(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(d){F.call(this),this.h=d,this.g={}}_(Ne,F);var Pe=[];function et(d){re(d.g,function(v,T){this.g.hasOwnProperty(T)&&Ue(v)},d),d.g={}}Ne.prototype.N=function(){Ne.Z.N.call(this),et(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Je=u.JSON.stringify,sn=u.JSON.parse,Kn=class{stringify(d){return u.JSON.stringify(d,void 0)}parse(d){return u.JSON.parse(d,void 0)}};function Vt(){}function ds(){}var ot={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function nt(){q.call(this,"d")}_(nt,q);function rn(){q.call(this,"c")}_(rn,q);var ht={},nr=null;function sr(){return nr=nr||new J}ht.Ia="serverreachability";function Ir(d){q.call(this,ht.Ia,d)}_(Ir,q);function kn(d){const v=sr();de(v,new Ir(v))}ht.STAT_EVENT="statevent";function Jn(d,v){q.call(this,ht.STAT_EVENT,d),this.stat=v}_(Jn,q);function xt(d){const v=sr();de(v,new Jn(v,d))}ht.Ja="timingevent";function un(d,v){q.call(this,ht.Ja,d),this.size=v}_(un,q);function Yn(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){d()},v)}function Sn(){this.g=!0}Sn.prototype.ua=function(){this.g=!1};function vi(d,v,T,$,le,be){d.info(function(){if(d.g)if(be){var De="",Xe=be.split("&");for(let yt=0;yt<Xe.length;yt++){var Bt=Xe[yt].split("=");if(Bt.length>1){const Ut=Bt[0];Bt=Bt[1];const vn=Ut.split("_");De=vn.length>=2&&vn[1]=="type"?De+(Ut+"="+Bt+"&"):De+(Ut+"=redacted&")}}}else De=null;else De=be;return"XMLHTTP REQ ("+$+") [attempt "+le+"]: "+v+`
`+T+`
`+De})}function _i(d,v,T,$,le,be,De){d.info(function(){return"XMLHTTP RESP ("+$+") [ attempt "+le+"]: "+v+`
`+T+`
`+be+" "+De})}function Wn(d,v,T,$){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Lo(d,T)+($?" "+$:"")})}function rr(d,v){d.info(function(){return"TIMEOUT: "+v})}Sn.prototype.info=function(){};function Lo(d,v){if(!d.g)return v;if(!v)return null;try{const be=JSON.parse(v);if(be){for(d=0;d<be.length;d++)if(Array.isArray(be[d])){var T=be[d];if(!(T.length<2)){var $=T[1];if(Array.isArray($)&&!($.length<1)){var le=$[0];if(le!="noop"&&le!="stop"&&le!="close")for(let De=1;De<$.length;De++)$[De]=""}}}}return Je(be)}catch{return v}}var fe={NO_ERROR:0,TIMEOUT:8},Le={},Fe;function Ye(){}_(Ye,Vt),Ye.prototype.g=function(){return new XMLHttpRequest},Fe=new Ye;function tt(d){return encodeURIComponent(String(d))}function On(d){var v=1;d=d.split(":");const T=[];for(;v>0&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function Lt(d,v,T,$){this.j=d,this.i=v,this.l=T,this.S=$||1,this.V=new Ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Qt}function Qt(){this.i=null,this.g="",this.h=!1}var jt={},an={};function Cs(d,v,T){d.M=1,d.A=Ta(qt(v)),d.u=T,d.R=!0,xi(d,null)}function xi(d,v){d.F=Date.now(),js(d),d.B=qt(d.A);var T=d.B,$=d.S;Array.isArray($)||($=[String($)]),Ei(T.i,"t",$),d.C=0,T=d.j.L,d.h=new Qt,d.g=Bc(d.j,T?v:null,!d.u),d.P>0&&(d.O=new je(b(d.Y,d,d.g),d.P)),v=d.V,T=d.g,$=d.ba;var le="readystatechange";Array.isArray(le)||(le&&(Pe[0]=le.toString()),le=Pe);for(let be=0;be<le.length;be++){const De=Re(T,le[be],$||v.handleEvent,!1,v.h||v);if(!De)break;v.g[De.key]=De}v=d.J?W(d.J):{},d.u?(d.v||(d.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.B,d.v,d.u,v)):(d.v="GET",d.g.ea(d.B,d.v,null,v)),kn(),vi(d.i,d.v,d.B,d.l,d.S,d.u)}Lt.prototype.ba=function(d){d=d.target;const v=this.O;v&&ps(d)==3?v.j():this.Y(d)},Lt.prototype.Y=function(d){try{if(d==this.g)e:{const Xe=ps(this.g),Bt=this.g.ya(),yt=this.g.ca();if(!(Xe<3)&&(Xe!=3||this.g&&(this.h.h||this.g.la()||dn(this.g)))){this.K||Xe!=4||Bt==7||(Bt==8||yt<=0?kn(3):kn(2)),Rs(this);var v=this.g.ca();this.X=v;var T=qd(this);if(this.o=v==200,_i(this.i,this.v,this.B,this.l,this.S,Xe,v),this.o){if(this.U&&!this.L){t:{if(this.g){var $,le=this.g;if(($=le.g?le.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L($)){var be=$;break t}}be=null}if(d=be)Wn(this.i,this.l,d,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ds(this,d);else{this.o=!1,this.m=3,xt(12),In(this),Xn(this);break e}}if(this.R){d=!0;let Ut;for(;!this.K&&this.C<T.length;)if(Ut=Tc(this,T),Ut==an){Xe==4&&(this.m=4,xt(14),d=!1),Wn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ut==jt){this.m=4,xt(15),Wn(this.i,this.l,T,"[Invalid Chunk]"),d=!1;break}else Wn(this.i,this.l,Ut,null),Ds(this,Ut);if(Ac(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||T.length!=0||this.h.h||(this.m=1,xt(16),d=!1),this.o=this.o&&d,!d)Wn(this.i,this.l,T,"[Invalid Chunked Response]"),In(this),Xn(this);else if(T.length>0&&!this.W){this.W=!0;var De=this.j;De.g==this&&De.aa&&!De.P&&(De.j.info("Great, no buffering proxy detected. Bytes received: "+T.length),Wo(De),De.P=!0,xt(11))}}else Wn(this.i,this.l,T,null),Ds(this,T);Xe==4&&In(this),this.o&&!this.K&&(Xe==4?Uc(this.j,this):(this.o=!1,js(this)))}else ir(this.g),v==400&&T.indexOf("Unknown SID")>0?(this.m=3,xt(12)):(this.m=0,xt(13)),In(this),Xn(this)}}}catch{}finally{}};function qd(d){if(!Ac(d))return d.g.la();const v=dn(d.g);if(v==="")return"";let T="";const $=v.length,le=ps(d.g)==4;if(!d.h.i){if(typeof TextDecoder>"u")return In(d),Xn(d),"";d.h.i=new u.TextDecoder}for(let be=0;be<$;be++)d.h.h=!0,T+=d.h.i.decode(v[be],{stream:!(le&&be==$-1)});return v.length=0,d.h.g+=T,d.C=0,d.h.g}function Ac(d){return d.g?d.v=="GET"&&d.M!=2&&d.j.Aa:!1}function Tc(d,v){var T=d.C,$=v.indexOf(`
`,T);return $==-1?an:(T=Number(v.substring(T,$)),isNaN(T)?jt:($+=1,$+T>v.length?an:(v=v.slice($,$+T),d.C=$+T,v)))}Lt.prototype.cancel=function(){this.K=!0,In(this)};function js(d){d.T=Date.now()+d.H,wi(d,d.H)}function wi(d,v){if(d.D!=null)throw Error("WatchDog timer not null");d.D=Yn(b(d.aa,d),v)}function Rs(d){d.D&&(u.clearTimeout(d.D),d.D=null)}Lt.prototype.aa=function(){this.D=null;const d=Date.now();d-this.T>=0?(rr(this.i,this.B),this.M!=2&&(kn(),xt(17)),In(this),this.m=2,Xn(this)):wi(this,this.T-d)};function Xn(d){d.j.I==0||d.K||Uc(d.j,d)}function In(d){Rs(d);var v=d.O;v&&typeof v.dispose=="function"&&v.dispose(),d.O=null,et(d.V),d.g&&(v=d.g,d.g=null,v.abort(),v.dispose())}function Ds(d,v){try{var T=d.j;if(T.I!=0&&(T.g==d||Is(T.h,d))){if(!d.L&&Is(T.h,d)&&T.I==3){try{var $=T.Ba.g.parse(v)}catch{$=null}if(Array.isArray($)&&$.length==3){var le=$;if(le[0]==0){e:if(!T.v){if(T.g)if(T.g.F+3e3<d.F)ji(T),Fr(T);else break e;Ia(T),xt(18)}}else T.xa=le[1],0<T.xa-T.K&&le[2]<37500&&T.F&&T.A==0&&!T.C&&(T.C=Yn(b(T.Va,T),6e3));Os(T.h)<=1&&T.ta&&(T.ta=void 0)}else Bs(T,11)}else if((d.L||T.g==d)&&ji(T),!L(v))for(le=T.Ba.g.parse(v),v=0;v<le.length;v++){let yt=le[v];const Ut=yt[0];if(!(Ut<=T.K))if(T.K=Ut,yt=yt[1],T.I==2)if(yt[0]=="c"){T.M=yt[1],T.ba=yt[2];const vn=yt[3];vn!=null&&(T.ka=vn,T.j.info("VER="+T.ka));const or=yt[4];or!=null&&(T.za=or,T.j.info("SVER="+T.za));const ms=yt[5];ms!=null&&typeof ms=="number"&&ms>0&&($=1.5*ms,T.O=$,T.j.info("backChannelRequestTimeoutMs_="+$)),$=T;const gs=d.g;if(gs){const La=gs.g?gs.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(La){var be=$.h;be.g||La.indexOf("spdy")==-1&&La.indexOf("quic")==-1&&La.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(Po(be,be.h),be.h=null))}if($.G){const Ri=gs.g?gs.g.getResponseHeader("X-HTTP-Session-Id"):null;Ri&&($.wa=Ri,bt($.J,$.G,Ri))}}T.I=3,T.l&&T.l.ra(),T.aa&&(T.T=Date.now()-d.F,T.j.info("Handshake RTT: "+T.T+"ms")),$=T;var De=d;if($.na=zc($,$.L?$.ba:null,$.W),De.L){zo($.h,De);var Xe=De,Bt=$.O;Bt&&(Xe.H=Bt),Xe.D&&(Rs(Xe),js(Xe)),$.g=De}else Ic($);T.i.length>0&&zs(T)}else yt[0]!="stop"&&yt[0]!="close"||Bs(T,7);else T.I==3&&(yt[0]=="stop"||yt[0]=="close"?yt[0]=="stop"?Bs(T,7):Jo(T):yt[0]!="noop"&&T.l&&T.l.qa(yt),T.A=0)}}kn(4)}catch{}}var Ht=class{constructor(d,v){this.g=d,this.map=v}};function Uo(d){this.l=d||10,u.PerformanceNavigationTiming?(d=u.performance.getEntriesByType("navigation"),d=d.length>0&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Mo(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Os(d){return d.h?1:d.g?d.g.size:0}function Is(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function Po(d,v){d.g?d.g.add(v):d.h=v}function zo(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Uo.prototype.cancel=function(){if(this.i=Bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function Bo(d){if(d.h!=null)return d.i.concat(d.h.G);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.G);return v}return y(d.i)}var Nc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ki(d,v){if(d){d=d.split("&");for(let T=0;T<d.length;T++){const $=d[T].indexOf("=");let le,be=null;$>=0?(le=d[T].substring(0,$),be=d[T].substring($+1)):le=d[T],v(le,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function Ln(d){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;d instanceof Ln?(this.l=d.l,on(this,d.j),this.o=d.o,this.g=d.g,Lr(this,d.u),this.h=d.h,$o(this,Dc(d.i)),this.m=d.m):d&&(v=String(d).match(Nc))?(this.l=!1,on(this,v[1]||"",!0),this.o=Ls(v[2]||""),this.g=Ls(v[3]||"",!0),Lr(this,v[4]),this.h=Ls(v[5]||"",!0),$o(this,v[6]||"",!0),this.m=Ls(v[7]||"")):(this.l=!1,this.i=new Mr(null,this.l))}Ln.prototype.toString=function(){const d=[];var v=this.j;v&&d.push(Na(v,Si,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(Na(v,Si,!0),"@"),d.push(tt(T).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.u,T!=null&&d.push(":",String(T))),(T=this.h)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(Na(T,T.charAt(0)=="/"?Fo:Cc,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",Na(T,jc)),d.join("")},Ln.prototype.resolve=function(d){const v=qt(this);let T=!!d.j;T?on(v,d.j):T=!!d.o,T?v.o=d.o:T=!!d.g,T?v.g=d.g:T=d.u!=null;var $=d.h;if(T)Lr(v,d.u);else if(T=!!d.h){if($.charAt(0)!="/")if(this.g&&!this.h)$="/"+$;else{var le=v.h.lastIndexOf("/");le!=-1&&($=v.h.slice(0,le+1)+$)}if(le=$,le==".."||le==".")$="";else if(le.indexOf("./")!=-1||le.indexOf("/.")!=-1){$=le.lastIndexOf("/",0)==0,le=le.split("/");const be=[];for(let De=0;De<le.length;){const Xe=le[De++];Xe=="."?$&&De==le.length&&be.push(""):Xe==".."?((be.length>1||be.length==1&&be[0]!="")&&be.pop(),$&&De==le.length&&be.push("")):(be.push(Xe),$=!0)}$=be.join("/")}else $=le}return T?v.h=$:T=d.i.toString()!=="",T?$o(v,Dc(d.i)):T=!!d.m,T&&(v.m=d.m),v};function qt(d){return new Ln(d)}function on(d,v,T){d.j=T?Ls(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Lr(d,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);d.u=v}else d.u=null}function $o(d,v,T){v instanceof Mr?(d.i=v,Ai(d.i,d.l)):(T||(v=Na(v,Ur)),d.i=new Mr(v,d.l))}function bt(d,v,T){d.i.set(v,T)}function Ta(d){return bt(d,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),d}function Ls(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Na(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,En),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function En(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Si=/[#\/\?@]/g,Cc=/[#\?:]/g,Fo=/[#\?]/g,Ur=/[#\?@]/g,jc=/#/g;function Mr(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function An(d){d.g||(d.g=new Map,d.h=0,d.i&&ki(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}r=Mr.prototype,r.add=function(d,v){An(this),this.i=null,d=Pr(this,d);let T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function Rc(d,v){An(d),v=Pr(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function Vo(d,v){return An(d),v=Pr(d,v),d.g.has(v)}r.forEach=function(d,v){An(this),this.g.forEach(function(T,$){T.forEach(function(le){d.call(v,le,$,this)},this)},this)};function Ho(d,v){An(d);let T=[];if(typeof v=="string")Vo(d,v)&&(T=T.concat(d.g.get(Pr(d,v))));else for(d=Array.from(d.g.values()),v=0;v<d.length;v++)T=T.concat(d[v]);return T}r.set=function(d,v){return An(this),this.i=null,d=Pr(this,d),Vo(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},r.get=function(d,v){return d?(d=Ho(this,d),d.length>0?String(d[0]):v):v};function Ei(d,v,T){Rc(d,v),T.length>0&&(d.i=null,d.g.set(Pr(d,v),y(T)),d.h+=T.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(let $=0;$<v.length;$++){var T=v[$];const le=tt(T);T=Ho(this,T);for(let be=0;be<T.length;be++){let De=le;T[be]!==""&&(De+="="+tt(T[be])),d.push(De)}}return this.i=d.join("&")};function Dc(d){const v=new Mr;return v.i=d.i,d.g&&(v.g=new Map(d.g),v.h=d.h),v}function Pr(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function Ai(d,v){v&&!d.j&&(An(d),d.i=null,d.g.forEach(function(T,$){const le=$.toLowerCase();$!=le&&(Rc(this,$),Ei(this,le,T))},d)),d.j=v}function hs(d,v){const T=new Sn;if(u.Image){const $=new Image;$.onload=x(Zn,T,"TestLoadImage: loaded",!0,v,$),$.onerror=x(Zn,T,"TestLoadImage: error",!1,v,$),$.onabort=x(Zn,T,"TestLoadImage: abort",!1,v,$),$.ontimeout=x(Zn,T,"TestLoadImage: timeout",!1,v,$),u.setTimeout(function(){$.ontimeout&&$.ontimeout()},1e4),$.src=d}else v(!1)}function qo(d,v){const T=new Sn,$=new AbortController,le=setTimeout(()=>{$.abort(),Zn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:$.signal}).then(be=>{clearTimeout(le),be.ok?Zn(T,"TestPingServer: ok",!0,v):Zn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(le),Zn(T,"TestPingServer: error",!1,v)})}function Zn(d,v,T,$,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),$(T)}catch{}}function zr(){this.g=new Kn}function Us(d){this.i=d.Sb||null,this.h=d.ab||!1}_(Us,Vt),Us.prototype.g=function(){return new Ca(this.i,this.h)};function Ca(d,v){J.call(this),this.H=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}_(Ca,J),r=Ca.prototype,r.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=d,this.D=v,this.readyState=1,fs(this)},r.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};d&&(v.body=d),(this.H||u).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},r.Pa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,fs(this)),this.g&&(this.readyState=3,fs(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ti(this)}else d.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ti(d){d.j.read().then(d.Ma.bind(d)).catch(d.ga.bind(d))}r.Ma=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?Br(this):fs(this),this.readyState==3&&Ti(this)}},r.Oa=function(d){this.g&&(this.response=this.responseText=d,Br(this))},r.Na=function(d){this.g&&(this.response=d,Br(this))},r.ga=function(){this.g&&Br(this)};function Br(d){d.readyState=4,d.l=null,d.j=null,d.B=null,fs(d)}r.setRequestHeader=function(d,v){this.A.append(d,v)},r.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function fs(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ca.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function Qn(d){let v="";return re(d,function(T,$){v+=$,v+=":",v+=T,v+=`\r
`}),v}function ja(d,v,T){e:{for($ in T){var $=!1;break e}$=!0}$||(T=Qn(T),typeof d=="string"?T!=null&&tt(T):bt(d,v,T))}function Et(d){J.call(this),this.headers=new Map,this.L=d||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}_(Et,J);var Ms=/^https?$/i,Go=["POST","PUT"];r=Et.prototype,r.Fa=function(d){this.H=d},r.ea=function(d,v,T,$){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Fe.g(),this.g.onreadystatechange=E(b(this.Ca,this));try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(be){Ra(this,be);return}if(d=T||"",T=new Map(this.headers),$)if(Object.getPrototypeOf($)===Object.prototype)for(var le in $)T.set(le,$[le]);else if(typeof $.keys=="function"&&typeof $.get=="function")for(const be of $.keys())T.set(be,$.get(be));else throw Error("Unknown input type for opt_headers: "+String($));$=Array.from(T.keys()).find(be=>be.toLowerCase()=="content-type"),le=u.FormData&&d instanceof u.FormData,!(Array.prototype.indexOf.call(Go,v,void 0)>=0)||$||le||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,De]of T)this.g.setRequestHeader(be,De);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(d),this.v=!1}catch(be){Ra(this,be)}};function Ra(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.o=5,Ko(d),ar(d)}function Ko(d){d.A||(d.A=!0,de(d,"complete"),de(d,"error"))}r.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=d||7,de(this,"complete"),de(this,"abort"),ar(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ar(this,!0)),Et.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Da(this):this.Xa())},r.Xa=function(){Da(this)};function Da(d){if(d.h&&typeof c<"u"){if(d.v&&ps(d)==4)setTimeout(d.Ca.bind(d),0);else if(de(d,"readystatechange"),ps(d)==4){d.h=!1;try{const be=d.ca();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var $;if($=be===0){let De=String(d.D).match(Nc)[1]||null;!De&&u.self&&u.self.location&&(De=u.self.location.protocol.slice(0,-1)),$=!Ms.test(De?De.toLowerCase():"")}T=$}if(T)de(d,"complete"),de(d,"success");else{d.o=6;try{var le=ps(d)>2?d.g.statusText:""}catch{le=""}d.l=le+" ["+d.ca()+"]",Ko(d)}}finally{ar(d)}}}}function ar(d,v){if(d.g){d.m&&(clearTimeout(d.m),d.m=null);const T=d.g;d.g=null,v||de(d,"ready");try{T.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function ps(d){return d.g?d.g.readyState:0}r.ca=function(){try{return ps(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),sn(v)}};function dn(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.F){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function ir(d){const v={};d=(d.g&&ps(d)>=2&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let $=0;$<d.length;$++){if(L(d[$]))continue;var T=On(d[$]);const le=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const be=v[le]||[];v[le]=be,be.push(T)}te(v,function($){return $.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function $r(d){this.za=0,this.i=[],this.j=new Sn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ps("failFast",!1,d),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ps("baseRetryDelayMs",5e3,d),this.Za=Ps("retryDelaySeedMs",1e4,d),this.Ta=Ps("forwardChannelMaxRetries",2,d),this.va=Ps("forwardChannelRequestTimeoutMs",2e4,d),this.ma=d&&d.xmlHttpFactory||void 0,this.Ua=d&&d.Rb||void 0,this.Aa=d&&d.useFetchStreams||!1,this.O=void 0,this.L=d&&d.supportsCrossDomainXhr||!1,this.M="",this.h=new Uo(d&&d.concurrentRequestLimit),this.Ba=new zr,this.S=d&&d.fastHandshake||!1,this.R=d&&d.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=d&&d.Pb||!1,d&&d.ua&&this.j.ua(),d&&d.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&d&&d.detectBufferingProxy||!1,this.ia=void 0,d&&d.longPollingTimeout&&d.longPollingTimeout>0&&(this.ia=d.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=$r.prototype,r.ka=8,r.I=1,r.connect=function(d,v,T,$){xt(0),this.W=d,this.H=v||{},T&&$!==void 0&&(this.H.OSID=T,this.H.OAID=$),this.F=this.X,this.J=zc(this,null,this.W),zs(this)};function Jo(d){if(Ni(d),d.I==3){var v=d.V++,T=qt(d.J);if(bt(T,"SID",d.M),bt(T,"RID",v),bt(T,"TYPE","terminate"),Oa(d,T),v=new Lt(d,d.j,v),v.M=2,v.A=Ta(qt(T)),T=!1,u.navigator&&u.navigator.sendBeacon)try{T=u.navigator.sendBeacon(v.A.toString(),"")}catch{}!T&&u.Image&&(new Image().src=v.A,T=!0),T||(v.g=Bc(v.j,null),v.g.ea(v.A)),v.F=Date.now(),js(v)}Pc(d)}function Fr(d){d.g&&(Wo(d),d.g.cancel(),d.g=null)}function Ni(d){Fr(d),d.v&&(u.clearTimeout(d.v),d.v=null),ji(d),d.h.cancel(),d.m&&(typeof d.m=="number"&&u.clearTimeout(d.m),d.m=null)}function zs(d){if(!Mo(d.h)&&!d.m){d.m=!0;var v=d.Ea;H||j(),G||(H(),G=!0),M.add(v,d),d.D=0}}function Ci(d,v){return Os(d.h)>=d.h.j-(d.m?1:0)?!1:d.m?(d.i=v.G.concat(d.i),!0):d.I==1||d.I==2||d.D>=(d.Sa?0:d.Ta)?!1:(d.m=Yn(b(d.Ea,d,v),Mc(d,d.D)),d.D++,!0)}r.Ea=function(d){if(this.m)if(this.m=null,this.I==1){if(!d){this.V=Math.floor(Math.random()*1e5),d=this.V++;const le=new Lt(this,this.j,d);let be=this.o;if(this.U&&(be?(be=W(be),pe(be,this.U)):be=this.U),this.u!==null||this.R||(le.J=be,be=null),this.S)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var $=this.i[T];if("__data__"in $.map&&($=$.map.__data__,typeof $=="string")){$=$.length;break t}$=void 0}if($===void 0)break;if(v+=$,v>4096){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=Oc(this,le,v),T=qt(this.J),bt(T,"RID",d),bt(T,"CVER",22),this.G&&bt(T,"X-HTTP-Session-Id",this.G),Oa(this,T),be&&(this.R?v="headers="+tt(Qn(be))+"&"+v:this.u&&ja(T,this.u,be)),Po(this.h,le),this.Ra&&bt(T,"TYPE","init"),this.S?(bt(T,"$req",v),bt(T,"SID","null"),le.U=!0,Cs(le,T,null)):Cs(le,T,v),this.I=2}}else this.I==3&&(d?Yo(this,d):this.i.length==0||Mo(this.h)||Yo(this))};function Yo(d,v){var T;v?T=v.l:T=d.V++;const $=qt(d.J);bt($,"SID",d.M),bt($,"RID",T),bt($,"AID",d.K),Oa(d,$),d.u&&d.o&&ja($,d.u,d.o),T=new Lt(d,d.j,T,d.D+1),d.u===null&&(T.J=d.o),v&&(d.i=v.G.concat(d.i)),v=Oc(d,T,1e3),T.H=Math.round(d.va*.5)+Math.round(d.va*.5*Math.random()),Po(d.h,T),Cs(T,$,v)}function Oa(d,v){d.H&&re(d.H,function(T,$){bt(v,$,T)}),d.l&&re({},function(T,$){bt(v,$,T)})}function Oc(d,v,T){T=Math.min(d.i.length,T);const $=d.l?b(d.l.Ka,d.l,d):null;e:{var le=d.i;let Xe=-1;for(;;){const Bt=["count="+T];Xe==-1?T>0?(Xe=le[0].g,Bt.push("ofs="+Xe)):Xe=0:Bt.push("ofs="+Xe);let yt=!0;for(let Ut=0;Ut<T;Ut++){var be=le[Ut].g;const vn=le[Ut].map;if(be-=Xe,be<0)Xe=Math.max(0,le[Ut].g-100),yt=!1;else try{be="req"+be+"_"||"";try{var De=vn instanceof Map?vn:Object.entries(vn);for(const[or,ms]of De){let gs=ms;f(ms)&&(gs=Je(ms)),Bt.push(be+or+"="+encodeURIComponent(gs))}}catch(or){throw Bt.push(be+"type="+encodeURIComponent("_badmap")),or}}catch{$&&$(vn)}}if(yt){De=Bt.join("&");break e}}De=void 0}return d=d.i.splice(0,T),v.G=d,De}function Ic(d){if(!d.g&&!d.v){d.Y=1;var v=d.Da;H||j(),G||(H(),G=!0),M.add(v,d),d.A=0}}function Ia(d){return d.g||d.v||d.A>=3?!1:(d.Y++,d.v=Yn(b(d.Da,d),Mc(d,d.A)),d.A++,!0)}r.Da=function(){if(this.v=null,Lc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var d=4*this.T;this.j.info("BP detection timer enabled: "+d),this.B=Yn(b(this.Wa,this),d)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xt(10),Fr(this),Lc(this))};function Wo(d){d.B!=null&&(u.clearTimeout(d.B),d.B=null)}function Lc(d){d.g=new Lt(d,d.j,"rpc",d.Y),d.u===null&&(d.g.J=d.o),d.g.P=0;var v=qt(d.na);bt(v,"RID","rpc"),bt(v,"SID",d.M),bt(v,"AID",d.K),bt(v,"CI",d.F?"0":"1"),!d.F&&d.ia&&bt(v,"TO",d.ia),bt(v,"TYPE","xmlhttp"),Oa(d,v),d.u&&d.o&&ja(v,d.u,d.o),d.O&&(d.g.H=d.O);var T=d.g;d=d.ba,T.M=1,T.A=Ta(qt(v)),T.u=null,T.R=!0,xi(T,d)}r.Va=function(){this.C!=null&&(this.C=null,Fr(this),Ia(this),xt(19))};function ji(d){d.C!=null&&(u.clearTimeout(d.C),d.C=null)}function Uc(d,v){var T=null;if(d.g==v){ji(d),Wo(d),d.g=null;var $=2}else if(Is(d.h,v))T=v.G,zo(d.h,v),$=1;else return;if(d.I!=0){if(v.o)if($==1){T=v.u?v.u.length:0,v=Date.now()-v.F;var le=d.D;$=sr(),de($,new un($,T)),zs(d)}else Ic(d);else if(le=v.m,le==3||le==0&&v.X>0||!($==1&&Ci(d,v)||$==2&&Ia(d)))switch(T&&T.length>0&&(v=d.h,v.i=v.i.concat(T)),le){case 1:Bs(d,5);break;case 4:Bs(d,10);break;case 3:Bs(d,6);break;default:Bs(d,2)}}}function Mc(d,v){let T=d.Qa+Math.floor(Math.random()*d.Za);return d.isActive()||(T*=2),T*v}function Bs(d,v){if(d.j.info("Error code "+v),v==2){var T=b(d.bb,d),$=d.Ua;const le=!$;$=new Ln($||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||on($,"https"),Ta($),le?hs($.toString(),T):qo($.toString(),T)}else xt(2);d.I=0,d.l&&d.l.pa(v),Pc(d),Ni(d)}r.bb=function(d){d?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Pc(d){if(d.I=0,d.ja=[],d.l){const v=Bo(d.h);(v.length!=0||d.i.length!=0)&&(A(d.ja,v),A(d.ja,d.i),d.h.i.length=0,y(d.i),d.i.length=0),d.l.oa()}}function zc(d,v,T){var $=T instanceof Ln?qt(T):new Ln(T);if($.g!="")v&&($.g=v+"."+$.g),Lr($,$.u);else{var le=u.location;$=le.protocol,v=v?v+"."+le.hostname:le.hostname,le=+le.port;const be=new Ln(null);$&&on(be,$),v&&(be.g=v),le&&Lr(be,le),T&&(be.h=T),$=be}return T=d.G,v=d.wa,T&&v&&bt($,T,v),bt($,"VER",d.ka),Oa(d,$),$}function Bc(d,v,T){if(v&&!d.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Aa&&!d.ma?new Et(new Us({ab:T})):new Et(d.ma),v.Fa(d.L),v}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $c(){}r=$c.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function yn(d,v){J.call(this),this.g=new $r(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(d?d["X-WebChannel-Client-Profile"]=v.sa:d={"X-WebChannel-Client-Profile":v.sa}),this.g.U=d,(d=v&&v.Qb)&&!L(d)&&(this.g.u=d),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!L(v)&&(this.g.G=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Vr(this)}_(yn,J),yn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},yn.prototype.close=function(){Jo(this.g)},yn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.v&&(T={},T.__data__=Je(d),d=T);v.i.push(new Ht(v.Ya++,d)),v.I==3&&zs(v)},yn.prototype.N=function(){this.g.l=null,delete this.j,Jo(this.g),delete this.g,yn.Z.N.call(this)};function Fc(d){nt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const T in v){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(Fc,nt);function Vc(){rn.call(this),this.status=1}_(Vc,rn);function Vr(d){this.g=d}_(Vr,$c),Vr.prototype.ra=function(){de(this.g,"a")},Vr.prototype.qa=function(d){de(this.g,new Fc(d))},Vr.prototype.pa=function(d){de(this.g,new Vc)},Vr.prototype.oa=function(){de(this.g,"b")},yn.prototype.send=yn.prototype.o,yn.prototype.open=yn.prototype.m,yn.prototype.close=yn.prototype.close,fe.NO_ERROR=0,fe.TIMEOUT=8,fe.HTTP_ERROR=6,Le.COMPLETE="complete",ds.EventType=ot,ot.OPEN="a",ot.CLOSE="b",ot.ERROR="c",ot.MESSAGE="d",J.prototype.listen=J.prototype.J,Et.prototype.listenOnce=Et.prototype.K,Et.prototype.getLastError=Et.prototype.Ha,Et.prototype.getLastErrorCode=Et.prototype.ya,Et.prototype.getStatus=Et.prototype.ca,Et.prototype.getResponseJson=Et.prototype.La,Et.prototype.getResponseText=Et.prototype.la,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Fa}).apply(typeof Yu<"u"?Yu:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xn=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};xn.UNAUTHENTICATED=new xn(null),xn.GOOGLE_CREDENTIALS=new xn("google-credentials-uid"),xn.FIRST_PARTY=new xn("first-party-uid"),xn.MOCK_USER=new xn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc="12.9.0";function $E(r){xc=r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Jp("@firebase/firestore");function Es(r,...e){if(Co.logLevel<=gt.DEBUG){const n=e.map(i0);Co.debug(`Firestore (${xc}): ${r}`,...n)}}function q1(r,...e){if(Co.logLevel<=gt.ERROR){const n=e.map(i0);Co.error(`Firestore (${xc}): ${r}`,...n)}}function FE(r,...e){if(Co.logLevel<=gt.WARN){const n=e.map(i0);Co.warn(`Firestore (${xc}): ${r}`,...n)}}function i0(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rc(r,e,n){let a="Unexpected state";typeof e=="string"?a=e:n=e,G1(r,a,n)}function G1(r,e,n){let a=`FIRESTORE (${xc}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{a+=" CONTEXT: "+JSON.stringify(n)}catch{a+=" CONTEXT: "+n}throw q1(a),new Error(a)}function Kl(r,e,n,a){let o="Unexpected state";typeof n=="string"?o=n:a=n,r||G1(e,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={CANCELLED:"cancelled",INVALID_ARGUMENT:"invalid-argument",FAILED_PRECONDITION:"failed-precondition"};class dt extends tr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(xn.UNAUTHENTICATED)))}shutdown(){}}class HE{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class qE{constructor(e){this.t=e,this.currentUser=xn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Kl(this.o===void 0,42304);let a=this.i;const o=m=>this.i!==a?(a=this.i,n(m)):Promise.resolve();let c=new Jl;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Jl,e.enqueueRetryable((()=>o(this.currentUser)))};const u=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},f=m=>{Es("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(Es("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Jl)}}),0),u()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((a=>this.i!==e?(Es("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Kl(typeof a.accessToken=="string",31837,{l:a}),new K1(a.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Kl(e===null||typeof e=="string",2055,{h:e}),new xn(e)}}class GE{constructor(e,n,a){this.P=e,this.T=n,this.I=a,this.type="FirstParty",this.user=xn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class KE{constructor(e,n,a){this.P=e,this.T=n,this.I=a}getToken(){return Promise.resolve(new GE(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(xn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ey{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class JE{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Hn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Kl(this.o===void 0,3512);const a=c=>{c.error!=null&&Es("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const u=c.token!==this.m;return this.m=c.token,Es("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?n(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>a(c)))};const o=c=>{Es("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>o(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?o(c):Es("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ey(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Kl(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Ey(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let a=0;a<r;a++)n[a]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let a="";for(;a.length<20;){const o=YE(40);for(let c=0;c<o.length;++c)a.length<20&&o[c]<n&&(a+=e.charAt(o[c]%62))}return a}}function Sa(r,e){return r<e?-1:r>e?1:0}function XE(r,e){const n=Math.min(r.length,e.length);for(let a=0;a<n;a++){const o=r.charAt(a),c=e.charAt(a);if(o!==c)return Xf(o)===Xf(c)?Sa(o,c):Xf(o)?1:-1}return Sa(r.length,e.length)}const ZE=55296,QE=57343;function Xf(r){const e=r.charCodeAt(0);return e>=ZE&&e<=QE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="__name__";class qs{constructor(e,n,a){n===void 0?n=0:n>e.length&&rc(637,{offset:n,range:e.length}),a===void 0?a=e.length-n:a>e.length-n&&rc(1746,{length:a,range:e.length-n}),this.segments=e,this.offset=n,this.len=a}get length(){return this.len}isEqual(e){return qs.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof qs?e.forEach((a=>{n.push(a)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,a=this.limit();n<a;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const a=Math.min(e.length,n.length);for(let o=0;o<a;o++){const c=qs.compareSegments(e.get(o),n.get(o));if(c!==0)return c}return Sa(e.length,n.length)}static compareSegments(e,n){const a=qs.isNumericId(e),o=qs.isNumericId(n);return a&&!o?-1:!a&&o?1:a&&o?qs.extractNumericId(e).compare(qs.extractNumericId(n)):XE(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return a0.fromString(e.substring(4,e.length-2))}}class ks extends qs{construct(e,n,a){return new ks(e,n,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const a of e){if(a.indexOf("//")>=0)throw new dt(ut.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);n.push(...a.split("/").filter((o=>o.length>0)))}return new ks(n)}static emptyPath(){return new ks([])}}const eA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ti extends qs{construct(e,n,a){return new ti(e,n,a)}static isValidIdentifier(e){return eA.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ti.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ay}static keyField(){return new ti([Ay])}static fromServerFormat(e){const n=[];let a="",o=0;const c=()=>{if(a.length===0)throw new dt(ut.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(a),a=""};let u=!1;for(;o<e.length;){const f=e[o];if(f==="\\"){if(o+1===e.length)throw new dt(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new dt(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=m,o+=2}else f==="`"?(u=!u,o++):f!=="."||u?(a+=f,o++):(c(),o++)}if(c(),u)throw new dt(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ti(n)}static emptyPath(){return new ti([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(e){this.path=e}static fromPath(e){return new ri(ks.fromString(e))}static fromName(e){return new ri(ks.fromString(e).popFirst(5))}static empty(){return new ri(ks.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ks.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ks.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ri(new ks(e.slice()))}}function tA(r,e,n,a){if(e===!0&&a===!0)throw new dt(ut.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function nA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function sA(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(a){return a.constructor?a.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":rc(12329,{type:typeof r})}function rA(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new dt(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=sA(r);throw new dt(ut.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(r,e){const n={typeString:r};return e&&(n.value=e),n}function wc(r,e){if(!nA(r))throw new dt(ut.INVALID_ARGUMENT,"JSON must be an object");let n;for(const a in e)if(e[a]){const o=e[a].typeString,c="value"in e[a]?{value:e[a].value}:void 0;if(!(a in r)){n=`JSON missing required field: '${a}'`;break}const u=r[a];if(o&&typeof u!==o){n=`JSON field '${a}' must be a ${o}.`;break}if(c!==void 0&&u!==c.value){n=`Expected '${a}' field to equal '${c.value}'`;break}}if(n)throw new dt(ut.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=-62135596800,Ny=1e6;class Gs{static now(){return Gs.fromMillis(Date.now())}static fromDate(e){return Gs.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),a=Math.floor((e-1e3*n)*Ny);return new Gs(n,a)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new dt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new dt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ty)throw new dt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ny}_compareTo(e){return this.seconds===e.seconds?Sa(this.nanoseconds,e.nanoseconds):Sa(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Gs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(wc(e,Gs._jsonSchema))return new Gs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ty;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Gs._jsonSchemaVersion="firestore/timestamp/1.0",Gs._jsonSchema={type:Zt("string",Gs._jsonSchemaVersion),seconds:Zt("number"),nanoseconds:Zt("number")};function aA(r){return r.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new iA("Invalid base64 string: "+c):c}})(e);return new pi(n)}static fromUint8Array(e){const n=(function(o){let c="";for(let u=0;u<o.length;++u)c+=String.fromCharCode(o[u]);return c})(e);return new pi(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const a=new Uint8Array(n.length);for(let o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return a})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Sa(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pi.EMPTY_BYTE_STRING=new pi("");const Ep="(default)";class Sd{constructor(e,n){this.projectId=e,this.database=n||Ep}static empty(){return new Sd("","")}get isDefaultDatabase(){return this.database===Ep}isEqual(e){return e instanceof Sd&&e.projectId===this.projectId&&e.database===this.database}}function oA(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new dt(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sd(r.options.projectId,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,n=null,a=[],o=[],c=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=a,this.filters=o,this.limit=c,this.limitType=u,this.startAt=f,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function cA(r){return new lA(r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cy,ct;(ct=Cy||(Cy={}))[ct.OK=0]="OK",ct[ct.CANCELLED=1]="CANCELLED",ct[ct.UNKNOWN=2]="UNKNOWN",ct[ct.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ct[ct.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ct[ct.NOT_FOUND=5]="NOT_FOUND",ct[ct.ALREADY_EXISTS=6]="ALREADY_EXISTS",ct[ct.PERMISSION_DENIED=7]="PERMISSION_DENIED",ct[ct.UNAUTHENTICATED=16]="UNAUTHENTICATED",ct[ct.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ct[ct.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ct[ct.ABORTED=10]="ABORTED",ct[ct.OUT_OF_RANGE=11]="OUT_OF_RANGE",ct[ct.UNIMPLEMENTED=12]="UNIMPLEMENTED",ct[ct.INTERNAL=13]="INTERNAL",ct[ct.UNAVAILABLE=14]="UNAVAILABLE",ct[ct.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new a0([4294967295,4294967295],0);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA=41943040;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=1048576;function Zf(){return typeof document<"u"?document:null}class hA{constructor(e,n,a=1e3,o=1.5,c=6e4){this.Ci=e,this.timerId=n,this.R_=a,this.A_=o,this.V_=c,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),a=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-a);o>0&&Es("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${a} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o0{constructor(e,n,a,o,c){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=a,this.op=o,this.removalCallback=c,this.deferred=new Jl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,a,o,c){const u=Date.now()+a,f=new o0(e,n,u,o,c);return f.start(a),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new dt(ut.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}var jy,Ry;(Ry=jy||(jy={})).Ma="default",Ry.Cache="cache";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pA="ComponentProvider",Dy=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J1="firestore.googleapis.com",Oy=!0;class Iy{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new dt(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=J1,this.ssl=Oy}else this.host=e.host,this.ssl=e.ssl??Oy;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=uA;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<dA)throw new dt(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=fA(e.experimentalLongPollingOptions??{}),(function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new dt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new dt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new dt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(a,o){return a.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Y1{constructor(e,n,a,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=a,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Iy({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new dt(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new dt(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Iy(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(a){if(!a)return new VE;switch(a.type){case"firstParty":return new KE(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new dt(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const a=Dy.get(n);a&&(Es(pA,"Removing Datastore"),Dy.delete(n),a.terminate())})(this),Promise.resolve()}}function mA(r,e,n,a={}){var b;r=rA(r,Y1);const o=Ro(e),c=r._getSettings(),u={...c,emulatorOptions:r._getEmulatorOptions()},f=`${e}:${n}`;o&&(Gp(`https://${f}`),Kp("Firestore",!0)),c.host!==J1&&c.host!==f&&FE("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:f,ssl:o,emulatorOptions:a};if(!ui(m,u)&&(r._setSettings(m),a.mockUserToken)){let x,_;if(typeof a.mockUserToken=="string")x=a.mockUserToken,_=xn.MOCK_USER;else{x=a1(a.mockUserToken,(b=r._app)==null?void 0:b.options.projectId);const E=a.mockUserToken.sub||a.mockUserToken.user_id;if(!E)throw new dt(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new xn(E)}r._authCredentials=new HE(new K1(x,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l0{constructor(e,n,a){this.converter=n,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new l0(this.firestore,e,this._query)}}class Js{constructor(e,n,a){this.converter=n,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new c0(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Js(this.firestore,e,this._key)}toJSON(){return{type:Js._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,a){if(wc(n,Js._jsonSchema))return new Js(e,a||null,new ri(ks.fromString(n.referencePath)))}}Js._jsonSchemaVersion="firestore/documentReference/1.0",Js._jsonSchema={type:Zt("string",Js._jsonSchemaVersion),referencePath:Zt("string")};class c0 extends l0{constructor(e,n,a){super(e,n,cA(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Js(this.firestore,null,new ri(e))}withConverter(e){return new c0(this.firestore,e,this._path)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="AsyncQueue";class Uy{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new hA(this,"async_queue_retry"),this._c=()=>{const a=Zf();a&&Es(Ly,"Visibility state changed to "+a.visibilityState),this.M_.w_()},this.ac=e;const n=Zf();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Zf();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Jl;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!aA(e))throw e;Es(Ly,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((a=>{throw this.nc=a,this.rc=!1,q1("INTERNAL UNHANDLED ERROR: ",My(a)),a})).then((a=>(this.rc=!1,a))))));return this.ac=n,n}enqueueAfterDelay(e,n,a){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=o0.createAndSchedule(this,e,n,a,(c=>this.hc(c)));return this.tc.push(o),o}uc(){this.nc&&rc(47125,{Pc:My(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,a)=>n.targetTimeMs-a.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function My(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class gA extends Y1{constructor(e,n,a,o){super(e,n,a,o),this.type="firestore",this._queue=new Uy,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Uy(e),this._firestoreClient=void 0,await e}}}function bA(r,e){const n=typeof r=="object"?r:Wp(),a=typeof r=="string"?r:Ep,o=Ld(n,"firestore").getImmediate({identifier:a});if(!o._initialized){const c=n1("firestore");c&&mA(o,...c)}return o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(pi.fromBase64String(e))}catch(n){throw new dt(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(pi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Er._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(wc(e,Er._jsonSchema))return Er.fromBase64String(e.bytes)}}Er._jsonSchemaVersion="firestore/bytes/1.0",Er._jsonSchema={type:Zt("string",Er._jsonSchemaVersion),bytes:Zt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new dt(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ti(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new dt(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new dt(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Sa(this._lat,e._lat)||Sa(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:oi._jsonSchemaVersion}}static fromJSON(e){if(wc(e,oi._jsonSchema))return new oi(e.latitude,e.longitude)}}oi._jsonSchemaVersion="firestore/geoPoint/1.0",oi._jsonSchema={type:Zt("string",oi._jsonSchemaVersion),latitude:Zt("number"),longitude:Zt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(a,o){if(a.length!==o.length)return!1;for(let c=0;c<a.length;++c)if(a[c]!==o[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(wc(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new li(e.vectorValues);throw new dt(ut.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Zt("string",li._jsonSchemaVersion),vectorValues:Zt("object")};function X1(r,e,n){if((e=us(e))instanceof W1)return e._internalPath;if(typeof e=="string")return vA(r,e);throw Ap("Field path arguments must be of type string or ",r)}const yA=new RegExp("[~\\*/\\[\\]]");function vA(r,e,n){if(e.search(yA)>=0)throw Ap(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r);try{return new W1(...e.split("."))._internalPath}catch{throw Ap(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r)}}function Ap(r,e,n,a,o){let c=`Function ${e}() called with invalid data`;c+=". ";let u="";return new dt(ut.INVALID_ARGUMENT,c+r+u)}const Py="@firebase/firestore",zy="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z1{constructor(e,n,a,o,c){this._firestore=e,this._userDataWriter=n,this._key=a,this._document=o,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new Js(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new _A(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(X1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class _A extends Z1{data(){return super.data()}}class Wu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ao extends Z1{constructor(e,n,a,o,c,u){super(e,n,a,o,u),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const a=this._document.data.field(X1("DocumentSnapshot.get",e));if(a!==null)return this._userDataWriter.convertValue(a,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(ut.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Ao._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Ao._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ao._jsonSchema={type:Zt("string",Ao._jsonSchemaVersion),bundleSource:Zt("string","DocumentSnapshot"),bundleName:Zt("string"),bundle:Zt("string")};class fd extends Ao{data(e={}){return super.data(e)}}class Yl{constructor(e,n,a,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new Wu(o.hasPendingWrites,o.fromCache),this.query=a}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((a=>{e.call(n,new fd(this._firestore,this._userDataWriter,a.key,a,new Wu(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new dt(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,c){if(o._snapshot.oldDocs.isEmpty()){let u=0;return o._snapshot.docChanges.map((f=>{const m=new fd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Wu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((f=>c||f.type!==3)).map((f=>{const m=new fd(o._firestore,o._userDataWriter,f.doc.key,f.doc,new Wu(o._snapshot.mutatedKeys.has(f.doc.key),o._snapshot.fromCache),o.query.converter);let b=-1,x=-1;return f.type!==0&&(b=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),x=u.indexOf(f.doc.key)),{type:xA(f.type),doc:m,oldIndex:b,newIndex:x}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new dt(ut.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Yl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=WE.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],a=[],o=[];return this.docs.forEach((c=>{c._document!==null&&(n.push(c._document),a.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),o.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function xA(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rc(61501,{type:r})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yl._jsonSchemaVersion="firestore/querySnapshot/1.0",Yl._jsonSchema={type:Zt("string",Yl._jsonSchemaVersion),bundleSource:Zt("string","QuerySnapshot"),bundleName:Zt("string"),bundle:Zt("string")};(function(e,n=!0){$E(bi),di(new ka("firestore",((a,{instanceIdentifier:o,options:c})=>{const u=a.getProvider("app").getImmediate(),f=new gA(new qE(a.getProvider("auth-internal")),new JE(u,a.getProvider("app-check-internal")),oA(u,o),u);return c={useFetchStreams:n,...c},f._setSettings(c),f}),"PUBLIC").setMultipleInstances(!0)),Ys(Py,zy,e),Ys(Py,zy,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1="firebasestorage.googleapis.com",wA="storageBucket",kA=120*1e3,SA=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Aa=class e_ extends tr{constructor(e,n,a=0){super(Qf(e),`Firebase Storage: ${n} (${Qf(e)})`),this.status_=a,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,e_.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var er;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(er||(er={}));function Qf(r){return"storage/"+r}function EA(){const r="An unknown error occurred, please check the error payload for server response.";return new Aa(er.UNKNOWN,r)}function AA(){return new Aa(er.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function TA(){return new Aa(er.CANCELED,"User canceled the upload/download.")}function NA(r){return new Aa(er.INVALID_URL,"Invalid URL '"+r+"'.")}function CA(r){return new Aa(er.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function By(r){return new Aa(er.INVALID_ARGUMENT,r)}function t_(){return new Aa(er.APP_DELETED,"The Firebase app was deleted.")}function jA(r){return new Aa(er.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let a;try{a=As.makeFromUrl(e,n)}catch{return new As(e,"")}if(a.path==="")return a;throw CA(e)}static makeFromUrl(e,n){let a=null;const o="([A-Za-z0-9.\\-_]+)";function c(V){V.path.charAt(V.path.length-1)==="/"&&(V.path_=V.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+o+u,"i"),m={bucket:1,path:3};function b(V){V.path_=decodeURIComponent(V.path)}const x="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),E="(/([^?#]*).*)?$",y=new RegExp(`^https?://${_}/${x}/b/${o}/o${E}`,"i"),A={bucket:1,path:3},k=n===Q1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",C=new RegExp(`^https?://${k}/${o}/${N}`,"i"),z=[{regex:f,indices:m,postModify:c},{regex:y,indices:A,postModify:b},{regex:C,indices:{bucket:1,path:2},postModify:b}];for(let V=0;V<z.length;V++){const H=z[V],G=H.regex.exec(e);if(G){const M=G[H.indices.bucket];let j=G[H.indices.path];j||(j=""),a=new As(M,j),H.postModify(a);break}}if(a==null)throw NA(e);return a}}class RA{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(r,e,n){let a=1,o=null,c=null,u=!1,f=0;function m(){return f===2}let b=!1;function x(...N){b||(b=!0,e.apply(null,N))}function _(N){o=setTimeout(()=>{o=null,r(y,m())},N)}function E(){c&&clearTimeout(c)}function y(N,...C){if(b){E();return}if(N){E(),x.call(null,N,...C);return}if(m()||u){E(),x.call(null,N,...C);return}a<64&&(a*=2);let z;f===1?(f=2,z=0):z=(a+Math.random())*1e3,_(z)}let A=!1;function k(N){A||(A=!0,E(),!b&&(o!==null?(N||(f=2),clearTimeout(o),_(0)):N||(f=1)))}return _(0),c=setTimeout(()=>{u=!0,k(!0)},n),k}function OA(r){r(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(r){return r!==void 0}function $y(r,e,n,a){if(a<e)throw By(`Invalid value for '${r}'. Expected ${e} or greater.`);if(a>n)throw By(`Invalid value for '${r}'. Expected ${n} or less.`)}function LA(r){const e=encodeURIComponent;let n="?";for(const a in r)if(r.hasOwnProperty(a)){const o=e(a)+"="+e(r[a]);n=n+o+"&"}return n=n.slice(0,-1),n}var Ed;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(Ed||(Ed={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UA(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,c=e.indexOf(r)!==-1;return n||o||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,n,a,o,c,u,f,m,b,x,_,E=!0,y=!1){this.url_=e,this.method_=n,this.headers_=a,this.body_=o,this.successCodes_=c,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=x,this.connectionFactory_=_,this.retry=E,this.isUsingEmulator=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((A,k)=>{this.resolve_=A,this.reject_=k,this.start_()})}start_(){const e=(a,o)=>{if(o){a(!1,new Xu(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const u=f=>{const m=f.loaded,b=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(m,b)};this.progressCallback_!==null&&c.addUploadProgressListener(u),c.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(u),this.pendingConnection_=null;const f=c.getErrorCode()===Ed.NO_ERROR,m=c.getStatus();if(!f||UA(m,this.additionalRetryCodes_)&&this.retry){const x=c.getErrorCode()===Ed.ABORT;a(!1,new Xu(!1,null,x));return}const b=this.successCodes_.indexOf(m)!==-1;a(!0,new Xu(b,c))})},n=(a,o)=>{const c=this.resolve_,u=this.reject_,f=o.connection;if(o.wasSuccessCode)try{const m=this.callback_(f,f.getResponse());IA(m)?c(m):c()}catch(m){u(m)}else if(f!==null){const m=EA();m.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,m)):u(m)}else if(o.canceled){const m=this.appDelete_?t_():TA();u(m)}else{const m=AA();u(m)}};this.canceled_?n(!1,new Xu(!1,null,!0)):this.backoffId_=DA(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&OA(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xu{constructor(e,n,a){this.wasSuccessCode=e,this.connection=n,this.canceled=!!a}}function PA(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function zA(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function BA(r,e){e&&(r["X-Firebase-GMPID"]=e)}function $A(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function FA(r,e,n,a,o,c,u=!0,f=!1){const m=LA(r.urlParams),b=r.url+m,x=Object.assign({},r.headers);return BA(x,e),PA(x,n),zA(x,c),$A(x,a),new MA(b,r.method,x,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,u,f)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VA(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function HA(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e,n){this._service=e,n instanceof As?this._location=n:this._location=As.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ad(e,n)}get root(){const e=new As(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return HA(this._location.path)}get storage(){return this._service}get parent(){const e=VA(this._location.path);if(e===null)return null;const n=new As(this._location.bucket,e);return new Ad(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw jA(e)}}function Fy(r,e){const n=e==null?void 0:e[wA];return n==null?null:As.makeFromBucketSpec(n,r)}function qA(r,e,n,a={}){r.host=`${e}:${n}`;const o=Ro(e);o&&(Gp(`https://${r.host}/b`),Kp("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:c}=a;c&&(r._overrideAuthToken=typeof c=="string"?c:a1(c,r.app.options.projectId))}class GA{constructor(e,n,a,o,c,u=!1){this.app=e,this._authProvider=n,this._appCheckProvider=a,this._url=o,this._firebaseVersion=c,this._isUsingEmulator=u,this._bucket=null,this._host=Q1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=kA,this._maxUploadRetryTime=SA,this._requests=new Set,o!=null?this._bucket=As.makeFromBucketSpec(o,this._host):this._bucket=Fy(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=As.makeFromBucketSpec(this._url,e):this._bucket=Fy(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){$y("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){$y("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Hn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ad(this,e)}_makeRequest(e,n,a,o,c=!0){if(this._deleted)return new RA(t_());{const u=FA(e,this._appId,a,o,n,this._firebaseVersion,c,this._isUsingEmulator);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,n){const[a,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,a,o).getPromise()}}const Vy="@firebase/storage",Hy="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="storage";function KA(r=Wp(),e){r=us(r);const a=Ld(r,n_).getImmediate({identifier:e}),o=n1("storage");return o&&JA(a,...o),a}function JA(r,e,n,a={}){qA(r,e,n,a)}function YA(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),a=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new GA(n,a,o,e,bi)}function WA(){di(new ka(n_,YA,"PUBLIC").setMultipleInstances(!0)),Ys(Vy,Hy,""),Ys(Vy,Hy,"esm2020")}WA();const XA={apiKey:"AIzaSyBvRGiSWUdnZ88NsUX0EsLdnXwJk5AXVSA",authDomain:"app-correo-cft.firebaseapp.com",projectId:"app-correo-cft",storageBucket:"app-correo-cft.firebasestorage.app",messagingSenderId:"140293468941",appId:"1:140293468941:web:5e0ac40c2587880b34f644"},u0=l1(XA),oo=ME(u0);bA(u0);KA(u0);const qy={admin:{canCreateDecree:!0,canEditDecree:!0,canDeleteDecree:!0,canGeneratePDF:!0,canManageEmployees:!0,canExportExcel:!0,canExportDashboard:!0,canAccessSettings:!0},editor:{canCreateDecree:!0,canEditDecree:!0,canDeleteDecree:!1,canGeneratePDF:!0,canManageEmployees:!0,canExportExcel:!0,canExportDashboard:!0,canAccessSettings:!1},reader:{canCreateDecree:!1,canEditDecree:!1,canDeleteDecree:!1,canGeneratePDF:!0,canManageEmployees:!1,canExportExcel:!0,canExportDashboard:!0,canAccessSettings:!1}},Vl={admin:"Administrador",editor:"Editor",reader:"Lector"},Tp={admin:{bg:"bg-purple-100 dark:bg-purple-900/40",text:"text-purple-700 dark:text-purple-300"},editor:{bg:"bg-amber-100 dark:bg-amber-900/40",text:"text-amber-700 dark:text-amber-300"},reader:{bg:"bg-sky-100 dark:bg-sky-900/40",text:"text-sky-700 dark:text-sky-300"}},s_=r=>qy[r]||qy.reader,ZA=(r,e)=>s_(r)[e],r_="gdp_audit_log",QA=500,a_=()=>{try{const r=localStorage.getItem(r_);if(!r)return[];const e=JSON.parse(r);return Array.isArray(e)?e.filter(n=>n&&typeof n.timestamp=="number").sort((n,a)=>a.timestamp-n.timestamp):[]}catch{return[]}},eT=r=>{try{localStorage.setItem(r_,JSON.stringify(r.slice(0,QA)))}catch{}},Dn=r=>{const e={id:crypto.randomUUID(),timestamp:Date.now(),...r},n=a_();eT([e,...n])},Gy=r=>{const e=a_();return r?e.filter(n=>n.scope===r):e},i_="gdp_user_roles",o_="gdp_user_profiles",l_="gdp_user_security",kc=r=>r.trim().toLowerCase(),tT=()=>"mguzmanahumada@gmail.com".trim().toLowerCase(),bo=()=>{try{const e=localStorage.getItem(i_);if(e)return JSON.parse(e)}catch{}const r=tT();return r?{[r]:"admin"}:{}},Zu=r=>{localStorage.setItem(i_,JSON.stringify(r))},Ll=()=>{try{const r=localStorage.getItem(o_);if(!r)return{};const e=JSON.parse(r);return Object.entries(e).reduce((n,[a,o])=>(n[kc(a)]={firstName:String((o==null?void 0:o.firstName)||"").trim(),lastName:String((o==null?void 0:o.lastName)||"").trim()},n),{})}catch{return{}}},Qu=r=>{localStorage.setItem(o_,JSON.stringify(r))},ai=()=>{try{const r=localStorage.getItem(l_);if(!r)return{};const e=JSON.parse(r);return Object.entries(e).reduce((n,[a,o])=>(n[kc(a)]={blocked:!!(o!=null&&o.blocked),forcePasswordChange:!!(o!=null&&o.forcePasswordChange),lastAccessAt:typeof(o==null?void 0:o.lastAccessAt)=="number"?o.lastAccessAt:null},n),{})}catch{return{}}},Wl=r=>{localStorage.setItem(l_,JSON.stringify(r))},Ky=r=>ai()[kc(r)]||{blocked:!1,forcePasswordChange:!1,lastAccessAt:null},nT=r=>{const e=kc(r),n=ai(),a=n[e]||{blocked:!1,forcePasswordChange:!1,lastAccessAt:null};n[e]={...a,lastAccessAt:Date.now()},Wl(n)},pd=(r,e)=>{const n=kc(r),a=ai(),o=a[n]||{blocked:!1,forcePasswordChange:!1,lastAccessAt:null};a[n]={...o,...e},Wl(a)},c_=K.createContext(void 0),d0=()=>{const r=K.useContext(c_);if(!r)throw new Error("useAuth debe usarse dentro de un AuthProvider");return r},sT=r=>r&&bo()[r.toLowerCase()]||"reader",rT=({children:r})=>{const[e,n]=K.useState(null),[a,o]=K.useState(null),[c,u]=K.useState(null),[f,m]=K.useState(!0),b=(c==null?void 0:c.role)||sT((e==null?void 0:e.email)||void 0),x=s_(b),_=Vl[b],E=Tp[b],y=V=>ZA(b,V),A=async V=>{};K.useEffect(()=>{const V=AS(oo,async H=>{if(H!=null&&H.email&&Ky(H.email).blocked){await py(oo),o(null),n(null),u(null),m(!1);return}if(n(H),H){const G=await Ik(H);o({access_token:G}),await A(H.uid)}else o(null),u(null);m(!1)});return()=>V()},[]);const z={user:e,session:a,profile:c,role:b,permissions:x,loading:f,signIn:async(V,H)=>{const G=V.trim().toLowerCase();if(!!"AIzaSyBvRGiSWUdnZ88NsUX0EsLdnXwJk5AXVSA".includes("placeholder"))try{const O=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:G,password:H})}),F=await O.json();if(O.ok){const q={uid:"mock-user-id",email:G,displayName:G.split("@")[0],getIdToken:async()=>F.token};return o({access_token:F.token}),n(q),sessionStorage.setItem("hrAppToken",F.token),Dn({scope:"auth",action:"login_success_local",actor:G,target:G,details:"Inicio de sesin local exitoso"}),{error:null}}else return{error:{message:F.error||"Error al iniciar sesin local"}}}catch{return{error:{message:"Error de conexin con el servidor local"}}}if(Ky(G).blocked)return{error:{message:"Tu cuenta est bloqueada. Contacta al administrador."}};try{const F=(await kS(oo,V,H)).user.email||"";return nT(F),Dn({scope:"auth",action:"login_success_firebase",actor:F,target:F,details:"Inicio de sesin Firebase exitoso"}),{error:null}}catch(O){return{error:O}}},signUp:async(V,H)=>{try{return await wS(oo,V,H),{error:null}}catch(G){return{error:G}}},signOut:async()=>{e!=null&&e.email&&Dn({scope:"auth",action:"logout",actor:e.email,target:e.email,details:"Cierre de sesin"}),u(null),await py(oo)},resetPassword:async V=>{try{return await xS(oo,V),pd(V,{forcePasswordChange:!1}),{error:null}}catch(H){return{error:H}}},hasPermission:y,roleLabel:_,roleColors:E};return h.jsx(c_.Provider,{value:z,children:r})},aT={default:{name:"ndigo",primary:"bg-indigo-600",primaryHover:"hover:bg-indigo-700",primaryLight:"bg-indigo-50 dark:bg-indigo-900/30",accent:"text-indigo-600 dark:text-indigo-400",gradient:"from-indigo-500 to-sky-500"},ocean:{name:"Ocano",primary:"bg-cyan-600",primaryHover:"hover:bg-cyan-700",primaryLight:"bg-cyan-50 dark:bg-cyan-900/30",accent:"text-cyan-600 dark:text-cyan-400",gradient:"from-cyan-500 to-blue-500"},forest:{name:"Bosque",primary:"bg-emerald-600",primaryHover:"hover:bg-emerald-700",primaryLight:"bg-emerald-50 dark:bg-emerald-900/30",accent:"text-emerald-600 dark:text-emerald-400",gradient:"from-emerald-500 to-teal-500"},sunset:{name:"Atardecer",primary:"bg-orange-600",primaryHover:"hover:bg-orange-700",primaryLight:"bg-orange-50 dark:bg-orange-900/30",accent:"text-orange-600 dark:text-orange-400",gradient:"from-orange-500 to-rose-500"},purple:{name:"Violeta",primary:"bg-violet-600",primaryHover:"hover:bg-violet-700",primaryLight:"bg-violet-50 dark:bg-violet-900/30",accent:"text-violet-600 dark:text-violet-400",gradient:"from-violet-500 to-purple-500"},rose:{name:"Rosa",primary:"bg-rose-600",primaryHover:"hover:bg-rose-700",primaryLight:"bg-rose-50 dark:bg-rose-900/30",accent:"text-rose-600 dark:text-rose-400",gradient:"from-rose-500 to-pink-500"}},u_=K.createContext(void 0),iT=({children:r})=>{const[e,n]=K.useState(()=>localStorage.getItem("sgp_theme_color")||"default"),a=o=>{n(o),localStorage.setItem("sgp_theme_color",o),document.documentElement.setAttribute("data-theme",o)};return K.useEffect(()=>{document.documentElement.setAttribute("data-theme",e)},[e]),h.jsx(u_.Provider,{value:{theme:e,setTheme:a,config:aT[e]},children:r})},c6=()=>{const r=K.useContext(u_);if(!r)throw new Error("useTheme must be used within ThemeProvider");return r},oT=()=>{const[r,e]=K.useState(()=>{const a=localStorage.getItem("sgp_dark_mode");return a!==null?a==="true":window.matchMedia("(prefers-color-scheme: dark)").matches});return K.useEffect(()=>{const a=document.documentElement;r?a.classList.add("dark"):a.classList.remove("dark"),localStorage.setItem("sgp_dark_mode",String(r))},[r]),K.useEffect(()=>{const a=window.matchMedia("(prefers-color-scheme: dark)"),o=c=>{localStorage.getItem("sgp_dark_mode")===null&&e(c.matches)};return a.addEventListener("change",o),()=>a.removeEventListener("change",o)},[]),{isDark:r,toggle:()=>e(a=>!a),setIsDark:e}},Jy={employeeList:!1,lowBalance:!1,decreeBook:!1,shortcuts:!1,calendar:!1,themeSelector:!1,confirmDelete:!1},lT=()=>{const[r,e]=K.useState(Jy),n=K.useCallback(f=>{e(m=>({...m,[f]:!0}))},[]),a=K.useCallback(f=>{e(m=>({...m,[f]:!1}))},[]),o=K.useCallback(f=>{e(m=>({...m,[f]:!m[f]}))},[]),c=K.useCallback(()=>{e(Jy)},[]),u=K.useMemo(()=>Object.values(r).some(Boolean),[r]);return{modals:r,openModal:n,closeModal:a,toggleModal:o,closeAllModals:c,isAnyModalOpen:u}},Tt={WEB_APP_URL:"https://script.google.com/macros/s/AKfycbzFnXNBOFdSn6Gn0Y_uRAikrK6wcQlTCS2Qo-pGqeb_uTLgyrJAf50Rglgml1hzWscRSw/exec",WEB_APP_URL_FL:"https://script.google.com/macros/s/AKfycbwJobNnBD1nV4_kt8gnBOVMNodznPuD8AGsxtTbUXF6E67RIWDm3Mxwxri3xdC4I9qM/exec",WEB_APP_URL_FL_2P:"https://script.google.com/macros/s/AKfycbwYzlkEQRVA7O6l0QhjgfQL51Uq_KFLImiiOUEeayge8c1J833AJwO07-nYoK_OviXEdg/exec",DECRETOS_SHEET_ID:"1BmMABAHk8ZgpUlXzsyI33qQGtsk5mrKnf5qzgQp4US0",FERIADOS_SHEET_ID:"1dSZ7v5WwP1w1WpwfP3hdWiTCF3pf2niXLKDK7GWIz0I",FERIADOS_2P_SHEET_ID:"1dSZ7v5WwP1w1WpwfP3hdWiTCF3pf2niXLKDK7GWIz0I",EMPLOYEES_SHEET_ID:"14qgHA7YP4qoSbzD8rgMPW6OmqLIVFi8V-1VPxoUEDbI",TARGET_FOLDER_ID:"1sX722eJuMnnrhqPO-zJF9ccCqlktLDo8",TEMPLATE_DOC_ID:"1BvJanZb0936sPvV0oEZw-E0sro_02ibm_BFQuXa6F24",TEMPLATE_FL_1P_DOC_ID:"1gTjGkhmq-PWi5zmo_zMrpzysgs4d0SCTynbGaVC1YPw",TEMPLATE_FL_2P_DOC_ID:"16w2phHHq1YE4ws-fSQO_EGnXcdKFrGGLQVTVW0zbPJs",APP_VERSION:"2.4",ITEMS_PER_PAGE:15},ep=r=>{if(!r||r.length<8)return!1;const e=r.replace(/\./g,"").replace(/-/g,"").toUpperCase(),n=e.slice(0,-1),a=e.slice(-1);if(!/^\d+$/.test(n))return!1;let o=0,c=2;for(let m=n.length-1;m>=0;m--)o+=parseInt(n[m])*c,c=c===7?2:c+1;const u=11-o%11,f=u===11?"0":u===10?"K":u.toString();return a===f},tp=r=>{if(!r)return!1;const e=new Date(r);return!isNaN(e.getTime())&&e.getFullYear()>=2020&&e.getFullYear()<=2030},cT={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ADMIN_EMAIL:"mguzmanahumada@gmail.com",VITE_API_BASE_URL:"",VITE_API_PROXY_TARGET:"http://localhost:4000",VITE_FIREBASE_API_KEY:"AIzaSyBvRGiSWUdnZ88NsUX0EsLdnXwJk5AXVSA",VITE_FIREBASE_APP_ID:"1:140293468941:web:5e0ac40c2587880b34f644",VITE_FIREBASE_AUTH_DOMAIN:"app-correo-cft.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"140293468941",VITE_FIREBASE_PROJECT_ID:"app-correo-cft",VITE_FIREBASE_STORAGE_BUCKET:"app-correo-cft.firebasestorage.app"},lo=(()=>{try{if(typeof import.meta<"u"&&cT)return!1}catch{}return!1})(),fa=(r,e,n={})=>{const a=[];return n.showTimestamp&&a.push(`[${new Date().toISOString()}]`),n.prefix&&a.push(`[${n.prefix}]`),a.push(`[${r.toUpperCase()}]`),a.push(e),a.join(" ")},yi={debug:(r,...e)=>{lo&&console.debug(fa("debug",r),...e)},info:(r,...e)=>{lo&&console.info(fa("info",r),...e)},warn:(r,...e)=>{lo&&console.warn(fa("warn",r),...e)},error:(r,...e)=>{console.error(fa("error",r),...e)},create:r=>({debug:(e,...n)=>{lo&&console.debug(fa("debug",e,{prefix:r}),...n)},info:(e,...n)=>{lo&&console.info(fa("info",e,{prefix:r}),...n)},warn:(e,...n)=>{lo&&console.warn(fa("warn",e,{prefix:r}),...n)},error:(e,...n)=>{console.error(fa("error",e,{prefix:r}),...n)},create:e=>yi.create(`${r}:${e}`)})},uT={enero:"01",febrero:"02",marzo:"03",abril:"04",mayo:"05",junio:"06",julio:"07",agosto:"08",septiembre:"09",octubre:"10",noviembre:"11",diciembre:"12"},Np=r=>{if(!r)return"";if(/^\d{4}-\d{2}-\d{2}/.test(r))return r.split("T")[0];const e=r.trim().match(/^(\d{1,2})[\/-](\d{1,2})[\/-](\d{4})$/);if(e){const a=e[1].padStart(2,"0"),o=e[2].padStart(2,"0");return`${e[3]}-${o}-${a}`}const n=r.match(/(\d{1,2})\s+de\s+(\w+)\s+de\s+(\d{4})/i);if(n){const a=n[1].padStart(2,"0"),o=uT[n[2].toLowerCase()]||"01";return`${n[3]}-${o}-${a}`}return""},Zs=r=>Np(String(r||"")),ls=(r,e)=>{const n=typeof r=="number"?r:parseFloat(String(r||"").replace(",","."));return Number.isNaN(n)?e:n},d_=r=>{const e=r.trim();return/^\d{4}$/.test(e)?e:new Date().getFullYear().toString()},np=r=>{const e=r.replace(/\./g,"").replace("-","");if(e.length<=1)return e;const n=e.slice(-1);return e.slice(0,-1).replace(/\B(?=(\d{3})+(?!\d))/g,".")+"-"+n},Xl=r=>r?r.toLowerCase().trim().split(/\s+/).map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "):"",Ts=r=>{if(!r)return"";const e=new Date(r+"T12:00:00");return new Intl.DateTimeFormat("es-CL",{weekday:"long",day:"2-digit",month:"long",year:"numeric"}).format(e)},sp=r=>{if(!r)return"";const e=new Date(r+"T12:00:00"),n=e.getDate().toString().padStart(2,"0"),a=(e.getMonth()+1).toString().padStart(2,"0"),o=e.getFullYear();return`${n}/${a}/${o}`},dT=r=>{if(!r)return"";const e=new Date(r+"T12:00:00");return`${e.getDate().toString().padStart(2,"0")} de ${["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"][e.getMonth()]} de ${e.getFullYear()}`},Yy=r=>{if(!r)return"";const e=new Date(r+"T12:00:00");return new Intl.DateTimeFormat("es-CL",{day:"2-digit",month:"long",year:"numeric"}).format(e)},hT=(r,e,n)=>{const a=r.trim();if(!a)return null;const o=a.match(/(\d{1,4})\s*\/\s*(\d{4})/);if(o){const c=parseInt(o[1],10),u=parseInt(o[2],10);if(!Number.isNaN(c)&&u===n)return c}if(/^\d{1,4}$/.test(a)&&String(e).trim()===String(n)){const c=parseInt(a,10);return Number.isNaN(c)?null:c}return null},Wy=(r,e)=>`${(r+1).toString().padStart(3,"0")}/${e}`,fT=(r,e)=>{const n={PA:0,FL:0};return r.forEach(a=>{const o=a.solicitudType;if(o==="PA"||o==="FL"){const c=hT(a.acto||"",a.periodo,e);c!==null&&c>n[o]&&(n[o]=c)}}),{PA:Wy(n.PA,e),FL:Wy(n.FL,e)}},Cp=["Jornada maana","Jornada tarde","Jornada completa"],Zl=r=>{const e=r.trim().toUpperCase();return e==="FL"?"FL":e==="PA"?"PA":null},Xy=r=>{const e=r.trim();return e?/^\d{1,4}\s*\/\s*\d{4}$/.test(e)?!0:/^\d{1,4}$/.test(e):!1},pT=(r,e)=>{const n=r.trim(),a=e.trim(),o=Xy(n),c=Xy(a),u=Zl(a)!==null,f=Zl(n)!==null,m="Decreto Exento";return o&&!c?{acto:n,materia:u?m:a||m}:c&&!o?{acto:a,materia:f?m:n||m}:o&&c?{acto:n,materia:m}:u&&!f?{acto:n||a,materia:n||m}:f&&!u?{acto:a||n,materia:a||m}:{acto:n||a,materia:a||n||m}},h_=r=>{const e=r.replace(/[()]/g,"").trim();if(!e)return"Jornada completa";const n=e.toLowerCase();return n.includes("manana")||n.includes("maana")?"Jornada maana":n.includes("tarde")?"Jornada tarde":n.includes("completa")?"Jornada completa":e},rp=r=>{const e=parseInt(r.split("/")[0],10);return Number.isNaN(e)?null:e},Zy=r=>{const e=rp(String((r==null?void 0:r[2])||""));if(e!==null)return e;const n=rp(String((r==null?void 0:r[3])||""));return n!==null?n:rp(String((r==null?void 0:r[1])||""))},mT=r=>{if(r.length<2)return!1;const e=r[0],n=r[r.length-1],a=Np(String((e==null?void 0:e[11])||"")),o=Np(String((n==null?void 0:n[11])||""));if(a&&o)return a>o;const c=Zy(e||[]),u=Zy(n||[]);return c!==null&&u!==null?c>u:!1},Qy=r=>{const e=[],n=r.filter(u=>u&&u[4]),a=mT(n)?[...n].reverse():n,o=a.length;return{records:a.map((u,f)=>{const m=`[PA] Fila ${f+2}`,b=String(u[2]||""),x=String(u[3]||""),_=String(u[1]||""),E=String(u[8]||""),y=String(u[11]||""),A=String(u[9]||""),k=String(u[7]||""),N=String(u[10]||""),C=String(u[6]||""),I=Zs(E),z=Zs(y),V=pT(b,x),H=h_(A),G=ls(k,0),M=ls(N,0),j=d_(C);return!Zl(_)&&!Zl(b)&&!Zl(x)&&e.push(`${m}: tipo de solicitud invlido`),E&&!I&&e.push(`${m}: Fecha de inicio invlida (${E})`),y&&!z&&e.push(`${m}: Fecha invlida (${y})`),A&&!Cp.includes(H)&&e.push(`${m}: Tipo de jornada invlido (${A})`),{id:`PA-${String(u[0])||f}-${Date.now()}`,acto:V.acto,solicitudType:"PA",materia:V.materia,funcionario:String(u[4]||"").trim(),rut:String(u[5]||"").trim(),periodo:j,cantidadDias:G,fechaInicio:I,tipoJornada:Cp.includes(H)?H:"Jornada completa",diasHaber:M,fechaDecreto:z,ra:String(u[13]||"MGA"),emite:String(u[14]||"mga"),observaciones:"",createdAt:Date.now()-(o-1-f)*1e3,decreto:""}}),warnings:e}},ev=r=>{const e=[],n=r.filter(c=>c&&c[4]),a=n.length;return{records:n.map((c,u)=>{const f=`[FL] Fila ${u+2}`,m=String(c[1]||"").trim(),b=String(c[4]||"").trim(),x=String(c[5]||"").trim(),_=String(c[6]||""),E=String(c[7]||"").trim(),y=String(c[8]||""),A=String(c[9]||""),k=String(c[10]||""),N=String(c[11]||"").trim(),C=String(c[12]||""),I=String(c[13]||""),z=String(c[14]||""),V=String(c[15]||""),H=String(c[16]||""),G=String(c[17]||""),M=String(c[18]||"MGA").trim(),j=String(c[19]||"mga").trim(),O=String(c[20]||"").trim(),F=Zs(V),q=Zs(H),D=Zs(G),L=ls(_,0),R=ls(y,0),ge=ls(A,0),Q=ls(k,0),X=ls(C,0),_e=ls(I,0),re=ls(z,0),te=R+X;return V&&!F&&e.push(`${f}: Fecha de inicio invlida (${V})`),H&&!q&&e.push(`${f}: Fecha de trmino invlida (${H})`),m||e.push(`${f}: N Acto Adm. vaco`),{id:`FL-${String(c[0])||u}-${Date.now()}`,acto:m,solicitudType:"FL",materia:"Decreto Exento",funcionario:b,rut:x,periodo:new Date().getFullYear().toString(),cantidadDias:L,fechaInicio:F,fechaTermino:q,tipoJornada:"Jornada completa",diasHaber:te,fechaDecreto:D,ra:M,emite:j,observaciones:O,periodo1:E,saldoDisponibleP1:R,solicitadoP1:ge,saldoFinalP1:Q,periodo2:N,saldoDisponibleP2:X,solicitadoP2:_e,saldoFinalP2:re,createdAt:Date.now()-(a-1-u)*1e3,decreto:""}}),warnings:e}},gT=r=>{const e=[];return{data:r.filter(o=>o.solicitudType==="PA").map((o,c)=>{const u=`[PA] Registro ${c+1}`,f=String(o.funcionario||"").trim(),m=String(o.rut||"").trim(),b=String(o.acto||"").trim(),x=d_(String(o.periodo||"")),_=ls(o.cantidadDias,0),E=ls(o.diasHaber,0),y=Zs(String(o.fechaInicio||"")),k=Zs(String(o.fechaDecreto||""))||new Date().toISOString().split("T")[0],N=h_(String(o.tipoJornada||""));return f||e.push(`${u}: Funcionario vaco`),m||e.push(`${u}: RUT vaco`),b||e.push(`${u}: N Acto Adm. vaco`),[c+1,"PA",b,"Decreto Exento",f,m,x,_,y,Cp.includes(N)?N:"Jornada completa",E,Ts(k),E-_,o.ra||"MGA",o.emite||"mga"]}),warnings:e}},bT=r=>{const e=[];return{data:r.filter(o=>o.solicitudType==="FL").map((o,c)=>{const u=`[FL] Registro ${c+1}`,f=String(o.funcionario||"").trim(),m=String(o.rut||"").trim(),b=String(o.acto||"").trim(),x=ls(o.cantidadDias,0),_=Zs(String(o.fechaInicio||"")),E=Zs(String(o.fechaTermino||"")),A=Zs(String(o.fechaDecreto||""))||new Date().toISOString().split("T")[0];return f||e.push(`${u}: Funcionario vaco`),b||e.push(`${u}: N Acto Adm. vaco`),_||e.push(`${u}: Fecha de inicio vaca`),E||e.push(`${u}: Fecha de trmino vaca`),[c+1,b,"FL","Decreto Exento",f,m,x,o.periodo1||"",o.saldoDisponibleP1||0,o.solicitadoP1||0,o.saldoFinalP1||0,o.periodo2||"",o.saldoDisponibleP2||0,o.solicitadoP2||0,o.saldoFinalP2||0,Ts(_),Ts(E),Ts(A),o.ra||"MGA",o.emite||"mga",o.observaciones||""]}),warnings:e}},co=yi.create("LocalBackup"),yT="GDP_Cloud_Backup",vT=1;class _T{constructor(){this.db=null}async init(){return new Promise((e,n)=>{const a=indexedDB.open(yT,vT);a.onerror=()=>{co.error("Error al abrir IndexedDB"),n(a.error)},a.onsuccess=()=>{this.db=a.result,co.info("IndexedDB inicializado"),e()},a.onupgradeneeded=o=>{const c=o.target.result;c.objectStoreNames.contains("records")||c.createObjectStore("records",{keyPath:"id"}),c.objectStoreNames.contains("employees")||c.createObjectStore("employees",{keyPath:"rut"}),c.objectStoreNames.contains("metadata")||c.createObjectStore("metadata",{keyPath:"key"}),c.objectStoreNames.contains("pendingChanges")||c.createObjectStore("pendingChanges",{keyPath:"id"}),co.info("IndexedDB esquema creado")}})}async saveRecords(e){return this.db||await this.init(),new Promise((n,a)=>{const o=this.db.transaction(["records","metadata"],"readwrite"),c=o.objectStore("records"),u=o.objectStore("metadata");c.clear(),e.forEach(f=>c.put(f)),u.put({key:"lastBackup",value:Date.now()}),o.oncomplete=()=>{co.info(`Backup guardado: ${e.length} registros`),n()},o.onerror=()=>{co.error("Error al guardar backup"),a(o.error)}})}async getRecords(){return this.db||await this.init(),new Promise((e,n)=>{const c=this.db.transaction("records","readonly").objectStore("records").getAll();c.onsuccess=()=>{e(c.result||[])},c.onerror=()=>{n(c.error)}})}async saveEmployees(e){return this.db||await this.init(),new Promise((n,a)=>{const o=this.db.transaction("employees","readwrite"),c=o.objectStore("employees");c.clear(),e.forEach(u=>c.put(u)),o.oncomplete=()=>{co.info(`Backup empleados: ${e.length}`),n()},o.onerror=()=>a(o.error)})}async getEmployees(){return this.db||await this.init(),new Promise((e,n)=>{const c=this.db.transaction("employees","readonly").objectStore("employees").getAll();c.onsuccess=()=>e(c.result||[]),c.onerror=()=>n(c.error)})}async addPendingChange(e){return this.db||await this.init(),new Promise((n,a)=>{const o=this.db.transaction("pendingChanges","readwrite");o.objectStore("pendingChanges").put(e),o.oncomplete=()=>n(),o.onerror=()=>a(o.error)})}async getPendingChanges(){return this.db||await this.init(),new Promise((e,n)=>{const c=this.db.transaction("pendingChanges","readonly").objectStore("pendingChanges").getAll();c.onsuccess=()=>e(c.result||[]),c.onerror=()=>n(c.error)})}async clearPendingChanges(){return this.db||await this.init(),new Promise((e,n)=>{const a=this.db.transaction("pendingChanges","readwrite");a.objectStore("pendingChanges").clear(),a.oncomplete=()=>e(),a.onerror=()=>n(a.error)})}async getLastBackupTime(){return this.db||await this.init(),new Promise((e,n)=>{const c=this.db.transaction("metadata","readonly").objectStore("metadata").get("lastBackup");c.onsuccess=()=>{var u;e(((u=c.result)==null?void 0:u.value)||null)},c.onerror=()=>n(c.error)})}async getBackupStats(){const e=await this.getRecords(),n=await this.getEmployees(),a=await this.getLastBackupTime();return{recordCount:e.length,employeeCount:n.length,lastBackup:a}}}const Ks=new _T,tv=r=>{if(!r)return null;const n=new Date(`${r}T12:00:00`).getTime();return Number.isNaN(n)?null:n},Td=(r,e="fechaDecreto")=>{const n=e==="fechaDecreto"?r.fechaDecreto:r.fechaInicio,a=e==="fechaDecreto"?r.fechaInicio:r.fechaDecreto,o=tv(n);if(o!==null)return o;const c=tv(a);return c!==null?c:r.createdAt||0},mi=(r,e,n="fechaDecreto")=>Td(e,n)-Td(r,n),cn=yi.create("CloudSync"),xT=(r,e)=>{const[n,a]=K.useState([]),[o,c]=K.useState(!1),[u,f]=K.useState(!1),[m,b]=K.useState(null),[x,_]=K.useState(navigator.onLine),[E,y]=K.useState([]),[A,k]=K.useState([]),[N,C]=K.useState(!1),[I,z]=K.useState(!1),[V,H]=K.useState({PA:{status:"idle",lastSuccess:null,lastError:null},FL:{status:"idle",lastSuccess:null,lastError:null}}),G=K.useRef(null),M=K.useRef(null),j=K.useRef(null),O=K.useRef(!1);K.useEffect(()=>{const Q=()=>_(!0),X=()=>_(!1);return window.addEventListener("online",Q),window.addEventListener("offline",X),()=>{window.removeEventListener("online",Q),window.removeEventListener("offline",X),G.current&&clearTimeout(G.current)}},[]),K.useEffect(()=>(F(),()=>{j.current&&j.current.abort()}),[]);const F=K.useCallback(async()=>{if(!navigator.onLine){f(!0);try{const X=await Ks.getRecords();if(X.length>0){a(X);const _e=await Ks.getLastBackupTime();cn.info(`Recuperados ${X.length} registros desde backup local (offline)`),e==null||e(`Modo offline: usando backup local (${_e?new Date(_e).toLocaleTimeString():"fecha desconocida"})`)}else e==null||e("Sin conexin a internet")}catch(X){cn.warn("Error al cargar backup local (offline):",X),e==null||e("Sin conexin a internet")}finally{O.current=!0}return}j.current&&j.current.abort(),j.current=new AbortController;const{signal:Q}=j.current;c(!0),f(!1);try{cn.info("Iniciando fetch desde la nube...");const[X,_e]=await Promise.all([fetch(`${Tt.WEB_APP_URL}?sheetId=${Tt.DECRETOS_SHEET_ID}`,{signal:Q}),fetch(`${Tt.WEB_APP_URL_FL}?sheetId=${Tt.FERIADOS_SHEET_ID}`,{signal:Q})]);H(pe=>({...pe,PA:{...pe.PA,status:"syncing",lastError:null},FL:{...pe.FL,status:"syncing",lastError:null}}));const[re,te]=await Promise.all([X.ok?X.json():{success:!1,error:`HTTP ${X.status}`},_e.ok?_e.json():{success:!1,error:`HTTP ${_e.status}`}]),W=[];let Z=[];if(re.success&&re.data){const{records:pe,warnings:ne}=Qy(re.data);Z=[...Z,...pe],W.push(...ne),cn.debug(`Procesados ${pe.length} registros PA`),H(ie=>({...ie,PA:{status:"idle",lastSuccess:new Date,lastError:null}}))}else re!=null&&re.error&&(W.push(`[PA] ${re.error}`),H(pe=>({...pe,PA:{...pe.PA,status:"error",lastError:String(re.error)}})));if(te.success&&te.data){const{records:pe,warnings:ne}=ev(te.data);Z=[...Z,...pe],W.push(...ne),cn.debug(`Procesados ${pe.length} registros FL`),H(ie=>({...ie,FL:{status:"idle",lastSuccess:new Date,lastError:null}}))}else te!=null&&te.error&&(W.push(`[FL] ${te.error}`),H(pe=>({...pe,FL:{...pe.FL,status:"error",lastError:String(te.error)}})));Z.sort((pe,ne)=>mi(pe,ne)),a(Z),k(W.slice(0,20)),b(new Date),O.current=!0;try{await Ks.saveRecords(Z),cn.debug("Backup local actualizado")}catch(pe){cn.warn("Error al guardar backup local:",pe)}cn.info(`Fetch completado: ${Z.length} registros`),r==null||r()}catch(X){if(X instanceof Error&&X.name==="AbortError"){cn.debug("Fetch cancelado (componente desmontado)");return}cn.error("Error al recuperar datos de la nube:",X),f(!0),H(_e=>({PA:{..._e.PA,status:"error",lastError:"Fall la carga de PA"},FL:{..._e.FL,status:"error",lastError:"Fall la carga de FL"}}));try{const _e=await Ks.getRecords();if(_e.length>0){a(_e),O.current=!0;const re=await Ks.getLastBackupTime();cn.info(`Recuperados ${_e.length} registros desde backup local`),e==null||e(`Modo offline: usando backup local (${re?new Date(re).toLocaleTimeString():"fecha desconocida"})`)}else e==null||e("Error al conectar con la nube")}catch(_e){cn.error("Error al recuperar backup local:",_e),e==null||e("Error al conectar con la nube")}finally{O.current=!0}}finally{c(!1)}},[r,e]),q=K.useCallback(async Q=>{if(!navigator.onLine){f(!0);return}const X=Q==="PA"?Tt.WEB_APP_URL:Tt.WEB_APP_URL_FL,_e=Q==="PA"?Tt.DECRETOS_SHEET_ID:Tt.FERIADOS_SHEET_ID;H(re=>({...re,[Q]:{...re[Q],status:"syncing",lastError:null}}));try{const te=await(await fetch(`${X}?sheetId=${_e}`)).json();if(!te.success||!te.data)throw new Error(te.error||`No fue posible sincronizar ${Q}`);const Z=(Q==="PA"?Qy(te.data):ev(te.data)).records;a(pe=>[...pe.filter(ie=>ie.solicitudType!==Q),...Z].sort((ie,Ae)=>mi(ie,Ae))),H(pe=>({...pe,[Q]:{status:"idle",lastSuccess:new Date,lastError:null}})),b(new Date),f(!1)}catch(re){H(te=>({...te,[Q]:{...te[Q],status:"error",lastError:re instanceof Error?re.message:`Error de sincronizacin ${Q}`}})),f(!0)}},[]),D=K.useCallback(async Q=>{if(M.current=Q,C(!0),z(!1),G.current&&clearTimeout(G.current),!x)return f(!0),e==null||e("Sin conexin a internet"),!1;c(!0),f(!1);let X=[],_e=[];try{cn.info("Iniciando sincronizacin a la nube...");const re=gT(Q),te=bT(Q);X=re.data,_e=te.data;const W=re.warnings,Z=te.warnings,pe=[...W,...Z];k(pe.slice(0,20));const ne=[];if(X.length>0&&(H(ae=>({...ae,PA:{...ae.PA,status:"syncing",lastError:null}})),cn.debug(`Sincronizando ${X.length} registros PA`),ne.push(fetch(Tt.WEB_APP_URL,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({sheetId:Tt.DECRETOS_SHEET_ID,data:X,validateRecords:!0})}))),_e.length>0&&(H(ae=>({...ae,FL:{...ae.FL,status:"syncing",lastError:null}})),cn.debug(`Sincronizando ${_e.length} registros FL`),ne.push(fetch(Tt.WEB_APP_URL_FL,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({sheetId:Tt.FERIADOS_SHEET_ID,data:_e,validateRecords:!0})}))),ne.length===0)return b(new Date),C(!1),M.current=null,!0;const ie=await Promise.all(ne),Ae=await Promise.all(ie.map(ae=>ae.json()));if(Ae.every(ae=>ae.success))return H(ae=>({PA:X.length>0?{status:"idle",lastSuccess:new Date,lastError:null}:ae.PA,FL:_e.length>0?{status:"idle",lastSuccess:new Date,lastError:null}:ae.FL})),b(new Date),C(!1),z(!1),M.current=null,cn.info("Sincronizacin completada exitosamente"),r==null||r(),!0;{const ae=Ae.filter(Re=>!Re.success).map(Re=>{var Te;return Re.error||((Te=Re.validationErrors)==null?void 0:Te.join(", "))}).join(", ");throw new Error(ae||"Error desconocido")}}catch(re){return cn.error("Error sincronizando:",re),f(!0),H(te=>({PA:X.length>0?{...te.PA,status:"error",lastError:"Error al sincronizar PA"}:te.PA,FL:_e.length>0?{...te.FL,status:"error",lastError:"Error al sincronizar FL"}:te.FL})),e==null||e("Error al sincronizar con la nube"),x&&(z(!0),G.current=setTimeout(()=>D(Q),5e3)),!1}finally{c(!1)}},[x,r,e]);K.useEffect(()=>{x&&N&&M.current&&!o&&(z(!1),D(M.current))},[x,N,o,D]),K.useEffect(()=>{(async()=>{try{if(!O.current)return;await Ks.saveRecords(n)}catch(X){cn.warn("Error al guardar backup local:",X)}})()},[n]);const L=K.useCallback(Q=>{y(X=>[...X.slice(-9),Q])},[]),R=K.useCallback(()=>{if(E.length===0)return;const Q=E[E.length-1];y(X=>X.slice(0,-1)),a(Q),D(Q)},[E,D]),ge=K.useCallback(Q=>{a(X=>(L(X),typeof Q=="function"?Q(X):Q))},[L]);return{records:n,setRecords:ge,isSyncing:o,syncError:u,lastSync:m,isOnline:x,syncWarnings:A,pendingSync:N,isRetryScheduled:I,moduleSync:V,fetchFromCloud:F,fetchModuleFromCloud:q,syncToCloud:D,undoStack:E,undo:R,canUndo:E.length>0}},kr=yi.create("EmployeeSync"),wT=(r,e)=>{const[n,a]=K.useState([]),[o,c]=K.useState(!1),[u,f]=K.useState(!1),[m,b]=K.useState(null),x=K.useRef(null),_=K.useRef(!1);K.useEffect(()=>(E(),()=>{x.current&&x.current.abort()}),[]);const E=K.useCallback(async()=>{if(!navigator.onLine){try{const I=await Ks.getEmployees();I.length>0&&(a(I),e==null||e("Modo offline: usando backup local de funcionarios"))}catch(I){kr.warn("No se pudo cargar backup local de empleados:",I)}finally{_.current=!0}return}x.current&&x.current.abort(),x.current=new AbortController;const{signal:C}=x.current;c(!0),f(!1);try{kr.info("Iniciando fetch de empleados...");const z=await(await fetch(`${Tt.WEB_APP_URL}?sheetId=${Tt.EMPLOYEES_SHEET_ID}&type=employees`,{signal:C})).json();if(z.success&&z.data){const V=z.data.filter(H=>H&&H[1]).map(H=>{const G=String(H[1]||"").trim(),M=String(H[2]||"").trim(),j=String(H[3]||"").trim(),O=String(H[4]||"").trim();return{nombre:[G,M,j].filter(Boolean).join(" ").toUpperCase(),rut:O}}).filter(H=>H.nombre&&H.rut);V.sort((H,G)=>H.nombre.localeCompare(G.nombre)),a(V),b(new Date),_.current=!0;try{await Ks.saveEmployees(V)}catch(H){kr.warn("Error al guardar backup de empleados:",H)}kr.info(`Fetch completado: ${V.length} empleados`),r==null||r()}}catch(I){if(I instanceof Error&&I.name==="AbortError"){kr.debug("Fetch cancelado (componente desmontado)");return}kr.error("Error al recuperar empleados de la nube:",I),f(!0);try{const z=await Ks.getEmployees();z.length>0?(a(z),_.current=!0,e==null||e("Modo offline: usando backup local de funcionarios")):e==null||e("Error al conectar con la nube de empleados")}catch(z){kr.warn("Error al recuperar backup local de empleados:",z),e==null||e("Error al conectar con la nube de empleados")}finally{_.current=!0}}finally{c(!1)}},[r,e]);K.useEffect(()=>{(async()=>{try{if(!_.current)return;await Ks.saveEmployees(n)}catch(I){kr.warn("Error al guardar backup de empleados:",I)}})()},[n]);const y=K.useCallback(async C=>{if(!navigator.onLine)return e==null||e("Sin conexin a internet"),!1;c(!0),f(!1);try{const I=C.map((G,M)=>{const j=G.nombre.split(" ");let O="",F="",q="";return j.length>=4?(O=j.slice(0,2).join(" "),F=j[2]||"",q=j.slice(3).join(" ")):j.length===3?(O=j[0],F=j[1],q=j[2]):j.length===2?(O=j[0],F=j[1]):O=G.nombre,[M+1,O,F,q,G.rut]}),z={sheetId:Tt.EMPLOYEES_SHEET_ID,type:"employees",data:I},H=await(await fetch(Tt.WEB_APP_URL,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(z)})).json();if(H.success)return b(new Date),r==null||r(),!0;throw new Error(H.error)}catch(I){return kr.error("Error sincronizando empleados:",I),f(!0),e==null||e("Error al sincronizar empleados con la nube"),!1}finally{c(!1)}},[r,e]),A=K.useCallback(C=>{a(I=>{const z=[...I,C].sort((V,H)=>V.nombre.localeCompare(H.nombre));return y(z),z})},[y]),k=K.useCallback((C,I)=>{a(z=>{const V=z.map(H=>H.rut===C?I:H).sort((H,G)=>H.nombre.localeCompare(G.nombre));return y(V),V})},[y]),N=K.useCallback(C=>{a(I=>{const z=I.filter(V=>V.rut!==C);return y(z),z})},[y]);return{employees:n,setEmployees:a,isSyncing:o,syncError:u,lastSync:m,fetchEmployeesFromCloud:E,syncEmployeesToCloud:y,addEmployee:A,updateEmployee:k,deleteEmployee:N}};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f_=(...r)=>r.filter((e,n,a)=>!!e&&e.trim()!==""&&a.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,a)=>a?a.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=r=>{const e=ST(r);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ET={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=K.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:u,...f},m)=>K.createElement("svg",{ref:m,...ET,width:e,height:e,stroke:r,strokeWidth:a?Number(n)*24/Number(e):n,className:f_("lucide",o),...!c&&!AT(f)&&{"aria-hidden":"true"},...f},[...u.map(([b,x])=>K.createElement(b,x)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oe=(r,e)=>{const n=K.forwardRef(({className:a,...o},c)=>K.createElement(TT,{ref:c,iconNode:e,className:f_(`lucide-${kT(nv(r))}`,`lucide-${r}`,a),...o}));return n.displayName=nv(r),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],CT=Oe("activity",NT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],jp=Oe("archive",jT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],p_=Oe("arrow-right",RT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],OT=Oe("arrow-up-down",DT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],LT=Oe("arrow-up",IT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],MT=Oe("award",UT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M22 8c0-2.3-.8-4.3-2-6",key:"5bb3ad"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}],["path",{d:"M4 2C2.8 3.7 2 5.7 2 8",key:"tap9e0"}]],sv=Oe("bell-ring",PT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],rv=Oe("bell",zT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],m_=Oe("book-open",BT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],av=Oe("building",$T);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],g_=Oe("calendar-days",FT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gi=Oe("calendar",VT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],b_=Oe("chart-column",HT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],h0=Oe("chevron-down",qT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],KT=Oe("chevron-left",GT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],y_=Oe("chevron-right",JT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],WT=Oe("chevron-up",YT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]],ZT=Oe("chevrons-left",XT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],eN=Oe("chevrons-right",QT);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Oo=Oe("circle-alert",tN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Sc=Oe("circle-check-big",nN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],iv=Oe("circle-check",sN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],ov=Oe("circle-plus",rN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],lv=Oe("circle-user",aN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],oN=Oe("circle-x",iN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["path",{d:"M12 6v6h4",key:"135r8i"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],cv=Oe("clock-3",lN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],f0=Oe("clock",cN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],v_=Oe("cloud",uN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M15 6v12a3 3 0 1 0 3-3H6a3 3 0 1 0 3 3V6a3 3 0 1 0-3 3h12a3 3 0 1 0-3-3",key:"11bfej"}]],hN=Oe("command",dN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],pN=Oe("crown",fN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],__=Oe("download",mN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],bN=Oe("ellipsis-vertical",gN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],x_=Oe("eye-off",yN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ac=Oe("eye",vN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _N=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]],xN=Oe("file-down",_N);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=[["path",{d:"M12.659 22H18a2 2 0 0 0 2-2V8a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 14 2H6a2 2 0 0 0-2 2v9.34",key:"o6klzx"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10.378 12.622a1 1 0 0 1 3 3.003L8.36 20.637a2 2 0 0 1-.854.506l-2.867.837a.5.5 0 0 1-.62-.62l.836-2.869a2 2 0 0 1 .506-.853z",key:"zhnas1"}]],kN=Oe("file-pen",wN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],EN=Oe("file-spreadsheet",SN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],ic=Oe("file-text",AN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TN=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]],NN=Oe("file-up",TN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CN=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],jN=Oe("fingerprint-pattern",CN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RN=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],DN=Oe("funnel",RN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ON=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],w_=Oe("hash",ON);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IN=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],LN=Oe("house",IN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UN=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],p0=Oe("info",UN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MN=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],PN=Oe("key-round",MN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zN=[["path",{d:"M10 8h.01",key:"1r9ogq"}],["path",{d:"M12 12h.01",key:"1mp3jc"}],["path",{d:"M14 8h.01",key:"1primd"}],["path",{d:"M16 12h.01",key:"1l6xoz"}],["path",{d:"M18 8h.01",key:"emo2bl"}],["path",{d:"M6 8h.01",key:"x9i8wu"}],["path",{d:"M7 16h10",key:"wp8him"}],["path",{d:"M8 12h.01",key:"czm47f"}],["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}]],k_=Oe("keyboard",zN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BN=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],$N=Oe("landmark",BN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FN=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],S_=Oe("layout-dashboard",FN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VN=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],HN=Oe("layout-grid",VN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qN=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Nd=Oe("loader-circle",qN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GN=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],KN=Oe("lock",GN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JN=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],E_=Oe("log-out",JN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YN=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],m0=Oe("mail",YN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WN=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],XN=Oe("menu",WN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZN=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],QN=Oe("moon",ZN);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],t5=Oe("palette",e5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n5=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],s5=Oe("pen",n5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],uv=Oe("plus",r5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a5=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],A_=Oe("refresh-cw",a5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],o5=Oe("rotate-ccw",i5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rp=Oe("save",l5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Dp=Oe("search",c5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u5=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],oc=Oe("settings",u5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],h5=Oe("shield-alert",d5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],g0=Oe("shield",f5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],zd=Oe("sparkles",p5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ap=Oe("square-check-big",m5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],dv=Oe("square",g5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Cd=Oe("sun",b5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],T_=Oe("trash-2",y5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v5=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],_5=Oe("trash",v5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],w5=Oe("trending-up",x5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],jo=Oe("triangle-alert",k5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S5=[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]],E5=Oe("undo-2",S5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],hv=Oe("user-plus",A5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ci=Oe("user",T5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],jd=Oe("users",N5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gn=Oe("x",C5);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],R5=Oe("zap",j5),D5=(r,e=!0)=>{const n=K.useCallback(a=>{if(!e)return;const o=a.target;if(!["INPUT","TEXTAREA","SELECT"].includes(o.tagName))for(const c of r){const u=a.key.toLowerCase()===c.key.toLowerCase(),f=c.ctrlKey?a.ctrlKey||a.metaKey:!0,m=c.shiftKey===void 0?!0:c.shiftKey===a.shiftKey,b=c.altKey===void 0?!0:c.altKey===a.altKey;if(u&&f&&m&&b){a.preventDefault(),c.action();return}}},[r,e]);K.useEffect(()=>(window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)),[n])},O5=({isOpen:r,onClose:e,shortcuts:n})=>{if(!r)return null;const a=o=>{const c=[];return o.ctrlKey&&c.push("/Ctrl"),o.shiftKey&&c.push("Shift"),c.push(o.key.toUpperCase()),c.join(" + ")};return h.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",onClick:e,children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),h.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden",onClick:o=>o.stopPropagation(),children:[h.jsxs("div",{className:"bg-slate-900 dark:bg-slate-950 p-6 text-white flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(k_,{className:"w-6 h-6"}),h.jsx("h2",{className:"text-lg font-bold",children:"Atajos de Teclado"})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-xl",children:h.jsx(Gn,{className:"w-5 h-5"})})]}),h.jsx("div",{className:"p-6 space-y-3",children:n.map((o,c)=>h.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 dark:border-slate-700 last:border-0",children:[h.jsx("span",{className:"text-sm text-slate-600 dark:text-slate-300",children:o.description}),h.jsx("kbd",{className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 rounded-lg text-xs font-mono font-bold",children:a(o)})]},c))}),h.jsx("div",{className:"px-6 py-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:h.jsxs("p",{className:"text-[10px] text-slate-400 text-center uppercase tracking-wider",children:["Presiona ",h.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 dark:bg-slate-700 rounded text-[9px]",children:"?"})," para ver esta ayuda"]})})]})]})},N_=Qs.memo(({toast:r,onRemove:e})=>{const[n,a]=K.useState(!1),[o,c]=K.useState(100),u=K.useRef(Date.now()),f=K.useRef(r.duration||4e3),m=K.useRef(0);K.useEffect(()=>{const C=f.current,I=u.current,z=()=>{const V=Date.now()-I,H=Math.max(0,100-V/C*100);c(H),H>0?m.current=requestAnimationFrame(z):(a(!0),setTimeout(()=>e(r.id),350))};return m.current=requestAnimationFrame(z),()=>{m.current&&cancelAnimationFrame(m.current)}},[r,e]);const b=K.useCallback(()=>{m.current&&cancelAnimationFrame(m.current),a(!0),setTimeout(()=>e(r.id),350)},[r.id,e]),x={success:Sc,error:oN,warning:jo,info:p0},_={success:"bg-white dark:bg-slate-800 border-emerald-200 dark:border-emerald-800",error:"bg-white dark:bg-slate-800 border-red-200 dark:border-red-800",warning:"bg-white dark:bg-slate-800 border-amber-200 dark:border-amber-800",info:"bg-white dark:bg-slate-800 border-blue-200 dark:border-blue-800"},E={success:"bg-emerald-50 dark:bg-emerald-900/30",error:"bg-red-50 dark:bg-red-900/30",warning:"bg-amber-50 dark:bg-amber-900/30",info:"bg-blue-50 dark:bg-blue-900/30"},y={success:"text-emerald-600 dark:text-emerald-400",error:"text-red-600 dark:text-red-400",warning:"text-amber-600 dark:text-amber-400",info:"text-blue-600 dark:text-blue-400"},A={success:"text-emerald-800 dark:text-emerald-200",error:"text-red-800 dark:text-red-200",warning:"text-amber-800 dark:text-amber-200",info:"text-blue-800 dark:text-blue-200"},k={success:"bg-gradient-to-r from-emerald-400 to-emerald-600",error:"bg-gradient-to-r from-red-400 to-red-600",warning:"bg-gradient-to-r from-amber-400 to-amber-600",info:"bg-gradient-to-r from-blue-400 to-blue-600"},N=x[r.type];return h.jsxs("div",{role:"alert",className:`
                relative overflow-hidden rounded-2xl border shadow-xl backdrop-blur-sm
                ${_[r.type]}
                ${n?"toast-exit":"toast-enter"}
            `,children:[h.jsxs("div",{className:"flex items-start gap-3 p-4",children:[h.jsx("div",{className:`p-2 rounded-xl shrink-0 ${E[r.type]}`,children:h.jsx(N,{className:`w-4 h-4 ${y[r.type]}`})}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:`text-sm font-bold ${A[r.type]}`,children:r.title}),r.message&&h.jsx("p",{className:"text-[11px] mt-0.5 text-slate-500 dark:text-slate-400 leading-relaxed",children:r.message})]}),h.jsx("button",{onClick:b,className:"p-1.5 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors shrink-0 -mt-0.5 text-slate-400 hover:text-slate-600 dark:hover:text-slate-300","aria-label":"Cerrar notificacin",children:h.jsx(Gn,{className:"w-3.5 h-3.5","aria-hidden":"true"})})]}),h.jsx("div",{className:"h-[2px] bg-slate-100 dark:bg-slate-700",children:h.jsx("div",{className:`h-full transition-none ${k[r.type]}`,style:{width:`${o}%`}})})]})});N_.displayName="Toast";const C_=Qs.memo(({toasts:r,onRemove:e})=>h.jsx("div",{className:"fixed bottom-6 right-6 z-[300] flex flex-col-reverse gap-3 max-w-sm w-full pointer-events-none",role:"region","aria-label":"Notificaciones","aria-live":"polite",children:r.slice(-5).map((n,a)=>h.jsx("div",{className:"pointer-events-auto",style:{transform:`scale(${1-(r.length-1-a)*.02})`,opacity:1-(r.length-1-a)*.08},children:h.jsx(N_,{toast:n,onRemove:e})},n.id))}));C_.displayName="ToastContainer";const I5=()=>{const[r,e]=K.useState([]),n=K.useCallback((c,u,f,m)=>{const b=crypto.randomUUID();return e(x=>[...x,{id:b,type:c,title:u,message:f,duration:m}]),b},[]),a=K.useCallback(c=>{e(u=>u.filter(f=>f.id!==c))},[]);return{toasts:r,toast:{success:(c,u)=>n("success",c,u),error:(c,u)=>n("error",c,u,6e3),warning:(c,u)=>n("warning",c,u),info:(c,u)=>n("info",c,u)},removeToast:a}},L5=({currentView:r,setView:e,onLogout:n,isSyncing:a})=>{const o=[{id:"dashboard",label:"Dashboard",icon:S_},{id:"decretos",label:"Decretos",icon:m_},{id:"calendar",label:"Calendario",icon:g_},{id:"employees",label:"Funcionarios",icon:jd},{id:"requests",label:"Solicitudes",icon:ic},{id:"reports",label:"Reportes",icon:m0},{id:"ai-assistant",label:"Asistente IA",icon:zd,special:!0}];return h.jsxs("div",{className:"flex flex-col w-full h-full bg-slate-900 dark:bg-slate-950 text-white overflow-y-auto",children:[h.jsx("div",{className:"p-6 border-b border-slate-800",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center transition-all duration-500 ${a?"bg-indigo-600 animate-pulse":"bg-gradient-to-br from-indigo-500 to-purple-600"}`,children:h.jsx(v_,{className:"text-white w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-lg font-extrabold tracking-tight",children:"GDP Cloud"}),h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest",children:"Gestion de Personas"})]})]})}),h.jsx("nav",{className:"flex-1 p-4 space-y-2","aria-label":"Men principal",children:o.map(c=>{const u=c.icon,f=r===c.id;return h.jsxs("button",{onClick:()=>e(c.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 ${f?c.special?"bg-gradient-to-r from-purple-600 to-indigo-600 text-white shadow-lg shadow-purple-900/50":"bg-slate-800 text-white shadow-md":"text-slate-400 hover:bg-slate-800 hover:text-white"}`,"aria-current":f?"page":void 0,"aria-label":`Ir a ${c.label}`,children:[h.jsx(u,{size:20,className:c.special?"text-yellow-200":"","aria-hidden":"true"}),h.jsx("span",{className:"font-medium",children:c.label})]},c.id)})}),h.jsxs("div",{className:"p-4 border-t border-slate-800 space-y-2",children:[h.jsxs("button",{onClick:()=>e("settings"),className:`flex items-center gap-3 px-4 py-3 w-full transition-colors rounded-lg ${r==="settings"?"bg-slate-800 text-white shadow-md":"text-slate-400 hover:text-white hover:bg-slate-800"}`,"aria-current":r==="settings"?"page":void 0,"aria-label":"Ir a Configuracin",children:[h.jsx(oc,{size:20,"aria-hidden":"true"}),h.jsx("span",{children:"Configuracin"})]}),h.jsxs("button",{onClick:n,className:"flex items-center gap-3 px-4 py-3 w-full text-slate-400 hover:text-rose-200 hover:bg-rose-900/20 transition-colors rounded-lg","aria-label":"Cerrar sesin",children:[h.jsx(E_,{size:20,"aria-hidden":"true"}),h.jsx("span",{children:"Cerrar Sesin"})]})]})]})};class U5 extends K.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Error capturado por ErrorBoundary:",e,n),this.setState({errorInfo:n})}render(){var e;return this.state.hasError?this.props.fallback?this.props.fallback:h.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-900 flex items-center justify-center p-6",children:h.jsxs("div",{className:"max-w-lg w-full bg-white dark:bg-slate-800 rounded-3xl shadow-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[h.jsxs("div",{className:"bg-red-500 p-8 text-center",children:[h.jsx("div",{className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:h.jsx(jo,{className:"w-8 h-8 text-white"})}),h.jsx("h1",{className:"text-xl font-black text-white uppercase tracking-wider",children:"Error Inesperado"}),h.jsx("p",{className:"text-red-100 text-sm mt-2",children:"Algo sali mal en la aplicacin"})]}),h.jsxs("div",{className:"p-8 space-y-6",children:[h.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-2xl p-4",children:[h.jsx("p",{className:"text-sm font-bold text-red-800 dark:text-red-200 mb-2",children:"Detalles del error:"}),h.jsx("code",{className:"text-xs text-red-600 dark:text-red-300 break-all block",children:((e=this.state.error)==null?void 0:e.message)||"Error desconocido"})]}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 text-center",children:"Por favor, intenta recargar la pgina. Si el problema persiste, contacta al administrador del sistema."}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("button",{onClick:this.handleReload,className:"flex-1 flex items-center justify-center gap-2 px-6 py-4 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-xl transition-all active:scale-95",children:[h.jsx(A_,{className:"w-5 h-5"}),"Recargar"]}),h.jsx("button",{onClick:this.handleGoHome,className:"flex items-center justify-center gap-2 px-6 py-4 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-700 dark:text-slate-200 font-bold rounded-xl transition-all active:scale-95",children:h.jsx(LN,{className:"w-5 h-5"})})]})]}),h.jsx("div",{className:"px-8 py-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700",children:h.jsx("p",{className:"text-xs text-slate-400 text-center uppercase tracking-widest",children:"GDP Cloud  Error Recovery Module"})})]})}):this.props.children}}const M5=()=>{const{signIn:r,resetPassword:e}=d0(),[n,a]=K.useState("login"),[o,c]=K.useState(""),[u,f]=K.useState(""),[m,b]=K.useState(!1),[x,_]=K.useState(!1),[E,y]=K.useState(null),[A,k]=K.useState(null),N=async C=>{C.preventDefault(),y(null),k(null),_(!0);try{if(n==="login"){const{error:I}=await r(o,u);I&&(I.message.includes("Invalid login")?y("Credenciales incorrectas. Verifica tu email y contrasea."):y(I.message))}else if(n==="forgot"){const{error:I}=await e(o);I?y(I.message):k("Te enviamos un email con instrucciones para restablecer tu contrasea.")}}catch{y("Ocurri un error inesperado. Intenta nuevamente.")}finally{_(!1)}};return h.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 flex items-center justify-center p-4",children:[h.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[h.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-indigo-500/20 rounded-full blur-3xl"}),h.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-purple-500/20 rounded-full blur-3xl"})]}),h.jsxs("div",{className:"relative w-full max-w-md",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-2xl shadow-2xl mb-4",children:h.jsx("span",{className:"text-2xl font-black text-white",children:"GDP"})}),h.jsx("h1",{className:"text-2xl font-black text-white tracking-tight",children:"GDP Cloud"}),h.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Sistema de Gestin de Decretos"})]}),h.jsxs("div",{className:"bg-white/10 backdrop-blur-xl rounded-3xl border border-white/20 shadow-2xl p-8",children:[h.jsxs("h2",{className:"text-xl font-black text-white mb-6 text-center",children:[n==="login"&&"Iniciar Sesin",n==="forgot"&&"Recuperar Contrasea"]}),E&&h.jsxs("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-500/30 rounded-xl flex items-start gap-3",children:[h.jsx(Oo,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-sm text-red-200",children:E})]}),A&&h.jsx("div",{className:"mb-4 p-4 bg-emerald-500/20 border border-emerald-500/30 rounded-xl",children:h.jsx("p",{className:"text-sm text-emerald-200",children:A})}),h.jsxs("form",{onSubmit:N,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-300 uppercase tracking-wider mb-2",children:"Correo Electrnico"}),h.jsxs("div",{className:"relative",children:[h.jsx(m0,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:"email",value:o,onChange:C=>c(C.target.value),placeholder:"tu@email.com",required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"})]})]}),n==="login"&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-300 uppercase tracking-wider mb-2",children:"Contrasea"}),h.jsxs("div",{className:"relative",children:[h.jsx(KN,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),h.jsx("input",{type:m?"text":"password",value:u,onChange:C=>f(C.target.value),placeholder:"",required:!0,minLength:6,className:"w-full pl-12 pr-12 py-3.5 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all"}),h.jsx("button",{type:"button",onClick:()=>b(!m),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-white transition-colors",children:m?h.jsx(x_,{size:20}):h.jsx(ac,{size:20})})]})]}),n==="login"&&h.jsx("div",{className:"text-right",children:h.jsx("button",{type:"button",onClick:()=>{a("forgot"),y(null),k(null)},className:"text-xs text-indigo-400 hover:text-indigo-300 font-bold transition-colors",children:"Olvidaste tu contrasea?"})}),h.jsx("button",{type:"submit",disabled:x,className:"w-full py-4 bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 disabled:from-slate-600 disabled:to-slate-600 text-white font-black rounded-xl shadow-lg shadow-indigo-500/25 transition-all flex items-center justify-center gap-2",children:x?h.jsxs(h.Fragment,{children:[h.jsx(Nd,{className:"w-5 h-5 animate-spin"}),"Procesando..."]}):h.jsxs(h.Fragment,{children:[n==="login"&&"Iniciar Sesin",n==="forgot"&&"Enviar Instrucciones",h.jsx(p_,{className:"w-5 h-5"})]})})]}),n==="forgot"&&h.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:h.jsx("button",{onClick:()=>{a("login"),y(null),k(null)},className:"text-sm text-indigo-400 hover:text-indigo-300 font-bold transition-colors",children:" Volver al inicio de sesin"})}),n==="login"&&h.jsx("div",{className:"mt-6 pt-6 border-t border-white/10",children:h.jsx("p",{className:"text-xs text-slate-500 text-center",children:"Las cuentas son creadas por el administrador del sistema. Si necesitas acceso, contacta al administrador."})})]}),h.jsxs("p",{className:"text-center text-xs text-slate-500 mt-6",children:[" ",new Date().getFullYear()," GDP Cloud  Todos los derechos reservados"]})]})]})},P5=()=>{const[r,e]=K.useState(!1),n=K.useCallback(()=>{e(window.scrollY>400)},[]);K.useEffect(()=>(window.addEventListener("scroll",n,{passive:!0}),()=>window.removeEventListener("scroll",n)),[n]);const a=K.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]);return r?h.jsx("button",{onClick:a,className:"fixed bottom-20 right-6 z-[100] p-3 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-xl hover:shadow-2xl text-slate-500 hover:text-indigo-600 dark:hover:text-indigo-400 transition-all active:scale-90 scroll-top-enter hover:-translate-y-0.5","aria-label":"Volver arriba",title:"Volver al inicio",children:h.jsx(LT,{className:"w-5 h-5"})}):null};var Ct=(r=>(r.LEGAL_HOLIDAY="Feriado Legal",r.ADMINISTRATIVE="Permiso Administrativo",r.SICK_LEAVE="Licencia Medica",r.WITHOUT_PAY="Permiso Sin Goce de Sueldo",r.PARENTAL="Permiso Post Natal Parental",r))(Ct||{}),It=(r=>(r.JC="Jornada Completa",r.JM="Jornada Manana",r.JT="Jornada Tarde",r))(It||{}),To=(r=>(r.PENDING="Pendiente",r.APPROVED="Aprobado",r.REJECTED="Rechazado",r))(To||{});const fv="GDP Cloud - Gestion de Personas",z5=["#","Decreto","Materia","Acto","Funcionario","RUT","Periodo","Cantidad de dias","Fecha de inicio","Tipo de Jornada","Dias a su haber","Fecha","Saldo final","R.A","Emite"],B5=["Jornada manana","Jornada tarde","Jornada completa"],$5=[{value:"PA",label:"PERMISO (PA)"},{value:"FL",label:"FERIADO (FL)"}],F5=["2025-01-01","2025-04-18","2025-04-19","2025-05-01","2025-05-21","2025-06-20","2025-06-29","2025-07-16","2025-08-15","2025-09-18","2025-09-19","2025-10-12","2025-10-31","2025-11-01","2025-12-08","2025-12-25","2026-01-01","2026-04-03","2026-04-04","2026-05-01","2026-05-21","2026-06-21","2026-06-29","2026-07-16","2026-08-15","2026-09-18","2026-09-19","2026-10-12","2026-10-31","2026-11-01","2026-12-08","2026-12-25"],We=(r,e,n,a)=>({id:r,firstName:e,lastName:n,rut:"",email:`${e.toLowerCase()}.${n.toLowerCase().replace(/ /g,"")}@institucion.cl`,position:"Funcionario",department:"General",totalVacationDays:15,usedVacationDays:0,totalAdminDays:6,usedAdminDays:0,totalSickLeaveDays:30,usedSickLeaveDays:0,avatarUrl:`https://ui-avatars.com/api/?name=${e}+${n}&background=random&color=fff`}),V5=[We("1","Nelida","Valderama"),We("2","Yahivett","Tarque"),We("3","Maria Soledad","Jarrin"),We("4","Max","Tapia"),We("5","Gloria","Bolano"),We("6","Romina","Siau"),We("7","Sebastian","Troncoso Bruna"),We("8","Alvaro","Ron"),We("9","Alejandra","Leiva"),We("10","Paola","Reyes"),We("11","Rodrigo","Marin"),We("12","Karen","Diaz"),We("13","Natalia","Jofre"),We("14","Angelica","Zenis"),We("15","Patricio","Tapia Munoz"),We("16","Sebastian","Diaz"),We("17","Benjamin","Vega Navarro"),We("18","Nicolas","Labbe"),We("19","Carolina","Prieto"),We("20","Marcela","Fernandez"),We("21","Silvia","Esquivel"),We("22","Jennifer","Cancino"),We("23","Jose","Montero"),We("24","Jorge","Guillen"),We("25","Vanessa","Tavali Cortes"),We("26","Nicol","Diaz"),We("27","Claudia","Zamorano"),We("28","Fernanda","Urrutia"),We("29","Alonso","Pereda"),We("30","Maximiliano","Guzman"),We("31","Roxany","Mery"),We("32","Reinaldo","Valencia"),We("33","Gabriela","Zorilla"),We("34","Maria Alejandra","Saez"),We("35","Romina","Ron"),We("36","Ruth","Munoz"),We("37","Marcelo","Cardenas"),We("38","Anibal","Carrasco"),We("39","Yanet","Esquivel"),We("40","Nicole","Ortega"),We("41","Mercedes","Corrales"),We("42","Rosa","Jarpa Zamorano"),We("43","Jeremy","Gee")],Wt=(r,e,n,a,o,c,u)=>({id:r,employeeId:e,startDate:n,endDate:a,daysCount:o,type:c,shift:u,status:To.APPROVED,reason:"Solicitud Importada"}),pv=[Wt("101","1","2026-01-05","2026-01-23",15,Ct.LEGAL_HOLIDAY,It.JC),Wt("102","2","2026-01-06","2026-01-12",5,Ct.WITHOUT_PAY,It.JC),Wt("103","3","2026-01-06","2026-01-06",.5,Ct.ADMINISTRATIVE,It.JM),Wt("104","4","2026-01-07","2026-01-07",1,Ct.ADMINISTRATIVE,It.JC),Wt("105","5","2026-01-06","2026-01-07",2,Ct.SICK_LEAVE,It.JC),Wt("106","6","2026-01-06","2026-01-06",.5,Ct.ADMINISTRATIVE,It.JT),Wt("107","7","2026-01-09","2026-01-09",.5,Ct.ADMINISTRATIVE,It.JM),Wt("108","8","2026-01-08","2026-01-08",1,Ct.ADMINISTRATIVE,It.JC),Wt("109","9","2025-12-08","2026-02-18",42,Ct.SICK_LEAVE,It.JC),Wt("110","10","2026-01-09","2026-01-09",.5,Ct.ADMINISTRATIVE,It.JM),Wt("111","11","2026-01-16","2026-01-16",1,Ct.ADMINISTRATIVE,It.JC),Wt("112","12","2026-01-06","2026-03-30",84,Ct.PARENTAL,It.JC),Wt("113","13","2026-01-12","2026-01-12",.5,Ct.ADMINISTRATIVE,It.JM),Wt("114","14","2026-01-12","2026-01-12",.5,Ct.ADMINISTRATIVE,It.JM),Wt("115","15","2026-01-12","2026-01-12",.5,Ct.ADMINISTRATIVE,It.JT),Wt("116","15","2026-01-13","2026-01-14",2,Ct.LEGAL_HOLIDAY,It.JC),Wt("117","10","2026-01-16","2026-01-16",1,Ct.ADMINISTRATIVE,It.JC),Wt("118","7","2026-01-16","2026-01-16",.5,Ct.ADMINISTRATIVE,It.JM),Wt("119","16","2026-01-16","2026-01-16",1,Ct.ADMINISTRATIVE,It.JC),Wt("120","17","2026-01-23","2026-02-06",11,Ct.LEGAL_HOLIDAY,It.JC)],mv={defaultVacationDays:15,defaultAdminDays:6,defaultSickLeaveDays:30,notificationEmail:"rrhh@institucion.cl",emailTemplate:"- {NOMBRE} ({CARGO}): {TIPO} {JORNADA} desde el {DESDE} hasta el {HASTA}.",templateLegalHoliday:"- {NOMBRE} ({CARGO}): Hara uso de Feriado Legal {JORNADA} desde el {DESDE} hasta el {HASTA}.",templateAdministrative:"- {NOMBRE} ({CARGO}): Solicito Permiso Administrativo {JORNADA} el dia {DESDE} (Retorna: {HASTA}).",templateSickLeave:"- {NOMBRE} ({CARGO}): Presenta Licencia Medica desde el {DESDE} hasta el {HASTA}.",carryoverVacationEnabled:!0,carryoverVacationMaxPeriods:2,adminDaysExpireAtYearEnd:!0,yearCloseReminderDays:30},nn=yi.create("AI"),j_=r=>{if(typeof r=="number")return Number.isFinite(r)?r:void 0;if(r==null)return;const e=String(r).trim();if(!e)return;const n=e.match(/-?\d+(?:[.,]\d+)?/);if(!n)return;const a=parseFloat(n[0].replace(",","."));return Number.isNaN(a)?void 0:a},ip=(...r)=>{for(const e of r){const n=j_(e);if(n!==void 0)return n}},H5=(r,e)=>{for(const[n,a]of Object.entries(r))if(e.some(o=>o.test(n))){const o=j_(a);if(o!==void 0)return o}},gv=r=>{const e=ip(r.saldoDisponible,H5(r,[/saldo\s*disponible/i,/saldo\s*anterior/i,/total\s*d[i]as?\s*h[a]biles?/i,/d[i]as?\s*a\s*su\s*haber/i,/dias?\s*haber/i])),n=ip(r.solicitado,r.cantidadDias),a=ip(r.cantidadDias,r.solicitado);return{...r,...e!==void 0?{saldoDisponible:e}:{},...n!==void 0?{solicitado:n}:{},...a!==void 0?{cantidadDias:a}:{}}},R_=!0,q5=1e4,D_=async(r,e)=>{nn.info("Procesando PDF con backend GAS...");const n=e==="PA"?Tt.WEB_APP_URL:Tt.WEB_APP_URL_FL;nn.debug("Backend URL ("+e+"):",n);const a=new AbortController,o=setTimeout(()=>a.abort(),q5);let c;try{c=await fetch(n,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({action:"processAI",pdfBase64:r,solicitudType:e}),signal:a.signal})}catch(f){throw f instanceof Error&&f.name==="AbortError"?new Error("Timeout: el backend GAS no respondi en 30 segundos"):new Error("Error de red al conectar con backend: "+(f instanceof Error?f.message:String(f)))}finally{clearTimeout(o)}if(!c.ok)throw new Error("Backend respondi con HTTP "+c.status);const u=await c.json();if(!u.success)throw new Error(u.error||"Error procesando con backend");return u.data},O_=async(r,e)=>(nn.info("Procesando PDF con frontend (fallback)..."),nn.error("Gemini API Key no configurada"),{}),G5=async r=>{nn.info("Iniciando procesamiento de PDF PA..."),nn.debug("Tamao del PDF (base64):",r.length,"caracteres");try{if(R_)try{return{success:!0,data:await D_(r,"PA")}}catch(n){nn.warn("Backend no disponible, usando fallback frontend:",n)}const e=await O_(r,"PA");return Object.keys(e).length===0?{success:!1,error:"No se pudieron extraer datos del PDF"}:{success:!0,data:e}}catch(e){const n=e instanceof Error?e.message:"Error desconocido";return nn.error("Error crtico en el procesamiento de IA:",e),{success:!1,error:n}}},K5=async r=>{nn.info("Iniciando procesamiento de PDF FL...");try{if(R_)try{const a=await D_(r,"FL");nn.info("[FL] Respuesta del BACKEND:",JSON.stringify(a,null,2)),nn.info("[FL] saldoDisponible extrado:",a.saldoDisponible),nn.info("[FL] Todas las propiedades:",Object.keys(a));const o=gv(a);return nn.info("[FL] saldoDisponible normalizado:",o.saldoDisponible),{success:!0,data:o}}catch(a){nn.warn("Backend no disponible, usando fallback frontend:",a)}const e=await O_(r,"FL");if(nn.info("[FL] Respuesta del FRONTEND:",JSON.stringify(e,null,2)),nn.info("[FL] saldoDisponible extrado:",e.saldoDisponible),nn.info("[FL] Todas las propiedades:",Object.keys(e)),Object.keys(e).length===0)return{success:!1,error:"No se pudieron extraer datos del PDF"};const n=gv(e);return nn.info("[FL] saldoDisponible normalizado:",n.saldoDisponible),{success:!0,data:n}}catch(e){const n=e instanceof Error?e.message:"Error desconocido";return nn.error("Error crtico en el procesamiento FL de IA:",e),{success:!1,error:n}}},I_=r=>!!(r.periodo2&&r.periodo2.trim()!=="");function Bd(r,e=null){return(I_(r)?r.saldoFinalP2??r.saldoFinalP1:r.saldoFinalP1??r.saldoFinalP2)??e}const ed=r=>{if(!r)return!1;const n=new Date(r+"T12:00:00").getDay();return n===0||n===6},Ul=r=>{if(!r)return"";const e=new Date(r+"T12:00:00");return["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"][e.getDay()]},J5=({onSubmit:r,editingRecord:e,onCancelEdit:n,nextCorrelatives:a,employees:o,records:c,requestedSolicitudType:u,onRequestedSolicitudTypeHandled:f,baseDaysPA:m})=>{const b=new Date().getFullYear(),x=`${b-1}-${b}`,_=`${b}-${b+1}`,E={solicitudType:"PA",decreto:"",materia:"Decreto Exento",acto:a.PA,funcionario:"",rut:"",periodo:b.toString(),cantidadDias:1,fechaInicio:"",tipoJornada:"Jornada completa",diasHaber:m,fechaDecreto:new Date().toISOString().split("T")[0],ra:"MGA",emite:"mga",observaciones:"",fechaTermino:"",periodo1:x,saldoDisponibleP1:0,solicitadoP1:0,saldoFinalP1:0,periodo2:_,saldoDisponibleP2:0,solicitadoP2:0,saldoFinalP2:0},[y,A]=K.useState(E),[k,N]=K.useState({}),[C,I]=K.useState(!1),[z,V]=K.useState(!1),[H,G]=K.useState(null),[M,j]=K.useState(null),O=K.useRef(null),F=K.useRef(null),q=K.useRef(!1);K.useEffect(()=>{const ke=ae=>{F.current&&!F.current.contains(ae.target)&&V(!1)};return document.addEventListener("mousedown",ke),()=>document.removeEventListener("mousedown",ke)},[]),K.useEffect(()=>{if(e){const{id:ke,createdAt:ae,...Re}=e;A(Re),N({})}else A(ke=>({...ke,acto:a[ke.solicitudType]}))},[e,a]),K.useEffect(()=>{e||A(ke=>({...ke,acto:a[ke.solicitudType]}))},[y.solicitudType,a,e]),K.useEffect(()=>{if(u){if(e){f==null||f();return}A(ke=>ke.solicitudType===u?ke:{...ke,solicitudType:u}),f==null||f()}},[u,e,f]),K.useEffect(()=>{if(q.current){q.current=!1;return}if(!e&&y.rut){const ke=c.filter(ae=>ae.rut===y.rut&&ae.solicitudType===y.solicitudType).sort((ae,Re)=>mi(ae,Re));if(ke.length>0){const ae=ke[0];if(y.solicitudType==="PA"){const Re=ae.diasHaber-ae.cantidadDias;A(Te=>({...Te,diasHaber:Re})),G(Re)}else{const Re=Bd(ae,0);A(Te=>({...Te,saldoDisponibleP1:Re})),G(Re)}}else{if(y.solicitudType==="PA"){const ae=m;A(Re=>({...Re,diasHaber:ae}))}else A(ae=>({...ae,saldoDisponibleP1:0}));G(null)}}},[y.solicitudType,y.rut,c,e]);const D=(ke,ae)=>{switch(ke){case"rut":if(ae&&!ep(String(ae)))return"RUT invlido";break;case"fechaInicio":case"fechaTermino":if(ae&&!tp(String(ae)))return"Fecha fuera de rango vlido";break;case"cantidadDias":if(Number(ae)<=0)return"Debe ser mayor a 0";if(Number(ae)>30)return"Mximo 30 das";break}},L=ke=>{const{name:ae,value:Re}=ke.target,Ie=["cantidadDias","diasHaber","saldoDisponibleP1","solicitadoP1","saldoDisponibleP2","solicitadoP2"].includes(ae)?Number(Re):Re;A(Ue=>({...Ue,[ae]:Ie}));const Be=D(ae,Ie);N(Ue=>({...Ue,[ae]:Be}))},R=ke=>new Promise((ae,Re)=>{const Te=new FileReader;Te.onload=Ie=>{var Ue;const Be=(Ue=Ie.target)==null?void 0:Ue.result;ae(Be.split(",")[1])},Te.onerror=Re,Te.readAsDataURL(ke)}),ge=async ke=>{var Re;const ae=ke.target.files;if(!(!ae||ae.length===0)){I(!0),j(null);try{if(y.solicitudType==="PA"){const Te=await R(ae[0]),Ie=await G5(Te);if(!Ie.success||!Ie.data)throw new Error(Ie.error||"No se pudo extraer informacin del PDF.");const Be=Ie.data;A(Ue=>({...Ue,...Be,funcionario:Xl(Be.funcionario||""),rut:np(Be.rut||"")}))}else{const Te=Array.from(ae),Ie=[];for(const U of Te){const B=await R(U),J=await K5(B);Ie.push(J)}const Be=Ie.filter(U=>U.success&&U.data).map(U=>U.data);if(Be.length===0){const U=((Re=Ie.find(B=>B.error))==null?void 0:Re.error)||"No se pudo extraer informacin de los PDFs.";throw new Error(U)}console.log("[FL Scan] Resultados crudos de la IA:",JSON.stringify(Be,null,2)),Be.forEach((U,B)=>{console.log(`[FL Scan] PDF ${B+1}:`,{periodo:U.periodo,saldoDisponible:U.saldoDisponible,solicitado:U.solicitado,cantidadDias:U.cantidadDias,todasLasPropiedades:Object.keys(U)})}),Be.sort((U,B)=>(U.periodo||"").localeCompare(B.periodo||""));const Ue=Be[0],S=Be.length>1?Be[1]:null;console.log("[FL Scan] Despus de ordenar - first:",Ue),console.log("[FL Scan] Despus de ordenar - second:",S),console.log("[FL Scan] saldoDisponibleP1 ser:",Ue.saldoDisponible||0),console.log("[FL Scan] saldoDisponibleP2 ser:",(S==null?void 0:S.saldoDisponible)||0);const ve=(Ue.solicitado||Ue.cantidadDias||0)+((S==null?void 0:S.solicitado)||(S==null?void 0:S.cantidadDias)||0);q.current=!0,A(U=>({...U,solicitudType:"FL",funcionario:Xl(Ue.funcionario||""),rut:np(Ue.rut||""),cantidadDias:ve,fechaInicio:Ue.fechaInicio||"",fechaTermino:(S==null?void 0:S.fechaTermino)||Ue.fechaTermino||"",fechaDecreto:Ue.fechaDecreto||(S==null?void 0:S.fechaDecreto)||"",periodo1:Ue.periodo||"",saldoDisponibleP1:Ue.saldoDisponible||0,solicitadoP1:Ue.solicitado||Ue.cantidadDias||0,periodo2:(S==null?void 0:S.periodo)||"",saldoDisponibleP2:(S==null?void 0:S.saldoDisponible)||0,solicitadoP2:(S==null?void 0:S.solicitado)||(S==null?void 0:S.cantidadDias)||0}));const me=typeof Ue.saldoDisponible=="number"?Ue.saldoDisponible:null;G(me)}}catch(Te){const Ie=Te instanceof Error?Te.message:"Error desconocido";console.error("[AI] Error al procesar PDF:",Te),j(Ie||"Error al procesar PDF con IA. Por favor, ingresa los datos manualmente.")}finally{I(!1),ke.target&&(ke.target.value="")}}},Q=ke=>{const ae=np(ke.rut);A(Te=>({...Te,funcionario:Xl(ke.nombre),rut:ae})),V(!1);const Re=D("rut",ae);N(Te=>({...Te,rut:Re}))},X=o.filter(ke=>ke.nombre.toLowerCase().includes(y.funcionario.toLowerCase())||ke.rut.includes(y.funcionario)),_e=(y.diasHaber-y.cantidadDias).toFixed(1),re=parseFloat(_e)<0,te=(y.saldoDisponibleP1||0)-(y.solicitadoP1||0),W=(y.saldoDisponibleP2||0)-(y.solicitadoP2||0),Z=ke=>{if(!ke)return null;const ae=new Date(ke+"T12:00:00");return Number.isNaN(ae.getTime())?null:ae},pe=ke=>{const ae=Z(ke.fechaInicio||"");if(!ae)return null;let Re=null;if(ke.solicitudType==="FL"&&ke.fechaTermino&&(Re=Z(ke.fechaTermino)||null),!Re||Re<ae){const Te=Math.max(Math.ceil(ke.cantidadDias||1),1);Re=new Date(ae),Re.setDate(ae.getDate()+Te-1)}return{start:ae,end:Re}},ne=(ke,ae,Re)=>{const Te=pe(ke);if(!Te)return null;const Ie=c.filter(Be=>Be.rut===ae&&Be.id!==Re);for(const Be of Ie){if(!Be.fechaInicio)continue;const Ue=pe({solicitudType:Be.solicitudType,fechaInicio:Be.fechaInicio,fechaTermino:Be.fechaTermino||"",cantidadDias:Be.cantidadDias});if(!Ue)continue;if(Te.start<=Ue.end&&Te.end>=Ue.start)return Be}return null},ie=ke=>{ke.preventDefault();const ae={};if(y.funcionario||(ae.funcionario="Requerido"),y.rut?ep(y.rut)||(ae.rut="RUT invlido"):ae.rut="Requerido",y.fechaInicio?tp(y.fechaInicio)?ed(y.fechaInicio)&&(ae.fechaInicio="Fin de semana"):ae.fechaInicio="Fecha invlida":ae.fechaInicio="Requerido",y.solicitudType==="FL"&&(y.fechaTermino?tp(y.fechaTermino)||(ae.fechaTermino="Fecha invlida"):ae.fechaTermino="Requerido"),y.solicitudType==="PA"&&y.cantidadDias>y.diasHaber){ae.cantidadDias="Saldo insuficiente",j(`Saldo insuficiente: solicitas ${y.cantidadDias} das pero solo tienes ${y.diasHaber} disponibles.`),N(ae);return}if(y.solicitudType==="FL"){const Te=!!(y.periodo2&&y.periodo2.trim()!==""),Ie=(y.saldoDisponibleP1||0)-(y.solicitadoP1||0),Be=(y.saldoDisponibleP2||0)-(y.solicitadoP2||0);if(!y.periodo1||!y.periodo1.trim()){j("El perodo 1 es obligatorio para Feriado Legal."),N({...ae,fechaInicio:"Periodo 1 requerido"});return}if(!Te&&((y.solicitadoP2||0)>0||(y.saldoDisponibleP2||0)>0)){j("Si no hay Perodo 2, los campos de Perodo 2 deben quedar en 0."),N({...ae,cantidadDias:"Perodo 2 inconsistente"});return}if(y.fechaInicio&&y.fechaTermino&&y.fechaTermino<y.fechaInicio){j("La fecha de trmino no puede ser anterior a la fecha de inicio."),N({...ae,fechaTermino:"Rango invlido"});return}if(Ie<0||Te&&Be<0){j(`Saldo FL insuficiente. Resultado: P1 ${Ie.toFixed(1)}${Te?` | P2 ${Be.toFixed(1)}`:""}.`),N({...ae,cantidadDias:"Saldo FL insuficiente"});return}}if(y.fechaInicio&&y.rut){const Te=ne({solicitudType:y.solicitudType,fechaInicio:y.fechaInicio,fechaTermino:y.fechaTermino,cantidadDias:y.cantidadDias},y.rut,e==null?void 0:e.id);if(Te){ae.fechaInicio="Conflicto de fechas";const Ie=Te.solicitudType==="PA"?"Permiso Administrativo":"Feriado Legal",Be=new Date(Te.fechaInicio+"T12:00:00").toLocaleDateString("es-CL");j(` Conflicto: ${y.funcionario} ya tiene un ${Ie} registrado desde el ${Be} (${Te.cantidadDias} das). Las fechas se superponen.`),N(ae);return}}if(Object.keys(ae).length>0){N(ae);const Te=ae.fechaInicio==="Fin de semana",Ie=ae.fechaTermino;j(Te?`El ${Ul(y.fechaInicio)} es fin de semana. Selecciona un da hbil.`:Ie?"La fecha de trmino es obligatoria para Feriado Legal.":"Por favor, corrige los campos marcados en rojo.");return}const Re={...y,saldoFinalP1:te,saldoFinalP2:W};r(Re),e||(A({...E,acto:a.PA}),N({})),j(null)},Ae=({icon:ke,title:ae,color:Re})=>h.jsxs("div",{className:`flex items-center gap-3 mb-5 pb-3 border-b ${Re}`,children:[h.jsx("div",{className:`p-2 rounded-xl ${Re.includes("indigo")?"bg-indigo-100 dark:bg-indigo-900/50":"bg-amber-100 dark:bg-amber-900/50"}`,children:h.jsx(ke,{className:`w-5 h-5 ${Re.includes("indigo")?"text-indigo-600 dark:text-indigo-400":"text-amber-600 dark:text-amber-400"}`})}),h.jsx("h3",{className:`text-sm font-black uppercase tracking-widest ${Re.includes("indigo")?"text-indigo-700 dark:text-indigo-300":"text-amber-700 dark:text-amber-300"}`,children:ae})]});return h.jsxs("div",{className:"relative group",children:[h.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500 to-sky-500 rounded-[2.5rem] blur opacity-5 group-hover:opacity-10 transition duration-1000 group-hover:duration-200"}),h.jsxs("form",{onSubmit:ie,className:`relative bg-white dark:bg-slate-800 rounded-2xl sm:rounded-[2rem] lg:rounded-[2.5rem] shadow-xl border overflow-hidden transition-all duration-500 ${e?"border-amber-400 dark:border-amber-500":"border-slate-200 dark:border-slate-700"}`,children:[h.jsxs("div",{className:`p-6 sm:p-8 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 text-white relative overflow-hidden ${e?"bg-amber-500":y.solicitudType==="PA"?"bg-gradient-to-r from-indigo-600 to-indigo-800":"bg-gradient-to-r from-amber-500 to-orange-600"}`,children:[h.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10 scale-150 pointer-events-none",children:y.solicitudType==="PA"?h.jsx(gi,{size:120}):h.jsx(Cd,{size:120})}),h.jsxs("div",{className:"flex items-center gap-4 sm:gap-5 z-10",children:[h.jsx("div",{className:`p-2.5 sm:p-3 rounded-xl sm:rounded-2xl backdrop-blur-md shadow-lg ${C?"bg-white/10 animate-spin":"bg-white/20"}`,children:C?h.jsx(Nd,{className:"w-5 h-5 sm:w-6 sm:h-6"}):e?h.jsx(Rp,{className:"w-5 h-5 sm:w-6 sm:h-6"}):h.jsx(ov,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg sm:text-xl font-extrabold uppercase tracking-tight",children:e?"Editando Resolucin":"Generar Acto Administrativo"}),h.jsx("p",{className:"text-[10px] sm:text-[11px] font-bold uppercase opacity-80 tracking-[0.15em] sm:tracking-[0.2em] mt-1",children:C?"Analizando con Gemini 3 Flash...":y.solicitudType==="PA"?"Permiso Administrativo":"Feriado Legal"})]})]}),h.jsxs("div",{className:"flex gap-2 z-10 w-full sm:w-auto",children:[!e&&h.jsxs("button",{type:"button",onClick:()=>{var ke;return(ke=O.current)==null?void 0:ke.click()},disabled:C,className:"flex-1 sm:flex-none px-4 sm:px-6 py-2.5 bg-white text-slate-900 hover:bg-slate-100 rounded-xl text-[10px] sm:text-[11px] font-black flex items-center justify-center gap-2 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[h.jsx(NN,{className:"w-4 h-4 text-indigo-600"}),h.jsx("span",{className:"hidden sm:inline",children:y.solicitudType==="FL"?"ESCANEAR SOLICITUD(ES)":"ESCANEAR SOLICITUD"}),h.jsx("span",{className:"sm:hidden",children:"ESCANEAR"})]}),e&&h.jsx("button",{type:"button",onClick:n,className:"p-2.5 hover:bg-white/20 rounded-xl transition-all border border-white/20",children:h.jsx(Gn,{className:"w-5 h-5"})}),h.jsx("input",{type:"file",ref:O,onChange:ge,hidden:!0,accept:"application/pdf",multiple:y.solicitudType==="FL"})]})]}),h.jsxs("div",{className:"p-4 sm:p-6 md:p-8 lg:p-10 space-y-6 sm:space-y-8",children:[M&&h.jsxs("div",{className:"bg-red-50 dark:bg-red-900/30 border border-red-100 dark:border-red-800 p-4 rounded-2xl flex items-center gap-3",children:[h.jsx(Oo,{className:"text-red-500 flex-shrink-0"}),h.jsx("p",{className:"text-xs sm:text-sm font-bold text-red-700 dark:text-red-300",children:M})]}),y.solicitudType==="PA"&&re&&h.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/30 border border-amber-200 dark:border-amber-800 p-4 rounded-2xl flex items-center gap-3",children:[h.jsx(jo,{className:"text-amber-500 flex-shrink-0"}),h.jsxs("p",{className:"text-xs sm:text-sm font-bold text-amber-700 dark:text-amber-300",children:["Atencin: El saldo quedar en negativo (",_e," das)"]})]}),h.jsx("div",{className:"flex justify-center",children:h.jsx("div",{className:"inline-flex gap-2 bg-slate-100 dark:bg-slate-700/50 p-2 rounded-2xl border border-slate-200 dark:border-slate-600 shadow-inner",children:$5.map(ke=>h.jsx("button",{type:"button",onClick:()=>A(ae=>({...ae,solicitudType:ke.value})),className:`px-4 sm:px-8 lg:px-12 py-3 rounded-xl text-[11px] sm:text-xs lg:text-sm font-black transition-all duration-300 ${y.solicitudType===ke.value?ke.value==="PA"?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50":"bg-amber-500 text-white shadow-lg shadow-amber-200 dark:shadow-amber-900/50":"text-slate-400 dark:text-slate-500 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-white/50 dark:hover:bg-slate-600/50"}`,children:ke.value==="PA"?"PERMISO (PA)":"FERIADO (FL)"},ke.value))})}),h.jsxs("div",{className:"bg-slate-50/50 dark:bg-slate-700/20 p-4 sm:p-6 rounded-2xl border border-slate-100 dark:border-slate-700",children:[h.jsx(Ae,{icon:ci,title:"Datos del Funcionario",color:"border-slate-200 dark:border-slate-600 text-slate-600"}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[h.jsxs("div",{className:"md:col-span-8 relative",ref:F,children:[h.jsxs("label",{className:"text-[10px] sm:text-[11px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1 mb-2 block",children:["Nombre del Funcionario ",k.funcionario&&h.jsxs("span",{className:"text-red-500 ml-2",children:[" ",k.funcionario]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(ci,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-300 dark:text-slate-600"}),h.jsx("input",{name:"funcionario",value:y.funcionario,onChange:ke=>{L(ke),V(!0)},onFocus:()=>V(!0),autoComplete:"off",placeholder:"NOMBRE O RUT PARA BUSCAR...",className:`w-full pl-12 pr-12 py-4 bg-white dark:bg-slate-700 border rounded-xl font-black text-slate-800 dark:text-white uppercase focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50 dark:focus:ring-indigo-900/50 outline-none transition-all text-sm ${k.funcionario?"border-red-300":"border-slate-200 dark:border-slate-600"}`}),h.jsx("button",{type:"button",onClick:()=>V(!z),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-indigo-600",children:h.jsx(h0,{className:`w-5 h-5 transition-transform ${z?"rotate-180":""}`})}),z&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-2xl z-[100] overflow-hidden",children:h.jsx("div",{className:"max-h-[280px] overflow-y-auto p-2",children:X.length>0?X.map(ke=>h.jsxs("div",{onClick:()=>Q(ke),className:"flex items-center justify-between px-4 py-3 hover:bg-indigo-50 dark:hover:bg-indigo-900/30 rounded-lg cursor-pointer",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-sm font-black text-slate-800 dark:text-white",children:ke.nombre}),h.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["RUT: ",ke.rut]})]}),h.jsx(iv,{className:"w-4 h-4 text-indigo-500 opacity-0 group-hover:opacity-100"})]},ke.rut)):h.jsxs("div",{className:"px-6 py-8 text-center",children:[h.jsx(ci,{className:"w-8 h-8 text-slate-200 dark:text-slate-700 mx-auto mb-2"}),h.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Sin coincidencias"})]})})})]})]}),h.jsxs("div",{className:"md:col-span-4",children:[h.jsxs("label",{className:"text-[10px] sm:text-[11px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest ml-1 mb-2 block",children:["RUT ",k.rut&&h.jsxs("span",{className:"text-red-500 ml-2",children:[" ",k.rut]})]}),h.jsxs("div",{className:"relative",children:[h.jsx(jN,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-300 dark:text-slate-600"}),h.jsx("input",{readOnly:!0,value:y.rut||"00.000.000-0",className:`w-full pl-12 pr-10 py-4 bg-slate-100 dark:bg-slate-700/50 border rounded-xl font-mono font-bold text-slate-500 dark:text-slate-400 outline-none text-sm ${k.rut?"border-red-300":"border-slate-200 dark:border-slate-600"}`}),y.rut&&ep(y.rut)&&h.jsx(iv,{className:"absolute right-4 top-1/2 -translate-y-1/2 w-5 h-5 text-emerald-500"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mt-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:"N Acto Adm."}),h.jsx("input",{name:"acto",value:y.acto,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-black text-slate-800 dark:text-white outline-none focus:border-indigo-500 text-center text-sm"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1 mb-2 block",children:"Tipo Documento"}),h.jsxs("select",{name:"materia",value:y.materia,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-bold text-slate-700 dark:text-slate-200 text-sm outline-none focus:border-indigo-500 cursor-pointer",children:[h.jsx("option",{value:"Decreto Exento",children:"Decreto Exento"}),h.jsx("option",{value:"Resolucin Exenta",children:"Resolucin Exenta"})]})]})]})]}),y.solicitudType==="PA"&&h.jsxs("div",{className:"bg-indigo-50/50 dark:bg-indigo-900/10 p-4 sm:p-6 rounded-2xl border border-indigo-100 dark:border-indigo-800/30",children:[h.jsx(Ae,{icon:f0,title:"Datos del Permiso Administrativo",color:"border-indigo-200 dark:border-indigo-800 text-indigo-600"}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:"text-[10px] font-black text-indigo-600 dark:text-indigo-400 uppercase tracking-widest block mb-2",children:"Saldo Anterior"}),h.jsx("input",{type:"number",step:"0.5",name:"diasHaber",value:y.diasHaber,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-indigo-200 dark:border-indigo-700 px-4 py-3 rounded-xl font-black text-indigo-900 dark:text-indigo-100 outline-none focus:border-indigo-500 text-center text-sm"}),H!==null&&h.jsx("span",{className:"absolute -top-1 right-2 bg-indigo-600 text-white text-[8px] font-black px-2 py-0.5 rounded-full",children:"SYNC"})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:["Das Solicitados ",k.cantidadDias&&h.jsx("span",{className:"text-red-500",children:""})]}),h.jsx("input",{type:"number",step:"0.5",name:"cantidadDias",value:y.cantidadDias,onChange:L,min:"0.5",max:"30",className:`w-full bg-white dark:bg-slate-700 border px-4 py-3 rounded-xl font-black text-slate-900 dark:text-white outline-none focus:border-indigo-500 text-center text-sm ${k.cantidadDias?"border-red-300":"border-slate-200 dark:border-slate-600"}`})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:["Fecha Inicio ",k.fechaInicio&&h.jsx("span",{className:"text-red-500",children:""})]}),h.jsx("input",{type:"date",name:"fechaInicio",value:y.fechaInicio,onChange:L,className:`w-full bg-white dark:bg-slate-700 border px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-indigo-500 text-sm ${k.fechaInicio?"border-red-300":"border-slate-200 dark:border-slate-600"}`}),y.fechaInicio&&h.jsxs("p",{className:`mt-1 text-[10px] font-bold ${ed(y.fechaInicio)?"text-red-500":"text-emerald-600"}`,children:[Ul(y.fechaInicio)," ",ed(y.fechaInicio)&&"(Fin de semana)"]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:"Fecha Solicitud"}),h.jsx("input",{type:"date",name:"fechaDecreto",value:y.fechaDecreto,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-indigo-500 text-sm"}),y.fechaDecreto&&h.jsx("p",{className:"mt-1 text-[10px] font-bold text-emerald-600",children:Ul(y.fechaDecreto)})]})]}),h.jsxs("div",{className:"mt-4",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:"Tipo de Jornada"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:B5.map(ke=>h.jsx("button",{type:"button",onClick:()=>A(ae=>({...ae,tipoJornada:ke})),className:`px-4 py-2 rounded-lg text-xs font-bold transition-all ${y.tipoJornada===ke?"bg-indigo-600 text-white shadow-md":"bg-white dark:bg-slate-700 text-slate-600 dark:text-slate-300 border border-slate-200 dark:border-slate-600 hover:border-indigo-400"}`,children:ke},ke))})]}),h.jsxs("div",{className:`mt-6 p-4 rounded-xl flex items-center gap-4 ${re?"bg-red-100 dark:bg-red-900/30":"bg-emerald-100 dark:bg-emerald-900/30"}`,children:[h.jsx(p0,{className:`w-5 h-5 ${re?"text-red-600":"text-emerald-600"}`}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Balance Final Proyectado"}),h.jsxs("p",{className:`text-xl font-black ${re?"text-red-600":"text-emerald-600"}`,children:[_e," das"]})]})]})]}),y.solicitudType==="FL"&&h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"bg-amber-50/50 dark:bg-amber-900/10 p-4 sm:p-6 rounded-2xl border border-amber-100 dark:border-amber-800/30",children:[h.jsx(Ae,{icon:Cd,title:"Datos del Feriado Legal",color:"border-amber-200 dark:border-amber-800 text-amber-600"}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{children:[h.jsxs("label",{className:"text-[10px] font-black text-amber-600 dark:text-amber-400 uppercase tracking-widest block mb-2",children:["Das Solicitados ",k.cantidadDias&&h.jsx("span",{className:"text-red-500",children:""})]}),h.jsx("input",{type:"number",step:"0.5",name:"cantidadDias",value:y.cantidadDias,onChange:L,min:"0.5",max:"30",className:`w-full bg-white dark:bg-slate-700 border px-4 py-3 rounded-xl font-black text-amber-900 dark:text-amber-100 outline-none focus:border-amber-500 text-center text-sm ${k.cantidadDias?"border-red-300":"border-amber-200 dark:border-amber-700"}`})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:["Fecha Inicio ",k.fechaInicio&&h.jsx("span",{className:"text-red-500",children:""})]}),h.jsx("input",{type:"date",name:"fechaInicio",value:y.fechaInicio,onChange:L,className:`w-full bg-white dark:bg-slate-700 border px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-amber-500 text-sm ${k.fechaInicio?"border-red-300":"border-slate-200 dark:border-slate-600"}`}),y.fechaInicio&&h.jsx("p",{className:`mt-1 text-[10px] font-bold ${ed(y.fechaInicio)?"text-red-500":"text-emerald-600"}`,children:Ul(y.fechaInicio)})]}),h.jsxs("div",{children:[h.jsxs("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:["Fecha Trmino ",k.fechaTermino&&h.jsx("span",{className:"text-red-500",children:""})]}),h.jsx("input",{type:"date",name:"fechaTermino",value:y.fechaTermino||"",onChange:L,className:`w-full bg-white dark:bg-slate-700 border px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-amber-500 text-sm ${k.fechaTermino?"border-red-300":"border-slate-200 dark:border-slate-600"}`}),y.fechaTermino&&h.jsx("p",{className:"mt-1 text-[10px] font-bold text-emerald-600",children:Ul(y.fechaTermino)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 dark:text-slate-400 uppercase tracking-widest block mb-2",children:"Fecha Emisin"}),h.jsx("input",{type:"date",name:"fechaDecreto",value:y.fechaDecreto,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-amber-500 text-sm"})]})]})]}),h.jsxs("div",{className:"bg-sky-50/50 dark:bg-sky-900/10 p-4 sm:p-6 rounded-2xl border border-sky-100 dark:border-sky-800/30",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("span",{className:"w-8 h-8 bg-sky-600 text-white rounded-lg flex items-center justify-center text-sm font-black",children:"1"}),h.jsx("h4",{className:"text-sm font-black text-sky-700 dark:text-sky-300 uppercase tracking-widest",children:"Perodo 1"})]}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2",children:"Perodo"}),h.jsx("input",{name:"periodo1",value:y.periodo1||"",onChange:L,placeholder:"2024-2025",className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-sky-500 text-sm text-center"})]}),h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2",children:"Saldo Disponible"}),h.jsx("input",{type:"number",step:"0.5",name:"saldoDisponibleP1",value:y.saldoDisponibleP1||0,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-black text-slate-800 dark:text-white outline-none focus:border-sky-500 text-sm text-center"}),H!==null&&h.jsx("span",{className:"absolute -top-1 right-2 bg-sky-600 text-white text-[8px] font-black px-2 py-0.5 rounded-full",children:"SYNC"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2",children:"Solicitado"}),h.jsx("input",{type:"number",step:"0.5",name:"solicitadoP1",value:y.solicitadoP1||0,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-black text-slate-800 dark:text-white outline-none focus:border-sky-500 text-sm text-center"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest block mb-2",children:"Saldo Final"}),h.jsx("input",{type:"number",readOnly:!0,value:te,className:"w-full bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-700 px-4 py-3 rounded-xl font-black text-emerald-700 dark:text-emerald-300 outline-none text-sm text-center"})]})]})]}),h.jsxs("div",{className:"bg-purple-50/50 dark:bg-purple-900/10 p-4 sm:p-6 rounded-2xl border border-purple-100 dark:border-purple-800/30",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("span",{className:"w-8 h-8 bg-purple-600 text-white rounded-lg flex items-center justify-center text-sm font-black",children:"2"}),h.jsx("h4",{className:"text-sm font-black text-purple-700 dark:text-purple-300 uppercase tracking-widest",children:"Perodo 2"}),h.jsx("span",{className:"text-[10px] font-medium text-slate-400 bg-slate-100 dark:bg-slate-700 px-2 py-1 rounded",children:"(Opcional)"})]}),h.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2",children:"Perodo"}),h.jsx("input",{name:"periodo2",value:y.periodo2||"",onChange:L,placeholder:"2025-2026",className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-bold text-slate-800 dark:text-white outline-none focus:border-purple-500 text-sm text-center"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2",children:"Saldo Disponible"}),h.jsx("input",{type:"number",step:"0.5",name:"saldoDisponibleP2",value:y.saldoDisponibleP2||0,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-black text-slate-800 dark:text-white outline-none focus:border-purple-500 text-sm text-center"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-2",children:"Solicitado"}),h.jsx("input",{type:"number",step:"0.5",name:"solicitadoP2",value:y.solicitadoP2||0,onChange:L,className:"w-full bg-white dark:bg-slate-700 border border-slate-200 dark:border-slate-600 px-4 py-3 rounded-xl font-black text-slate-800 dark:text-white outline-none focus:border-purple-500 text-sm text-center"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-emerald-600 uppercase tracking-widest block mb-2",children:"Saldo Final"}),h.jsx("input",{type:"number",readOnly:!0,value:W,className:"w-full bg-emerald-50 dark:bg-emerald-900/30 border border-emerald-200 dark:border-emerald-700 px-4 py-3 rounded-xl font-black text-emerald-700 dark:text-emerald-300 outline-none text-sm text-center"})]})]})]}),h.jsxs("div",{className:"bg-amber-100 dark:bg-amber-900/30 p-4 rounded-xl flex items-center gap-4",children:[h.jsx(zd,{className:"w-5 h-5 text-amber-600"}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] font-black text-slate-500 uppercase tracking-widest",children:"Total Das Feriado Legal"}),h.jsxs("p",{className:"text-xl font-black text-amber-600",children:[y.cantidadDias," das"]})]})]})]}),h.jsx("div",{className:"flex justify-end pt-4",children:h.jsxs("button",{type:"submit",className:`w-full sm:w-auto flex items-center justify-center gap-3 px-6 sm:px-10 py-4 ${e?"bg-amber-500 hover:bg-amber-600":y.solicitudType==="PA"?"bg-indigo-600 hover:bg-indigo-700":"bg-amber-500 hover:bg-amber-600"} text-white font-black rounded-2xl shadow-xl transition-all active:scale-95 uppercase text-xs tracking-widest`,children:[e?h.jsx(Rp,{className:"w-5 h-5"}):h.jsx(ov,{className:"w-5 h-5"}),e?"Actualizar Decreto":"Emitir Resolucin"]})})]})]})]})};function td(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var op={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var bv;function Y5(){return bv||(bv=1,(function(r,e){(function(n){r.exports=n()})(function(){return(function n(a,o,c){function u(b,x){if(!o[b]){if(!a[b]){var _=typeof td=="function"&&td;if(!x&&_)return _(b,!0);if(f)return f(b,!0);var E=new Error("Cannot find module '"+b+"'");throw E.code="MODULE_NOT_FOUND",E}var y=o[b]={exports:{}};a[b][0].call(y.exports,function(A){var k=a[b][1][A];return u(k||A)},y,y.exports,n,a,o,c)}return o[b].exports}for(var f=typeof td=="function"&&td,m=0;m<c.length;m++)u(c[m]);return u})({1:[function(n,a,o){var c=n("./utils"),u=n("./support"),f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";o.encode=function(m){for(var b,x,_,E,y,A,k,N=[],C=0,I=m.length,z=I,V=c.getTypeOf(m)!=="string";C<m.length;)z=I-C,_=V?(b=m[C++],x=C<I?m[C++]:0,C<I?m[C++]:0):(b=m.charCodeAt(C++),x=C<I?m.charCodeAt(C++):0,C<I?m.charCodeAt(C++):0),E=b>>2,y=(3&b)<<4|x>>4,A=1<z?(15&x)<<2|_>>6:64,k=2<z?63&_:64,N.push(f.charAt(E)+f.charAt(y)+f.charAt(A)+f.charAt(k));return N.join("")},o.decode=function(m){var b,x,_,E,y,A,k=0,N=0,C="data:";if(m.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var I,z=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===f.charAt(64)&&z--,m.charAt(m.length-2)===f.charAt(64)&&z--,z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(I=u.uint8array?new Uint8Array(0|z):new Array(0|z);k<m.length;)b=f.indexOf(m.charAt(k++))<<2|(E=f.indexOf(m.charAt(k++)))>>4,x=(15&E)<<4|(y=f.indexOf(m.charAt(k++)))>>2,_=(3&y)<<6|(A=f.indexOf(m.charAt(k++))),I[N++]=b,y!==64&&(I[N++]=x),A!==64&&(I[N++]=_);return I}},{"./support":30,"./utils":32}],2:[function(n,a,o){var c=n("./external"),u=n("./stream/DataWorker"),f=n("./stream/Crc32Probe"),m=n("./stream/DataLengthProbe");function b(x,_,E,y,A){this.compressedSize=x,this.uncompressedSize=_,this.crc32=E,this.compression=y,this.compressedContent=A}b.prototype={getContentWorker:function(){var x=new u(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),_=this;return x.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),x},getCompressedWorker:function(){return new u(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},b.createWorkerFrom=function(x,_,E){return x.pipe(new f).pipe(new m("uncompressedSize")).pipe(_.compressWorker(E)).pipe(new m("compressedSize")).withStreamInfo("compression",_)},a.exports=b},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,a,o){var c=n("./stream/GenericWorker");o.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},o.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,a,o){var c=n("./utils"),u=(function(){for(var f,m=[],b=0;b<256;b++){f=b;for(var x=0;x<8;x++)f=1&f?3988292384^f>>>1:f>>>1;m[b]=f}return m})();a.exports=function(f,m){return f!==void 0&&f.length?c.getTypeOf(f)!=="string"?(function(b,x,_,E){var y=u,A=E+_;b^=-1;for(var k=E;k<A;k++)b=b>>>8^y[255&(b^x[k])];return-1^b})(0|m,f,f.length,0):(function(b,x,_,E){var y=u,A=E+_;b^=-1;for(var k=E;k<A;k++)b=b>>>8^y[255&(b^x.charCodeAt(k))];return-1^b})(0|m,f,f.length,0):0}},{"./utils":32}],5:[function(n,a,o){o.base64=!1,o.binary=!1,o.dir=!1,o.createFolders=!0,o.date=null,o.compression=null,o.compressionOptions=null,o.comment=null,o.unixPermissions=null,o.dosPermissions=null},{}],6:[function(n,a,o){var c=null;c=typeof Promise<"u"?Promise:n("lie"),a.exports={Promise:c}},{lie:37}],7:[function(n,a,o){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",u=n("pako"),f=n("./utils"),m=n("./stream/GenericWorker"),b=c?"uint8array":"array";function x(_,E){m.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=E,this.meta={}}o.magic="\b\0",f.inherits(x,m),x.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(f.transformTo(b,_.data),!1)},x.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},x.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},x.prototype._createPako=function(){this._pako=new u[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(E){_.push({data:E,meta:_.meta})}},o.compressWorker=function(_){return new x("Deflate",_)},o.uncompressWorker=function(){return new x("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,a,o){function c(y,A){var k,N="";for(k=0;k<A;k++)N+=String.fromCharCode(255&y),y>>>=8;return N}function u(y,A,k,N,C,I){var z,V,H=y.file,G=y.compression,M=I!==b.utf8encode,j=f.transformTo("string",I(H.name)),O=f.transformTo("string",b.utf8encode(H.name)),F=H.comment,q=f.transformTo("string",I(F)),D=f.transformTo("string",b.utf8encode(F)),L=O.length!==H.name.length,R=D.length!==F.length,ge="",Q="",X="",_e=H.dir,re=H.date,te={crc32:0,compressedSize:0,uncompressedSize:0};A&&!k||(te.crc32=y.crc32,te.compressedSize=y.compressedSize,te.uncompressedSize=y.uncompressedSize);var W=0;A&&(W|=8),M||!L&&!R||(W|=2048);var Z=0,pe=0;_e&&(Z|=16),C==="UNIX"?(pe=798,Z|=(function(ie,Ae){var ke=ie;return ie||(ke=Ae?16893:33204),(65535&ke)<<16})(H.unixPermissions,_e)):(pe=20,Z|=(function(ie){return 63&(ie||0)})(H.dosPermissions)),z=re.getUTCHours(),z<<=6,z|=re.getUTCMinutes(),z<<=5,z|=re.getUTCSeconds()/2,V=re.getUTCFullYear()-1980,V<<=4,V|=re.getUTCMonth()+1,V<<=5,V|=re.getUTCDate(),L&&(Q=c(1,1)+c(x(j),4)+O,ge+="up"+c(Q.length,2)+Q),R&&(X=c(1,1)+c(x(q),4)+D,ge+="uc"+c(X.length,2)+X);var ne="";return ne+=`
\0`,ne+=c(W,2),ne+=G.magic,ne+=c(z,2),ne+=c(V,2),ne+=c(te.crc32,4),ne+=c(te.compressedSize,4),ne+=c(te.uncompressedSize,4),ne+=c(j.length,2),ne+=c(ge.length,2),{fileRecord:_.LOCAL_FILE_HEADER+ne+j+ge,dirRecord:_.CENTRAL_FILE_HEADER+c(pe,2)+ne+c(q.length,2)+"\0\0\0\0"+c(Z,4)+c(N,4)+j+ge+q}}var f=n("../utils"),m=n("../stream/GenericWorker"),b=n("../utf8"),x=n("../crc32"),_=n("../signature");function E(y,A,k,N){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=k,this.encodeFileName=N,this.streamFiles=y,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}f.inherits(E,m),E.prototype.push=function(y){var A=y.meta.percent||0,k=this.entriesCount,N=this._sources.length;this.accumulate?this.contentBuffer.push(y):(this.bytesWritten+=y.data.length,m.prototype.push.call(this,{data:y.data,meta:{currentFile:this.currentFile,percent:k?(A+100*(k-N-1))/k:100}}))},E.prototype.openedSource=function(y){this.currentSourceOffset=this.bytesWritten,this.currentFile=y.file.name;var A=this.streamFiles&&!y.file.dir;if(A){var k=u(y,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:k.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(y){this.accumulate=!1;var A=this.streamFiles&&!y.file.dir,k=u(y,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(k.dirRecord),A)this.push({data:(function(N){return _.DATA_DESCRIPTOR+c(N.crc32,4)+c(N.compressedSize,4)+c(N.uncompressedSize,4)})(y),meta:{percent:100}});else for(this.push({data:k.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var y=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var k=this.bytesWritten-y,N=(function(C,I,z,V,H){var G=f.transformTo("string",H(V));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(C,2)+c(C,2)+c(I,4)+c(z,4)+c(G.length,2)+G})(this.dirRecords.length,k,y,this.zipComment,this.encodeFileName);this.push({data:N,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(y){this._sources.push(y);var A=this;return y.on("data",function(k){A.processChunk(k)}),y.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),y.on("error",function(k){A.error(k)}),this},E.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(y){var A=this._sources;if(!m.prototype.error.call(this,y))return!1;for(var k=0;k<A.length;k++)try{A[k].error(y)}catch{}return!0},E.prototype.lock=function(){m.prototype.lock.call(this);for(var y=this._sources,A=0;A<y.length;A++)y[A].lock()},a.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,a,o){var c=n("../compressions"),u=n("./ZipFileWorker");o.generateWorker=function(f,m,b){var x=new u(m.streamFiles,b,m.platform,m.encodeFileName),_=0;try{f.forEach(function(E,y){_++;var A=(function(I,z){var V=I||z,H=c[V];if(!H)throw new Error(V+" is not a valid compression method !");return H})(y.options.compression,m.compression),k=y.options.compressionOptions||m.compressionOptions||{},N=y.dir,C=y.date;y._compressWorker(A,k).withStreamInfo("file",{name:E,dir:N,date:C,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(x)}),x.entriesCount=_}catch(E){x.error(E)}return x}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,a,o){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var u=new c;for(var f in this)typeof this[f]!="function"&&(u[f]=this[f]);return u}}(c.prototype=n("./object")).loadAsync=n("./load"),c.support=n("./support"),c.defaults=n("./defaults"),c.version="3.10.1",c.loadAsync=function(u,f){return new c().loadAsync(u,f)},c.external=n("./external"),a.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,a,o){var c=n("./utils"),u=n("./external"),f=n("./utf8"),m=n("./zipEntries"),b=n("./stream/Crc32Probe"),x=n("./nodejsUtils");function _(E){return new u.Promise(function(y,A){var k=E.decompressed.getContentWorker().pipe(new b);k.on("error",function(N){A(N)}).on("end",function(){k.streamInfo.crc32!==E.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):y()}).resume()})}a.exports=function(E,y){var A=this;return y=c.extend(y||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:f.utf8decode}),x.isNode&&x.isStream(E)?u.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",E,!0,y.optimizedBinaryString,y.base64).then(function(k){var N=new m(y);return N.load(k),N}).then(function(k){var N=[u.Promise.resolve(k)],C=k.files;if(y.checkCRC32)for(var I=0;I<C.length;I++)N.push(_(C[I]));return u.Promise.all(N)}).then(function(k){for(var N=k.shift(),C=N.files,I=0;I<C.length;I++){var z=C[I],V=z.fileNameStr,H=c.resolve(z.fileNameStr);A.file(H,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:y.createFolders}),z.dir||(A.file(H).unsafeOriginalName=V)}return N.zipComment.length&&(A.comment=N.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,a,o){var c=n("../utils"),u=n("../stream/GenericWorker");function f(m,b){u.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(b)}c.inherits(f,u),f.prototype._bindStream=function(m){var b=this;(this._stream=m).pause(),m.on("data",function(x){b.push({data:x,meta:{percent:0}})}).on("error",function(x){b.isPaused?this.generatedError=x:b.error(x)}).on("end",function(){b.isPaused?b._upstreamEnded=!0:b.end()})},f.prototype.pause=function(){return!!u.prototype.pause.call(this)&&(this._stream.pause(),!0)},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=f},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,a,o){var c=n("readable-stream").Readable;function u(f,m,b){c.call(this,m),this._helper=f;var x=this;f.on("data",function(_,E){x.push(_)||x._helper.pause(),b&&b(E)}).on("error",function(_){x.emit("error",_)}).on("end",function(){x.push(null)})}n("../utils").inherits(u,c),u.prototype._read=function(){this._helper.resume()},a.exports=u},{"../utils":32,"readable-stream":16}],14:[function(n,a,o){a.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,u){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,u);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,u)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var u=new Buffer(c);return u.fill(0),u},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(n,a,o){function c(H,G,M){var j,O=f.getTypeOf(G),F=f.extend(M||{},x);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(H=C(H)),F.createFolders&&(j=N(H))&&I.call(this,j,!0);var q=O==="string"&&F.binary===!1&&F.base64===!1;M&&M.binary!==void 0||(F.binary=!q),(G instanceof _&&G.uncompressedSize===0||F.dir||!G||G.length===0)&&(F.base64=!1,F.binary=!0,G="",F.compression="STORE",O="string");var D=null;D=G instanceof _||G instanceof m?G:A.isNode&&A.isStream(G)?new k(H,G):f.prepareContent(H,G,F.binary,F.optimizedBinaryString,F.base64);var L=new E(H,D,F);this.files[H]=L}var u=n("./utf8"),f=n("./utils"),m=n("./stream/GenericWorker"),b=n("./stream/StreamHelper"),x=n("./defaults"),_=n("./compressedObject"),E=n("./zipObject"),y=n("./generate"),A=n("./nodejsUtils"),k=n("./nodejs/NodejsStreamInputAdapter"),N=function(H){H.slice(-1)==="/"&&(H=H.substring(0,H.length-1));var G=H.lastIndexOf("/");return 0<G?H.substring(0,G):""},C=function(H){return H.slice(-1)!=="/"&&(H+="/"),H},I=function(H,G){return G=G!==void 0?G:x.createFolders,H=C(H),this.files[H]||c.call(this,H,null,{dir:!0,createFolders:G}),this.files[H]};function z(H){return Object.prototype.toString.call(H)==="[object RegExp]"}var V={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(H){var G,M,j;for(G in this.files)j=this.files[G],(M=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&H(M,j)},filter:function(H){var G=[];return this.forEach(function(M,j){H(M,j)&&G.push(j)}),G},file:function(H,G,M){if(arguments.length!==1)return H=this.root+H,c.call(this,H,G,M),this;if(z(H)){var j=H;return this.filter(function(F,q){return!q.dir&&j.test(F)})}var O=this.files[this.root+H];return O&&!O.dir?O:null},folder:function(H){if(!H)return this;if(z(H))return this.filter(function(O,F){return F.dir&&H.test(O)});var G=this.root+H,M=I.call(this,G),j=this.clone();return j.root=M.name,j},remove:function(H){H=this.root+H;var G=this.files[H];if(G||(H.slice(-1)!=="/"&&(H+="/"),G=this.files[H]),G&&!G.dir)delete this.files[H];else for(var M=this.filter(function(O,F){return F.name.slice(0,H.length)===H}),j=0;j<M.length;j++)delete this.files[M[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(H){var G,M={};try{if((M=f.extend(H||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:u.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");f.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var j=M.comment||this.comment||"";G=y.generateWorker(this,M,j)}catch(O){(G=new m("error")).error(O)}return new b(G,M.type||"string",M.mimeType)},generateAsync:function(H,G){return this.generateInternalStream(H).accumulate(G)},generateNodeStream:function(H,G){return(H=H||{}).type||(H.type="nodebuffer"),this.generateInternalStream(H).toNodejsStream(G)}};a.exports=V},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,a,o){a.exports=n("stream")},{stream:void 0}],17:[function(n,a,o){var c=n("./DataReader");function u(f){c.call(this,f);for(var m=0;m<this.data.length;m++)f[m]=255&f[m]}n("../utils").inherits(u,c),u.prototype.byteAt=function(f){return this.data[this.zero+f]},u.prototype.lastIndexOfSignature=function(f){for(var m=f.charCodeAt(0),b=f.charCodeAt(1),x=f.charCodeAt(2),_=f.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===m&&this.data[E+1]===b&&this.data[E+2]===x&&this.data[E+3]===_)return E-this.zero;return-1},u.prototype.readAndCheckSignature=function(f){var m=f.charCodeAt(0),b=f.charCodeAt(1),x=f.charCodeAt(2),_=f.charCodeAt(3),E=this.readData(4);return m===E[0]&&b===E[1]&&x===E[2]&&_===E[3]},u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=u},{"../utils":32,"./DataReader":18}],18:[function(n,a,o){var c=n("../utils");function u(f){this.data=f,this.length=f.length,this.index=0,this.zero=0}u.prototype={checkOffset:function(f){this.checkIndex(this.index+f)},checkIndex:function(f){if(this.length<this.zero+f||f<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+f+"). Corrupted zip ?")},setIndex:function(f){this.checkIndex(f),this.index=f},skip:function(f){this.setIndex(this.index+f)},byteAt:function(){},readInt:function(f){var m,b=0;for(this.checkOffset(f),m=this.index+f-1;m>=this.index;m--)b=(b<<8)+this.byteAt(m);return this.index+=f,b},readString:function(f){return c.transformTo("string",this.readData(f))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var f=this.readInt(4);return new Date(Date.UTC(1980+(f>>25&127),(f>>21&15)-1,f>>16&31,f>>11&31,f>>5&63,(31&f)<<1))}},a.exports=u},{"../utils":32}],19:[function(n,a,o){var c=n("./Uint8ArrayReader");function u(f){c.call(this,f)}n("../utils").inherits(u,c),u.prototype.readData=function(f){this.checkOffset(f);var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=u},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,a,o){var c=n("./DataReader");function u(f){c.call(this,f)}n("../utils").inherits(u,c),u.prototype.byteAt=function(f){return this.data.charCodeAt(this.zero+f)},u.prototype.lastIndexOfSignature=function(f){return this.data.lastIndexOf(f)-this.zero},u.prototype.readAndCheckSignature=function(f){return f===this.readData(4)},u.prototype.readData=function(f){this.checkOffset(f);var m=this.data.slice(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=u},{"../utils":32,"./DataReader":18}],21:[function(n,a,o){var c=n("./ArrayReader");function u(f){c.call(this,f)}n("../utils").inherits(u,c),u.prototype.readData=function(f){if(this.checkOffset(f),f===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+f);return this.index+=f,m},a.exports=u},{"../utils":32,"./ArrayReader":17}],22:[function(n,a,o){var c=n("../utils"),u=n("../support"),f=n("./ArrayReader"),m=n("./StringReader"),b=n("./NodeBufferReader"),x=n("./Uint8ArrayReader");a.exports=function(_){var E=c.getTypeOf(_);return c.checkSupport(E),E!=="string"||u.uint8array?E==="nodebuffer"?new b(_):u.uint8array?new x(c.transformTo("uint8array",_)):new f(c.transformTo("array",_)):new m(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,a,o){o.LOCAL_FILE_HEADER="PK",o.CENTRAL_FILE_HEADER="PK",o.CENTRAL_DIRECTORY_END="PK",o.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",o.ZIP64_CENTRAL_DIRECTORY_END="PK",o.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,a,o){var c=n("./GenericWorker"),u=n("../utils");function f(m){c.call(this,"ConvertWorker to "+m),this.destType=m}u.inherits(f,c),f.prototype.processChunk=function(m){this.push({data:u.transformTo(this.destType,m.data),meta:m.meta})},a.exports=f},{"../utils":32,"./GenericWorker":28}],25:[function(n,a,o){var c=n("./GenericWorker"),u=n("../crc32");function f(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(f,c),f.prototype.processChunk=function(m){this.streamInfo.crc32=u(m.data,this.streamInfo.crc32||0),this.push(m)},a.exports=f},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,a,o){var c=n("../utils"),u=n("./GenericWorker");function f(m){u.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}c.inherits(f,u),f.prototype.processChunk=function(m){if(m){var b=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=b+m.data.length}u.prototype.processChunk.call(this,m)},a.exports=f},{"../utils":32,"./GenericWorker":28}],27:[function(n,a,o){var c=n("../utils"),u=n("./GenericWorker");function f(m){u.call(this,"DataWorker");var b=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(x){b.dataIsReady=!0,b.data=x,b.max=x&&x.length||0,b.type=c.getTypeOf(x),b.isPaused||b._tickAndRepeat()},function(x){b.error(x)})}c.inherits(f,u),f.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this.data=null},f.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},f.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},f.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,b=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,b);break;case"uint8array":m=this.data.subarray(this.index,b);break;case"array":case"nodebuffer":m=this.data.slice(this.index,b)}return this.index=b,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=f},{"../utils":32,"./GenericWorker":28}],28:[function(n,a,o){function c(u){this.name=u||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(u){this.emit("data",u)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(u){this.emit("error",u)}return!0},error:function(u){return!this.isFinished&&(this.isPaused?this.generatedError=u:(this.isFinished=!0,this.emit("error",u),this.previous&&this.previous.error(u),this.cleanUp()),!0)},on:function(u,f){return this._listeners[u].push(f),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(u,f){if(this._listeners[u])for(var m=0;m<this._listeners[u].length;m++)this._listeners[u][m].call(this,f)},pipe:function(u){return u.registerPrevious(this)},registerPrevious:function(u){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=u.streamInfo,this.mergeStreamInfo(),this.previous=u;var f=this;return u.on("data",function(m){f.processChunk(m)}),u.on("end",function(){f.end()}),u.on("error",function(m){f.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var u=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),u=!0),this.previous&&this.previous.resume(),!u},flush:function(){},processChunk:function(u){this.push(u)},withStreamInfo:function(u,f){return this.extraStreamInfo[u]=f,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var u in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,u)&&(this.streamInfo[u]=this.extraStreamInfo[u])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var u="Worker "+this.name;return this.previous?this.previous+" -> "+u:u}},a.exports=c},{}],29:[function(n,a,o){var c=n("../utils"),u=n("./ConvertWorker"),f=n("./GenericWorker"),m=n("../base64"),b=n("../support"),x=n("../external"),_=null;if(b.nodestream)try{_=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(A,k){return new x.Promise(function(N,C){var I=[],z=A._internalType,V=A._outputType,H=A._mimeType;A.on("data",function(G,M){I.push(G),k&&k(M)}).on("error",function(G){I=[],C(G)}).on("end",function(){try{var G=(function(M,j,O){switch(M){case"blob":return c.newBlob(c.transformTo("arraybuffer",j),O);case"base64":return m.encode(j);default:return c.transformTo(M,j)}})(V,(function(M,j){var O,F=0,q=null,D=0;for(O=0;O<j.length;O++)D+=j[O].length;switch(M){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(q=new Uint8Array(D),O=0;O<j.length;O++)q.set(j[O],F),F+=j[O].length;return q;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+M+"'")}})(z,I),H);N(G)}catch(M){C(M)}I=[]}).resume()})}function y(A,k,N){var C=k;switch(k){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=k,this._mimeType=N,c.checkSupport(C),this._worker=A.pipe(new u(C)),A.lock()}catch(I){this._worker=new f("error"),this._worker.error(I)}}y.prototype={accumulate:function(A){return E(this,A)},on:function(A,k){var N=this;return A==="data"?this._worker.on(A,function(C){k.call(N,C.data,C.meta)}):this._worker.on(A,function(){c.delay(k,arguments,N)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},A)}},a.exports=y},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,a,o){if(o.base64=!0,o.array=!0,o.string=!0,o.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",o.nodebuffer=typeof Buffer<"u",o.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")o.blob=!1;else{var c=new ArrayBuffer(0);try{o.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var u=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);u.append(c),o.blob=u.getBlob("application/zip").size===0}catch{o.blob=!1}}}try{o.nodestream=!!n("readable-stream").Readable}catch{o.nodestream=!1}},{"readable-stream":16}],31:[function(n,a,o){for(var c=n("./utils"),u=n("./support"),f=n("./nodejsUtils"),m=n("./stream/GenericWorker"),b=new Array(256),x=0;x<256;x++)b[x]=252<=x?6:248<=x?5:240<=x?4:224<=x?3:192<=x?2:1;b[254]=b[254]=1;function _(){m.call(this,"utf-8 decode"),this.leftOver=null}function E(){m.call(this,"utf-8 encode")}o.utf8encode=function(y){return u.nodebuffer?f.newBufferFrom(y,"utf-8"):(function(A){var k,N,C,I,z,V=A.length,H=0;for(I=0;I<V;I++)(64512&(N=A.charCodeAt(I)))==55296&&I+1<V&&(64512&(C=A.charCodeAt(I+1)))==56320&&(N=65536+(N-55296<<10)+(C-56320),I++),H+=N<128?1:N<2048?2:N<65536?3:4;for(k=u.uint8array?new Uint8Array(H):new Array(H),I=z=0;z<H;I++)(64512&(N=A.charCodeAt(I)))==55296&&I+1<V&&(64512&(C=A.charCodeAt(I+1)))==56320&&(N=65536+(N-55296<<10)+(C-56320),I++),N<128?k[z++]=N:(N<2048?k[z++]=192|N>>>6:(N<65536?k[z++]=224|N>>>12:(k[z++]=240|N>>>18,k[z++]=128|N>>>12&63),k[z++]=128|N>>>6&63),k[z++]=128|63&N);return k})(y)},o.utf8decode=function(y){return u.nodebuffer?c.transformTo("nodebuffer",y).toString("utf-8"):(function(A){var k,N,C,I,z=A.length,V=new Array(2*z);for(k=N=0;k<z;)if((C=A[k++])<128)V[N++]=C;else if(4<(I=b[C]))V[N++]=65533,k+=I-1;else{for(C&=I===2?31:I===3?15:7;1<I&&k<z;)C=C<<6|63&A[k++],I--;1<I?V[N++]=65533:C<65536?V[N++]=C:(C-=65536,V[N++]=55296|C>>10&1023,V[N++]=56320|1023&C)}return V.length!==N&&(V.subarray?V=V.subarray(0,N):V.length=N),c.applyFromCharCode(V)})(y=c.transformTo(u.uint8array?"uint8array":"array",y))},c.inherits(_,m),_.prototype.processChunk=function(y){var A=c.transformTo(u.uint8array?"uint8array":"array",y.data);if(this.leftOver&&this.leftOver.length){if(u.uint8array){var k=A;(A=new Uint8Array(k.length+this.leftOver.length)).set(this.leftOver,0),A.set(k,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var N=(function(I,z){var V;for((z=z||I.length)>I.length&&(z=I.length),V=z-1;0<=V&&(192&I[V])==128;)V--;return V<0||V===0?z:V+b[I[V]]>z?V:z})(A),C=A;N!==A.length&&(u.uint8array?(C=A.subarray(0,N),this.leftOver=A.subarray(N,A.length)):(C=A.slice(0,N),this.leftOver=A.slice(N,A.length))),this.push({data:o.utf8decode(C),meta:y.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:o.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},o.Utf8DecodeWorker=_,c.inherits(E,m),E.prototype.processChunk=function(y){this.push({data:o.utf8encode(y.data),meta:y.meta})},o.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,a,o){var c=n("./support"),u=n("./base64"),f=n("./nodejsUtils"),m=n("./external");function b(k){return k}function x(k,N){for(var C=0;C<k.length;++C)N[C]=255&k.charCodeAt(C);return N}n("setimmediate"),o.newBlob=function(k,N){o.checkSupport("blob");try{return new Blob([k],{type:N})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(k),C.getBlob(N)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(k,N,C){var I=[],z=0,V=k.length;if(V<=C)return String.fromCharCode.apply(null,k);for(;z<V;)N==="array"||N==="nodebuffer"?I.push(String.fromCharCode.apply(null,k.slice(z,Math.min(z+C,V)))):I.push(String.fromCharCode.apply(null,k.subarray(z,Math.min(z+C,V)))),z+=C;return I.join("")},stringifyByChar:function(k){for(var N="",C=0;C<k.length;C++)N+=String.fromCharCode(k[C]);return N},applyCanBeUsed:{uint8array:(function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,f.allocBuffer(1)).length===1}catch{return!1}})()}};function E(k){var N=65536,C=o.getTypeOf(k),I=!0;if(C==="uint8array"?I=_.applyCanBeUsed.uint8array:C==="nodebuffer"&&(I=_.applyCanBeUsed.nodebuffer),I)for(;1<N;)try{return _.stringifyByChunk(k,C,N)}catch{N=Math.floor(N/2)}return _.stringifyByChar(k)}function y(k,N){for(var C=0;C<k.length;C++)N[C]=k[C];return N}o.applyFromCharCode=E;var A={};A.string={string:b,array:function(k){return x(k,new Array(k.length))},arraybuffer:function(k){return A.string.uint8array(k).buffer},uint8array:function(k){return x(k,new Uint8Array(k.length))},nodebuffer:function(k){return x(k,f.allocBuffer(k.length))}},A.array={string:E,array:b,arraybuffer:function(k){return new Uint8Array(k).buffer},uint8array:function(k){return new Uint8Array(k)},nodebuffer:function(k){return f.newBufferFrom(k)}},A.arraybuffer={string:function(k){return E(new Uint8Array(k))},array:function(k){return y(new Uint8Array(k),new Array(k.byteLength))},arraybuffer:b,uint8array:function(k){return new Uint8Array(k)},nodebuffer:function(k){return f.newBufferFrom(new Uint8Array(k))}},A.uint8array={string:E,array:function(k){return y(k,new Array(k.length))},arraybuffer:function(k){return k.buffer},uint8array:b,nodebuffer:function(k){return f.newBufferFrom(k)}},A.nodebuffer={string:E,array:function(k){return y(k,new Array(k.length))},arraybuffer:function(k){return A.nodebuffer.uint8array(k).buffer},uint8array:function(k){return y(k,new Uint8Array(k.length))},nodebuffer:b},o.transformTo=function(k,N){if(N=N||"",!k)return N;o.checkSupport(k);var C=o.getTypeOf(N);return A[C][k](N)},o.resolve=function(k){for(var N=k.split("/"),C=[],I=0;I<N.length;I++){var z=N[I];z==="."||z===""&&I!==0&&I!==N.length-1||(z===".."?C.pop():C.push(z))}return C.join("/")},o.getTypeOf=function(k){return typeof k=="string"?"string":Object.prototype.toString.call(k)==="[object Array]"?"array":c.nodebuffer&&f.isBuffer(k)?"nodebuffer":c.uint8array&&k instanceof Uint8Array?"uint8array":c.arraybuffer&&k instanceof ArrayBuffer?"arraybuffer":void 0},o.checkSupport=function(k){if(!c[k.toLowerCase()])throw new Error(k+" is not supported by this platform")},o.MAX_VALUE_16BITS=65535,o.MAX_VALUE_32BITS=-1,o.pretty=function(k){var N,C,I="";for(C=0;C<(k||"").length;C++)I+="\\x"+((N=k.charCodeAt(C))<16?"0":"")+N.toString(16).toUpperCase();return I},o.delay=function(k,N,C){setImmediate(function(){k.apply(C||null,N||[])})},o.inherits=function(k,N){function C(){}C.prototype=N.prototype,k.prototype=new C},o.extend=function(){var k,N,C={};for(k=0;k<arguments.length;k++)for(N in arguments[k])Object.prototype.hasOwnProperty.call(arguments[k],N)&&C[N]===void 0&&(C[N]=arguments[k][N]);return C},o.prepareContent=function(k,N,C,I,z){return m.Promise.resolve(N).then(function(V){return c.blob&&(V instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(V))!==-1)&&typeof FileReader<"u"?new m.Promise(function(H,G){var M=new FileReader;M.onload=function(j){H(j.target.result)},M.onerror=function(j){G(j.target.error)},M.readAsArrayBuffer(V)}):V}).then(function(V){var H=o.getTypeOf(V);return H?(H==="arraybuffer"?V=o.transformTo("uint8array",V):H==="string"&&(z?V=u.decode(V):C&&I!==!0&&(V=(function(G){return x(G,c.uint8array?new Uint8Array(G.length):new Array(G.length))})(V))),V):m.Promise.reject(new Error("Can't read the data of '"+k+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,a,o){var c=n("./reader/readerFor"),u=n("./utils"),f=n("./signature"),m=n("./zipEntry"),b=n("./support");function x(_){this.files=[],this.loadOptions=_}x.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+u.pretty(E)+", expected "+u.pretty(_)+")")}},isSignature:function(_,E){var y=this.reader.index;this.reader.setIndex(_);var A=this.reader.readString(4)===E;return this.reader.setIndex(y),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),E=b.uint8array?"uint8array":"array",y=u.transformTo(E,_);this.zipComment=this.loadOptions.decodeFileName(y)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,E,y,A=this.zip64EndOfCentralSize-44;0<A;)_=this.reader.readInt(2),E=this.reader.readInt(4),y=this.reader.readData(E),this.zip64ExtensibleData[_]={id:_,length:E,value:y}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,E;for(_=0;_<this.files.length;_++)E=this.files[_],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(f.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(f.CENTRAL_FILE_HEADER);)(_=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(f.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,f.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var E=_;if(this.checkSignature(f.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===u.MAX_VALUE_16BITS||this.diskWithCentralDirStart===u.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===u.MAX_VALUE_16BITS||this.centralDirRecords===u.MAX_VALUE_16BITS||this.centralDirSize===u.MAX_VALUE_32BITS||this.centralDirOffset===u.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,f.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(f.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var A=E-y;if(0<A)this.isSignature(E,f.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(_){this.reader=c(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=x},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,a,o){var c=n("./reader/readerFor"),u=n("./utils"),f=n("./compressedObject"),m=n("./crc32"),b=n("./utf8"),x=n("./compressions"),_=n("./support");function E(y,A){this.options=y,this.loadOptions=A}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(y){var A,k;if(y.skip(22),this.fileNameLength=y.readInt(2),k=y.readInt(2),this.fileName=y.readData(this.fileNameLength),y.skip(k),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=(function(N){for(var C in x)if(Object.prototype.hasOwnProperty.call(x,C)&&x[C].magic===N)return x[C];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+u.pretty(this.compressionMethod)+" unknown (inner file : "+u.transformTo("string",this.fileName)+")");this.decompressed=new f(this.compressedSize,this.uncompressedSize,this.crc32,A,y.readData(this.compressedSize))},readCentralPart:function(y){this.versionMadeBy=y.readInt(2),y.skip(2),this.bitFlag=y.readInt(2),this.compressionMethod=y.readString(2),this.date=y.readDate(),this.crc32=y.readInt(4),this.compressedSize=y.readInt(4),this.uncompressedSize=y.readInt(4);var A=y.readInt(2);if(this.extraFieldsLength=y.readInt(2),this.fileCommentLength=y.readInt(2),this.diskNumberStart=y.readInt(2),this.internalFileAttributes=y.readInt(2),this.externalFileAttributes=y.readInt(4),this.localHeaderOffset=y.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");y.skip(A),this.readExtraFields(y),this.parseZIP64ExtraField(y),this.fileComment=y.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var y=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),y==0&&(this.dosPermissions=63&this.externalFileAttributes),y==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var y=c(this.extraFields[1].value);this.uncompressedSize===u.MAX_VALUE_32BITS&&(this.uncompressedSize=y.readInt(8)),this.compressedSize===u.MAX_VALUE_32BITS&&(this.compressedSize=y.readInt(8)),this.localHeaderOffset===u.MAX_VALUE_32BITS&&(this.localHeaderOffset=y.readInt(8)),this.diskNumberStart===u.MAX_VALUE_32BITS&&(this.diskNumberStart=y.readInt(4))}},readExtraFields:function(y){var A,k,N,C=y.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});y.index+4<C;)A=y.readInt(2),k=y.readInt(2),N=y.readData(k),this.extraFields[A]={id:A,length:k,value:N};y.setIndex(C)},handleUTF8:function(){var y=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=b.utf8decode(this.fileName),this.fileCommentStr=b.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var k=u.transformTo(y,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(k)}var N=this.findExtraFieldUnicodeComment();if(N!==null)this.fileCommentStr=N;else{var C=u.transformTo(y,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var y=this.extraFields[28789];if(y){var A=c(y.value);return A.readInt(1)!==1||m(this.fileName)!==A.readInt(4)?null:b.utf8decode(A.readData(y.length-5))}return null},findExtraFieldUnicodeComment:function(){var y=this.extraFields[25461];if(y){var A=c(y.value);return A.readInt(1)!==1||m(this.fileComment)!==A.readInt(4)?null:b.utf8decode(A.readData(y.length-5))}return null}},a.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,a,o){function c(A,k,N){this.name=A,this.dir=N.dir,this.date=N.date,this.comment=N.comment,this.unixPermissions=N.unixPermissions,this.dosPermissions=N.dosPermissions,this._data=k,this._dataBinary=N.binary,this.options={compression:N.compression,compressionOptions:N.compressionOptions}}var u=n("./stream/StreamHelper"),f=n("./stream/DataWorker"),m=n("./utf8"),b=n("./compressedObject"),x=n("./stream/GenericWorker");c.prototype={internalStream:function(A){var k=null,N="string";try{if(!A)throw new Error("No output type specified.");var C=(N=A.toLowerCase())==="string"||N==="text";N!=="binarystring"&&N!=="text"||(N="string"),k=this._decompressWorker();var I=!this._dataBinary;I&&!C&&(k=k.pipe(new m.Utf8EncodeWorker)),!I&&C&&(k=k.pipe(new m.Utf8DecodeWorker))}catch(z){(k=new x("error")).error(z)}return new u(k,N,"")},async:function(A,k){return this.internalStream(A).accumulate(k)},nodeStream:function(A,k){return this.internalStream(A||"nodebuffer").toNodejsStream(k)},_compressWorker:function(A,k){if(this._data instanceof b&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var N=this._decompressWorker();return this._dataBinary||(N=N.pipe(new m.Utf8EncodeWorker)),b.createWorkerFrom(N,A,k)},_decompressWorker:function(){return this._data instanceof b?this._data.getContentWorker():this._data instanceof x?this._data:new f(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},y=0;y<_.length;y++)c.prototype[_[y]]=E;a.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,a,o){(function(c){var u,f,m=c.MutationObserver||c.WebKitMutationObserver;if(m){var b=0,x=new m(A),_=c.document.createTextNode("");x.observe(_,{characterData:!0}),u=function(){_.data=b=++b%2}}else if(c.setImmediate||c.MessageChannel===void 0)u="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var k=c.document.createElement("script");k.onreadystatechange=function(){A(),k.onreadystatechange=null,k.parentNode.removeChild(k),k=null},c.document.documentElement.appendChild(k)}:function(){setTimeout(A,0)};else{var E=new c.MessageChannel;E.port1.onmessage=A,u=function(){E.port2.postMessage(0)}}var y=[];function A(){var k,N;f=!0;for(var C=y.length;C;){for(N=y,y=[],k=-1;++k<C;)N[k]();C=y.length}f=!1}a.exports=function(k){y.push(k)!==1||f||u()}}).call(this,typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,a,o){var c=n("immediate");function u(){}var f={},m=["REJECTED"],b=["FULFILLED"],x=["PENDING"];function _(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=x,this.queue=[],this.outcome=void 0,C!==u&&k(this,C)}function E(C,I,z){this.promise=C,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function y(C,I,z){c(function(){var V;try{V=I(z)}catch(H){return f.reject(C,H)}V===C?f.reject(C,new TypeError("Cannot resolve promise with itself")):f.resolve(C,V)})}function A(C){var I=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof I=="function")return function(){I.apply(C,arguments)}}function k(C,I){var z=!1;function V(M){z||(z=!0,f.reject(C,M))}function H(M){z||(z=!0,f.resolve(C,M))}var G=N(function(){I(H,V)});G.status==="error"&&V(G.value)}function N(C,I){var z={};try{z.value=C(I),z.status="success"}catch(V){z.status="error",z.value=V}return z}(a.exports=_).prototype.finally=function(C){if(typeof C!="function")return this;var I=this.constructor;return this.then(function(z){return I.resolve(C()).then(function(){return z})},function(z){return I.resolve(C()).then(function(){throw z})})},_.prototype.catch=function(C){return this.then(null,C)},_.prototype.then=function(C,I){if(typeof C!="function"&&this.state===b||typeof I!="function"&&this.state===m)return this;var z=new this.constructor(u);return this.state!==x?y(z,this.state===b?C:I,this.outcome):this.queue.push(new E(z,C,I)),z},E.prototype.callFulfilled=function(C){f.resolve(this.promise,C)},E.prototype.otherCallFulfilled=function(C){y(this.promise,this.onFulfilled,C)},E.prototype.callRejected=function(C){f.reject(this.promise,C)},E.prototype.otherCallRejected=function(C){y(this.promise,this.onRejected,C)},f.resolve=function(C,I){var z=N(A,I);if(z.status==="error")return f.reject(C,z.value);var V=z.value;if(V)k(C,V);else{C.state=b,C.outcome=I;for(var H=-1,G=C.queue.length;++H<G;)C.queue[H].callFulfilled(I)}return C},f.reject=function(C,I){C.state=m,C.outcome=I;for(var z=-1,V=C.queue.length;++z<V;)C.queue[z].callRejected(I);return C},_.resolve=function(C){return C instanceof this?C:f.resolve(new this(u),C)},_.reject=function(C){var I=new this(u);return f.reject(I,C)},_.all=function(C){var I=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=C.length,V=!1;if(!z)return this.resolve([]);for(var H=new Array(z),G=0,M=-1,j=new this(u);++M<z;)O(C[M],M);return j;function O(F,q){I.resolve(F).then(function(D){H[q]=D,++G!==z||V||(V=!0,f.resolve(j,H))},function(D){V||(V=!0,f.reject(j,D))})}},_.race=function(C){var I=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=C.length,V=!1;if(!z)return this.resolve([]);for(var H=-1,G=new this(u);++H<z;)M=C[H],I.resolve(M).then(function(j){V||(V=!0,f.resolve(G,j))},function(j){V||(V=!0,f.reject(G,j))});var M;return G}},{immediate:36}],38:[function(n,a,o){var c={};(0,n("./lib/utils/common").assign)(c,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),a.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,a,o){var c=n("./zlib/deflate"),u=n("./utils/common"),f=n("./utils/strings"),m=n("./zlib/messages"),b=n("./zlib/zstream"),x=Object.prototype.toString,_=0,E=-1,y=0,A=8;function k(C){if(!(this instanceof k))return new k(C);this.options=u.assign({level:E,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:y,to:""},C||{});var I=this.options;I.raw&&0<I.windowBits?I.windowBits=-I.windowBits:I.gzip&&0<I.windowBits&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new b,this.strm.avail_out=0;var z=c.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(z!==_)throw new Error(m[z]);if(I.header&&c.deflateSetHeader(this.strm,I.header),I.dictionary){var V;if(V=typeof I.dictionary=="string"?f.string2buf(I.dictionary):x.call(I.dictionary)==="[object ArrayBuffer]"?new Uint8Array(I.dictionary):I.dictionary,(z=c.deflateSetDictionary(this.strm,V))!==_)throw new Error(m[z]);this._dict_set=!0}}function N(C,I){var z=new k(I);if(z.push(C,!0),z.err)throw z.msg||m[z.err];return z.result}k.prototype.push=function(C,I){var z,V,H=this.strm,G=this.options.chunkSize;if(this.ended)return!1;V=I===~~I?I:I===!0?4:0,typeof C=="string"?H.input=f.string2buf(C):x.call(C)==="[object ArrayBuffer]"?H.input=new Uint8Array(C):H.input=C,H.next_in=0,H.avail_in=H.input.length;do{if(H.avail_out===0&&(H.output=new u.Buf8(G),H.next_out=0,H.avail_out=G),(z=c.deflate(H,V))!==1&&z!==_)return this.onEnd(z),!(this.ended=!0);H.avail_out!==0&&(H.avail_in!==0||V!==4&&V!==2)||(this.options.to==="string"?this.onData(f.buf2binstring(u.shrinkBuf(H.output,H.next_out))):this.onData(u.shrinkBuf(H.output,H.next_out)))}while((0<H.avail_in||H.avail_out===0)&&z!==1);return V===4?(z=c.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===_):V!==2||(this.onEnd(_),!(H.avail_out=0))},k.prototype.onData=function(C){this.chunks.push(C)},k.prototype.onEnd=function(C){C===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},o.Deflate=k,o.deflate=N,o.deflateRaw=function(C,I){return(I=I||{}).raw=!0,N(C,I)},o.gzip=function(C,I){return(I=I||{}).gzip=!0,N(C,I)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,a,o){var c=n("./zlib/inflate"),u=n("./utils/common"),f=n("./utils/strings"),m=n("./zlib/constants"),b=n("./zlib/messages"),x=n("./zlib/zstream"),_=n("./zlib/gzheader"),E=Object.prototype.toString;function y(k){if(!(this instanceof y))return new y(k);this.options=u.assign({chunkSize:16384,windowBits:0,to:""},k||{});var N=this.options;N.raw&&0<=N.windowBits&&N.windowBits<16&&(N.windowBits=-N.windowBits,N.windowBits===0&&(N.windowBits=-15)),!(0<=N.windowBits&&N.windowBits<16)||k&&k.windowBits||(N.windowBits+=32),15<N.windowBits&&N.windowBits<48&&(15&N.windowBits)==0&&(N.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new x,this.strm.avail_out=0;var C=c.inflateInit2(this.strm,N.windowBits);if(C!==m.Z_OK)throw new Error(b[C]);this.header=new _,c.inflateGetHeader(this.strm,this.header)}function A(k,N){var C=new y(N);if(C.push(k,!0),C.err)throw C.msg||b[C.err];return C.result}y.prototype.push=function(k,N){var C,I,z,V,H,G,M=this.strm,j=this.options.chunkSize,O=this.options.dictionary,F=!1;if(this.ended)return!1;I=N===~~N?N:N===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof k=="string"?M.input=f.binstring2buf(k):E.call(k)==="[object ArrayBuffer]"?M.input=new Uint8Array(k):M.input=k,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new u.Buf8(j),M.next_out=0,M.avail_out=j),(C=c.inflate(M,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&O&&(G=typeof O=="string"?f.string2buf(O):E.call(O)==="[object ArrayBuffer]"?new Uint8Array(O):O,C=c.inflateSetDictionary(this.strm,G)),C===m.Z_BUF_ERROR&&F===!0&&(C=m.Z_OK,F=!1),C!==m.Z_STREAM_END&&C!==m.Z_OK)return this.onEnd(C),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&C!==m.Z_STREAM_END&&(M.avail_in!==0||I!==m.Z_FINISH&&I!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(z=f.utf8border(M.output,M.next_out),V=M.next_out-z,H=f.buf2string(M.output,z),M.next_out=V,M.avail_out=j-V,V&&u.arraySet(M.output,M.output,z,V,0),this.onData(H)):this.onData(u.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(F=!0)}while((0<M.avail_in||M.avail_out===0)&&C!==m.Z_STREAM_END);return C===m.Z_STREAM_END&&(I=m.Z_FINISH),I===m.Z_FINISH?(C=c.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===m.Z_OK):I!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(M.avail_out=0))},y.prototype.onData=function(k){this.chunks.push(k)},y.prototype.onEnd=function(k){k===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=u.flattenChunks(this.chunks)),this.chunks=[],this.err=k,this.msg=this.strm.msg},o.Inflate=y,o.inflate=A,o.inflateRaw=function(k,N){return(N=N||{}).raw=!0,A(k,N)},o.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,a,o){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";o.assign=function(m){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var x=b.shift();if(x){if(typeof x!="object")throw new TypeError(x+"must be non-object");for(var _ in x)x.hasOwnProperty(_)&&(m[_]=x[_])}}return m},o.shrinkBuf=function(m,b){return m.length===b?m:m.subarray?m.subarray(0,b):(m.length=b,m)};var u={arraySet:function(m,b,x,_,E){if(b.subarray&&m.subarray)m.set(b.subarray(x,x+_),E);else for(var y=0;y<_;y++)m[E+y]=b[x+y]},flattenChunks:function(m){var b,x,_,E,y,A;for(b=_=0,x=m.length;b<x;b++)_+=m[b].length;for(A=new Uint8Array(_),b=E=0,x=m.length;b<x;b++)y=m[b],A.set(y,E),E+=y.length;return A}},f={arraySet:function(m,b,x,_,E){for(var y=0;y<_;y++)m[E+y]=b[x+y]},flattenChunks:function(m){return[].concat.apply([],m)}};o.setTyped=function(m){m?(o.Buf8=Uint8Array,o.Buf16=Uint16Array,o.Buf32=Int32Array,o.assign(o,u)):(o.Buf8=Array,o.Buf16=Array,o.Buf32=Array,o.assign(o,f))},o.setTyped(c)},{}],42:[function(n,a,o){var c=n("./common"),u=!0,f=!0;try{String.fromCharCode.apply(null,[0])}catch{u=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f=!1}for(var m=new c.Buf8(256),b=0;b<256;b++)m[b]=252<=b?6:248<=b?5:240<=b?4:224<=b?3:192<=b?2:1;function x(_,E){if(E<65537&&(_.subarray&&f||!_.subarray&&u))return String.fromCharCode.apply(null,c.shrinkBuf(_,E));for(var y="",A=0;A<E;A++)y+=String.fromCharCode(_[A]);return y}m[254]=m[254]=1,o.string2buf=function(_){var E,y,A,k,N,C=_.length,I=0;for(k=0;k<C;k++)(64512&(y=_.charCodeAt(k)))==55296&&k+1<C&&(64512&(A=_.charCodeAt(k+1)))==56320&&(y=65536+(y-55296<<10)+(A-56320),k++),I+=y<128?1:y<2048?2:y<65536?3:4;for(E=new c.Buf8(I),k=N=0;N<I;k++)(64512&(y=_.charCodeAt(k)))==55296&&k+1<C&&(64512&(A=_.charCodeAt(k+1)))==56320&&(y=65536+(y-55296<<10)+(A-56320),k++),y<128?E[N++]=y:(y<2048?E[N++]=192|y>>>6:(y<65536?E[N++]=224|y>>>12:(E[N++]=240|y>>>18,E[N++]=128|y>>>12&63),E[N++]=128|y>>>6&63),E[N++]=128|63&y);return E},o.buf2binstring=function(_){return x(_,_.length)},o.binstring2buf=function(_){for(var E=new c.Buf8(_.length),y=0,A=E.length;y<A;y++)E[y]=_.charCodeAt(y);return E},o.buf2string=function(_,E){var y,A,k,N,C=E||_.length,I=new Array(2*C);for(y=A=0;y<C;)if((k=_[y++])<128)I[A++]=k;else if(4<(N=m[k]))I[A++]=65533,y+=N-1;else{for(k&=N===2?31:N===3?15:7;1<N&&y<C;)k=k<<6|63&_[y++],N--;1<N?I[A++]=65533:k<65536?I[A++]=k:(k-=65536,I[A++]=55296|k>>10&1023,I[A++]=56320|1023&k)}return x(I,A)},o.utf8border=function(_,E){var y;for((E=E||_.length)>_.length&&(E=_.length),y=E-1;0<=y&&(192&_[y])==128;)y--;return y<0||y===0?E:y+m[_[y]]>E?y:E}},{"./common":41}],43:[function(n,a,o){a.exports=function(c,u,f,m){for(var b=65535&c|0,x=c>>>16&65535|0,_=0;f!==0;){for(f-=_=2e3<f?2e3:f;x=x+(b=b+u[m++]|0)|0,--_;);b%=65521,x%=65521}return b|x<<16|0}},{}],44:[function(n,a,o){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,a,o){var c=(function(){for(var u,f=[],m=0;m<256;m++){u=m;for(var b=0;b<8;b++)u=1&u?3988292384^u>>>1:u>>>1;f[m]=u}return f})();a.exports=function(u,f,m,b){var x=c,_=b+m;u^=-1;for(var E=b;E<_;E++)u=u>>>8^x[255&(u^f[E])];return-1^u}},{}],46:[function(n,a,o){var c,u=n("../utils/common"),f=n("./trees"),m=n("./adler32"),b=n("./crc32"),x=n("./messages"),_=0,E=4,y=0,A=-2,k=-1,N=4,C=2,I=8,z=9,V=286,H=30,G=19,M=2*V+1,j=15,O=3,F=258,q=F+O+1,D=42,L=113,R=1,ge=2,Q=3,X=4;function _e(S,ve){return S.msg=x[ve],ve}function re(S){return(S<<1)-(4<S?9:0)}function te(S){for(var ve=S.length;0<=--ve;)S[ve]=0}function W(S){var ve=S.state,me=ve.pending;me>S.avail_out&&(me=S.avail_out),me!==0&&(u.arraySet(S.output,ve.pending_buf,ve.pending_out,me,S.next_out),S.next_out+=me,ve.pending_out+=me,S.total_out+=me,S.avail_out-=me,ve.pending-=me,ve.pending===0&&(ve.pending_out=0))}function Z(S,ve){f._tr_flush_block(S,0<=S.block_start?S.block_start:-1,S.strstart-S.block_start,ve),S.block_start=S.strstart,W(S.strm)}function pe(S,ve){S.pending_buf[S.pending++]=ve}function ne(S,ve){S.pending_buf[S.pending++]=ve>>>8&255,S.pending_buf[S.pending++]=255&ve}function ie(S,ve){var me,U,B=S.max_chain_length,J=S.strstart,de=S.prev_length,we=S.nice_match,oe=S.strstart>S.w_size-q?S.strstart-(S.w_size-q):0,Ce=S.window,je=S.w_mask,Ne=S.prev,Pe=S.strstart+F,et=Ce[J+de-1],Je=Ce[J+de];S.prev_length>=S.good_match&&(B>>=2),we>S.lookahead&&(we=S.lookahead);do if(Ce[(me=ve)+de]===Je&&Ce[me+de-1]===et&&Ce[me]===Ce[J]&&Ce[++me]===Ce[J+1]){J+=2,me++;do;while(Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&Ce[++J]===Ce[++me]&&J<Pe);if(U=F-(Pe-J),J=Pe-F,de<U){if(S.match_start=ve,we<=(de=U))break;et=Ce[J+de-1],Je=Ce[J+de]}}while((ve=Ne[ve&je])>oe&&--B!=0);return de<=S.lookahead?de:S.lookahead}function Ae(S){var ve,me,U,B,J,de,we,oe,Ce,je,Ne=S.w_size;do{if(B=S.window_size-S.lookahead-S.strstart,S.strstart>=Ne+(Ne-q)){for(u.arraySet(S.window,S.window,Ne,Ne,0),S.match_start-=Ne,S.strstart-=Ne,S.block_start-=Ne,ve=me=S.hash_size;U=S.head[--ve],S.head[ve]=Ne<=U?U-Ne:0,--me;);for(ve=me=Ne;U=S.prev[--ve],S.prev[ve]=Ne<=U?U-Ne:0,--me;);B+=Ne}if(S.strm.avail_in===0)break;if(de=S.strm,we=S.window,oe=S.strstart+S.lookahead,Ce=B,je=void 0,je=de.avail_in,Ce<je&&(je=Ce),me=je===0?0:(de.avail_in-=je,u.arraySet(we,de.input,de.next_in,je,oe),de.state.wrap===1?de.adler=m(de.adler,we,je,oe):de.state.wrap===2&&(de.adler=b(de.adler,we,je,oe)),de.next_in+=je,de.total_in+=je,je),S.lookahead+=me,S.lookahead+S.insert>=O)for(J=S.strstart-S.insert,S.ins_h=S.window[J],S.ins_h=(S.ins_h<<S.hash_shift^S.window[J+1])&S.hash_mask;S.insert&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[J+O-1])&S.hash_mask,S.prev[J&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=J,J++,S.insert--,!(S.lookahead+S.insert<O)););}while(S.lookahead<q&&S.strm.avail_in!==0)}function ke(S,ve){for(var me,U;;){if(S.lookahead<q){if(Ae(S),S.lookahead<q&&ve===_)return R;if(S.lookahead===0)break}if(me=0,S.lookahead>=O&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+O-1])&S.hash_mask,me=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),me!==0&&S.strstart-me<=S.w_size-q&&(S.match_length=ie(S,me)),S.match_length>=O)if(U=f._tr_tally(S,S.strstart-S.match_start,S.match_length-O),S.lookahead-=S.match_length,S.match_length<=S.max_lazy_match&&S.lookahead>=O){for(S.match_length--;S.strstart++,S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+O-1])&S.hash_mask,me=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart,--S.match_length!=0;);S.strstart++}else S.strstart+=S.match_length,S.match_length=0,S.ins_h=S.window[S.strstart],S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+1])&S.hash_mask;else U=f._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++;if(U&&(Z(S,!1),S.strm.avail_out===0))return R}return S.insert=S.strstart<O-1?S.strstart:O-1,ve===E?(Z(S,!0),S.strm.avail_out===0?Q:X):S.last_lit&&(Z(S,!1),S.strm.avail_out===0)?R:ge}function ae(S,ve){for(var me,U,B;;){if(S.lookahead<q){if(Ae(S),S.lookahead<q&&ve===_)return R;if(S.lookahead===0)break}if(me=0,S.lookahead>=O&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+O-1])&S.hash_mask,me=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),S.prev_length=S.match_length,S.prev_match=S.match_start,S.match_length=O-1,me!==0&&S.prev_length<S.max_lazy_match&&S.strstart-me<=S.w_size-q&&(S.match_length=ie(S,me),S.match_length<=5&&(S.strategy===1||S.match_length===O&&4096<S.strstart-S.match_start)&&(S.match_length=O-1)),S.prev_length>=O&&S.match_length<=S.prev_length){for(B=S.strstart+S.lookahead-O,U=f._tr_tally(S,S.strstart-1-S.prev_match,S.prev_length-O),S.lookahead-=S.prev_length-1,S.prev_length-=2;++S.strstart<=B&&(S.ins_h=(S.ins_h<<S.hash_shift^S.window[S.strstart+O-1])&S.hash_mask,me=S.prev[S.strstart&S.w_mask]=S.head[S.ins_h],S.head[S.ins_h]=S.strstart),--S.prev_length!=0;);if(S.match_available=0,S.match_length=O-1,S.strstart++,U&&(Z(S,!1),S.strm.avail_out===0))return R}else if(S.match_available){if((U=f._tr_tally(S,0,S.window[S.strstart-1]))&&Z(S,!1),S.strstart++,S.lookahead--,S.strm.avail_out===0)return R}else S.match_available=1,S.strstart++,S.lookahead--}return S.match_available&&(U=f._tr_tally(S,0,S.window[S.strstart-1]),S.match_available=0),S.insert=S.strstart<O-1?S.strstart:O-1,ve===E?(Z(S,!0),S.strm.avail_out===0?Q:X):S.last_lit&&(Z(S,!1),S.strm.avail_out===0)?R:ge}function Re(S,ve,me,U,B){this.good_length=S,this.max_lazy=ve,this.nice_length=me,this.max_chain=U,this.func=B}function Te(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new u.Buf16(2*M),this.dyn_dtree=new u.Buf16(2*(2*H+1)),this.bl_tree=new u.Buf16(2*(2*G+1)),te(this.dyn_ltree),te(this.dyn_dtree),te(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new u.Buf16(j+1),this.heap=new u.Buf16(2*V+1),te(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new u.Buf16(2*V+1),te(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ie(S){var ve;return S&&S.state?(S.total_in=S.total_out=0,S.data_type=C,(ve=S.state).pending=0,ve.pending_out=0,ve.wrap<0&&(ve.wrap=-ve.wrap),ve.status=ve.wrap?D:L,S.adler=ve.wrap===2?0:1,ve.last_flush=_,f._tr_init(ve),y):_e(S,A)}function Be(S){var ve=Ie(S);return ve===y&&(function(me){me.window_size=2*me.w_size,te(me.head),me.max_lazy_match=c[me.level].max_lazy,me.good_match=c[me.level].good_length,me.nice_match=c[me.level].nice_length,me.max_chain_length=c[me.level].max_chain,me.strstart=0,me.block_start=0,me.lookahead=0,me.insert=0,me.match_length=me.prev_length=O-1,me.match_available=0,me.ins_h=0})(S.state),ve}function Ue(S,ve,me,U,B,J){if(!S)return A;var de=1;if(ve===k&&(ve=6),U<0?(de=0,U=-U):15<U&&(de=2,U-=16),B<1||z<B||me!==I||U<8||15<U||ve<0||9<ve||J<0||N<J)return _e(S,A);U===8&&(U=9);var we=new Te;return(S.state=we).strm=S,we.wrap=de,we.gzhead=null,we.w_bits=U,we.w_size=1<<we.w_bits,we.w_mask=we.w_size-1,we.hash_bits=B+7,we.hash_size=1<<we.hash_bits,we.hash_mask=we.hash_size-1,we.hash_shift=~~((we.hash_bits+O-1)/O),we.window=new u.Buf8(2*we.w_size),we.head=new u.Buf16(we.hash_size),we.prev=new u.Buf16(we.w_size),we.lit_bufsize=1<<B+6,we.pending_buf_size=4*we.lit_bufsize,we.pending_buf=new u.Buf8(we.pending_buf_size),we.d_buf=1*we.lit_bufsize,we.l_buf=3*we.lit_bufsize,we.level=ve,we.strategy=J,we.method=me,Be(S)}c=[new Re(0,0,0,0,function(S,ve){var me=65535;for(me>S.pending_buf_size-5&&(me=S.pending_buf_size-5);;){if(S.lookahead<=1){if(Ae(S),S.lookahead===0&&ve===_)return R;if(S.lookahead===0)break}S.strstart+=S.lookahead,S.lookahead=0;var U=S.block_start+me;if((S.strstart===0||S.strstart>=U)&&(S.lookahead=S.strstart-U,S.strstart=U,Z(S,!1),S.strm.avail_out===0)||S.strstart-S.block_start>=S.w_size-q&&(Z(S,!1),S.strm.avail_out===0))return R}return S.insert=0,ve===E?(Z(S,!0),S.strm.avail_out===0?Q:X):(S.strstart>S.block_start&&(Z(S,!1),S.strm.avail_out),R)}),new Re(4,4,8,4,ke),new Re(4,5,16,8,ke),new Re(4,6,32,32,ke),new Re(4,4,16,16,ae),new Re(8,16,32,32,ae),new Re(8,16,128,128,ae),new Re(8,32,128,256,ae),new Re(32,128,258,1024,ae),new Re(32,258,258,4096,ae)],o.deflateInit=function(S,ve){return Ue(S,ve,I,15,8,0)},o.deflateInit2=Ue,o.deflateReset=Be,o.deflateResetKeep=Ie,o.deflateSetHeader=function(S,ve){return S&&S.state?S.state.wrap!==2?A:(S.state.gzhead=ve,y):A},o.deflate=function(S,ve){var me,U,B,J;if(!S||!S.state||5<ve||ve<0)return S?_e(S,A):A;if(U=S.state,!S.output||!S.input&&S.avail_in!==0||U.status===666&&ve!==E)return _e(S,S.avail_out===0?-5:A);if(U.strm=S,me=U.last_flush,U.last_flush=ve,U.status===D)if(U.wrap===2)S.adler=0,pe(U,31),pe(U,139),pe(U,8),U.gzhead?(pe(U,(U.gzhead.text?1:0)+(U.gzhead.hcrc?2:0)+(U.gzhead.extra?4:0)+(U.gzhead.name?8:0)+(U.gzhead.comment?16:0)),pe(U,255&U.gzhead.time),pe(U,U.gzhead.time>>8&255),pe(U,U.gzhead.time>>16&255),pe(U,U.gzhead.time>>24&255),pe(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),pe(U,255&U.gzhead.os),U.gzhead.extra&&U.gzhead.extra.length&&(pe(U,255&U.gzhead.extra.length),pe(U,U.gzhead.extra.length>>8&255)),U.gzhead.hcrc&&(S.adler=b(S.adler,U.pending_buf,U.pending,0)),U.gzindex=0,U.status=69):(pe(U,0),pe(U,0),pe(U,0),pe(U,0),pe(U,0),pe(U,U.level===9?2:2<=U.strategy||U.level<2?4:0),pe(U,3),U.status=L);else{var de=I+(U.w_bits-8<<4)<<8;de|=(2<=U.strategy||U.level<2?0:U.level<6?1:U.level===6?2:3)<<6,U.strstart!==0&&(de|=32),de+=31-de%31,U.status=L,ne(U,de),U.strstart!==0&&(ne(U,S.adler>>>16),ne(U,65535&S.adler)),S.adler=1}if(U.status===69)if(U.gzhead.extra){for(B=U.pending;U.gzindex<(65535&U.gzhead.extra.length)&&(U.pending!==U.pending_buf_size||(U.gzhead.hcrc&&U.pending>B&&(S.adler=b(S.adler,U.pending_buf,U.pending-B,B)),W(S),B=U.pending,U.pending!==U.pending_buf_size));)pe(U,255&U.gzhead.extra[U.gzindex]),U.gzindex++;U.gzhead.hcrc&&U.pending>B&&(S.adler=b(S.adler,U.pending_buf,U.pending-B,B)),U.gzindex===U.gzhead.extra.length&&(U.gzindex=0,U.status=73)}else U.status=73;if(U.status===73)if(U.gzhead.name){B=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>B&&(S.adler=b(S.adler,U.pending_buf,U.pending-B,B)),W(S),B=U.pending,U.pending===U.pending_buf_size)){J=1;break}J=U.gzindex<U.gzhead.name.length?255&U.gzhead.name.charCodeAt(U.gzindex++):0,pe(U,J)}while(J!==0);U.gzhead.hcrc&&U.pending>B&&(S.adler=b(S.adler,U.pending_buf,U.pending-B,B)),J===0&&(U.gzindex=0,U.status=91)}else U.status=91;if(U.status===91)if(U.gzhead.comment){B=U.pending;do{if(U.pending===U.pending_buf_size&&(U.gzhead.hcrc&&U.pending>B&&(S.adler=b(S.adler,U.pending_buf,U.pending-B,B)),W(S),B=U.pending,U.pending===U.pending_buf_size)){J=1;break}J=U.gzindex<U.gzhead.comment.length?255&U.gzhead.comment.charCodeAt(U.gzindex++):0,pe(U,J)}while(J!==0);U.gzhead.hcrc&&U.pending>B&&(S.adler=b(S.adler,U.pending_buf,U.pending-B,B)),J===0&&(U.status=103)}else U.status=103;if(U.status===103&&(U.gzhead.hcrc?(U.pending+2>U.pending_buf_size&&W(S),U.pending+2<=U.pending_buf_size&&(pe(U,255&S.adler),pe(U,S.adler>>8&255),S.adler=0,U.status=L)):U.status=L),U.pending!==0){if(W(S),S.avail_out===0)return U.last_flush=-1,y}else if(S.avail_in===0&&re(ve)<=re(me)&&ve!==E)return _e(S,-5);if(U.status===666&&S.avail_in!==0)return _e(S,-5);if(S.avail_in!==0||U.lookahead!==0||ve!==_&&U.status!==666){var we=U.strategy===2?(function(oe,Ce){for(var je;;){if(oe.lookahead===0&&(Ae(oe),oe.lookahead===0)){if(Ce===_)return R;break}if(oe.match_length=0,je=f._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++,je&&(Z(oe,!1),oe.strm.avail_out===0))return R}return oe.insert=0,Ce===E?(Z(oe,!0),oe.strm.avail_out===0?Q:X):oe.last_lit&&(Z(oe,!1),oe.strm.avail_out===0)?R:ge})(U,ve):U.strategy===3?(function(oe,Ce){for(var je,Ne,Pe,et,Je=oe.window;;){if(oe.lookahead<=F){if(Ae(oe),oe.lookahead<=F&&Ce===_)return R;if(oe.lookahead===0)break}if(oe.match_length=0,oe.lookahead>=O&&0<oe.strstart&&(Ne=Je[Pe=oe.strstart-1])===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]){et=oe.strstart+F;do;while(Ne===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]&&Ne===Je[++Pe]&&Pe<et);oe.match_length=F-(et-Pe),oe.match_length>oe.lookahead&&(oe.match_length=oe.lookahead)}if(oe.match_length>=O?(je=f._tr_tally(oe,1,oe.match_length-O),oe.lookahead-=oe.match_length,oe.strstart+=oe.match_length,oe.match_length=0):(je=f._tr_tally(oe,0,oe.window[oe.strstart]),oe.lookahead--,oe.strstart++),je&&(Z(oe,!1),oe.strm.avail_out===0))return R}return oe.insert=0,Ce===E?(Z(oe,!0),oe.strm.avail_out===0?Q:X):oe.last_lit&&(Z(oe,!1),oe.strm.avail_out===0)?R:ge})(U,ve):c[U.level].func(U,ve);if(we!==Q&&we!==X||(U.status=666),we===R||we===Q)return S.avail_out===0&&(U.last_flush=-1),y;if(we===ge&&(ve===1?f._tr_align(U):ve!==5&&(f._tr_stored_block(U,0,0,!1),ve===3&&(te(U.head),U.lookahead===0&&(U.strstart=0,U.block_start=0,U.insert=0))),W(S),S.avail_out===0))return U.last_flush=-1,y}return ve!==E?y:U.wrap<=0?1:(U.wrap===2?(pe(U,255&S.adler),pe(U,S.adler>>8&255),pe(U,S.adler>>16&255),pe(U,S.adler>>24&255),pe(U,255&S.total_in),pe(U,S.total_in>>8&255),pe(U,S.total_in>>16&255),pe(U,S.total_in>>24&255)):(ne(U,S.adler>>>16),ne(U,65535&S.adler)),W(S),0<U.wrap&&(U.wrap=-U.wrap),U.pending!==0?y:1)},o.deflateEnd=function(S){var ve;return S&&S.state?(ve=S.state.status)!==D&&ve!==69&&ve!==73&&ve!==91&&ve!==103&&ve!==L&&ve!==666?_e(S,A):(S.state=null,ve===L?_e(S,-3):y):A},o.deflateSetDictionary=function(S,ve){var me,U,B,J,de,we,oe,Ce,je=ve.length;if(!S||!S.state||(J=(me=S.state).wrap)===2||J===1&&me.status!==D||me.lookahead)return A;for(J===1&&(S.adler=m(S.adler,ve,je,0)),me.wrap=0,je>=me.w_size&&(J===0&&(te(me.head),me.strstart=0,me.block_start=0,me.insert=0),Ce=new u.Buf8(me.w_size),u.arraySet(Ce,ve,je-me.w_size,me.w_size,0),ve=Ce,je=me.w_size),de=S.avail_in,we=S.next_in,oe=S.input,S.avail_in=je,S.next_in=0,S.input=ve,Ae(me);me.lookahead>=O;){for(U=me.strstart,B=me.lookahead-(O-1);me.ins_h=(me.ins_h<<me.hash_shift^me.window[U+O-1])&me.hash_mask,me.prev[U&me.w_mask]=me.head[me.ins_h],me.head[me.ins_h]=U,U++,--B;);me.strstart=U,me.lookahead=O-1,Ae(me)}return me.strstart+=me.lookahead,me.block_start=me.strstart,me.insert=me.lookahead,me.lookahead=0,me.match_length=me.prev_length=O-1,me.match_available=0,S.next_in=we,S.input=oe,S.avail_in=de,me.wrap=J,y},o.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,a,o){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,a,o){a.exports=function(c,u){var f,m,b,x,_,E,y,A,k,N,C,I,z,V,H,G,M,j,O,F,q,D,L,R,ge;f=c.state,m=c.next_in,R=c.input,b=m+(c.avail_in-5),x=c.next_out,ge=c.output,_=x-(u-c.avail_out),E=x+(c.avail_out-257),y=f.dmax,A=f.wsize,k=f.whave,N=f.wnext,C=f.window,I=f.hold,z=f.bits,V=f.lencode,H=f.distcode,G=(1<<f.lenbits)-1,M=(1<<f.distbits)-1;e:do{z<15&&(I+=R[m++]<<z,z+=8,I+=R[m++]<<z,z+=8),j=V[I&G];t:for(;;){if(I>>>=O=j>>>24,z-=O,(O=j>>>16&255)===0)ge[x++]=65535&j;else{if(!(16&O)){if((64&O)==0){j=V[(65535&j)+(I&(1<<O)-1)];continue t}if(32&O){f.mode=12;break e}c.msg="invalid literal/length code",f.mode=30;break e}F=65535&j,(O&=15)&&(z<O&&(I+=R[m++]<<z,z+=8),F+=I&(1<<O)-1,I>>>=O,z-=O),z<15&&(I+=R[m++]<<z,z+=8,I+=R[m++]<<z,z+=8),j=H[I&M];n:for(;;){if(I>>>=O=j>>>24,z-=O,!(16&(O=j>>>16&255))){if((64&O)==0){j=H[(65535&j)+(I&(1<<O)-1)];continue n}c.msg="invalid distance code",f.mode=30;break e}if(q=65535&j,z<(O&=15)&&(I+=R[m++]<<z,(z+=8)<O&&(I+=R[m++]<<z,z+=8)),y<(q+=I&(1<<O)-1)){c.msg="invalid distance too far back",f.mode=30;break e}if(I>>>=O,z-=O,(O=x-_)<q){if(k<(O=q-O)&&f.sane){c.msg="invalid distance too far back",f.mode=30;break e}if(L=C,(D=0)===N){if(D+=A-O,O<F){for(F-=O;ge[x++]=C[D++],--O;);D=x-q,L=ge}}else if(N<O){if(D+=A+N-O,(O-=N)<F){for(F-=O;ge[x++]=C[D++],--O;);if(D=0,N<F){for(F-=O=N;ge[x++]=C[D++],--O;);D=x-q,L=ge}}}else if(D+=N-O,O<F){for(F-=O;ge[x++]=C[D++],--O;);D=x-q,L=ge}for(;2<F;)ge[x++]=L[D++],ge[x++]=L[D++],ge[x++]=L[D++],F-=3;F&&(ge[x++]=L[D++],1<F&&(ge[x++]=L[D++]))}else{for(D=x-q;ge[x++]=ge[D++],ge[x++]=ge[D++],ge[x++]=ge[D++],2<(F-=3););F&&(ge[x++]=ge[D++],1<F&&(ge[x++]=ge[D++]))}break}}break}}while(m<b&&x<E);m-=F=z>>3,I&=(1<<(z-=F<<3))-1,c.next_in=m,c.next_out=x,c.avail_in=m<b?b-m+5:5-(m-b),c.avail_out=x<E?E-x+257:257-(x-E),f.hold=I,f.bits=z}},{}],49:[function(n,a,o){var c=n("../utils/common"),u=n("./adler32"),f=n("./crc32"),m=n("./inffast"),b=n("./inftrees"),x=1,_=2,E=0,y=-2,A=1,k=852,N=592;function C(D){return(D>>>24&255)+(D>>>8&65280)+((65280&D)<<8)+((255&D)<<24)}function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z(D){var L;return D&&D.state?(L=D.state,D.total_in=D.total_out=L.total=0,D.msg="",L.wrap&&(D.adler=1&L.wrap),L.mode=A,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new c.Buf32(k),L.distcode=L.distdyn=new c.Buf32(N),L.sane=1,L.back=-1,E):y}function V(D){var L;return D&&D.state?((L=D.state).wsize=0,L.whave=0,L.wnext=0,z(D)):y}function H(D,L){var R,ge;return D&&D.state?(ge=D.state,L<0?(R=0,L=-L):(R=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?y:(ge.window!==null&&ge.wbits!==L&&(ge.window=null),ge.wrap=R,ge.wbits=L,V(D))):y}function G(D,L){var R,ge;return D?(ge=new I,(D.state=ge).window=null,(R=H(D,L))!==E&&(D.state=null),R):y}var M,j,O=!0;function F(D){if(O){var L;for(M=new c.Buf32(512),j=new c.Buf32(32),L=0;L<144;)D.lens[L++]=8;for(;L<256;)D.lens[L++]=9;for(;L<280;)D.lens[L++]=7;for(;L<288;)D.lens[L++]=8;for(b(x,D.lens,0,288,M,0,D.work,{bits:9}),L=0;L<32;)D.lens[L++]=5;b(_,D.lens,0,32,j,0,D.work,{bits:5}),O=!1}D.lencode=M,D.lenbits=9,D.distcode=j,D.distbits=5}function q(D,L,R,ge){var Q,X=D.state;return X.window===null&&(X.wsize=1<<X.wbits,X.wnext=0,X.whave=0,X.window=new c.Buf8(X.wsize)),ge>=X.wsize?(c.arraySet(X.window,L,R-X.wsize,X.wsize,0),X.wnext=0,X.whave=X.wsize):(ge<(Q=X.wsize-X.wnext)&&(Q=ge),c.arraySet(X.window,L,R-ge,Q,X.wnext),(ge-=Q)?(c.arraySet(X.window,L,R-ge,ge,0),X.wnext=ge,X.whave=X.wsize):(X.wnext+=Q,X.wnext===X.wsize&&(X.wnext=0),X.whave<X.wsize&&(X.whave+=Q))),0}o.inflateReset=V,o.inflateReset2=H,o.inflateResetKeep=z,o.inflateInit=function(D){return G(D,15)},o.inflateInit2=G,o.inflate=function(D,L){var R,ge,Q,X,_e,re,te,W,Z,pe,ne,ie,Ae,ke,ae,Re,Te,Ie,Be,Ue,S,ve,me,U,B=0,J=new c.Buf8(4),de=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!D||!D.state||!D.output||!D.input&&D.avail_in!==0)return y;(R=D.state).mode===12&&(R.mode=13),_e=D.next_out,Q=D.output,te=D.avail_out,X=D.next_in,ge=D.input,re=D.avail_in,W=R.hold,Z=R.bits,pe=re,ne=te,ve=E;e:for(;;)switch(R.mode){case A:if(R.wrap===0){R.mode=13;break}for(;Z<16;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(2&R.wrap&&W===35615){J[R.check=0]=255&W,J[1]=W>>>8&255,R.check=f(R.check,J,2,0),Z=W=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&W)<<8)+(W>>8))%31){D.msg="incorrect header check",R.mode=30;break}if((15&W)!=8){D.msg="unknown compression method",R.mode=30;break}if(Z-=4,S=8+(15&(W>>>=4)),R.wbits===0)R.wbits=S;else if(S>R.wbits){D.msg="invalid window size",R.mode=30;break}R.dmax=1<<S,D.adler=R.check=1,R.mode=512&W?10:12,Z=W=0;break;case 2:for(;Z<16;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(R.flags=W,(255&R.flags)!=8){D.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){D.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=W>>8&1),512&R.flags&&(J[0]=255&W,J[1]=W>>>8&255,R.check=f(R.check,J,2,0)),Z=W=0,R.mode=3;case 3:for(;Z<32;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}R.head&&(R.head.time=W),512&R.flags&&(J[0]=255&W,J[1]=W>>>8&255,J[2]=W>>>16&255,J[3]=W>>>24&255,R.check=f(R.check,J,4,0)),Z=W=0,R.mode=4;case 4:for(;Z<16;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}R.head&&(R.head.xflags=255&W,R.head.os=W>>8),512&R.flags&&(J[0]=255&W,J[1]=W>>>8&255,R.check=f(R.check,J,2,0)),Z=W=0,R.mode=5;case 5:if(1024&R.flags){for(;Z<16;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}R.length=W,R.head&&(R.head.extra_len=W),512&R.flags&&(J[0]=255&W,J[1]=W>>>8&255,R.check=f(R.check,J,2,0)),Z=W=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(re<(ie=R.length)&&(ie=re),ie&&(R.head&&(S=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),c.arraySet(R.head.extra,ge,X,ie,S)),512&R.flags&&(R.check=f(R.check,ge,ie,X)),re-=ie,X+=ie,R.length-=ie),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(re===0)break e;for(ie=0;S=ge[X+ie++],R.head&&S&&R.length<65536&&(R.head.name+=String.fromCharCode(S)),S&&ie<re;);if(512&R.flags&&(R.check=f(R.check,ge,ie,X)),re-=ie,X+=ie,S)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(re===0)break e;for(ie=0;S=ge[X+ie++],R.head&&S&&R.length<65536&&(R.head.comment+=String.fromCharCode(S)),S&&ie<re;);if(512&R.flags&&(R.check=f(R.check,ge,ie,X)),re-=ie,X+=ie,S)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;Z<16;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(W!==(65535&R.check)){D.msg="header crc mismatch",R.mode=30;break}Z=W=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),D.adler=R.check=0,R.mode=12;break;case 10:for(;Z<32;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}D.adler=R.check=C(W),Z=W=0,R.mode=11;case 11:if(R.havedict===0)return D.next_out=_e,D.avail_out=te,D.next_in=X,D.avail_in=re,R.hold=W,R.bits=Z,2;D.adler=R.check=1,R.mode=12;case 12:if(L===5||L===6)break e;case 13:if(R.last){W>>>=7&Z,Z-=7&Z,R.mode=27;break}for(;Z<3;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}switch(R.last=1&W,Z-=1,3&(W>>>=1)){case 0:R.mode=14;break;case 1:if(F(R),R.mode=20,L!==6)break;W>>>=2,Z-=2;break e;case 2:R.mode=17;break;case 3:D.msg="invalid block type",R.mode=30}W>>>=2,Z-=2;break;case 14:for(W>>>=7&Z,Z-=7&Z;Z<32;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if((65535&W)!=(W>>>16^65535)){D.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&W,Z=W=0,R.mode=15,L===6)break e;case 15:R.mode=16;case 16:if(ie=R.length){if(re<ie&&(ie=re),te<ie&&(ie=te),ie===0)break e;c.arraySet(Q,ge,X,ie,_e),re-=ie,X+=ie,te-=ie,_e+=ie,R.length-=ie;break}R.mode=12;break;case 17:for(;Z<14;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(R.nlen=257+(31&W),W>>>=5,Z-=5,R.ndist=1+(31&W),W>>>=5,Z-=5,R.ncode=4+(15&W),W>>>=4,Z-=4,286<R.nlen||30<R.ndist){D.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;Z<3;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}R.lens[de[R.have++]]=7&W,W>>>=3,Z-=3}for(;R.have<19;)R.lens[de[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,me={bits:R.lenbits},ve=b(0,R.lens,0,19,R.lencode,0,R.work,me),R.lenbits=me.bits,ve){D.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;Re=(B=R.lencode[W&(1<<R.lenbits)-1])>>>16&255,Te=65535&B,!((ae=B>>>24)<=Z);){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(Te<16)W>>>=ae,Z-=ae,R.lens[R.have++]=Te;else{if(Te===16){for(U=ae+2;Z<U;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(W>>>=ae,Z-=ae,R.have===0){D.msg="invalid bit length repeat",R.mode=30;break}S=R.lens[R.have-1],ie=3+(3&W),W>>>=2,Z-=2}else if(Te===17){for(U=ae+3;Z<U;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}Z-=ae,S=0,ie=3+(7&(W>>>=ae)),W>>>=3,Z-=3}else{for(U=ae+7;Z<U;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}Z-=ae,S=0,ie=11+(127&(W>>>=ae)),W>>>=7,Z-=7}if(R.have+ie>R.nlen+R.ndist){D.msg="invalid bit length repeat",R.mode=30;break}for(;ie--;)R.lens[R.have++]=S}}if(R.mode===30)break;if(R.lens[256]===0){D.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,me={bits:R.lenbits},ve=b(x,R.lens,0,R.nlen,R.lencode,0,R.work,me),R.lenbits=me.bits,ve){D.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,me={bits:R.distbits},ve=b(_,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,me),R.distbits=me.bits,ve){D.msg="invalid distances set",R.mode=30;break}if(R.mode=20,L===6)break e;case 20:R.mode=21;case 21:if(6<=re&&258<=te){D.next_out=_e,D.avail_out=te,D.next_in=X,D.avail_in=re,R.hold=W,R.bits=Z,m(D,ne),_e=D.next_out,Q=D.output,te=D.avail_out,X=D.next_in,ge=D.input,re=D.avail_in,W=R.hold,Z=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;Re=(B=R.lencode[W&(1<<R.lenbits)-1])>>>16&255,Te=65535&B,!((ae=B>>>24)<=Z);){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(Re&&(240&Re)==0){for(Ie=ae,Be=Re,Ue=Te;Re=(B=R.lencode[Ue+((W&(1<<Ie+Be)-1)>>Ie)])>>>16&255,Te=65535&B,!(Ie+(ae=B>>>24)<=Z);){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}W>>>=Ie,Z-=Ie,R.back+=Ie}if(W>>>=ae,Z-=ae,R.back+=ae,R.length=Te,Re===0){R.mode=26;break}if(32&Re){R.back=-1,R.mode=12;break}if(64&Re){D.msg="invalid literal/length code",R.mode=30;break}R.extra=15&Re,R.mode=22;case 22:if(R.extra){for(U=R.extra;Z<U;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}R.length+=W&(1<<R.extra)-1,W>>>=R.extra,Z-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;Re=(B=R.distcode[W&(1<<R.distbits)-1])>>>16&255,Te=65535&B,!((ae=B>>>24)<=Z);){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if((240&Re)==0){for(Ie=ae,Be=Re,Ue=Te;Re=(B=R.distcode[Ue+((W&(1<<Ie+Be)-1)>>Ie)])>>>16&255,Te=65535&B,!(Ie+(ae=B>>>24)<=Z);){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}W>>>=Ie,Z-=Ie,R.back+=Ie}if(W>>>=ae,Z-=ae,R.back+=ae,64&Re){D.msg="invalid distance code",R.mode=30;break}R.offset=Te,R.extra=15&Re,R.mode=24;case 24:if(R.extra){for(U=R.extra;Z<U;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}R.offset+=W&(1<<R.extra)-1,W>>>=R.extra,Z-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){D.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(te===0)break e;if(ie=ne-te,R.offset>ie){if((ie=R.offset-ie)>R.whave&&R.sane){D.msg="invalid distance too far back",R.mode=30;break}Ae=ie>R.wnext?(ie-=R.wnext,R.wsize-ie):R.wnext-ie,ie>R.length&&(ie=R.length),ke=R.window}else ke=Q,Ae=_e-R.offset,ie=R.length;for(te<ie&&(ie=te),te-=ie,R.length-=ie;Q[_e++]=ke[Ae++],--ie;);R.length===0&&(R.mode=21);break;case 26:if(te===0)break e;Q[_e++]=R.length,te--,R.mode=21;break;case 27:if(R.wrap){for(;Z<32;){if(re===0)break e;re--,W|=ge[X++]<<Z,Z+=8}if(ne-=te,D.total_out+=ne,R.total+=ne,ne&&(D.adler=R.check=R.flags?f(R.check,Q,ne,_e-ne):u(R.check,Q,ne,_e-ne)),ne=te,(R.flags?W:C(W))!==R.check){D.msg="incorrect data check",R.mode=30;break}Z=W=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;Z<32;){if(re===0)break e;re--,W+=ge[X++]<<Z,Z+=8}if(W!==(4294967295&R.total)){D.msg="incorrect length check",R.mode=30;break}Z=W=0}R.mode=29;case 29:ve=1;break e;case 30:ve=-3;break e;case 31:return-4;case 32:default:return y}return D.next_out=_e,D.avail_out=te,D.next_in=X,D.avail_in=re,R.hold=W,R.bits=Z,(R.wsize||ne!==D.avail_out&&R.mode<30&&(R.mode<27||L!==4))&&q(D,D.output,D.next_out,ne-D.avail_out)?(R.mode=31,-4):(pe-=D.avail_in,ne-=D.avail_out,D.total_in+=pe,D.total_out+=ne,R.total+=ne,R.wrap&&ne&&(D.adler=R.check=R.flags?f(R.check,Q,ne,D.next_out-ne):u(R.check,Q,ne,D.next_out-ne)),D.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(pe==0&&ne===0||L===4)&&ve===E&&(ve=-5),ve)},o.inflateEnd=function(D){if(!D||!D.state)return y;var L=D.state;return L.window&&(L.window=null),D.state=null,E},o.inflateGetHeader=function(D,L){var R;return D&&D.state?(2&(R=D.state).wrap)==0?y:((R.head=L).done=!1,E):y},o.inflateSetDictionary=function(D,L){var R,ge=L.length;return D&&D.state?(R=D.state).wrap!==0&&R.mode!==11?y:R.mode===11&&u(1,L,ge,0)!==R.check?-3:q(D,L,ge,ge)?(R.mode=31,-4):(R.havedict=1,E):y},o.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,a,o){var c=n("../utils/common"),u=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],f=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(x,_,E,y,A,k,N,C){var I,z,V,H,G,M,j,O,F,q=C.bits,D=0,L=0,R=0,ge=0,Q=0,X=0,_e=0,re=0,te=0,W=0,Z=null,pe=0,ne=new c.Buf16(16),ie=new c.Buf16(16),Ae=null,ke=0;for(D=0;D<=15;D++)ne[D]=0;for(L=0;L<y;L++)ne[_[E+L]]++;for(Q=q,ge=15;1<=ge&&ne[ge]===0;ge--);if(ge<Q&&(Q=ge),ge===0)return A[k++]=20971520,A[k++]=20971520,C.bits=1,0;for(R=1;R<ge&&ne[R]===0;R++);for(Q<R&&(Q=R),D=re=1;D<=15;D++)if(re<<=1,(re-=ne[D])<0)return-1;if(0<re&&(x===0||ge!==1))return-1;for(ie[1]=0,D=1;D<15;D++)ie[D+1]=ie[D]+ne[D];for(L=0;L<y;L++)_[E+L]!==0&&(N[ie[_[E+L]]++]=L);if(M=x===0?(Z=Ae=N,19):x===1?(Z=u,pe-=257,Ae=f,ke-=257,256):(Z=m,Ae=b,-1),D=R,G=k,_e=L=W=0,V=-1,H=(te=1<<(X=Q))-1,x===1&&852<te||x===2&&592<te)return 1;for(;;){for(j=D-_e,F=N[L]<M?(O=0,N[L]):N[L]>M?(O=Ae[ke+N[L]],Z[pe+N[L]]):(O=96,0),I=1<<D-_e,R=z=1<<X;A[G+(W>>_e)+(z-=I)]=j<<24|O<<16|F|0,z!==0;);for(I=1<<D-1;W&I;)I>>=1;if(I!==0?(W&=I-1,W+=I):W=0,L++,--ne[D]==0){if(D===ge)break;D=_[E+N[L]]}if(Q<D&&(W&H)!==V){for(_e===0&&(_e=Q),G+=R,re=1<<(X=D-_e);X+_e<ge&&!((re-=ne[X+_e])<=0);)X++,re<<=1;if(te+=1<<X,x===1&&852<te||x===2&&592<te)return 1;A[V=W&H]=Q<<24|X<<16|G-k|0}}return W!==0&&(A[G+W]=D-_e<<24|64<<16|0),C.bits=Q,0}},{"../utils/common":41}],51:[function(n,a,o){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,a,o){var c=n("../utils/common"),u=0,f=1;function m(B){for(var J=B.length;0<=--J;)B[J]=0}var b=0,x=29,_=256,E=_+1+x,y=30,A=19,k=2*E+1,N=15,C=16,I=7,z=256,V=16,H=17,G=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],q=new Array(2*(E+2));m(q);var D=new Array(2*y);m(D);var L=new Array(512);m(L);var R=new Array(256);m(R);var ge=new Array(x);m(ge);var Q,X,_e,re=new Array(y);function te(B,J,de,we,oe){this.static_tree=B,this.extra_bits=J,this.extra_base=de,this.elems=we,this.max_length=oe,this.has_stree=B&&B.length}function W(B,J){this.dyn_tree=B,this.max_code=0,this.stat_desc=J}function Z(B){return B<256?L[B]:L[256+(B>>>7)]}function pe(B,J){B.pending_buf[B.pending++]=255&J,B.pending_buf[B.pending++]=J>>>8&255}function ne(B,J,de){B.bi_valid>C-de?(B.bi_buf|=J<<B.bi_valid&65535,pe(B,B.bi_buf),B.bi_buf=J>>C-B.bi_valid,B.bi_valid+=de-C):(B.bi_buf|=J<<B.bi_valid&65535,B.bi_valid+=de)}function ie(B,J,de){ne(B,de[2*J],de[2*J+1])}function Ae(B,J){for(var de=0;de|=1&B,B>>>=1,de<<=1,0<--J;);return de>>>1}function ke(B,J,de){var we,oe,Ce=new Array(N+1),je=0;for(we=1;we<=N;we++)Ce[we]=je=je+de[we-1]<<1;for(oe=0;oe<=J;oe++){var Ne=B[2*oe+1];Ne!==0&&(B[2*oe]=Ae(Ce[Ne]++,Ne))}}function ae(B){var J;for(J=0;J<E;J++)B.dyn_ltree[2*J]=0;for(J=0;J<y;J++)B.dyn_dtree[2*J]=0;for(J=0;J<A;J++)B.bl_tree[2*J]=0;B.dyn_ltree[2*z]=1,B.opt_len=B.static_len=0,B.last_lit=B.matches=0}function Re(B){8<B.bi_valid?pe(B,B.bi_buf):0<B.bi_valid&&(B.pending_buf[B.pending++]=B.bi_buf),B.bi_buf=0,B.bi_valid=0}function Te(B,J,de,we){var oe=2*J,Ce=2*de;return B[oe]<B[Ce]||B[oe]===B[Ce]&&we[J]<=we[de]}function Ie(B,J,de){for(var we=B.heap[de],oe=de<<1;oe<=B.heap_len&&(oe<B.heap_len&&Te(J,B.heap[oe+1],B.heap[oe],B.depth)&&oe++,!Te(J,we,B.heap[oe],B.depth));)B.heap[de]=B.heap[oe],de=oe,oe<<=1;B.heap[de]=we}function Be(B,J,de){var we,oe,Ce,je,Ne=0;if(B.last_lit!==0)for(;we=B.pending_buf[B.d_buf+2*Ne]<<8|B.pending_buf[B.d_buf+2*Ne+1],oe=B.pending_buf[B.l_buf+Ne],Ne++,we===0?ie(B,oe,J):(ie(B,(Ce=R[oe])+_+1,J),(je=M[Ce])!==0&&ne(B,oe-=ge[Ce],je),ie(B,Ce=Z(--we),de),(je=j[Ce])!==0&&ne(B,we-=re[Ce],je)),Ne<B.last_lit;);ie(B,z,J)}function Ue(B,J){var de,we,oe,Ce=J.dyn_tree,je=J.stat_desc.static_tree,Ne=J.stat_desc.has_stree,Pe=J.stat_desc.elems,et=-1;for(B.heap_len=0,B.heap_max=k,de=0;de<Pe;de++)Ce[2*de]!==0?(B.heap[++B.heap_len]=et=de,B.depth[de]=0):Ce[2*de+1]=0;for(;B.heap_len<2;)Ce[2*(oe=B.heap[++B.heap_len]=et<2?++et:0)]=1,B.depth[oe]=0,B.opt_len--,Ne&&(B.static_len-=je[2*oe+1]);for(J.max_code=et,de=B.heap_len>>1;1<=de;de--)Ie(B,Ce,de);for(oe=Pe;de=B.heap[1],B.heap[1]=B.heap[B.heap_len--],Ie(B,Ce,1),we=B.heap[1],B.heap[--B.heap_max]=de,B.heap[--B.heap_max]=we,Ce[2*oe]=Ce[2*de]+Ce[2*we],B.depth[oe]=(B.depth[de]>=B.depth[we]?B.depth[de]:B.depth[we])+1,Ce[2*de+1]=Ce[2*we+1]=oe,B.heap[1]=oe++,Ie(B,Ce,1),2<=B.heap_len;);B.heap[--B.heap_max]=B.heap[1],(function(Je,sn){var Kn,Vt,ds,ot,nt,rn,ht=sn.dyn_tree,nr=sn.max_code,sr=sn.stat_desc.static_tree,Ir=sn.stat_desc.has_stree,kn=sn.stat_desc.extra_bits,Jn=sn.stat_desc.extra_base,xt=sn.stat_desc.max_length,un=0;for(ot=0;ot<=N;ot++)Je.bl_count[ot]=0;for(ht[2*Je.heap[Je.heap_max]+1]=0,Kn=Je.heap_max+1;Kn<k;Kn++)xt<(ot=ht[2*ht[2*(Vt=Je.heap[Kn])+1]+1]+1)&&(ot=xt,un++),ht[2*Vt+1]=ot,nr<Vt||(Je.bl_count[ot]++,nt=0,Jn<=Vt&&(nt=kn[Vt-Jn]),rn=ht[2*Vt],Je.opt_len+=rn*(ot+nt),Ir&&(Je.static_len+=rn*(sr[2*Vt+1]+nt)));if(un!==0){do{for(ot=xt-1;Je.bl_count[ot]===0;)ot--;Je.bl_count[ot]--,Je.bl_count[ot+1]+=2,Je.bl_count[xt]--,un-=2}while(0<un);for(ot=xt;ot!==0;ot--)for(Vt=Je.bl_count[ot];Vt!==0;)nr<(ds=Je.heap[--Kn])||(ht[2*ds+1]!==ot&&(Je.opt_len+=(ot-ht[2*ds+1])*ht[2*ds],ht[2*ds+1]=ot),Vt--)}})(B,J),ke(Ce,et,B.bl_count)}function S(B,J,de){var we,oe,Ce=-1,je=J[1],Ne=0,Pe=7,et=4;for(je===0&&(Pe=138,et=3),J[2*(de+1)+1]=65535,we=0;we<=de;we++)oe=je,je=J[2*(we+1)+1],++Ne<Pe&&oe===je||(Ne<et?B.bl_tree[2*oe]+=Ne:oe!==0?(oe!==Ce&&B.bl_tree[2*oe]++,B.bl_tree[2*V]++):Ne<=10?B.bl_tree[2*H]++:B.bl_tree[2*G]++,Ce=oe,et=(Ne=0)===je?(Pe=138,3):oe===je?(Pe=6,3):(Pe=7,4))}function ve(B,J,de){var we,oe,Ce=-1,je=J[1],Ne=0,Pe=7,et=4;for(je===0&&(Pe=138,et=3),we=0;we<=de;we++)if(oe=je,je=J[2*(we+1)+1],!(++Ne<Pe&&oe===je)){if(Ne<et)for(;ie(B,oe,B.bl_tree),--Ne!=0;);else oe!==0?(oe!==Ce&&(ie(B,oe,B.bl_tree),Ne--),ie(B,V,B.bl_tree),ne(B,Ne-3,2)):Ne<=10?(ie(B,H,B.bl_tree),ne(B,Ne-3,3)):(ie(B,G,B.bl_tree),ne(B,Ne-11,7));Ce=oe,et=(Ne=0)===je?(Pe=138,3):oe===je?(Pe=6,3):(Pe=7,4)}}m(re);var me=!1;function U(B,J,de,we){ne(B,(b<<1)+(we?1:0),3),(function(oe,Ce,je,Ne){Re(oe),pe(oe,je),pe(oe,~je),c.arraySet(oe.pending_buf,oe.window,Ce,je,oe.pending),oe.pending+=je})(B,J,de)}o._tr_init=function(B){me||((function(){var J,de,we,oe,Ce,je=new Array(N+1);for(oe=we=0;oe<x-1;oe++)for(ge[oe]=we,J=0;J<1<<M[oe];J++)R[we++]=oe;for(R[we-1]=oe,oe=Ce=0;oe<16;oe++)for(re[oe]=Ce,J=0;J<1<<j[oe];J++)L[Ce++]=oe;for(Ce>>=7;oe<y;oe++)for(re[oe]=Ce<<7,J=0;J<1<<j[oe]-7;J++)L[256+Ce++]=oe;for(de=0;de<=N;de++)je[de]=0;for(J=0;J<=143;)q[2*J+1]=8,J++,je[8]++;for(;J<=255;)q[2*J+1]=9,J++,je[9]++;for(;J<=279;)q[2*J+1]=7,J++,je[7]++;for(;J<=287;)q[2*J+1]=8,J++,je[8]++;for(ke(q,E+1,je),J=0;J<y;J++)D[2*J+1]=5,D[2*J]=Ae(J,5);Q=new te(q,M,_+1,E,N),X=new te(D,j,0,y,N),_e=new te(new Array(0),O,0,A,I)})(),me=!0),B.l_desc=new W(B.dyn_ltree,Q),B.d_desc=new W(B.dyn_dtree,X),B.bl_desc=new W(B.bl_tree,_e),B.bi_buf=0,B.bi_valid=0,ae(B)},o._tr_stored_block=U,o._tr_flush_block=function(B,J,de,we){var oe,Ce,je=0;0<B.level?(B.strm.data_type===2&&(B.strm.data_type=(function(Ne){var Pe,et=4093624447;for(Pe=0;Pe<=31;Pe++,et>>>=1)if(1&et&&Ne.dyn_ltree[2*Pe]!==0)return u;if(Ne.dyn_ltree[18]!==0||Ne.dyn_ltree[20]!==0||Ne.dyn_ltree[26]!==0)return f;for(Pe=32;Pe<_;Pe++)if(Ne.dyn_ltree[2*Pe]!==0)return f;return u})(B)),Ue(B,B.l_desc),Ue(B,B.d_desc),je=(function(Ne){var Pe;for(S(Ne,Ne.dyn_ltree,Ne.l_desc.max_code),S(Ne,Ne.dyn_dtree,Ne.d_desc.max_code),Ue(Ne,Ne.bl_desc),Pe=A-1;3<=Pe&&Ne.bl_tree[2*F[Pe]+1]===0;Pe--);return Ne.opt_len+=3*(Pe+1)+5+5+4,Pe})(B),oe=B.opt_len+3+7>>>3,(Ce=B.static_len+3+7>>>3)<=oe&&(oe=Ce)):oe=Ce=de+5,de+4<=oe&&J!==-1?U(B,J,de,we):B.strategy===4||Ce===oe?(ne(B,2+(we?1:0),3),Be(B,q,D)):(ne(B,4+(we?1:0),3),(function(Ne,Pe,et,Je){var sn;for(ne(Ne,Pe-257,5),ne(Ne,et-1,5),ne(Ne,Je-4,4),sn=0;sn<Je;sn++)ne(Ne,Ne.bl_tree[2*F[sn]+1],3);ve(Ne,Ne.dyn_ltree,Pe-1),ve(Ne,Ne.dyn_dtree,et-1)})(B,B.l_desc.max_code+1,B.d_desc.max_code+1,je+1),Be(B,B.dyn_ltree,B.dyn_dtree)),ae(B),we&&Re(B)},o._tr_tally=function(B,J,de){return B.pending_buf[B.d_buf+2*B.last_lit]=J>>>8&255,B.pending_buf[B.d_buf+2*B.last_lit+1]=255&J,B.pending_buf[B.l_buf+B.last_lit]=255&de,B.last_lit++,J===0?B.dyn_ltree[2*de]++:(B.matches++,J--,B.dyn_ltree[2*(R[de]+_+1)]++,B.dyn_dtree[2*Z(J)]++),B.last_lit===B.lit_bufsize-1},o._tr_align=function(B){ne(B,2,3),ie(B,z,q),(function(J){J.bi_valid===16?(pe(J,J.bi_buf),J.bi_buf=0,J.bi_valid=0):8<=J.bi_valid&&(J.pending_buf[J.pending++]=255&J.bi_buf,J.bi_buf>>=8,J.bi_valid-=8)})(B)}},{"../utils/common":41}],53:[function(n,a,o){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,a,o){(function(c){(function(u,f){if(!u.setImmediate){var m,b,x,_,E=1,y={},A=!1,k=u.document,N=Object.getPrototypeOf&&Object.getPrototypeOf(u);N=N&&N.setTimeout?N:u,m={}.toString.call(u.process)==="[object process]"?function(V){process.nextTick(function(){I(V)})}:(function(){if(u.postMessage&&!u.importScripts){var V=!0,H=u.onmessage;return u.onmessage=function(){V=!1},u.postMessage("","*"),u.onmessage=H,V}})()?(_="setImmediate$"+Math.random()+"$",u.addEventListener?u.addEventListener("message",z,!1):u.attachEvent("onmessage",z),function(V){u.postMessage(_+V,"*")}):u.MessageChannel?((x=new MessageChannel).port1.onmessage=function(V){I(V.data)},function(V){x.port2.postMessage(V)}):k&&"onreadystatechange"in k.createElement("script")?(b=k.documentElement,function(V){var H=k.createElement("script");H.onreadystatechange=function(){I(V),H.onreadystatechange=null,b.removeChild(H),H=null},b.appendChild(H)}):function(V){setTimeout(I,0,V)},N.setImmediate=function(V){typeof V!="function"&&(V=new Function(""+V));for(var H=new Array(arguments.length-1),G=0;G<H.length;G++)H[G]=arguments[G+1];var M={callback:V,args:H};return y[E]=M,m(E),E++},N.clearImmediate=C}function C(V){delete y[V]}function I(V){if(A)setTimeout(I,0,V);else{var H=y[V];if(H){A=!0;try{(function(G){var M=G.callback,j=G.args;switch(j.length){case 0:M();break;case 1:M(j[0]);break;case 2:M(j[0],j[1]);break;case 3:M(j[0],j[1],j[2]);break;default:M.apply(f,j)}})(H)}finally{C(V),A=!1}}}}function z(V){V.source===u&&typeof V.data=="string"&&V.data.indexOf(_)===0&&I(+V.data.slice(_.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof Ku<"u"?Ku:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(op)),op.exports}var W5=Y5();const X5=Hp(W5),lp=yi.create("BatchPDF"),Z5=async r=>{const e=r.solicitudType,n=r.funcionario.toUpperCase().trim(),a=Xl(r.funcionario),o=r.acto.trim(),c=`SGDP-${e} N ${o} - ${n}`,u={fileName:c,Decreto:o,FUNCIONARIO:n,Funcionario:a,solicitudType:e,RUT:r.rut.trim(),Fecha:dT(r.fechaDecreto),Cantidad_de_das:r.cantidadDias.toString().replace(".",","),Fecha_de_inicio:Ts(r.fechaInicio),RA:r.ra,Emite:r.emite},f=e==="FL"&&r.periodo2&&(r.solicitadoP2||0)>0,m=e==="FL"?{...u,templateId:f?Tt.TEMPLATE_FL_2P_DOC_ID:Tt.TEMPLATE_FL_1P_DOC_ID,Fecha_de_Trmino:Ts(r.fechaTermino||""),Perodo_1:r.periodo1||"",Saldo_Disponible_Periodo_1:(r.saldoDisponibleP1||0).toString().replace(".",","),Solicitados_Periodo_1:(r.solicitadoP1||0).toString().replace(".",","),Saldo_Final_Periodo_1:((r.saldoDisponibleP1||0)-(r.solicitadoP1||0)).toString().replace(".",","),...f?{Perodo_2:r.periodo2||"",Saldo_Disponible_Periodo_2:(r.saldoDisponibleP2||0).toString().replace(".",","),Solicitados_Periodo_2:(r.solicitadoP2||0).toString().replace(".",","),Saldo_Final_Periodo_2:((r.saldoDisponibleP2||0)-(r.solicitadoP2||0)).toString().replace(".",",")}:{}}:{...u,Tipo_de_Jornada:r.tipoJornada.replace(/[()]/g,"").trim(),Das_a_su_haber:r.diasHaber.toFixed(1).replace(".",","),Saldo_final:(r.diasHaber-r.cantidadDias).toFixed(1).replace(".",",")},b=e==="FL"?f?Tt.WEB_APP_URL_FL_2P:Tt.WEB_APP_URL_FL:Tt.WEB_APP_URL,x=await fetch(b,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(m)});if(!x.ok)throw new Error(`HTTP Error: ${x.status}`);const _=await x.json();if(_.success&&_.pdfBase64){const E=atob(_.pdfBase64),y=new Array(E.length);for(let N=0;N<E.length;N++)y[N]=E.charCodeAt(N);const A=new Uint8Array(y);return{blob:new Blob([A],{type:"application/pdf"}),fileName:c.replace(/\//g,"_")}}throw new Error(_.error||"El servidor no devolvi el PDF")},yv=(r,e)=>{const n=URL.createObjectURL(r),a=document.createElement("a");a.href=n,a.download=e,a.style.display="none",document.body.appendChild(a),a.click(),setTimeout(()=>{document.body.removeChild(a),URL.revokeObjectURL(n)},500)},vv=async(r,e,n)=>{const a={success:0,failed:0,errors:[]},o=r.length,c=[];lp.info(`Iniciando generacin masiva de ${o} PDFs (modo: ${e})`);for(let u=0;u<r.length;u++){const f=r[u],m=`${f.solicitudType} ${f.acto}  ${f.funcionario}`;n==null||n({current:u+1,total:o,currentFile:m,status:"generating"});try{const b=await Z5(f);b&&(a.success++,e==="individual"&&(n==null||n({current:u+1,total:o,currentFile:m,status:"downloading"}),yv(b.blob,`${b.fileName}.pdf`)),c.push(b))}catch(b){a.failed++,a.errors.push({id:f.id,decreto:f.acto,funcionario:f.funcionario,error:b instanceof Error?b.message:"Error desconocido"})}u<r.length-1&&await new Promise(b=>setTimeout(b,600))}if(e==="zip"&&c.length>0){n==null||n({current:o,total:o,currentFile:"Comprimiendo archivos...",status:"zipping"});try{const u=new X5,f=u.folder("Decretos-GDP");c.forEach(x=>{f==null||f.file(`${x.fileName}.pdf`,x.blob)});const m=await u.generateAsync({type:"blob",compression:"DEFLATE",compressionOptions:{level:6}}),b=new Date().toISOString().split("T")[0];yv(m,`Decretos-GDP_${b}.zip`)}catch(u){lp.error("Error al generar ZIP:",u)}}return lp.info(`Completado: ${a.success} xitos, ${a.failed} fallos`),n==null||n({current:o,total:o,currentFile:"",status:"done",result:a}),a},u6=async(r,e="Reporte Dashboard GDP Cloud")=>{const n=document.getElementById(r);if(!n)throw new Error("Elemento del dashboard no encontrado");const a=window.open("","_blank","width=1200,height=800");if(!a)throw new Error("No se pudo abrir ventana de impresin");const o=new Date().toLocaleDateString("es-CL",{day:"2-digit",month:"long",year:"numeric"}),c=Array.from(document.styleSheets).map(u=>{try{return Array.from(u.cssRules).map(f=>f.cssText).join(`
`)}catch{return""}}).join(`
`);a.document.write(`
    <!DOCTYPE html>
    <html>
    <head>
      <title>${e}</title>
      <style>
        ${c}
        
        @media print {
          body { 
            padding: 20px;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
          }
          .no-print { display: none !important; }
        }
        
        body {
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
          background: white;
          color: #1e293b;
          padding: 40px;
        }
        
        .report-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          margin-bottom: 30px;
          padding-bottom: 20px;
          border-bottom: 2px solid #e2e8f0;
        }
        
        .report-title {
          font-size: 24px;
          font-weight: 800;
          color: #1e293b;
        }
        
        .report-date {
          font-size: 12px;
          color: #64748b;
        }
        
        .report-content {
          margin-top: 20px;
        }
      </style>
    </head>
    <body>
      <div class="report-header">
        <div>
          <h1 class="report-title">${e}</h1>
          <p class="report-date">Generado el ${o}</p>
        </div>
        <div>
          <img src="/logo.png" alt="GDP Cloud" style="height: 40px; opacity: 0.7;" onerror="this.style.display='none'" />
        </div>
      </div>
      <div class="report-content">
        ${n.innerHTML}
      </div>
      <script>
        window.onload = function() {
          setTimeout(function() {
            window.print();
            window.close();
          }, 500);
        };
      <\/script>
    </body>
    </html>
  `),a.document.close()},L_=Qs.memo(({currentPage:r,totalPages:e,totalItems:n,itemsPerPage:a,onPageChange:o})=>{const[c,u]=K.useState(window.innerWidth<640);K.useEffect(()=>{const A=()=>u(window.innerWidth<640);return window.addEventListener("resize",A),()=>window.removeEventListener("resize",A)},[]);const f=(r-1)*a+1,m=Math.min(r*a,n),b=K.useMemo(()=>{const A=[];if(e<=(c?3:5))for(let N=1;N<=e;N++)A.push(N);else{A.push(1),r>3&&A.push("...");for(let N=Math.max(2,r-1);N<=Math.min(e-1,r+1);N++)A.push(N);r<e-2&&A.push("..."),A.push(e)}return A},[r,e,c]),x=K.useCallback(()=>o(1),[o]),_=K.useCallback(()=>o(r-1),[o,r]),E=K.useCallback(()=>o(r+1),[o,r]),y=K.useCallback(()=>o(e),[o,e]);return e<=1?null:h.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4 mt-6 px-2",children:[h.jsxs("div",{className:"text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider",children:["Mostrando ",h.jsxs("span",{className:"text-slate-700 dark:text-slate-200",children:[f,"-",m]})," de"," ",h.jsx("span",{className:"text-slate-700 dark:text-slate-200",children:n})," registros"]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:x,disabled:r===1,className:"hidden sm:block p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all","aria-label":"Primera pgina",children:h.jsx(ZT,{size:16,"aria-hidden":"true"})}),h.jsx("button",{onClick:_,disabled:r===1,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all","aria-label":"Pgina anterior",children:h.jsx(KT,{size:16,"aria-hidden":"true"})}),h.jsx("div",{className:"flex items-center gap-1 mx-2",children:b.map((A,k)=>typeof A=="number"?h.jsx("button",{onClick:()=>o(A),className:`w-8 h-8 sm:w-9 sm:h-9 rounded-lg text-[10px] sm:text-xs font-bold transition-all ${r===A?"bg-indigo-600 text-white shadow-lg shadow-indigo-200 dark:shadow-indigo-900/50":"bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700"}`,children:A},k):h.jsx("span",{className:"px-2 text-slate-400",children:A},k))}),h.jsx("button",{onClick:E,disabled:r===e,className:"p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all","aria-label":"Pgina siguiente",children:h.jsx(y_,{size:16,"aria-hidden":"true"})}),h.jsx("button",{onClick:y,disabled:r===e,className:"hidden sm:block p-2 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 text-slate-500 dark:text-slate-400 hover:bg-slate-50 dark:hover:bg-slate-700 disabled:opacity-40 disabled:cursor-not-allowed transition-all","aria-label":"ltima pgina",children:h.jsx(eN,{size:16,"aria-hidden":"true"})})]})]})});L_.displayName="Pagination";const Q5=({record:r,onEdit:e,onDelete:n,onGeneratePDF:a,onPreview:o})=>{const[c,u]=K.useState(!1),f=K.useRef(null);K.useEffect(()=>{const b=x=>{f.current&&!f.current.contains(x.target)&&u(!1)};return document.addEventListener("mousedown",b),()=>document.removeEventListener("mousedown",b)},[]);const m=[...o?[{icon:ac,label:"Previsualizar",onClick:()=>o(r),color:"text-purple-600 dark:text-purple-400",bg:"hover:bg-purple-50 dark:hover:bg-purple-900/30"}]:[],{icon:xN,label:"Ver PDF",onClick:()=>a(r,!0),color:"text-rose-600 dark:text-rose-400",bg:"hover:bg-rose-50 dark:hover:bg-rose-900/30"},{icon:kN,label:"Abrir en Drive",onClick:()=>a(r,!1),color:"text-sky-600 dark:text-sky-400",bg:"hover:bg-sky-50 dark:hover:bg-sky-900/30"},...e?[{icon:s5,label:"Modificar",onClick:()=>e(r),color:"text-amber-600 dark:text-amber-400",bg:"hover:bg-amber-50 dark:hover:bg-amber-900/30"}]:[],...n?[{icon:_5,label:"Eliminar",onClick:()=>n(r.id),color:"text-red-600 dark:text-red-400",bg:"hover:bg-red-50 dark:hover:bg-red-900/30",divider:!0}]:[]];return h.jsxs("div",{className:"relative",ref:f,children:[h.jsx("button",{onClick:()=>u(!c),className:"p-2.5 bg-slate-100 dark:bg-slate-700 text-slate-500 dark:text-slate-400 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 transition-all active:scale-90",children:h.jsx(bN,{size:16})}),c&&h.jsx("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-2xl z-50 overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:m.map((b,x)=>h.jsxs(Qs.Fragment,{children:[b.divider&&h.jsx("div",{className:"border-t border-slate-100 dark:border-slate-700 my-1"}),h.jsxs("button",{onClick:()=>{b.onClick(),u(!1)},className:`w-full flex items-center gap-3 px-4 py-3 text-left transition-colors ${b.bg}`,children:[h.jsx(b.icon,{className:`w-4 h-4 ${b.color}`}),h.jsx("span",{className:"text-sm font-semibold text-slate-700 dark:text-slate-200",children:b.label})]})]},x))})]})},e4=({filters:r,onFiltersChange:e,onReset:n})=>{const[a,o]=K.useState(!1),c=Object.values(r).some(f=>f!==""),u=(f,m)=>{e({...r,[f]:m})};return h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl border border-slate-200 dark:border-slate-700 overflow-hidden",children:[h.jsxs("button",{onClick:()=>o(!a),className:"w-full flex items-center justify-between px-4 py-3 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`p-2 rounded-lg ${c?"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400":"bg-slate-100 dark:bg-slate-700 text-slate-400"}`,children:h.jsx(DN,{size:16})}),h.jsx("span",{className:"text-sm font-bold text-slate-700 dark:text-slate-200",children:"Filtros Avanzados"}),c&&h.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400 text-[10px] font-black rounded-full uppercase",children:"Activos"})]}),h.jsx("div",{className:`transform transition-transform ${a?"rotate-180":""}`,children:h.jsx("svg",{className:"w-5 h-5 text-slate-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),a&&h.jsxs("div",{className:"px-4 pb-4 pt-2 border-t border-slate-100 dark:border-slate-700 space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 block",children:"Fecha desde"}),h.jsxs("div",{className:"relative",children:[h.jsx(gi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"date",value:r.dateFrom,onChange:f=>u("dateFrom",f.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 dark:focus:ring-indigo-900/50"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 block",children:"Fecha hasta"}),h.jsxs("div",{className:"relative",children:[h.jsx(gi,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"date",value:r.dateTo,onChange:f=>u("dateTo",f.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 dark:focus:ring-indigo-900/50"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 block",children:"Das mn."}),h.jsx("input",{type:"number",min:"0",step:"0.5",value:r.minDays,onChange:f=>u("minDays",f.target.value),placeholder:"0",className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 dark:focus:ring-indigo-900/50 text-center"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 block",children:"Das mx."}),h.jsx("input",{type:"number",min:"0",step:"0.5",value:r.maxDays,onChange:f=>u("maxDays",f.target.value),placeholder:"30",className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 dark:focus:ring-indigo-900/50 text-center"})]}),h.jsxs("div",{className:"col-span-2",children:[h.jsx("label",{className:"text-[10px] font-black text-slate-400 dark:text-slate-500 uppercase tracking-wider mb-2 block",children:"Materia"}),h.jsxs("select",{value:r.materia,onChange:f=>u("materia",f.target.value),className:"w-full px-4 py-2.5 bg-slate-50 dark:bg-slate-700 border border-slate-200 dark:border-slate-600 rounded-xl text-sm font-medium text-slate-700 dark:text-slate-200 outline-none focus:border-indigo-400 focus:ring-2 focus:ring-indigo-50 dark:focus:ring-indigo-900/50 cursor-pointer",children:[h.jsx("option",{value:"",children:"Todas las materias"}),h.jsx("option",{value:"Decreto Exento",children:"Decreto Exento"}),h.jsx("option",{value:"Resolucin Exenta",children:"Resolucin Exenta"}),h.jsx("option",{value:"Decreto",children:"Decreto"}),h.jsx("option",{value:"Resolucin",children:"Resolucin"})]})]})]}),c&&h.jsxs("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 bg-slate-100 dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600 text-slate-600 dark:text-slate-300 rounded-xl transition-colors text-sm font-bold",children:[h.jsx(o5,{size:14}),"Limpiar filtros"]})]})]})},t4=({isOpen:r,onClose:e,record:n,onConfirm:a})=>{if(!r||!n)return null;const o=n.solicitudType==="FL",c=n.saldoDisponibleP1??0,u=n.solicitadoP1??n.cantidadDias??0,f=n.saldoFinalP1??c-u,m=n.saldoDisponibleP2??0,b=n.solicitadoP2??0,x=n.saldoFinalP2??m-b,_=I_(n),y=(o?_?x:f:n.diasHaber-n.cantidadDias).toFixed(1),A=Xl(n.funcionario);return h.jsxs("div",{className:"fixed inset-0 z-[160] flex items-center justify-center p-4",onClick:e,children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/70 backdrop-blur-sm"}),h.jsxs("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-white dark:bg-slate-800 rounded-2xl sm:rounded-3xl shadow-2xl overflow-hidden flex flex-col",onClick:k=>k.stopPropagation(),children:[h.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-900 p-4 sm:p-6 text-white",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-white/10 rounded-xl sm:rounded-2xl flex items-center justify-center",children:h.jsx(ic,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-base sm:text-lg font-bold",children:"Previsualizacin del Decreto"}),h.jsx("p",{className:"text-[10px] sm:text-xs opacity-70",children:"Revisa los datos antes de generar"})]})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-white/10 rounded-xl transition-colors",children:h.jsx(Gn,{className:"w-5 h-5"})})]})}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6",children:[h.jsxs("div",{className:"text-center mb-8 pb-6 border-b-2 border-dashed border-slate-200 dark:border-slate-700",children:[h.jsx("p",{className:"text-xs text-slate-400 uppercase tracking-widest mb-2",children:"Repblica de Chile"}),h.jsx("h3",{className:"text-2xl font-black text-slate-900 dark:text-white tracking-tight",children:n.materia.toUpperCase()}),h.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 px-4 py-2 bg-indigo-50 dark:bg-indigo-900/30 rounded-full",children:[h.jsx(w_,{className:"w-4 h-4 text-indigo-600"}),h.jsx("span",{className:"text-lg font-black text-indigo-600 dark:text-indigo-400",children:n.acto})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsx("div",{className:"col-span-2 bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-indigo-100 dark:bg-indigo-900/50 rounded-xl flex items-center justify-center",children:h.jsx(ci,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Funcionario"}),h.jsx("p",{className:"text-lg font-bold text-slate-900 dark:text-white",children:A}),h.jsx("p",{className:"text-xs text-slate-500",children:n.rut})]})]})}),h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${n.solicitudType==="PA"?"bg-indigo-100 dark:bg-indigo-900/50":"bg-amber-100 dark:bg-amber-900/50"}`,children:h.jsx(MT,{className:`w-5 h-5 ${n.solicitudType==="PA"?"text-indigo-600":"text-amber-600"}`})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Tipo"}),h.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:n.solicitudType==="PA"?"Permiso Administrativo":"Feriado Legal"})]})]})}),h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/50 rounded-xl flex items-center justify-center",children:h.jsx(gi,{className:"w-5 h-5 text-emerald-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Fecha de Inicio"}),h.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:Ts(n.fechaInicio)})]})]})}),o&&h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-emerald-100 dark:bg-emerald-900/50 rounded-xl flex items-center justify-center",children:h.jsx(gi,{className:"w-5 h-5 text-emerald-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Fecha de Trmino"}),h.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:Ts(n.fechaTermino||"")})]})]})}),h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-sky-100 dark:bg-sky-900/50 rounded-xl flex items-center justify-center",children:h.jsx(f0,{className:"w-5 h-5 text-sky-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Cantidad de Das"}),h.jsxs("p",{className:"font-bold text-slate-900 dark:text-white",children:[n.cantidadDias," da(s)"]}),h.jsx("p",{className:"text-xs text-slate-500",children:o?"Feriado Legal":n.tipoJornada})]})]})}),h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/50 rounded-xl flex items-center justify-center",children:h.jsx(av,{className:"w-5 h-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:o?"Perodo 1":"Perodo"}),h.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:o?n.periodo1||"":n.periodo})]})]})}),o&&_&&h.jsx("div",{className:"bg-slate-50 dark:bg-slate-700/50 p-4 rounded-2xl",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-purple-100 dark:bg-purple-900/50 rounded-xl flex items-center justify-center",children:h.jsx(av,{className:"w-5 h-5 text-purple-600"})}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Perodo 2"}),h.jsx("p",{className:"font-bold text-slate-900 dark:text-white",children:n.periodo2||""})]})]})})]}),h.jsx("div",{className:"mt-6 p-4 bg-gradient-to-r from-slate-100 to-slate-50 dark:from-slate-700 dark:to-slate-700/50 rounded-2xl border border-slate-200 dark:border-slate-600",children:o?h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[h.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2",children:"Perodo 1"}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-wider",children:"Disponible"}),h.jsx("p",{className:"text-lg font-black text-slate-700 dark:text-slate-200",children:c.toFixed(1)})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-wider",children:"Solicitado"}),h.jsxs("p",{className:"text-lg font-black text-indigo-600",children:["-",u.toFixed(1)]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-wider",children:"Saldo Final"}),h.jsx("p",{className:`text-lg font-black ${f<0?"text-red-500":f<2?"text-amber-500":"text-emerald-500"}`,children:f.toFixed(1)})]})]})]}),_&&h.jsxs("div",{className:"bg-white/70 dark:bg-slate-800/60 rounded-xl p-3",children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider mb-2",children:"Perodo 2"}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 text-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-wider",children:"Disponible"}),h.jsx("p",{className:"text-lg font-black text-slate-700 dark:text-slate-200",children:m.toFixed(1)})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-wider",children:"Solicitado"}),h.jsxs("p",{className:"text-lg font-black text-indigo-600",children:["-",b.toFixed(1)]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-slate-400 uppercase tracking-wider",children:"Saldo Final"}),h.jsx("p",{className:`text-lg font-black ${x<0?"text-red-500":x<2?"text-amber-500":"text-emerald-500"}`,children:x.toFixed(1)})]})]})]})]}):h.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 text-center",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Das Haber"}),h.jsx("p",{className:"text-xl sm:text-2xl font-black text-slate-600 dark:text-slate-300",children:n.diasHaber})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Solicitados"}),h.jsxs("p",{className:"text-xl sm:text-2xl font-black text-indigo-600",children:["-",n.cantidadDias]})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Saldo Final"}),h.jsx("p",{className:`text-xl sm:text-2xl font-black ${parseFloat(y)<0?"text-red-500":parseFloat(y)<2?"text-amber-500":"text-emerald-500"}`,children:y})]})]})}),h.jsxs("div",{className:"mt-4 flex gap-4",children:[h.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl",children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"R.A."}),h.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:n.ra})]}),h.jsxs("div",{className:"flex-1 bg-slate-50 dark:bg-slate-700/50 p-3 rounded-xl",children:[h.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-wider",children:"Emite"}),h.jsx("p",{className:"font-bold text-slate-700 dark:text-slate-300",children:n.emite})]})]})]}),h.jsxs("div",{className:"p-4 sm:p-6 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex flex-col sm:flex-row gap-3",children:[h.jsx("button",{onClick:e,className:"flex-1 px-6 py-3 bg-slate-200 dark:bg-slate-700 text-slate-700 dark:text-slate-300 rounded-xl font-bold text-sm hover:bg-slate-300 dark:hover:bg-slate-600 transition-colors",children:"Cancelar"}),h.jsxs("button",{onClick:a,className:"flex-1 px-6 py-3 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-bold text-sm hover:from-indigo-700 hover:to-purple-700 transition-all shadow-lg shadow-indigo-200 dark:shadow-indigo-900/30 flex items-center justify-center gap-2",children:[h.jsx(ic,{className:"w-4 h-4"}),"Generar Documento"]})]})]})]})},_v={dateFrom:"",dateTo:"",minDays:"",maxDays:"",materia:""},nd=r=>r.solicitudType!=="FL"?r.diasHaber-r.cantidadDias:Bd(r,0),n4=({data:r,activeTab:e,onDelete:n,onEdit:a,searchTerm:o,onSearchTermChange:c,canEdit:u=!0,canDelete:f=!0})=>{const[m,b]=K.useState(o||""),[x,_]=K.useState(null),[E,y]=K.useState("desc"),[A,k]=K.useState(1),[N,C]=K.useState(_v),[I,z]=K.useState(null),[V,H]=K.useState(new Set),[G,M]=K.useState(!1),[j,O]=K.useState(null),F=ne=>{x===ne?y(E==="asc"?"desc":"asc"):(_(ne),y("asc")),k(1)},q=K.useMemo(()=>r.filter(ne=>{const ie=m.toLowerCase(),Ae=ne.funcionario.toLowerCase().includes(ie)||ne.acto.toLowerCase().includes(ie)||ne.rut.includes(ie),ke=e==="ALL"||ne.solicitudType===e;let ae=!0;return N.dateFrom&&ne.fechaInicio<N.dateFrom&&(ae=!1),N.dateTo&&ne.fechaInicio>N.dateTo&&(ae=!1),N.minDays&&ne.cantidadDias<Number(N.minDays)&&(ae=!1),N.maxDays&&ne.cantidadDias>Number(N.maxDays)&&(ae=!1),N.materia&&ne.materia!==N.materia&&(ae=!1),Ae&&ke&&ae}).sort((ne,ie)=>{if(!x)return mi(ne,ie);let Ae,ke;switch(x){case"acto":Ae=ne.acto,ke=ie.acto;break;case"funcionario":Ae=ne.funcionario.toLowerCase(),ke=ie.funcionario.toLowerCase();break;case"solicitudType":Ae=ne.solicitudType,ke=ie.solicitudType;break;case"fechaInicio":Ae=new Date(ne.fechaInicio).getTime(),ke=new Date(ie.fechaInicio).getTime();break;case"cantidadDias":Ae=ne.cantidadDias,ke=ie.cantidadDias;break;case"saldo":Ae=nd(ne),ke=nd(ie);break;case"fechaDecreto":Ae=new Date(ne.fechaDecreto||"").getTime()||0,ke=new Date(ie.fechaDecreto||"").getTime()||0;break;default:return 0}return Ae<ke?E==="asc"?-1:1:Ae>ke?E==="asc"?1:-1:0}),[r,m,e,x,E,N]),D=q.length,L=Math.ceil(D/Tt.ITEMS_PER_PAGE),R=K.useMemo(()=>{const ne=(A-1)*Tt.ITEMS_PER_PAGE;return q.slice(ne,ne+Tt.ITEMS_PER_PAGE)},[q,A]);Qs.useEffect(()=>{o!==void 0&&o!==m&&b(o)},[o,m]),Qs.useEffect(()=>{k(1)},[m,e,N]);const ge=K.useCallback(ne=>{H(ie=>{const Ae=new Set(ie);return Ae.has(ne)?Ae.delete(ne):Ae.add(ne),Ae})},[]),Q=K.useCallback(()=>{V.size===q.length?H(new Set):H(new Set(q.map(ne=>ne.id)))},[q,V.size]),X=K.useCallback(()=>{H(new Set)},[]),_e=K.useCallback(async ne=>{const ie=q.filter(Ae=>V.has(Ae.id));if(ie.length!==0){M(!0),O({current:0,total:ie.length,currentFile:"",status:"generating"});try{await vv(ie,ne,Ae=>{O(Ae)})}finally{setTimeout(()=>{M(!1),O(null),X()},2500)}}},[q,V,X]),re=K.useCallback(({field:ne})=>x!==ne?h.jsx(OT,{size:10,className:"opacity-20 ml-auto group-hover:opacity-100 transition-opacity"}):E==="asc"?h.jsx(WT,{size:12,className:"ml-auto text-indigo-500"}):h.jsx(h0,{size:12,className:"ml-auto text-indigo-500"}),[x,E]),te=K.useCallback(async(ne,ie)=>{if(!G){M(!0),O({current:0,total:1,currentFile:"",status:"generating"});try{await vv([ne],"individual",Ae=>{O(Ae)})}finally{setTimeout(()=>{M(!1),O(null)},2500)}}},[G]),W=K.useCallback(ne=>{z(ne)},[]),Z=K.useCallback(()=>{z(null)},[]),pe=K.useCallback(()=>{I&&(te(I,!0),z(null))},[I,te]);return h.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[V.size>0&&h.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-indigo-700 text-white px-4 sm:px-5 py-3.5 rounded-2xl flex items-center justify-between shadow-xl page-fade-in",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-white/15 px-3 py-1.5 rounded-xl",children:[h.jsx(ap,{size:14}),h.jsx("span",{className:"text-xs font-black",children:V.size})]}),h.jsxs("span",{className:"text-[11px] font-bold text-white/70 uppercase tracking-wider hidden sm:inline",children:["seleccionado",V.size>1?"s":""]}),h.jsx("button",{onClick:X,className:"p-1.5 hover:bg-white/20 rounded-lg transition-colors",title:"Deseleccionar",children:h.jsx(Gn,{size:14})})]}),h.jsx("div",{className:"flex items-center gap-2",children:!G&&h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>_e("individual"),className:"flex items-center gap-2 px-3.5 py-2 bg-white text-indigo-600 rounded-xl text-[10px] sm:text-[11px] font-black hover:bg-indigo-50 transition-all active:scale-95 shadow-lg uppercase tracking-wider",title:"Cada decreto se descarga individualmente apenas se genera",children:[h.jsx(__,{size:14}),h.jsx("span",{className:"hidden sm:inline",children:"Descargar "}),"Uno a uno"]}),h.jsxs("button",{onClick:()=>_e("zip"),className:"flex items-center gap-2 px-3.5 py-2 bg-emerald-500 text-white rounded-xl text-[10px] sm:text-[11px] font-black hover:bg-emerald-400 transition-all active:scale-95 shadow-lg uppercase tracking-wider",title:"Todos los decretos se descargan en un solo archivo ZIP",children:[h.jsx(jp,{size:14}),h.jsx("span",{className:"hidden sm:inline",children:"Descargar "}),"ZIP"]})]})})]}),G&&j&&h.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 notification-backdrop-enter",children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md"}),h.jsxs("div",{className:"relative w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden notification-panel-enter",children:[h.jsxs("div",{className:"relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600 via-indigo-700 to-purple-800"}),h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-white/10 via-transparent to-transparent"}),h.jsxs("div",{className:"relative p-6 text-white",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[h.jsx("div",{className:"p-2.5 bg-white/10 backdrop-blur rounded-xl ring-1 ring-white/20",children:j.status==="done"?h.jsx(Sc,{className:"w-5 h-5 text-emerald-300"}):j.status==="zipping"?h.jsx(jp,{className:"w-5 h-5 animate-pulse"}):h.jsx(ic,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-black uppercase tracking-wider",children:"GDP Cloud"}),h.jsx("p",{className:"text-[10px] font-bold text-white/80 tracking-wide mt-0.5",children:"Espere un momento se est generando el decreto"})]})]}),h.jsxs("div",{className:"text-3xl font-black mb-3",children:[j.current," ",h.jsxs("span",{className:"text-base font-bold text-white/40",children:["/ ",j.total]})]}),h.jsx("div",{className:"h-2 bg-white/10 rounded-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-emerald-400 to-cyan-400 rounded-full transition-all duration-500 ease-out",style:{width:`${j.current/j.total*100}%`}})})]})]}),h.jsxs("div",{className:"p-5",children:[j.status!=="done"&&j.currentFile&&h.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-3.5 border border-blue-200 dark:border-blue-800/40",children:[h.jsx("p",{className:"text-[9px] font-black text-blue-600 dark:text-blue-300 uppercase tracking-widest mb-1",children:j.status==="downloading"?" Descargando":j.status==="zipping"?" Empaquetando":" Procesando"}),h.jsx("p",{className:"text-[11px] font-bold text-blue-700 dark:text-blue-200 truncate",children:j.currentFile})]}),j.status==="done"&&j.result&&h.jsxs("div",{className:"space-y-3",children:[h.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-xl p-3 border border-blue-200 dark:border-blue-800/40",children:h.jsx("p",{className:"text-[11px] font-bold text-blue-700 dark:text-blue-200 text-center",children:"GDP Cloud - Espere un momento se est generando el decreto"})}),h.jsxs("div",{className:"flex gap-3",children:[h.jsxs("div",{className:"flex-1 bg-blue-50 dark:bg-blue-900/20 rounded-xl p-3 text-center border border-blue-200 dark:border-blue-800/40",children:[h.jsx("p",{className:"text-lg font-black text-blue-700 dark:text-blue-300",children:j.result.success}),h.jsx("p",{className:"text-[9px] font-bold text-blue-600/80 uppercase tracking-widest",children:"Exitosos"})]}),j.result.failed>0&&h.jsxs("div",{className:"flex-1 bg-red-50 dark:bg-red-900/20 rounded-xl p-3 text-center border border-red-100 dark:border-red-800/50",children:[h.jsx("p",{className:"text-lg font-black text-red-600 dark:text-red-400",children:j.result.failed}),h.jsx("p",{className:"text-[9px] font-bold text-red-500/70 uppercase tracking-widest",children:"Con error"})]})]}),j.result.errors.length>0&&h.jsx("div",{className:"space-y-1.5 max-h-32 overflow-y-auto custom-scrollbar",children:j.result.errors.map((ne,ie)=>h.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-100 dark:border-red-800/50",children:[h.jsx(Oo,{size:12,className:"text-red-500 shrink-0"}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("p",{className:"text-[10px] font-bold text-red-700 dark:text-red-300 truncate",children:[ne.decreto,"  ",ne.funcionario]}),h.jsx("p",{className:"text-[9px] text-red-500/70 truncate",children:ne.error})]})]},ie))}),h.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 text-center font-bold uppercase tracking-wider",children:"Cerrando automticamente..."})]})]})]})]}),h.jsxs("div",{className:"relative max-w-2xl",children:[h.jsxs("div",{className:"absolute left-4 sm:left-5 top-1/2 -translate-y-1/2 p-1.5 sm:p-2 bg-indigo-50 dark:bg-indigo-900/50 rounded-lg text-indigo-600 dark:text-indigo-400",children:[h.jsx(Dp,{size:16,className:"sm:hidden"}),h.jsx(Dp,{size:18,className:"hidden sm:block"})]}),h.jsx("input",{placeholder:"Buscar decreto, funcionario o RUT...",className:"w-full pl-12 sm:pl-14 pr-4 sm:pr-6 py-3.5 sm:py-4 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-2xl shadow-lg outline-none focus:ring-4 focus:ring-indigo-50 dark:focus:ring-indigo-900/50 focus:border-indigo-200 dark:focus:border-indigo-700 transition-all font-bold text-[11px] sm:text-xs uppercase tracking-wide sm:tracking-widest text-slate-700 dark:text-slate-200 placeholder:text-slate-300 dark:placeholder:text-slate-600",value:m,onChange:ne=>{const ie=ne.target.value;b(ie),c==null||c(ie)}})]}),h.jsx(e4,{filters:N,onFiltersChange:C,onReset:()=>C(_v)}),h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl sm:rounded-[2rem] shadow-xl border border-slate-100 dark:border-slate-700 overflow-hidden",children:[h.jsx("div",{className:"overflow-x-auto custom-scrollbar",children:h.jsxs("table",{className:"w-full text-left border-collapse table-auto",children:[h.jsx("thead",{children:h.jsxs("tr",{className:"bg-slate-50/50 dark:bg-slate-900/50 border-b border-slate-100 dark:border-slate-700",children:[h.jsx("th",{className:"pl-4 sm:pl-6 py-4 sm:py-6 w-8",children:h.jsx("button",{onClick:Q,className:"p-1 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:V.size>0&&V.size===q.length?h.jsx(ap,{size:18,className:"text-indigo-600 dark:text-indigo-400"}):h.jsx(dv,{size:18,className:"text-slate-300 dark:text-slate-600"})})}),h.jsx("th",{onClick:()=>F("acto"),className:"pr-2 sm:pr-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Decreto ",h.jsx(re,{field:"acto"})]})}),h.jsx("th",{onClick:()=>F("funcionario"),className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Funcionario ",h.jsx(re,{field:"funcionario"})]})}),h.jsx("th",{onClick:()=>F("solicitudType"),className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none hidden sm:table-cell",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Tipo ",h.jsx(re,{field:"solicitudType"})]})}),(e==="FL"||e==="ALL")&&h.jsx("th",{className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 hidden md:table-cell",children:h.jsx("div",{className:"flex items-center gap-2",children:"Perodo"})}),h.jsx("th",{onClick:()=>F("cantidadDias"),className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Das ",h.jsx(re,{field:"cantidadDias"})]})}),h.jsx("th",{onClick:()=>F("saldo"),className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none hidden sm:table-cell",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Saldo ",h.jsx(re,{field:"saldo"})]})}),h.jsx("th",{onClick:()=>F("fechaInicio"),className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none hidden sm:table-cell",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Inicio ",h.jsx(re,{field:"fechaInicio"})]})}),(e==="FL"||e==="ALL")&&h.jsx("th",{className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 hidden lg:table-cell",children:h.jsx("div",{className:"flex items-center gap-2",children:"Trmino"})}),h.jsx("th",{onClick:()=>F("fechaDecreto"),className:"px-2 sm:px-3 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 cursor-pointer hover:bg-white dark:hover:bg-slate-800 transition-colors group select-none hidden lg:table-cell",children:h.jsxs("div",{className:"flex items-center gap-2",children:["Emisin ",h.jsx(re,{field:"fechaDecreto"})]})}),h.jsx("th",{className:"pl-2 sm:pl-3 pr-4 sm:pr-8 py-4 sm:py-6 text-[10px] sm:text-[11px] font-black uppercase tracking-wider sm:tracking-[0.2em] text-slate-400 dark:text-slate-500 text-right",children:"Acciones"})]})}),h.jsxs("tbody",{className:"divide-y divide-slate-50 dark:divide-slate-700/50",children:[R.map(ne=>{const ie=V.has(ne.id);return h.jsxs("tr",{className:`hover:bg-indigo-50/20 dark:hover:bg-indigo-900/10 transition-all group/row ${ie?"bg-indigo-50/40 dark:bg-indigo-900/20":""}`,children:[h.jsx("td",{className:"pl-4 sm:pl-6 py-4 sm:py-5 w-10",children:h.jsx("button",{onClick:Ae=>{Ae.stopPropagation(),ge(ne.id)},className:"p-1.5 hover:bg-slate-200 dark:hover:bg-slate-700 rounded-lg transition-colors",children:ie?h.jsx(ap,{size:18,className:"text-indigo-600 dark:text-indigo-400"}):h.jsx(dv,{size:18,className:"text-slate-300 dark:text-slate-600 hover:text-slate-400"})})}),h.jsx("td",{className:"pr-2 sm:pr-3 py-4 sm:py-5",children:h.jsxs("div",{className:"flex flex-col",children:[h.jsx("span",{className:"font-black text-indigo-600 dark:text-indigo-400 text-sm sm:text-[13px] tracking-tight",children:ne.acto}),h.jsx("span",{className:"text-[9px] sm:text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-tighter truncate max-w-[100px]",children:ne.materia})]})}),h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5",children:h.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[h.jsxs("div",{className:"hidden sm:flex w-8 h-8 sm:w-9 sm:h-9 rounded-xl bg-slate-100 dark:bg-slate-700 items-center justify-center text-slate-300 dark:text-slate-500 group-hover/row:bg-white dark:group-hover/row:bg-slate-600 group-hover/row:shadow-sm transition-all",children:[h.jsx(lv,{size:20,className:"sm:hidden"}),h.jsx(lv,{size:22,className:"hidden sm:block"})]}),h.jsxs("div",{className:"flex flex-col min-w-0",children:[h.jsx("p",{className:"text-[11px] sm:text-xs font-black text-slate-800 dark:text-white uppercase tracking-tight truncate max-w-[120px] sm:max-w-[150px] lg:max-w-xs",children:ne.funcionario}),h.jsx("p",{className:"text-[9px] sm:text-[10px] font-bold text-slate-400 dark:text-slate-500 font-mono tracking-tighter",children:ne.rut})]})]})}),h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5 hidden sm:table-cell",children:h.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-lg text-[9px] sm:text-[10px] font-black uppercase tracking-wider sm:tracking-widest border shadow-sm ${ne.solicitudType==="PA"?"bg-indigo-50 dark:bg-indigo-900/40 text-indigo-700 dark:text-indigo-300 border-indigo-100 dark:border-indigo-800":"bg-amber-50 dark:bg-amber-900/40 text-amber-700 dark:text-amber-300 border-amber-100 dark:border-amber-800"}`,children:ne.solicitudType})}),(e==="FL"||e==="ALL")&&h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5 hidden md:table-cell",children:ne.solicitudType==="FL"?h.jsxs("div",{className:"flex flex-col gap-1",children:[ne.periodo1&&h.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] sm:text-[9px] font-black tracking-wide bg-sky-50 dark:bg-sky-900/40 text-sky-700 dark:text-sky-300 border border-sky-100 dark:border-sky-800 whitespace-nowrap",children:ne.periodo1}),ne.periodo2&&h.jsx("span",{className:"px-1.5 py-0.5 rounded text-[8px] sm:text-[9px] font-black tracking-wide bg-purple-50 dark:bg-purple-900/40 text-purple-700 dark:text-purple-300 border border-purple-100 dark:border-purple-800 whitespace-nowrap",children:ne.periodo2}),!ne.periodo1&&!ne.periodo2&&h.jsx("span",{className:"text-[10px] text-slate-400",children:"-"})]}):h.jsx("span",{className:"text-[10px] text-slate-400",children:"-"})}),h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5",children:h.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[h.jsx("span",{className:"font-black text-slate-700 dark:text-slate-200 text-sm sm:text-[13px]",children:ne.cantidadDias}),h.jsx("span",{className:"text-[8px] sm:text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-tighter hidden lg:inline",children:"DAS"})]})}),h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5 hidden sm:table-cell",children:h.jsx("span",{className:`font-black text-sm sm:text-[13px] ${nd(ne)<0?"text-red-500 dark:text-red-400":"text-emerald-600 dark:text-emerald-400"}`,children:nd(ne).toFixed(1)})}),h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5 hidden sm:table-cell",children:h.jsx("span",{className:"text-[11px] sm:text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight truncate whitespace-nowrap",children:sp(ne.fechaInicio)})}),(e==="FL"||e==="ALL")&&h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5 hidden lg:table-cell",children:h.jsx("span",{className:"text-[11px] sm:text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-tight truncate whitespace-nowrap",children:ne.fechaTermino?sp(ne.fechaTermino):"-"})}),h.jsx("td",{className:"px-2 sm:px-3 py-4 sm:py-5 hidden lg:table-cell",children:h.jsx("span",{className:"text-[11px] sm:text-xs font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-tight truncate whitespace-nowrap",children:ne.fechaDecreto?sp(ne.fechaDecreto):"-"})}),h.jsx("td",{className:"pl-2 sm:pl-3 pr-4 sm:pr-8 py-4 sm:py-5 text-right",children:h.jsx("div",{className:"flex justify-end",children:h.jsx(Q5,{record:ne,onEdit:u?a:void 0,onDelete:f?n:void 0,onGeneratePDF:te,onPreview:W})})})]},ne.id)}),R.length===0&&h.jsx("tr",{children:h.jsx("td",{colSpan:10,className:"px-6 sm:px-10 py-16 sm:py-24 text-center",children:h.jsxs("div",{className:"flex flex-col items-center gap-4 opacity-20",children:[h.jsx(HN,{size:40}),h.jsx("p",{className:"text-[10px] sm:text-[11px] font-black uppercase tracking-[0.3em] sm:tracking-[0.4em]",children:"Sin registros que mostrar"})]})})})]})]})}),L>1&&h.jsx("div",{className:"px-4 sm:px-8 py-4 sm:py-6 border-t border-slate-100 dark:border-slate-700",children:h.jsx(L_,{currentPage:A,totalPages:L,totalItems:D,itemsPerPage:Tt.ITEMS_PER_PAGE,onPageChange:k})})]}),h.jsx("p",{className:"text-[9px] sm:text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider sm:tracking-widest text-center",children:D>0?`${D} registro${D!==1?"s":""} encontrado${D!==1?"s":""}`:"Desliza para ver ms detalles en dispositivos mviles"}),h.jsx(t4,{isOpen:I!==null,onClose:Z,record:I,onConfirm:pe})]})},s4=K.memo(n4),U_=Qs.memo(({records:r,totalDatabaseEmployees:e})=>{const n=K.useMemo(()=>{const a=r.filter(m=>m.solicitudType==="PA"),o=r.filter(m=>m.solicitudType==="FL"),c=a.reduce((m,b)=>m+b.cantidadDias,0),u=o.reduce((m,b)=>m+b.cantidadDias,0),f=new Set(r.map(m=>m.rut)).size;return[{label:"Decretos PA",value:a.length,icon:$N,color:"text-indigo-700 dark:text-indigo-400",bg:"bg-indigo-50 dark:bg-indigo-900/40",sub:`${c} das`,borderColor:"border-indigo-100 dark:border-indigo-800/50"},{label:"Feriados FL",value:o.length,icon:Cd,color:"text-amber-700 dark:text-amber-400",bg:"bg-amber-50 dark:bg-amber-900/40",sub:`${u} das`,borderColor:"border-amber-100 dark:border-amber-800/50"},{label:"Base Personal",value:e,icon:jd,color:"text-slate-700 dark:text-slate-300",bg:"bg-slate-100 dark:bg-slate-700/50",sub:`${f} con movimientos`,borderColor:"border-slate-200 dark:border-slate-600/50"},{label:"Total Actos",value:r.length,icon:CT,color:"text-emerald-700 dark:text-emerald-400",bg:"bg-emerald-50 dark:bg-emerald-900/40",sub:"PA + FL",borderColor:"border-emerald-100 dark:border-emerald-800/50"}]},[r,e]);return h.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:n.map((a,o)=>h.jsxs("div",{className:`bg-white dark:bg-slate-800 p-4 sm:p-5 rounded-2xl border ${a.borderColor} shadow-sm flex items-center gap-3 sm:gap-4 transition-all hover:shadow-md group`,children:[h.jsx("div",{className:`${a.bg} ${a.color} p-2.5 sm:p-3 rounded-xl group-hover:scale-110 transition-transform`,children:h.jsx(a.icon,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"text-slate-400 dark:text-slate-500 text-[10px] sm:text-[11px] font-black uppercase tracking-wider truncate",children:a.label}),h.jsx("p",{className:"text-xl sm:text-2xl font-black text-slate-800 dark:text-white leading-tight",children:a.value}),h.jsx("p",{className:"text-[10px] sm:text-[11px] text-slate-400 dark:text-slate-500 font-bold uppercase truncate",children:a.sub})]})]},o))})});U_.displayName="StatsCards";const r4=r=>{const n=new Date().getTime()-r.getTime(),a=Math.floor(n/6e4),o=Math.floor(n/36e5),c=Math.floor(n/864e5);return a<1?"Ahora":a<60?`Hace ${a}m`:o<24?`Hace ${o}h`:c<7?`Hace ${c}d`:r.toLocaleDateString("es-CL",{day:"numeric",month:"short"})},a4=()=>{try{const r=localStorage.getItem("gdp-notification-read-ids");return r?new Set(JSON.parse(r)):new Set}catch{return new Set}},xv=r=>{try{localStorage.setItem("gdp-notification-read-ids",JSON.stringify([...r]))}catch{}},i4={saldo:{label:"Saldos",icon:h.jsx(g0,{className:"w-3.5 h-3.5"}),gradient:"from-red-500 to-amber-500"},deadline:{label:"Plazos",icon:h.jsx(gi,{className:"w-3.5 h-3.5"}),gradient:"from-amber-500 to-orange-500"},info:{label:"Actividad",icon:h.jsx(R5,{className:"w-3.5 h-3.5"}),gradient:"from-blue-500 to-cyan-500"},suggestion:{label:"Sugerencias",icon:h.jsx(zd,{className:"w-3.5 h-3.5"}),gradient:"from-violet-500 to-purple-500"}},o4=({records:r,employees:e,onViewEmployee:n})=>{const[a,o]=K.useState(!1),[c,u]=K.useState([]),[f,m]=K.useState(!1),[b,x]=K.useState("all"),[_,E]=K.useState(new Set(["saldo","deadline","info","suggestion"])),[y,A]=K.useState(!1),[k,N]=K.useState(!1),C=K.useRef(null),I=K.useRef(a4()),z=K.useCallback(()=>{const te=[],W=new Date,Z=W.getMonth(),pe=W.getFullYear();if(e.forEach(Te=>{const Ie=r.filter(Ue=>Ue.rut===Te.rut&&Ue.solicitudType==="PA").sort((Ue,S)=>mi(Ue,S));if(Ie.length>0){const Ue=Ie[0],S=Ue.diasHaber-Ue.cantidadDias;S<=0?te.push({id:`critical-pa-${Te.rut}`,type:"critical",priority:1,category:"saldo",title:"Saldo Agotado PA",message:`${Te.nombre} no tiene das de permiso disponibles (${S.toFixed(1)} das)`,timestamp:W,read:!1,data:{employeeName:Te.nombre,employeeRut:Te.rut,saldo:S}}):S<2&&te.push({id:`low-pa-${Te.rut}`,type:"warning",priority:2,category:"saldo",title:"Saldo Bajo PA",message:`${Te.nombre} tiene solo ${S.toFixed(1)} das de permiso`,timestamp:W,read:!1,data:{employeeName:Te.nombre,employeeRut:Te.rut,saldo:S}})}const Be=r.filter(Ue=>Ue.rut===Te.rut&&Ue.solicitudType==="FL").sort((Ue,S)=>mi(Ue,S));if(Be.length>0){const Ue=Be[0],S=Bd(Ue,0);S<=0&&te.push({id:`critical-fl-${Te.rut}`,type:"critical",priority:1,category:"saldo",title:"Feriado Legal Agotado",message:`${Te.nombre} ha utilizado todo su feriado legal`,timestamp:W,read:!1,data:{employeeName:Te.nombre,employeeRut:Te.rut,saldo:S}})}}),Z>=10){const Te=Math.ceil((new Date(pe,11,31).getTime()-W.getTime())/864e5),Ie=e.filter(Be=>r.filter(ve=>ve.rut===Be.rut&&ve.solicitudType==="PA"&&new Date(ve.fechaInicio+"T12:00:00").getFullYear()===pe).reduce((ve,me)=>ve+me.cantidadDias,0)<3);Ie.length>0&&Te<=60&&te.push({id:`year-end-warning-${pe}`,type:"warning",priority:1,category:"deadline",title:"Fin de Ao Prximo",message:`${Ie.length} funcionarios tienen permisos sin usar. Quedan ${Te} das para fin de ao.`,timestamp:W,read:!1,data:{actionType:"view-unused"}})}const ne=r.filter(Te=>{const Ie=Td(Te);return(W.getTime()-Ie)/(1e3*60*60*24)<=1});ne.length>0&&te.push({id:`recent-activity-${W.toDateString()}`,type:"info",priority:3,category:"info",title:"Actividad Reciente",message:`${ne.length} decreto(s) registrados en las ltimas 24 horas`,timestamp:W,read:!1});const ie=new Date(W.getTime()-10080*60*1e3),Ae=r.filter(Te=>Td(Te)>=ie.getTime());if(Ae.length>3){const Te=Ae.reduce((Ie,Be)=>Ie+Be.cantidadDias,0);te.push({id:`weekly-summary-${W.toISOString().split("T")[0]}`,type:"info",priority:3,category:"info",title:"Resumen Semanal",message:`${Ae.length} decretos con ${Te} das otorgados esta semana`,timestamp:W,read:!1})}const ke=r.filter(Te=>{const Ie=new Date(Te.fechaInicio+"T12:00:00");return Ie.getMonth()===Z&&Ie.getFullYear()===pe});ke.length>15&&te.push({id:`high-volume-${Z}-${pe}`,type:"info",priority:3,category:"suggestion",title:"Alto Volumen",message:`Se han registrado ${ke.length} decretos este mes. Considera revisar el dashboard para anlisis.`,timestamp:W,read:!1});const ae=new Set(r.filter(Te=>new Date(Te.fechaInicio+"T12:00:00").getFullYear()===pe).map(Te=>Te.rut)),Re=e.filter(Te=>!ae.has(Te.rut));return Re.length>0&&e.length>3&&te.push({id:`inactive-employees-${pe}`,type:"info",priority:3,category:"suggestion",title:"Funcionarios sin actividad",message:`${Re.length} funcionario(s) sin registros este ao`,timestamp:W,read:!1}),te},[r,e]);K.useEffect(()=>{const te=z();u(W=>{const Z=new Map(W.map(Ae=>[Ae.id,Ae])),ne=te.map(Ae=>{var ke;return{...Ae,read:I.current.has(Ae.id)||(((ke=Z.get(Ae.id))==null?void 0:ke.read)??!1)}}).sort((Ae,ke)=>Ae.priority-ke.priority||ke.timestamp.getTime()-Ae.timestamp.getTime()).slice(0,50),ie=ne.some(Ae=>!Ae.read);return m(ie),ie&&ne.some(Ae=>!Ae.read&&(Ae.type==="critical"||Ae.type==="warning"))&&(N(!0),setTimeout(()=>N(!1),1500)),ne})},[z]);const V=K.useMemo(()=>{switch(b){case"unread":return c.filter(te=>!te.read);case"critical":return c.filter(te=>te.type==="critical"||te.type==="warning");default:return c}},[c,b]),H=K.useMemo(()=>{const te={};return V.forEach(W=>{te[W.category]||(te[W.category]=[]),te[W.category].push(W)}),te},[V]),G=K.useMemo(()=>{const te=c.filter(pe=>pe.type==="critical"&&!pe.read).length,W=c.filter(pe=>pe.type==="warning"&&!pe.read).length,Z=c.filter(pe=>(pe.type==="info"||pe.type==="success")&&!pe.read).length;return{critical:te,warning:W,info:Z,total:te+W+Z}},[c]),M=K.useCallback(te=>{I.current.add(te),xv(I.current),u(W=>{const Z=W.map(pe=>pe.id===te?{...pe,read:!0}:pe);return m(Z.some(pe=>!pe.read)),Z})},[]),j=K.useCallback(()=>{c.forEach(te=>I.current.add(te.id)),xv(I.current),u(te=>te.map(W=>({...W,read:!0}))),m(!1)},[c]),O=K.useCallback(()=>{u([]),m(!1)},[]),F=K.useCallback(te=>{var W;M(te.id),(W=te.data)!=null&&W.employeeRut&&n&&(n(te.data.employeeRut),q())},[M,n]),q=K.useCallback(()=>{A(!0),setTimeout(()=>{o(!1),A(!1)},250)},[]),D=K.useCallback(()=>{o(!0),m(!1)},[]),L=K.useCallback(te=>{E(W=>{const Z=new Set(W);return Z.has(te)?Z.delete(te):Z.add(te),Z})},[]),R=c.filter(te=>!te.read).length,ge=c.filter(te=>te.type==="critical"&&!te.read).length,Q=te=>{switch(te.type){case"critical":return h.jsx(Oo,{className:"w-4 h-4"});case"warning":return h.jsx(jo,{className:"w-4 h-4"});case"success":return h.jsx(Sc,{className:"w-4 h-4"});default:return h.jsx(p0,{className:"w-4 h-4"})}},X=(te,W)=>{if(W)return"bg-slate-50/60 dark:bg-slate-700/20 opacity-70";switch(te.type){case"critical":return"bg-gradient-to-r from-red-50 to-rose-50 dark:from-red-900/20 dark:to-rose-900/20 border-l-[3px] border-l-red-500";case"warning":return"bg-gradient-to-r from-amber-50 to-orange-50 dark:from-amber-900/20 dark:to-orange-900/20 border-l-[3px] border-l-amber-500";case"success":return"bg-gradient-to-r from-emerald-50 to-green-50 dark:from-emerald-900/20 dark:to-green-900/20 border-l-[3px] border-l-emerald-500";default:return"bg-gradient-to-r from-blue-50 to-sky-50 dark:from-blue-900/20 dark:to-sky-900/20 border-l-[3px] border-l-blue-500"}},_e=te=>{switch(te.type){case"critical":return"bg-red-100 dark:bg-red-900/50 text-red-600 dark:text-red-400";case"warning":return"bg-amber-100 dark:bg-amber-900/50 text-amber-600 dark:text-amber-400";case"success":return"bg-emerald-100 dark:bg-emerald-900/50 text-emerald-600 dark:text-emerald-400";default:return"bg-blue-100 dark:bg-blue-900/50 text-blue-600 dark:text-blue-400"}},re=["saldo","deadline","info","suggestion"];return h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:D,className:`relative p-2.5 bg-white dark:bg-slate-800 border text-slate-400 hover:text-amber-500 dark:hover:text-amber-400 rounded-xl transition-all shadow-sm hover:shadow-md active:scale-95 ${ge>0?"border-red-300 dark:border-red-700 shadow-red-100 dark:shadow-red-900/20":"border-slate-200 dark:border-slate-700"} ${k?"notification-bell-ring":""}`,title:"Notificaciones","aria-label":`Notificaciones: ${R} sin leer`,children:[ge>0?h.jsx(sv,{className:"w-4 h-4 sm:w-5 sm:h-5"}):h.jsx(rv,{className:"w-4 h-4 sm:w-5 sm:h-5"}),R>0&&h.jsx("span",{className:`absolute -top-1.5 -right-1.5 min-w-[20px] h-5 px-1 text-white text-[10px] font-black rounded-full flex items-center justify-center shadow-lg ${ge>0?"bg-gradient-to-r from-red-500 to-rose-600 notification-badge-pulse":"bg-gradient-to-r from-amber-400 to-amber-600"}`,children:R>99?"99+":R}),ge>0&&h.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-400 rounded-full animate-ping opacity-40"})]}),a&&h.jsxs("div",{className:`fixed inset-0 z-[200] flex items-start justify-end p-4 sm:p-6 ${y?"notification-backdrop-exit":"notification-backdrop-enter"}`,onClick:q,children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/50 backdrop-blur-md"}),h.jsxs("div",{ref:C,className:`relative w-full max-w-md bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden mt-14 sm:mt-18 flex flex-col max-h-[85vh] ${y?"notification-panel-exit":"notification-panel-enter"}`,onClick:te=>te.stopPropagation(),children:[h.jsxs("div",{className:"relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-slate-900 via-slate-800 to-indigo-950"}),h.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,_var(--tw-gradient-stops))] from-indigo-500/20 via-transparent to-transparent"}),h.jsxs("div",{className:"relative p-5 text-white",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"p-2.5 bg-white/10 backdrop-blur rounded-xl ring-1 ring-white/20",children:h.jsx(sv,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm font-black uppercase tracking-wider",children:"Centro de Alertas"}),h.jsx("p",{className:"text-[10px] font-bold text-white/50 uppercase tracking-wider mt-0.5",children:G.total>0?`${G.total} pendiente${G.total>1?"s":""}`:"Todo al da"})]})]}),h.jsx("button",{onClick:q,className:"p-2 hover:bg-white/10 rounded-xl transition-all active:scale-90","aria-label":"Cerrar notificaciones",children:h.jsx(Gn,{className:"w-5 h-5"})})]}),G.total>0&&h.jsxs("div",{className:"flex gap-2 mb-4",children:[G.critical>0&&h.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-red-500/20 text-red-200 rounded-lg text-[10px] font-black uppercase tracking-wider ring-1 ring-red-500/30",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-red-400 rounded-full animate-pulse"}),G.critical," crtica",G.critical>1?"s":""]}),G.warning>0&&h.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-amber-500/20 text-amber-200 rounded-lg text-[10px] font-black uppercase tracking-wider ring-1 ring-amber-500/30",children:[G.warning," aviso",G.warning>1?"s":""]}),G.info>0&&h.jsxs("span",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-blue-500/20 text-blue-200 rounded-lg text-[10px] font-black uppercase tracking-wider ring-1 ring-blue-500/30",children:[G.info," info"]})]}),h.jsx("div",{className:"flex gap-1.5 bg-white/5 rounded-xl p-1",children:[{id:"all",label:"Todas",count:c.length},{id:"unread",label:"Sin leer",count:R},{id:"critical",label:"Urgentes",count:c.filter(te=>te.type==="critical"||te.type==="warning").length}].map(te=>h.jsxs("button",{onClick:()=>x(te.id),className:`flex-1 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all ${b===te.id?"bg-white text-slate-900 shadow-lg":"text-white/60 hover:text-white hover:bg-white/10"}`,children:[te.label,te.count>0&&h.jsx("span",{className:`ml-1 text-[9px] ${b===te.id?"text-slate-500":"text-white/40"}`,children:te.count})]},te.id))})]})]}),c.length>0&&h.jsxs("div",{className:"px-4 py-2.5 bg-slate-50/80 dark:bg-slate-800/80 backdrop-blur-sm border-b border-slate-100 dark:border-slate-700/50 flex justify-between items-center",children:[h.jsxs("span",{className:"text-[10px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:[V.length," notificacin",V.length!==1?"es":""]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:j,className:"flex items-center gap-1 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider text-slate-500 hover:text-indigo-600 dark:text-slate-400 dark:hover:text-indigo-400 transition-colors rounded-lg hover:bg-indigo-50 dark:hover:bg-indigo-900/20",children:[h.jsx(ac,{className:"w-3 h-3"}),"Leer todas"]}),h.jsxs("button",{onClick:O,className:"flex items-center gap-1 px-2.5 py-1 text-[10px] font-bold uppercase tracking-wider text-slate-400 hover:text-red-500 dark:text-slate-500 dark:hover:text-red-400 transition-colors rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20",children:[h.jsx(jp,{className:"w-3 h-3"}),"Limpiar"]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:V.length>0?h.jsx("div",{className:"p-3 space-y-3",children:re.map(te=>{const W=H[te];if(!(W!=null&&W.length))return null;const Z=i4[te],pe=_.has(te),ne=W.filter(ie=>!ie.read).length;return h.jsxs("div",{className:"notification-group-enter",children:[h.jsxs("button",{onClick:()=>L(te),className:"w-full flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-slate-100/70 dark:hover:bg-slate-700/30 transition-all group",children:[h.jsx("div",{className:`p-1.5 rounded-lg bg-gradient-to-r ${Z.gradient} text-white`,children:Z.icon}),h.jsx("span",{className:"text-[11px] font-black text-slate-600 dark:text-slate-300 uppercase tracking-wider",children:Z.label}),ne>0&&h.jsx("span",{className:"text-[9px] font-black text-white bg-slate-400 dark:bg-slate-600 px-1.5 py-0.5 rounded-full",children:ne}),h.jsx("span",{className:"text-[9px] text-slate-400 dark:text-slate-500 ml-auto mr-1",children:W.length}),h.jsx(h0,{className:`w-3.5 h-3.5 text-slate-400 transition-transform duration-200 ${pe?"":"-rotate-90"}`})]}),pe&&h.jsx("div",{className:"space-y-1.5 mt-1 ml-2",children:W.map((ie,Ae)=>{var ke,ae;return h.jsx("div",{onClick:()=>F(ie),className:`group/item p-3.5 rounded-2xl cursor-pointer transition-all duration-200 hover:shadow-md hover:scale-[1.01] active:scale-[0.99] ${X(ie,ie.read)}`,style:{animationDelay:`${Ae*50}ms`},children:h.jsxs("div",{className:"flex items-start gap-3",children:[h.jsx("div",{className:`p-2 rounded-xl shrink-0 ${_e(ie)} transition-transform group-hover/item:scale-110`,children:Q(ie)}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[h.jsx("p",{className:`text-[11px] font-black uppercase tracking-wider leading-tight ${ie.read?"text-slate-400 dark:text-slate-500":ie.type==="critical"?"text-red-700 dark:text-red-300":ie.type==="warning"?"text-amber-700 dark:text-amber-300":"text-blue-700 dark:text-blue-300"}`,children:ie.title}),h.jsx("div",{className:"flex items-center gap-1.5 shrink-0",children:!ie.read&&h.jsx("span",{className:`w-2 h-2 rounded-full shrink-0 ${ie.type==="critical"?"bg-red-500 animate-pulse":ie.type==="warning"?"bg-amber-500":"bg-blue-500"}`})})]}),h.jsx("p",{className:"text-[11px] font-medium text-slate-600 dark:text-slate-300 mt-1 leading-relaxed",children:ie.message}),h.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[h.jsx("span",{className:"text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-wider",children:r4(ie.timestamp)}),((ke=ie.data)==null?void 0:ke.employeeName)&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"w-0.5 h-0.5 bg-slate-300 dark:bg-slate-600 rounded-full"}),h.jsxs("span",{className:"text-[9px] font-bold text-indigo-500 dark:text-indigo-400 uppercase tracking-wider flex items-center gap-1 group-hover/item:underline",children:[h.jsx(ci,{className:"w-2.5 h-2.5"}),"Ver funcionario",h.jsx(y_,{className:"w-2.5 h-2.5 transition-transform group-hover/item:translate-x-0.5"})]})]}),((ae=ie.data)==null?void 0:ae.saldo)!==void 0&&h.jsxs(h.Fragment,{children:[h.jsx("span",{className:"w-0.5 h-0.5 bg-slate-300 dark:bg-slate-600 rounded-full"}),h.jsxs("span",{className:`text-[9px] font-black uppercase tracking-wider ${ie.data.saldo<=0?"text-red-500 dark:text-red-400":"text-amber-500 dark:text-amber-400"}`,children:[ie.data.saldo.toFixed(1)," das"]})]})]})]})]})},ie.id)})})]},te)})}):h.jsxs("div",{className:"py-20 text-center px-6",children:[h.jsx("div",{className:"w-16 h-16 mx-auto mb-5 rounded-2xl bg-gradient-to-br from-slate-100 to-slate-200 dark:from-slate-700 dark:to-slate-800 flex items-center justify-center",children:h.jsx(rv,{className:"w-8 h-8 text-slate-300 dark:text-slate-600"})}),h.jsx("p",{className:"text-sm font-black text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:b==="all"?"Sin notificaciones":`Sin notificaciones ${b==="unread"?"sin leer":"urgentes"}`}),h.jsxs("p",{className:"text-[11px] text-slate-400 dark:text-slate-600 mt-2 leading-relaxed",children:["Te notificaremos sobre saldos bajos,",h.jsx("br",{}),"fechas importantes y actividad"]})]})}),h.jsx("div",{className:"p-4 border-t border-slate-100 dark:border-slate-700/50 bg-gradient-to-r from-slate-50/80 to-white/80 dark:from-slate-800/50 dark:to-slate-800/30 backdrop-blur-sm",children:h.jsxs("div",{className:"flex items-center justify-center gap-5 text-[9px] font-bold text-slate-400 dark:text-slate-500 uppercase tracking-widest",children:[h.jsxs("span",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"w-2 h-2 bg-gradient-to-r from-red-500 to-rose-500 rounded-full"}),"Crtico"]}),h.jsxs("span",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"w-2 h-2 bg-gradient-to-r from-amber-400 to-orange-500 rounded-full"}),"Aviso"]}),h.jsxs("span",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"w-2 h-2 bg-gradient-to-r from-blue-400 to-cyan-500 rounded-full"}),"Info"]}),h.jsxs("span",{className:"flex items-center gap-1.5",children:[h.jsx("span",{className:"w-2 h-2 bg-gradient-to-r from-emerald-400 to-green-500 rounded-full"}),"OK"]})]})})]})]})]})},l4=({isOpen:r,onClose:e,onConfirm:n,title:a="Confirmar accin",message:o="Ests seguro de que deseas continuar?",confirmText:c="Confirmar",cancelText:u="Cancelar",variant:f="danger"})=>{const m=K.useRef(null),b=K.useRef(null),x=K.useRef(null);K.useEffect(()=>(r&&(x.current=document.activeElement,setTimeout(()=>{var C;(C=b.current)==null||C.focus()},50),document.body.style.overflow="hidden"),()=>{document.body.style.overflow="",x.current&&!r&&x.current.focus()}),[r]);const _=K.useCallback(C=>{if(C.key==="Escape"){e();return}if(C.key==="Tab"&&m.current){const I=m.current.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'),z=I[0],V=I[I.length-1];C.shiftKey&&document.activeElement===z?(C.preventDefault(),V==null||V.focus()):!C.shiftKey&&document.activeElement===V&&(C.preventDefault(),z==null||z.focus())}},[e]),E=K.useCallback(()=>{n(),e()},[n,e]),y=K.useCallback(C=>{C.target===C.currentTarget&&e()},[e]);if(!r)return null;const k={danger:{icon:T_,iconBg:"bg-red-100 dark:bg-red-900/50",iconColor:"text-red-600 dark:text-red-400",confirmBg:"bg-red-600 hover:bg-red-700 focus:ring-red-500"},warning:{icon:jo,iconBg:"bg-amber-100 dark:bg-amber-900/50",iconColor:"text-amber-600 dark:text-amber-400",confirmBg:"bg-amber-600 hover:bg-amber-700 focus:ring-amber-500"},info:{icon:jo,iconBg:"bg-blue-100 dark:bg-blue-900/50",iconColor:"text-blue-600 dark:text-blue-400",confirmBg:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"}}[f],N=k.icon;return h.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",onClick:y,onKeyDown:_,role:"dialog","aria-modal":"true","aria-labelledby":"confirm-modal-title","aria-describedby":"confirm-modal-description",children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),h.jsxs("div",{ref:m,className:"relative w-full max-w-md bg-white dark:bg-slate-800 rounded-2xl shadow-2xl overflow-hidden animate-scale-in",children:[h.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors","aria-label":"Cerrar modal",children:h.jsx(Gn,{className:"w-5 h-5"})}),h.jsx("div",{className:"p-6 pt-8",children:h.jsxs("div",{className:"flex flex-col items-center text-center",children:[h.jsx("div",{className:`w-16 h-16 ${k.iconBg} rounded-full flex items-center justify-center mb-4`,children:h.jsx(N,{className:`w-8 h-8 ${k.iconColor}`})}),h.jsx("h2",{id:"confirm-modal-title",className:"text-xl font-bold text-slate-900 dark:text-white mb-2",children:a}),h.jsx("p",{id:"confirm-modal-description",className:"text-sm text-slate-600 dark:text-slate-400 mb-6",children:o}),h.jsxs("div",{className:"flex gap-3 w-full",children:[h.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 bg-slate-100 dark:bg-slate-700 text-slate-700 dark:text-slate-200 font-bold rounded-xl hover:bg-slate-200 dark:hover:bg-slate-600 transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2 dark:focus:ring-offset-slate-800",children:u}),h.jsx("button",{ref:b,onClick:E,className:`flex-1 px-4 py-3 ${k.confirmBg} text-white font-bold rounded-xl transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 active:scale-95`,children:c})]})]})})]})]})},c4=Qs.memo(l4);function $d(r,e){var n={};for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&e.indexOf(a)<0&&(n[a]=r[a]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,a=Object.getOwnPropertySymbols(r);o<a.length;o++)e.indexOf(a[o])<0&&Object.prototype.propertyIsEnumerable.call(r,a[o])&&(n[a[o]]=r[a[o]]);return n}function u4(r,e,n,a){function o(c){return c instanceof n?c:new n(function(u){u(c)})}return new(n||(n=Promise))(function(c,u){function f(x){try{b(a.next(x))}catch(_){u(_)}}function m(x){try{b(a.throw(x))}catch(_){u(_)}}function b(x){x.done?c(x.value):o(x.value).then(f,m)}b((a=a.apply(r,e||[])).next())})}const d4=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class b0 extends Error{constructor(e,n="FunctionsError",a){super(e),this.name=n,this.context=a}}class h4 extends b0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class wv extends b0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class kv extends b0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Op;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(Op||(Op={}));class f4{constructor(e,{headers:n={},customFetch:a,region:o=Op.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=d4(a)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return u4(this,arguments,void 0,function*(n,a={}){var o;let c,u;try{const{headers:f,method:m,body:b,signal:x,timeout:_}=a;let E={},{region:y}=a;y||(y=this.region);const A=new URL(`${this.url}/${n}`);y&&y!=="any"&&(E["x-region"]=y,A.searchParams.set("forceFunctionRegion",y));let k;b&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",k=b):typeof b=="string"?(E["Content-Type"]="text/plain",k=b):typeof FormData<"u"&&b instanceof FormData?k=b:(E["Content-Type"]="application/json",k=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?k=JSON.stringify(b):k=b;let N=x;_&&(u=new AbortController,c=setTimeout(()=>u.abort(),_),x?(N=u.signal,x.addEventListener("abort",()=>u.abort())):N=u.signal);const C=yield this.fetch(A.toString(),{method:m||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),f),body:k,signal:N}).catch(H=>{throw new h4(H)}),I=C.headers.get("x-relay-error");if(I&&I==="true")throw new wv(C);if(!C.ok)throw new kv(C);let z=((o=C.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),V;return z==="application/json"?V=yield C.json():z==="application/octet-stream"||z==="application/pdf"?V=yield C.blob():z==="text/event-stream"?V=C:z==="multipart/form-data"?V=yield C.formData():V=yield C.text(),{data:V,error:null,response:C}}catch(f){return{data:null,error:f,response:f instanceof kv||f instanceof wv?f.context:void 0}}finally{c&&clearTimeout(c)}})}}var p4=class extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}},m4=class{constructor(r){var e,n;this.shouldThrowOnError=!1,this.method=r.method,this.url=r.url,this.headers=new Headers(r.headers),this.schema=r.schema,this.body=r.body,this.shouldThrowOnError=(e=r.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=r.signal,this.isMaybeSingle=(n=r.isMaybeSingle)!==null&&n!==void 0?n:!1,r.fetch?this.fetch=r.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(r,e){return this.headers=new Headers(this.headers),this.headers.set(r,e),this}then(r,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let o=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{let u=null,f=null,m=null,b=c.status,x=c.statusText;if(c.ok){var _,E;if(n.method!=="HEAD"){var y;const C=await c.text();C===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((y=n.headers.get("Accept"))===null||y===void 0)&&y.includes("application/vnd.pgrst.plan+text"))?f=C:f=JSON.parse(C))}const k=(_=n.headers.get("Prefer"))===null||_===void 0?void 0:_.match(/count=(exact|planned|estimated)/),N=(E=c.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");k&&N&&N.length>1&&(m=parseInt(N[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(f)&&(f.length>1?(u={code:"PGRST116",details:`Results contain ${f.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},f=null,m=null,b=406,x="Not Acceptable"):f.length===1?f=f[0]:f=null)}else{var A;const k=await c.text();try{u=JSON.parse(k),Array.isArray(u)&&c.status===404&&(f=[],u=null,b=200,x="OK")}catch{c.status===404&&k===""?(b=204,x="No Content"):u={message:k}}if(u&&n.isMaybeSingle&&(!(u==null||(A=u.details)===null||A===void 0)&&A.includes("0 rows"))&&(u=null,b=200,x="OK"),u&&n.shouldThrowOnError)throw new p4(u)}return{error:u,data:f,count:m,status:b,statusText:x}});return this.shouldThrowOnError||(o=o.catch(c=>{var u;let f="";const m=c==null?void 0:c.cause;if(m){var b,x,_,E;const A=(b=m==null?void 0:m.message)!==null&&b!==void 0?b:"",k=(x=m==null?void 0:m.code)!==null&&x!==void 0?x:"";f=`${(_=c==null?void 0:c.name)!==null&&_!==void 0?_:"FetchError"}: ${c==null?void 0:c.message}`,f+=`

Caused by: ${(E=m==null?void 0:m.name)!==null&&E!==void 0?E:"Error"}: ${A}`,k&&(f+=` (${k})`),m!=null&&m.stack&&(f+=`
${m.stack}`)}else{var y;f=(y=c==null?void 0:c.stack)!==null&&y!==void 0?y:""}return{error:{message:`${(u=c==null?void 0:c.name)!==null&&u!==void 0?u:"FetchError"}: ${c==null?void 0:c.message}`,details:f,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(r,e)}returns(){return this}overrideTypes(){return this}},g4=class extends m4{select(r){let e=!1;const n=(r??"*").split("").map(a=>/\s/.test(a)&&!e?"":(a==='"'&&(e=!e),a)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(r,{ascending:e=!0,nullsFirst:n,foreignTable:a,referencedTable:o=a}={}){const c=o?`${o}.order`:"order",u=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${u?`${u},`:""}${r}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(r,{foreignTable:e,referencedTable:n=e}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${r}`),this}range(r,e,{foreignTable:n,referencedTable:a=n}={}){const o=typeof a>"u"?"offset":`${a}.offset`,c=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(o,`${r}`),this.url.searchParams.set(c,`${e-r+1}`),this}abortSignal(r){return this.signal=r,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:r=!1,verbose:e=!1,settings:n=!1,buffers:a=!1,wal:o=!1,format:c="text"}={}){var u;const f=[r?"analyze":null,e?"verbose":null,n?"settings":null,a?"buffers":null,o?"wal":null].filter(Boolean).join("|"),m=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${c}; for="${m}"; options=${f};`),c==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(r){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${r}`),this}};const Sv=new RegExp("[,()]");var yo=class extends g4{eq(r,e){return this.url.searchParams.append(r,`eq.${e}`),this}neq(r,e){return this.url.searchParams.append(r,`neq.${e}`),this}gt(r,e){return this.url.searchParams.append(r,`gt.${e}`),this}gte(r,e){return this.url.searchParams.append(r,`gte.${e}`),this}lt(r,e){return this.url.searchParams.append(r,`lt.${e}`),this}lte(r,e){return this.url.searchParams.append(r,`lte.${e}`),this}like(r,e){return this.url.searchParams.append(r,`like.${e}`),this}likeAllOf(r,e){return this.url.searchParams.append(r,`like(all).{${e.join(",")}}`),this}likeAnyOf(r,e){return this.url.searchParams.append(r,`like(any).{${e.join(",")}}`),this}ilike(r,e){return this.url.searchParams.append(r,`ilike.${e}`),this}ilikeAllOf(r,e){return this.url.searchParams.append(r,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(r,e){return this.url.searchParams.append(r,`ilike(any).{${e.join(",")}}`),this}regexMatch(r,e){return this.url.searchParams.append(r,`match.${e}`),this}regexIMatch(r,e){return this.url.searchParams.append(r,`imatch.${e}`),this}is(r,e){return this.url.searchParams.append(r,`is.${e}`),this}isDistinct(r,e){return this.url.searchParams.append(r,`isdistinct.${e}`),this}in(r,e){const n=Array.from(new Set(e)).map(a=>typeof a=="string"&&Sv.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`in.(${n})`),this}notIn(r,e){const n=Array.from(new Set(e)).map(a=>typeof a=="string"&&Sv.test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(r,`not.in.(${n})`),this}contains(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cs.{${e.join(",")}}`):this.url.searchParams.append(r,`cs.${JSON.stringify(e)}`),this}containedBy(r,e){return typeof e=="string"?this.url.searchParams.append(r,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(r,`cd.{${e.join(",")}}`):this.url.searchParams.append(r,`cd.${JSON.stringify(e)}`),this}rangeGt(r,e){return this.url.searchParams.append(r,`sr.${e}`),this}rangeGte(r,e){return this.url.searchParams.append(r,`nxl.${e}`),this}rangeLt(r,e){return this.url.searchParams.append(r,`sl.${e}`),this}rangeLte(r,e){return this.url.searchParams.append(r,`nxr.${e}`),this}rangeAdjacent(r,e){return this.url.searchParams.append(r,`adj.${e}`),this}overlaps(r,e){return typeof e=="string"?this.url.searchParams.append(r,`ov.${e}`):this.url.searchParams.append(r,`ov.{${e.join(",")}}`),this}textSearch(r,e,{config:n,type:a}={}){let o="";a==="plain"?o="pl":a==="phrase"?o="ph":a==="websearch"&&(o="w");const c=n===void 0?"":`(${n})`;return this.url.searchParams.append(r,`${o}fts${c}.${e}`),this}match(r){return Object.entries(r).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(r,e,n){return this.url.searchParams.append(r,`not.${e}.${n}`),this}or(r,{foreignTable:e,referencedTable:n=e}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${r})`),this}filter(r,e,n){return this.url.searchParams.append(r,`${e}.${n}`),this}},b4=class{constructor(r,{headers:e={},schema:n,fetch:a}){this.url=r,this.headers=new Headers(e),this.schema=n,this.fetch=a}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(r,e){const{head:n=!1,count:a}=e??{},o=n?"HEAD":"GET";let c=!1;const u=(r??"*").split("").map(b=>/\s/.test(b)&&!c?"":(b==='"'&&(c=!c),b)).join(""),{url:f,headers:m}=this.cloneRequestState();return f.searchParams.set("select",u),a&&m.append("Prefer",`count=${a}`),new yo({method:o,url:f,headers:m,schema:this.schema,fetch:this.fetch})}insert(r,{count:e,defaultToNull:n=!0}={}){var a;const o="POST",{url:c,headers:u}=this.cloneRequestState();if(e&&u.append("Prefer",`count=${e}`),n||u.append("Prefer","missing=default"),Array.isArray(r)){const f=r.reduce((m,b)=>m.concat(Object.keys(b)),[]);if(f.length>0){const m=[...new Set(f)].map(b=>`"${b}"`);c.searchParams.set("columns",m.join(","))}}return new yo({method:o,url:c,headers:u,schema:this.schema,body:r,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(r,{onConflict:e,ignoreDuplicates:n=!1,count:a,defaultToNull:o=!0}={}){var c;const u="POST",{url:f,headers:m}=this.cloneRequestState();if(m.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&f.searchParams.set("on_conflict",e),a&&m.append("Prefer",`count=${a}`),o||m.append("Prefer","missing=default"),Array.isArray(r)){const b=r.reduce((x,_)=>x.concat(Object.keys(_)),[]);if(b.length>0){const x=[...new Set(b)].map(_=>`"${_}"`);f.searchParams.set("columns",x.join(","))}}return new yo({method:u,url:f,headers:m,schema:this.schema,body:r,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}update(r,{count:e}={}){var n;const a="PATCH",{url:o,headers:c}=this.cloneRequestState();return e&&c.append("Prefer",`count=${e}`),new yo({method:a,url:o,headers:c,schema:this.schema,body:r,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:r}={}){var e;const n="DELETE",{url:a,headers:o}=this.cloneRequestState();return r&&o.append("Prefer",`count=${r}`),new yo({method:n,url:a,headers:o,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},y4=class M_{constructor(e,{headers:n={},schema:a,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=a,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new b4(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new M_(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:a=!1,get:o=!1,count:c}={}){var u;let f;const m=new URL(`${this.url}/rpc/${e}`);let b;const x=y=>y!==null&&typeof y=="object"&&(!Array.isArray(y)||y.some(x)),_=a&&Object.values(n).some(x);_?(f="POST",b=n):a||o?(f=a?"HEAD":"GET",Object.entries(n).filter(([y,A])=>A!==void 0).map(([y,A])=>[y,Array.isArray(A)?`{${A.join(",")}}`:`${A}`]).forEach(([y,A])=>{m.searchParams.append(y,A)})):(f="POST",b=n);const E=new Headers(this.headers);return _?E.set("Prefer",c?`count=${c},return=minimal`:"return=minimal"):c&&E.set("Prefer",`count=${c}`),new yo({method:f,url:m,headers:E,schema:this.schemaName,body:b,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};class v4{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const n=globalThis.process;if(n){const a=n.versions;if(a&&a.node){const o=a.node,c=parseInt(o.replace(/^v/,"").split(".")[0]);return c>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${c} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${c} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const a=this.getWebSocketConstructor();return new a(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const _4="2.93.3",x4=`realtime-js/${_4}`,w4="1.0.0",P_="2.0.0",Ev=P_,Ip=1e4,k4=1e3,S4=100;var ma;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(ma||(ma={}));var tn;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(tn||(tn={}));var ws;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(ws||(ws={}));var Lp;(function(r){r.websocket="websocket"})(Lp||(Lp={}));var ni;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(ni||(ni={}));class E4{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let a=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(a))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,a;const o=(a=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&a!==void 0?a:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,a;const o=(a=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&a!==void 0?a:{},u=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,u)}_encodeUserBroadcastPush(e,n,a){var o,c;const u=e.topic,f=(o=e.ref)!==null&&o!==void 0?o:"",m=(c=e.join_ref)!==null&&c!==void 0?c:"",b=e.payload.event,x=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},_=Object.keys(x).length===0?"":JSON.stringify(x);if(m.length>255)throw new Error(`joinRef length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`topic length ${u.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`metadata length ${_.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+m.length+f.length+u.length+b.length+_.length,y=new ArrayBuffer(this.HEADER_LENGTH+E);let A=new DataView(y),k=0;A.setUint8(k++,this.KINDS.userBroadcastPush),A.setUint8(k++,m.length),A.setUint8(k++,f.length),A.setUint8(k++,u.length),A.setUint8(k++,b.length),A.setUint8(k++,_.length),A.setUint8(k++,n),Array.from(m,C=>A.setUint8(k++,C.charCodeAt(0))),Array.from(f,C=>A.setUint8(k++,C.charCodeAt(0))),Array.from(u,C=>A.setUint8(k++,C.charCodeAt(0))),Array.from(b,C=>A.setUint8(k++,C.charCodeAt(0))),Array.from(_,C=>A.setUint8(k++,C.charCodeAt(0)));var N=new Uint8Array(y.byteLength+a.byteLength);return N.set(new Uint8Array(y),0),N.set(new Uint8Array(a),y.byteLength),N.buffer}decode(e,n){if(this._isArrayBuffer(e)){let a=this._binaryDecode(e);return n(a)}if(typeof e=="string"){const a=JSON.parse(e),[o,c,u,f,m]=a;return n({join_ref:o,ref:c,topic:u,event:f,payload:m})}return n({})}_binaryDecode(e){const n=new DataView(e),a=n.getUint8(0),o=new TextDecoder;switch(a){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,a){const o=n.getUint8(1),c=n.getUint8(2),u=n.getUint8(3),f=n.getUint8(4);let m=this.HEADER_LENGTH+4;const b=a.decode(e.slice(m,m+o));m=m+o;const x=a.decode(e.slice(m,m+c));m=m+c;const _=a.decode(e.slice(m,m+u));m=m+u;const E=e.slice(m,e.byteLength),y=f===this.JSON_ENCODING?JSON.parse(a.decode(E)):E,A={type:this.BROADCAST_EVENT,event:x,payload:y};return u>0&&(A.meta=JSON.parse(_)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:A}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([a])=>n.includes(a)))}}class z_{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Nt;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(Nt||(Nt={}));const Av=(r,e,n={})=>{var a;const o=(a=n.skipTypes)!==null&&a!==void 0?a:[];return e?Object.keys(e).reduce((c,u)=>(c[u]=A4(u,r,e,o),c),{}):{}},A4=(r,e,n,a)=>{const o=e.find(f=>f.name===r),c=o==null?void 0:o.type,u=n[r];return c&&!a.includes(c)?B_(c,u):Up(u)},B_=(r,e)=>{if(r.charAt(0)==="_"){const n=r.slice(1,r.length);return j4(e,n)}switch(r){case Nt.bool:return T4(e);case Nt.float4:case Nt.float8:case Nt.int2:case Nt.int4:case Nt.int8:case Nt.numeric:case Nt.oid:return N4(e);case Nt.json:case Nt.jsonb:return C4(e);case Nt.timestamp:return R4(e);case Nt.abstime:case Nt.date:case Nt.daterange:case Nt.int4range:case Nt.int8range:case Nt.money:case Nt.reltime:case Nt.text:case Nt.time:case Nt.timestamptz:case Nt.timetz:case Nt.tsrange:case Nt.tstzrange:return Up(e);default:return Up(e)}},Up=r=>r,T4=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},N4=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},C4=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch{return r}return r},j4=(r,e)=>{if(typeof r!="string")return r;const n=r.length-1,a=r[n];if(r[0]==="{"&&a==="}"){let c;const u=r.slice(1,n);try{c=JSON.parse("["+u+"]")}catch{c=u?u.split(","):[]}return c.map(f=>B_(e,f))}return r},R4=r=>typeof r=="string"?r.replace(" ","T"):r,$_=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class cp{constructor(e,n,a={},o=Ip){this.channel=e,this.event=n,this.payload=a,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var a;return this._hasReceived(e)&&n((a=this.receivedResp)===null||a===void 0?void 0:a.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(a=>a.status===e).forEach(a=>a.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Tv;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(Tv||(Tv={}));class Ql{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const a=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(a.state,{},o=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ql.syncState(this.state,o,c,u),this.pendingDiffs.forEach(m=>{this.state=Ql.syncDiff(this.state,m,c,u)}),this.pendingDiffs=[],f()}),this.channel._on(a.diff,{},o=>{const{onJoin:c,onLeave:u,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ql.syncDiff(this.state,o,c,u),f())}),this.onJoin((o,c,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:c,newPresences:u})}),this.onLeave((o,c,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:c,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,a,o){const c=this.cloneDeep(e),u=this.transformState(n),f={},m={};return this.map(c,(b,x)=>{u[b]||(m[b]=x)}),this.map(u,(b,x)=>{const _=c[b];if(_){const E=x.map(N=>N.presence_ref),y=_.map(N=>N.presence_ref),A=x.filter(N=>y.indexOf(N.presence_ref)<0),k=_.filter(N=>E.indexOf(N.presence_ref)<0);A.length>0&&(f[b]=A),k.length>0&&(m[b]=k)}else f[b]=x}),this.syncDiff(c,{joins:f,leaves:m},a,o)}static syncDiff(e,n,a,o){const{joins:c,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return a||(a=()=>{}),o||(o=()=>{}),this.map(c,(f,m)=>{var b;const x=(b=e[f])!==null&&b!==void 0?b:[];if(e[f]=this.cloneDeep(m),x.length>0){const _=e[f].map(y=>y.presence_ref),E=x.filter(y=>_.indexOf(y.presence_ref)<0);e[f].unshift(...E)}a(f,x,m)}),this.map(u,(f,m)=>{let b=e[f];if(!b)return;const x=m.map(_=>_.presence_ref);b=b.filter(_=>x.indexOf(_.presence_ref)<0),e[f]=b,o(f,b,m),b.length===0&&delete e[f]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(a=>n(a,e[a]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,a)=>{const o=e[a];return"metas"in o?n[a]=o.metas.map(c=>(c.presence_ref=c.phx_ref,delete c.phx_ref,delete c.phx_ref_prev,c)):n[a]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nv;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Nv||(Nv={}));var ec;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(ec||(ec={}));var Sr;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Sr||(Sr={}));class wo{constructor(e,n={config:{}},a){var o,c;if(this.topic=e,this.params=n,this.socket=a,this.bindings={},this.state=tn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new cp(this,ws.join,this.params,this.timeout),this.rejoinTimer=new z_(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tn.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=tn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ws.reply,{},(u,f)=>{this._trigger(this._replyEventName(f),u)}),this.presence=new Ql(this),this.broadcastEndpointURL=$_(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((c=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||c===void 0)&&c.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var a,o,c;if(this.socket.isConnected()||this.socket.connect(),this.state==tn.closed){const{config:{broadcast:u,presence:f,private:m}}=this.params,b=(o=(a=this.bindings.postgres_changes)===null||a===void 0?void 0:a.map(y=>y.filter))!==null&&o!==void 0?o:[],x=!!this.bindings[ec.PRESENCE]&&this.bindings[ec.PRESENCE].length>0||((c=this.params.config.presence)===null||c===void 0?void 0:c.enabled)===!0,_={},E={broadcast:u,presence:Object.assign(Object.assign({},f),{enabled:x}),postgres_changes:b,private:m};this.socket.accessTokenValue&&(_.access_token=this.socket.accessTokenValue),this._onError(y=>e==null?void 0:e(Sr.CHANNEL_ERROR,y)),this._onClose(()=>e==null?void 0:e(Sr.CLOSED)),this.updateJoinPayload(Object.assign({config:E},_)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var A;if(this.socket._isManualToken()||this.socket.setAuth(),y===void 0){e==null||e(Sr.SUBSCRIBED);return}else{const k=this.bindings.postgres_changes,N=(A=k==null?void 0:k.length)!==null&&A!==void 0?A:0,C=[];for(let I=0;I<N;I++){const z=k[I],{filter:{event:V,schema:H,table:G,filter:M}}=z,j=y&&y[I];if(j&&j.event===V&&wo.isFilterValueEqual(j.schema,H)&&wo.isFilterValueEqual(j.table,G)&&wo.isFilterValueEqual(j.filter,M))C.push(Object.assign(Object.assign({},z),{id:j.id}));else{this.unsubscribe(),this.state=tn.errored,e==null||e(Sr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,e&&e(Sr.SUBSCRIBED);return}}).receive("error",y=>{this.state=tn.errored,e==null||e(Sr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Sr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,a){return this.state===tn.joined&&e===ec.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,a)}async httpSend(e,n,a={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);const u={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=a.timeout)!==null&&o!==void 0?o:this.timeout);if(f.status===202)return{success:!0};let m=f.statusText;try{const b=await f.json();m=b.error||b.message||m}catch{}return Promise.reject(new Error(m))}async send(e,n={}){var a,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:c,payload:u}=e,f={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(f.Authorization=`Bearer ${this.socket.accessTokenValue}`);const m={method:"POST",headers:f,body:JSON.stringify({messages:[{topic:this.subTopic,event:c,payload:u,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,m,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);return await((o=b.body)===null||o===void 0?void 0:o.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(c=>{var u,f,m;const b=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((m=(f=(u=this.params)===null||u===void 0?void 0:u.config)===null||f===void 0?void 0:f.broadcast)===null||m===void 0)&&m.ack)&&c("ok"),b.receive("ok",()=>c("ok")),b.receive("error",()=>c("error")),b.receive("timeout",()=>c("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=tn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ws.close,"leave",this._joinRef())};this.joinPush.destroy();let a=null;return new Promise(o=>{a=new cp(this,ws.leave,{},e),a.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),a.send(),this._canPush()||a.trigger("ok",{})}).finally(()=>{a==null||a.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tn.closed,this.bindings={}}async _fetchWithTimeout(e,n,a){const o=new AbortController,c=setTimeout(()=>o.abort(),a),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(c),u}_push(e,n,a=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new cp(this,e,n,a);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>S4){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,a){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,a){var o,c;const u=e.toLocaleLowerCase(),{close:f,error:m,leave:b,join:x}=ws;if(a&&[f,m,b,x].indexOf(u)>=0&&a!==this._joinRef())return;let E=this._onMessage(u,n,a);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(y=>{var A,k,N;return((A=y.filter)===null||A===void 0?void 0:A.event)==="*"||((N=(k=y.filter)===null||k===void 0?void 0:k.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===u}).map(y=>y.callback(E,a)):(c=this.bindings[u])===null||c===void 0||c.filter(y=>{var A,k,N,C,I,z;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in y){const V=y.id,H=(A=y.filter)===null||A===void 0?void 0:A.event;return V&&((k=n.ids)===null||k===void 0?void 0:k.includes(V))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const V=(I=(C=y==null?void 0:y.filter)===null||C===void 0?void 0:C.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return V==="*"||V===((z=n==null?void 0:n.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return y.type.toLocaleLowerCase()===u}).map(y=>{if(typeof E=="object"&&"ids"in E){const A=E.data,{schema:k,table:N,commit_timestamp:C,type:I,errors:z}=A;E=Object.assign(Object.assign({},{schema:k,table:N,commit_timestamp:C,eventType:I,new:{},old:{},errors:z}),this._getPayloadRecords(A))}y.callback(E,a)})}_isClosed(){return this.state===tn.closed}_isJoined(){return this.state===tn.joined}_isJoining(){return this.state===tn.joining}_isLeaving(){return this.state===tn.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,a){const o=e.toLocaleLowerCase(),c={type:o,filter:n,callback:a};return this.bindings[o]?this.bindings[o].push(c):this.bindings[o]=[c],this}_off(e,n){const a=e.toLocaleLowerCase();return this.bindings[a]&&(this.bindings[a]=this.bindings[a].filter(o=>{var c;return!(((c=o.type)===null||c===void 0?void 0:c.toLocaleLowerCase())===a&&wo.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(e[a]!==n[a])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ws.close,{},e)}_onError(e){this._on(ws.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tn.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=Av(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=Av(e.columns,e.old_record)),n}}const up=()=>{},sd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},D4=[1e3,2e3,5e3,1e4],O4=1e4,I4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class L4{constructor(e,n){var a;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ip,this.transport=null,this.heartbeatIntervalMs=sd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=up,this.ref=0,this.reconnectTimer=null,this.vsn=Ev,this.logger=up,this.conn=null,this.sendBuffer=[],this.serializer=new E4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=o=>o?(...c)=>o(...c):(...c)=>fetch(...c),!(!((a=n==null?void 0:n.params)===null||a===void 0)&&a.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Lp.websocket}`,this.httpEndpoint=$_(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=v4.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const a=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(a),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,a){this.logger(e,n,a)}connectionState(){switch(this.conn&&this.conn.readyState){case ma.connecting:return ni.Connecting;case ma.open:return ni.Open;case ma.closing:return ni.Closing;default:return ni.Closed}}isConnected(){return this.connectionState()===ni.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const a=`realtime:${e}`,o=this.getChannels().find(c=>c.topic===a);if(o)return o;{const c=new wo(`realtime:${e}`,n,this);return this.channels.push(c),c}}push(e){const{topic:n,event:a,payload:o,ref:c}=e,u=()=>{this.encode(e,f=>{var m;(m=this.conn)===null||m===void 0||m.send(f)})};this.log("push",`${n} ${a} (${c})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(k4,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},sd.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(a=>a.topic===e&&(a._isJoined()||a._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",b)}catch(x){this.log("error","error in heartbeat callback",x)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:a,event:o,payload:c,ref:u}=n,f=u?`(${u})`:"",m=c.status||"";this.log("receive",`${m} ${a} ${o} ${f}`.trim(),c),this.channels.filter(b=>b._isMember(a)).forEach(b=>b._trigger(o,c,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===ma.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ma.open||this.conn.readyState===ma.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(e=>e._trigger(ws.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const a=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${a}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const a=new Blob([I4],{type:"application/javascript"});n=URL.createObjectURL(a)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,a=!1;if(e)n=e,a=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;a?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const c={access_token:n,version:x4};n&&o.updateJoinPayload(c),o.joinedOnce&&o._isJoined()&&o._push(ws.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(a=>{try{a(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(a){this.log("error",`error triggering ${e} callbacks`,a)}}_setupReconnectionTimer(){this.reconnectTimer=new z_(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,a,o,c,u,f,m,b,x,_,E,y;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(a=e==null?void 0:e.timeout)!==null&&a!==void 0?a:Ip,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:sd.HEARTBEAT_INTERVAL,this.worker=(c=e==null?void 0:e.worker)!==null&&c!==void 0?c:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(f=e==null?void 0:e.heartbeatCallback)!==null&&f!==void 0?f:up,this.vsn=(m=e==null?void 0:e.vsn)!==null&&m!==void 0?m:Ev,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=e==null?void 0:e.reconnectAfterMs)!==null&&b!==void 0?b:(A=>D4[A-1]||O4),this.vsn){case w4:this.encode=(x=e==null?void 0:e.encode)!==null&&x!==void 0?x:((A,k)=>k(JSON.stringify(A))),this.decode=(_=e==null?void 0:e.decode)!==null&&_!==void 0?_:((A,k)=>k(JSON.parse(A)));break;case P_:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(y=e==null?void 0:e.decode)!==null&&y!==void 0?y:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var lc=class extends Error{constructor(r,e){var n;super(r),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function U4(r,e,n){const a=new URL(e,r);if(n)for(const[o,c]of Object.entries(n))c!==void 0&&a.searchParams.set(o,c);return a.toString()}async function M4(r){return!r||r.type==="none"?{}:r.type==="bearer"?{Authorization:`Bearer ${r.token}`}:r.type==="header"?{[r.name]:r.value}:r.type==="custom"?await r.getHeaders():{}}function P4(r){const e=r.fetchImpl??globalThis.fetch;return{async request({method:n,path:a,query:o,body:c,headers:u}){const f=U4(r.baseUrl,a,o),m=await M4(r.auth),b=await e(f,{method:n,headers:{...c?{"Content-Type":"application/json"}:{},...m,...u},body:c?JSON.stringify(c):void 0}),x=await b.text(),_=(b.headers.get("content-type")||"").includes("application/json"),E=_&&x?JSON.parse(x):x;if(!b.ok){const y=_?E:void 0,A=y==null?void 0:y.error;throw new lc((A==null?void 0:A.message)??`Request failed with status ${b.status}`,{status:b.status,icebergType:A==null?void 0:A.type,icebergCode:A==null?void 0:A.code,details:y})}return{status:b.status,headers:b.headers,data:E}}}}function rd(r){return r.join("")}var z4=class{constructor(r,e=""){this.client=r,this.prefix=e}async listNamespaces(r){const e=r?{parent:rd(r.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(a=>({namespace:a}))}async createNamespace(r,e){const n={namespace:r.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${rd(r.namespace)}`})}async loadNamespaceMetadata(r){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${rd(r.namespace)}`})).data.properties}}async namespaceExists(r){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${rd(r.namespace)}`}),!0}catch(e){if(e instanceof lc&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(r,e){try{return await this.createNamespace(r,e)}catch(n){if(n instanceof lc&&n.status===409)return;throw n}}};function uo(r){return r.join("")}var B4=class{constructor(r,e="",n){this.client=r,this.prefix=e,this.accessDelegation=n}async listTables(r){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${uo(r.namespace)}/tables`})).data.identifiers}async createTable(r,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${uo(r.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(r,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${uo(r.namespace)}/tables/${r.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(r,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${uo(r.namespace)}/tables/${r.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(r){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${uo(r.namespace)}/tables/${r.name}`,headers:e})).data.metadata}async tableExists(r){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${uo(r.namespace)}/tables/${r.name}`,headers:e}),!0}catch(n){if(n instanceof lc&&n.status===404)return!1;throw n}}async createTableIfNotExists(r,e){try{return await this.createTable(r,e)}catch(n){if(n instanceof lc&&n.status===409)return await this.loadTable({namespace:r.namespace,name:e.name});throw n}}},$4=class{constructor(r){var a;let e="v1";r.catalogName&&(e+=`/${r.catalogName}`);const n=r.baseUrl.endsWith("/")?r.baseUrl:`${r.baseUrl}/`;this.client=P4({baseUrl:n,auth:r.auth,fetchImpl:r.fetch}),this.accessDelegation=(a=r.accessDelegation)==null?void 0:a.join(","),this.namespaceOps=new z4(this.client,e),this.tableOps=new B4(this.client,e,this.accessDelegation)}async listNamespaces(r){return this.namespaceOps.listNamespaces(r)}async createNamespace(r,e){return this.namespaceOps.createNamespace(r,e)}async dropNamespace(r){await this.namespaceOps.dropNamespace(r)}async loadNamespaceMetadata(r){return this.namespaceOps.loadNamespaceMetadata(r)}async listTables(r){return this.tableOps.listTables(r)}async createTable(r,e){return this.tableOps.createTable(r,e)}async updateTable(r,e){return this.tableOps.updateTable(r,e)}async dropTable(r,e){await this.tableOps.dropTable(r,e)}async loadTable(r){return this.tableOps.loadTable(r)}async namespaceExists(r){return this.namespaceOps.namespaceExists(r)}async tableExists(r){return this.tableOps.tableExists(r)}async createNamespaceIfNotExists(r,e){return this.namespaceOps.createNamespaceIfNotExists(r,e)}async createTableIfNotExists(r,e){return this.tableOps.createTableIfNotExists(r,e)}},Fd=class extends Error{constructor(r,e="storage",n,a){super(r),this.__isStorageError=!0,this.namespace=e,this.name=e==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=a}};function Vd(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var ad=class extends Fd{constructor(r,e,n,a="storage"){super(r,a,e,n),this.name=a==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},F_=class extends Fd{constructor(r,e,n="storage"){super(r,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=e}};const F4=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),V4=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},Mp=r=>{if(Array.isArray(r))return r.map(n=>Mp(n));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([n,a])=>{const o=n.replace(/([-_][a-z])/gi,c=>c.toUpperCase().replace(/[-_]/g,""));e[o]=Mp(a)}),e},H4=r=>!r||typeof r!="string"||r.length===0||r.length>100||r.trim()!==r||r.includes("/")||r.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(r);function cc(r){"@babel/helpers - typeof";return cc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cc(r)}function q4(r,e){if(cc(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,e);if(cc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function G4(r){var e=q4(r,"string");return cc(e)=="symbol"?e:e+""}function K4(r,e,n){return(e=G4(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Cv(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,a)}return n}function Ge(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cv(Object(n),!0).forEach(function(a){K4(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cv(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}const jv=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},J4=async(r,e,n,a)=>{if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!(n!=null&&n.noResolveJson)){const o=r,c=o.status||500;if(typeof o.json=="function")o.json().then(u=>{const f=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||c+"";e(new ad(jv(u),c,f,a))}).catch(()=>{if(a==="vectors"){const u=c+"";e(new ad(o.statusText||`HTTP ${c} error`,c,u,a))}else{const u=c+"";e(new ad(o.statusText||`HTTP ${c} error`,c,u,a))}});else{const u=c+"";e(new ad(o.statusText||`HTTP ${c} error`,c,u,a))}}else e(new F_(jv(r),r,a))},Y4=(r,e,n,a)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"||r==="HEAD"||!a?Ge(Ge({},o),n):(V4(a)?(o.headers=Ge({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(a)):o.body=a,e!=null&&e.duplex&&(o.duplex=e.duplex),Ge(Ge({},o),n))};async function Ml(r,e,n,a,o,c,u){return new Promise((f,m)=>{r(n,Y4(e,a,o,c)).then(b=>{if(!b.ok)throw b;if(a!=null&&a.noResolveJson)return b;if(u==="vectors"){const x=b.headers.get("content-type");if(b.headers.get("content-length")==="0"||b.status===204)return{};if(!x||!x.includes("application/json"))return{}}return b.json()}).then(b=>f(b)).catch(b=>J4(b,m,a,u))})}function V_(r="storage"){return{get:async(e,n,a,o)=>Ml(e,"GET",n,a,o,void 0,r),post:async(e,n,a,o,c)=>Ml(e,"POST",n,o,c,a,r),put:async(e,n,a,o,c)=>Ml(e,"PUT",n,o,c,a,r),head:async(e,n,a,o)=>Ml(e,"HEAD",n,Ge(Ge({},a),{},{noResolveJson:!0}),o,void 0,r),remove:async(e,n,a,o,c)=>Ml(e,"DELETE",n,o,c,a,r)}}const W4=V_("storage"),{get:uc,post:xs,put:Pp,head:X4,remove:y0}=W4,qn=V_("vectors");var Io=class{constructor(r,e={},n,a="storage"){this.shouldThrowOnError=!1,this.url=r,this.headers=e,this.fetch=F4(n),this.namespace=a}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(r){var e=this;try{return{data:await r(),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(Vd(n))return{data:null,error:n};throw n}}},Z4=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e}then(r,e){return this.execute().then(r,e)}async execute(){var r=this;try{return{data:(await r.downloadFn()).body,error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Vd(e))return{data:null,error:e};throw e}}};let H_;H_=Symbol.toStringTag;var Q4=class{constructor(r,e){this.downloadFn=r,this.shouldThrowOnError=e,this[H_]="BlobDownloadBuilder",this.promise=null}asStream(){return new Z4(this.downloadFn,this.shouldThrowOnError)}then(r,e){return this.getPromise().then(r,e)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var r=this;try{return{data:await(await r.downloadFn()).blob(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(Vd(e))return{data:null,error:e};throw e}}};const eC={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rv={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var tC=class extends Io{constructor(r,e={},n,a){super(r,e,a,"storage"),this.bucketId=n}async uploadOrUpdate(r,e,n,a){var o=this;return o.handleOperation(async()=>{let c;const u=Ge(Ge({},Rv),a);let f=Ge(Ge({},o.headers),r==="POST"&&{"x-upsert":String(u.upsert)});const m=u.metadata;typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),m&&c.append("metadata",o.encodeMetadata(m)),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.has("cacheControl")||c.append("cacheControl",u.cacheControl),m&&!c.has("metadata")&&c.append("metadata",o.encodeMetadata(m))):(c=n,f["cache-control"]=`max-age=${u.cacheControl}`,f["content-type"]=u.contentType,m&&(f["x-metadata"]=o.toBase64(o.encodeMetadata(m))),(typeof ReadableStream<"u"&&c instanceof ReadableStream||c&&typeof c=="object"&&"pipe"in c&&typeof c.pipe=="function")&&!u.duplex&&(u.duplex="half")),a!=null&&a.headers&&(f=Ge(Ge({},f),a.headers));const b=o._removeEmptyFolders(e),x=o._getFinalPath(b),_=await(r=="PUT"?Pp:xs)(o.fetch,`${o.url}/object/${x}`,c,Ge({headers:f},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{path:b,id:_.Id,fullPath:_.Key}})}async upload(r,e,n){return this.uploadOrUpdate("POST",r,e,n)}async uploadToSignedUrl(r,e,n,a){var o=this;const c=o._removeEmptyFolders(r),u=o._getFinalPath(c),f=new URL(o.url+`/object/upload/sign/${u}`);return f.searchParams.set("token",e),o.handleOperation(async()=>{let m;const b=Ge({upsert:Rv.upsert},a),x=Ge(Ge({},o.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&n instanceof Blob?(m=new FormData,m.append("cacheControl",b.cacheControl),m.append("",n)):typeof FormData<"u"&&n instanceof FormData?(m=n,m.append("cacheControl",b.cacheControl)):(m=n,x["cache-control"]=`max-age=${b.cacheControl}`,x["content-type"]=b.contentType),{path:c,fullPath:(await Pp(o.fetch,f.toString(),m,{headers:x})).Key}})}async createSignedUploadUrl(r,e){var n=this;return n.handleOperation(async()=>{let a=n._getFinalPath(r);const o=Ge({},n.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const c=await xs(n.fetch,`${n.url}/object/upload/sign/${a}`,{},{headers:o}),u=new URL(n.url+c.url),f=u.searchParams.get("token");if(!f)throw new Fd("No token returned by API");return{signedUrl:u.toString(),path:r,token:f}})}async update(r,e,n){return this.uploadOrUpdate("PUT",r,e,n)}async move(r,e,n){var a=this;return a.handleOperation(async()=>await xs(a.fetch,`${a.url}/object/move`,{bucketId:a.bucketId,sourceKey:r,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:a.headers}))}async copy(r,e,n){var a=this;return a.handleOperation(async()=>({path:(await xs(a.fetch,`${a.url}/object/copy`,{bucketId:a.bucketId,sourceKey:r,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:a.headers})).Key}))}async createSignedUrl(r,e,n){var a=this;return a.handleOperation(async()=>{let o=a._getFinalPath(r),c=await xs(a.fetch,`${a.url}/object/sign/${o}`,Ge({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:a.headers});const u=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${a.url}${c.signedURL}${u}`)}})}async createSignedUrls(r,e,n){var a=this;return a.handleOperation(async()=>{const o=await xs(a.fetch,`${a.url}/object/sign/${a.bucketId}`,{expiresIn:e,paths:r},{headers:a.headers}),c=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return o.map(u=>Ge(Ge({},u),{},{signedUrl:u.signedURL?encodeURI(`${a.url}${u.signedURL}${c}`):null}))})}download(r,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=a?`?${a}`:"",c=this._getFinalPath(r),u=()=>uc(this.fetch,`${this.url}/${n}/${c}${o}`,{headers:this.headers,noResolveJson:!0});return new Q4(u,this.shouldThrowOnError)}async info(r){var e=this;const n=e._getFinalPath(r);return e.handleOperation(async()=>Mp(await uc(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})))}async exists(r){var e=this;const n=e._getFinalPath(r);try{return await X4(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(a){if(e.shouldThrowOnError)throw a;if(Vd(a)&&a instanceof F_){const o=a.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:a}}throw a}}getPublicUrl(r,e){const n=this._getFinalPath(r),a=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&a.push(o);const c=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",u=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});u!==""&&a.push(u);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${f}`)}}}async remove(r){var e=this;return e.handleOperation(async()=>await y0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:r},{headers:e.headers}))}async list(r,e,n){var a=this;return a.handleOperation(async()=>{const o=Ge(Ge(Ge({},eC),e),{},{prefix:r||""});return await xs(a.fetch,`${a.url}/object/list/${a.bucketId}`,o,{headers:a.headers},n)})}async listV2(r,e){var n=this;return n.handleOperation(async()=>{const a=Ge({},r);return await xs(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,a,{headers:n.headers},e)})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const e=[];return r.width&&e.push(`width=${r.width}`),r.height&&e.push(`height=${r.height}`),r.resize&&e.push(`resize=${r.resize}`),r.format&&e.push(`format=${r.format}`),r.quality&&e.push(`quality=${r.quality}`),e.join("&")}};const nC="2.93.3",Ec={"X-Client-Info":`storage-js/${nC}`};var sC=class extends Io{constructor(r,e={},n,a){const o=new URL(r);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase."));const c=o.href.replace(/\/$/,""),u=Ge(Ge({},Ec),e);super(c,u,n,"storage")}async listBuckets(r){var e=this;return e.handleOperation(async()=>{const n=e.listBucketOptionsToQueryString(r);return await uc(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers})})}async getBucket(r){var e=this;return e.handleOperation(async()=>await uc(e.fetch,`${e.url}/bucket/${r}`,{headers:e.headers}))}async createBucket(r,e={public:!1}){var n=this;return n.handleOperation(async()=>await xs(n.fetch,`${n.url}/bucket`,{id:r,name:r,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async updateBucket(r,e){var n=this;return n.handleOperation(async()=>await Pp(n.fetch,`${n.url}/bucket/${r}`,{id:r,name:r,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(r){var e=this;return e.handleOperation(async()=>await xs(e.fetch,`${e.url}/bucket/${r}/empty`,{},{headers:e.headers}))}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await y0(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}))}listBucketOptionsToQueryString(r){const e={};return r&&("limit"in r&&(e.limit=String(r.limit)),"offset"in r&&(e.offset=String(r.offset)),r.search&&(e.search=r.search),r.sortColumn&&(e.sortColumn=r.sortColumn),r.sortOrder&&(e.sortOrder=r.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},rC=class extends Io{constructor(r,e={},n){const a=r.replace(/\/$/,""),o=Ge(Ge({},Ec),e);super(a,o,n,"storage")}async createBucket(r){var e=this;return e.handleOperation(async()=>await xs(e.fetch,`${e.url}/bucket`,{name:r},{headers:e.headers}))}async listBuckets(r){var e=this;return e.handleOperation(async()=>{const n=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&n.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&n.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&n.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&n.set("sortOrder",r.sortOrder),r!=null&&r.search&&n.set("search",r.search);const a=n.toString(),o=a?`${e.url}/bucket?${a}`:`${e.url}/bucket`;return await uc(e.fetch,o,{headers:e.headers})})}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await y0(e.fetch,`${e.url}/bucket/${r}`,{},{headers:e.headers}))}from(r){var e=this;if(!H4(r))throw new Fd("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new $4({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),a=this.shouldThrowOnError;return new Proxy(n,{get(o,c){const u=o[c];return typeof u!="function"?u:async(...f)=>{try{return{data:await u.apply(o,f),error:null}}catch(m){if(a)throw m;return{data:null,error:m}}}}})}},aC=class extends Io{constructor(r,e={},n){const a=r.replace(/\/$/,""),o=Ge(Ge({},Ec),{},{"Content-Type":"application/json"},e);super(a,o,n,"vectors")}async createIndex(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/CreateIndex`,r,{headers:e.headers})||{})}async getIndex(r,e){var n=this;return n.handleOperation(async()=>await qn.post(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:r,indexName:e},{headers:n.headers}))}async listIndexes(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/ListIndexes`,r,{headers:e.headers}))}async deleteIndex(r,e){var n=this;return n.handleOperation(async()=>await qn.post(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:r,indexName:e},{headers:n.headers})||{})}},iC=class extends Io{constructor(r,e={},n){const a=r.replace(/\/$/,""),o=Ge(Ge({},Ec),{},{"Content-Type":"application/json"},e);super(a,o,n,"vectors")}async putVectors(r){var e=this;if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/PutVectors`,r,{headers:e.headers})||{})}async getVectors(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/GetVectors`,r,{headers:e.headers}))}async listVectors(r){var e=this;if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/ListVectors`,r,{headers:e.headers}))}async queryVectors(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/QueryVectors`,r,{headers:e.headers}))}async deleteVectors(r){var e=this;if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/DeleteVectors`,r,{headers:e.headers})||{})}},oC=class extends Io{constructor(r,e={},n){const a=r.replace(/\/$/,""),o=Ge(Ge({},Ec),{},{"Content-Type":"application/json"},e);super(a,o,n,"vectors")}async createBucket(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{})}async getBucket(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:r},{headers:e.headers}))}async listBuckets(r={}){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/ListVectorBuckets`,r,{headers:e.headers}))}async deleteBucket(r){var e=this;return e.handleOperation(async()=>await qn.post(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:e.headers})||{})}},lC=class extends oC{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new cC(this.url,this.headers,r,this.fetch)}async createBucket(r){var e=()=>super.createBucket,n=this;return e().call(n,r)}async getBucket(r){var e=()=>super.getBucket,n=this;return e().call(n,r)}async listBuckets(r={}){var e=()=>super.listBuckets,n=this;return e().call(n,r)}async deleteBucket(r){var e=()=>super.deleteBucket,n=this;return e().call(n,r)}},cC=class extends aC{constructor(r,e,n,a){super(r,e,a),this.vectorBucketName=n}async createIndex(r){var e=()=>super.createIndex,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(r={}){var e=()=>super.listIndexes,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(r){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,r)}async deleteIndex(r){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,r)}index(r){return new uC(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},uC=class extends iC{constructor(r,e,n,a,o){super(r,e,o),this.vectorBucketName=n,this.indexName=a}async putVectors(r){var e=()=>super.putVectors,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(r){var e=()=>super.getVectors,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(r={}){var e=()=>super.listVectors,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(r){var e=()=>super.queryVectors,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(r){var e=()=>super.deleteVectors,n=this;return e().call(n,Ge(Ge({},r),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},dC=class extends sC{constructor(r,e={},n,a){super(r,e,n,a)}from(r){return new tC(this.url,this.headers,r,this.fetch)}get vectors(){return new lC(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new rC(this.url+"/iceberg",this.headers,this.fetch)}};const q_="2.93.3",vo=30*1e3,zp=3,dp=zp*vo,hC="http://localhost:9999",fC="supabase.auth.token",pC={"X-Client-Info":`gotrue-js/${q_}`},Bp="X-Supabase-Api-Version",G_={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},mC=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gC=600*1e3;class dc extends Error{constructor(e,n,a){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=a}}function $e(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class bC extends dc{constructor(e,n,a){super(e,n,a),this.name="AuthApiError",this.status=n,this.code=a}}function yC(r){return $e(r)&&r.name==="AuthApiError"}class si extends dc{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Or extends dc{constructor(e,n,a,o){super(e,a,o),this.name=n,this.status=a}}class Vn extends Or{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function hp(r){return $e(r)&&r.name==="AuthSessionMissingError"}class ho extends Or{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class id extends Or{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class od extends Or{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function vC(r){return $e(r)&&r.name==="AuthImplicitGrantRedirectError"}class Dv extends Or{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class _C extends Or{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class $p extends Or{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function fp(r){return $e(r)&&r.name==="AuthRetryableFetchError"}class Ov extends Or{constructor(e,n,a){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=a}}class Fp extends Or{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Rd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Iv=` 	
\r=`.split(""),xC=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<Iv.length;e+=1)r[Iv[e].charCodeAt(0)]=-2;for(let e=0;e<Rd.length;e+=1)r[Rd[e].charCodeAt(0)]=e;return r})();function Lv(r,e,n){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;n(Rd[a]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const a=e.queue>>e.queuedBits-6&63;n(Rd[a]),e.queuedBits-=6}}function K_(r,e,n){const a=xC[r];if(a>-1)for(e.queue=e.queue<<6|a,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(a===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function Uv(r){const e=[],n=u=>{e.push(String.fromCodePoint(u))},a={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},c=u=>{SC(u,a,n)};for(let u=0;u<r.length;u+=1)K_(r.charCodeAt(u),o,c);return e.join("")}function wC(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function kC(r,e){for(let n=0;n<r.length;n+=1){let a=r.charCodeAt(n);if(a>55295&&a<=56319){const o=(a-55296)*1024&65535;a=(r.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}wC(a,e)}}function SC(r,e,n){if(e.utf8seq===0){if(r<=127){n(r);return}for(let a=1;a<6;a+=1)if((r>>7-a&1)===0){e.utf8seq=a;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function No(r){const e=[],n={queue:0,queuedBits:0},a=o=>{e.push(o)};for(let o=0;o<r.length;o+=1)K_(r.charCodeAt(o),n,a);return new Uint8Array(e)}function EC(r){const e=[];return kC(r,n=>e.push(n)),new Uint8Array(e)}function ii(r){const e=[],n={queue:0,queuedBits:0},a=o=>{e.push(o)};return r.forEach(o=>Lv(o,n,a)),Lv(null,n,a),e.join("")}function AC(r){return Math.round(Date.now()/1e3)+r}function TC(){return Symbol("auth-callback")}const bn=()=>typeof window<"u"&&typeof document<"u",Xa={tested:!1,writable:!1},J_=()=>{if(!bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xa.tested)return Xa.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),Xa.tested=!0,Xa.writable=!0}catch{Xa.tested=!0,Xa.writable=!1}return Xa.writable};function NC(r){const e={},n=new URL(r);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,c)=>{e[c]=o})}catch{}return n.searchParams.forEach((a,o)=>{e[o]=a}),e}const Y_=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),CC=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",_o=async(r,e,n)=>{await r.setItem(e,JSON.stringify(n))},Za=async(r,e)=>{const n=await r.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},gn=async(r,e)=>{await r.removeItem(e)};class Hd{constructor(){this.promise=new Hd.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Hd.promiseConstructor=Promise;function ld(r){const e=r.split(".");if(e.length!==3)throw new Fp("Invalid JWT structure");for(let a=0;a<e.length;a++)if(!mC.test(e[a]))throw new Fp("JWT not in base64url format");return{header:JSON.parse(Uv(e[0])),payload:JSON.parse(Uv(e[1])),signature:No(e[2]),raw:{header:e[0],payload:e[1]}}}async function jC(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function RC(r,e){return new Promise((a,o)=>{(async()=>{for(let c=0;c<1/0;c++)try{const u=await r(c);if(!e(c,null,u)){a(u);return}}catch(u){if(!e(c,u)){o(u);return}}})()})}function DC(r){return("0"+r.toString(16)).substr(-2)}function OC(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",a=n.length;let o="";for(let c=0;c<56;c++)o+=n.charAt(Math.floor(Math.random()*a));return o}return crypto.getRandomValues(e),Array.from(e,DC).join("")}async function IC(r){const n=new TextEncoder().encode(r),a=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(a);return Array.from(o).map(c=>String.fromCharCode(c)).join("")}async function LC(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const n=await IC(r);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fo(r,e,n=!1){const a=OC();let o=a;n&&(o+="/PASSWORD_RECOVERY"),await _o(r,`${e}-code-verifier`,o);const c=await LC(a);return[c,a===c?"plain":"s256"]}const UC=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function MC(r){const e=r.headers.get(Bp);if(!e||!e.match(UC))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function PC(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function zC(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const BC=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function po(r){if(!BC.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function pp(){const r={};return new Proxy(r,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const a=n.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function $C(r,e){return new Proxy(r,{get:(n,a,o)=>{if(a==="__isInsecureUserWarningProxy")return!0;if(typeof a=="symbol"){const c=a.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)"||c==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,a,o)}return!e.value&&typeof a=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,a,o)}})}function Mv(r){return JSON.parse(JSON.stringify(r))}const ei=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),FC=[502,503,504];async function Pv(r){var e;if(!CC(r))throw new $p(ei(r),0);if(FC.includes(r.status))throw new $p(ei(r),r.status);let n;try{n=await r.json()}catch(c){throw new si(ei(c),c)}let a;const o=MC(r);if(o&&o.getTime()>=G_["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?a=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(a=n.error_code),a){if(a==="weak_password")throw new Ov(ei(n),r.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(a==="session_not_found")throw new Vn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((c,u)=>c&&typeof u=="string",!0))throw new Ov(ei(n),r.status,n.weak_password.reasons);throw new bC(ei(n),r.status||500,a)}const VC=(r,e,n,a)=>{const o={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(a),Object.assign(Object.assign({},o),n))};async function qe(r,e,n,a){var o;const c=Object.assign({},a==null?void 0:a.headers);c[Bp]||(c[Bp]=G_["2024-01-01"].name),a!=null&&a.jwt&&(c.Authorization=`Bearer ${a.jwt}`);const u=(o=a==null?void 0:a.query)!==null&&o!==void 0?o:{};a!=null&&a.redirectTo&&(u.redirect_to=a.redirectTo);const f=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",m=await HC(r,e,n+f,{headers:c,noResolveJson:a==null?void 0:a.noResolveJson},{},a==null?void 0:a.body);return a!=null&&a.xform?a==null?void 0:a.xform(m):{data:Object.assign({},m),error:null}}async function HC(r,e,n,a,o,c){const u=VC(e,a,o,c);let f;try{f=await r(n,Object.assign({},u))}catch(m){throw console.error(m),new $p(ei(m),0)}if(f.ok||await Pv(f),a!=null&&a.noResolveJson)return f;try{return await f.json()}catch(m){await Pv(m)}}function _s(r){var e;let n=null;KC(r)&&(n=Object.assign({},r),r.expires_at||(n.expires_at=AC(r.expires_in)));const a=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:n,user:a},error:null}}function zv(r){const e=_s(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((n,a)=>n&&typeof a=="string",!0)&&(e.data.weak_password=r.weak_password),e}function _a(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function qC(r){return{data:r,error:null}}function GC(r){const{action_link:e,email_otp:n,hashed_token:a,redirect_to:o,verification_type:c}=r,u=$d(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:e,email_otp:n,hashed_token:a,redirect_to:o,verification_type:c},m=Object.assign({},u);return{data:{properties:f,user:m},error:null}}function Bv(r){return r}function KC(r){return r.access_token&&r.refresh_token&&r.expires_in}const mp=["global","local","others"];class JC{constructor({url:e="",headers:n={},fetch:a}){this.url=e,this.headers=n,this.fetch=Y_(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=mp[0]){if(mp.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${mp.join(", ")}`);try{return await qe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(a){if($e(a))return{data:null,error:a};throw a}}async inviteUserByEmail(e,n={}){try{return await qe(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_a})}catch(a){if($e(a))return{data:{user:null},error:a};throw a}}async generateLink(e){try{const{options:n}=e,a=$d(e,["options"]),o=Object.assign(Object.assign({},a),n);return"newEmail"in a&&(o.new_email=a==null?void 0:a.newEmail,delete o.newEmail),await qe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:GC,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if($e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:_a})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,a,o,c,u,f,m;try{const b={nextPage:null,lastPage:0,total:0},x=await qe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Bv});if(x.error)throw x.error;const _=await x.json(),E=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(m=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return y.length>0&&(y.forEach(A=>{const k=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(A.split(";")[1].split("=")[1]);b[`${N}Page`]=k}),b.total=parseInt(E)),{data:Object.assign(Object.assign({},_),b),error:null}}catch(b){if($e(b))return{data:{users:[]},error:b};throw b}}async getUserById(e){po(e);try{return await qe(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:_a})}catch(n){if($e(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){po(e);try{return await qe(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:_a})}catch(a){if($e(a))return{data:{user:null},error:a};throw a}}async deleteUser(e,n=!1){po(e);try{return await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:_a})}catch(a){if($e(a))return{data:{user:null},error:a};throw a}}async _listFactors(e){po(e.userId);try{const{data:n,error:a}=await qe(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:a}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _deleteFactor(e){po(e.userId),po(e.id);try{return{data:await qe(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,a,o,c,u,f,m;try{const b={nextPage:null,lastPage:0,total:0},x=await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(a=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&a!==void 0?a:"",per_page:(c=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:""},xform:Bv});if(x.error)throw x.error;const _=await x.json(),E=(u=x.headers.get("x-total-count"))!==null&&u!==void 0?u:0,y=(m=(f=x.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&m!==void 0?m:[];return y.length>0&&(y.forEach(A=>{const k=parseInt(A.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(A.split(";")[1].split("=")[1]);b[`${N}Page`]=k}),b.total=parseInt(E)),{data:Object.assign(Object.assign({},_),b),error:null}}catch(b){if($e(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await qe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await qe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:a=>({data:a,error:null})})}catch(a){if($e(a))return{data:null,error:a};throw a}}async _deleteOAuthClient(e){try{return await qe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if($e(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await qe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if($e(n))return{data:null,error:n};throw n}}}function $v(r={}){return{getItem:e=>r[e]||null,setItem:(e,n)=>{r[e]=n},removeItem:e=>{delete r[e]}}}const mo={debug:!!(globalThis&&J_()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class W_ extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class YC extends W_{}async function WC(r,e,n){mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const a=new globalThis.AbortController;return e>0&&setTimeout(()=>{a.abort(),mo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:a.signal},async o=>{if(o){mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,o.name);try{return await n()}finally{mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,o.name)}}else{if(e===0)throw mo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new YC(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(mo.debug)try{const c=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(c,null,"  "))}catch(c){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",c)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function XC(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function X_(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function ZC(r){return parseInt(r,16)}function QC(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,a=>a.toString(16).padStart(2,"0")).join("")}function ej(r){var e;const{chainId:n,domain:a,expirationTime:o,issuedAt:c=new Date,nonce:u,notBefore:f,requestId:m,resources:b,scheme:x,uri:_,version:E}=r;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!a)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!_)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const y=X_(r.address),A=x?`${x}://${a}`:a,k=r.statement?`${r.statement}
`:"",N=`${A} wants you to sign in with your Ethereum account:
${y}

${k}`;let C=`URI: ${_}
Version: ${E}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${c.toISOString()}`;if(o&&(C+=`
Expiration Time: ${o.toISOString()}`),f&&(C+=`
Not Before: ${f.toISOString()}`),m&&(C+=`
Request ID: ${m}`),b){let I=`
Resources:`;for(const z of b){if(!z||typeof z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${z}`);I+=`
- ${z}`}C+=I}return`${N}
${C}`}class Xt extends Error{constructor({message:e,code:n,cause:a,name:o}){var c;super(e,{cause:a}),this.__isWebAuthnError=!0,this.name=(c=o??(a instanceof Error?a.name:void 0))!==null&&c!==void 0?c:"Unknown Error",this.code=n}}class Dd extends Xt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function tj({error:r,options:e}){var n,a,o;const{publicKey:c}=e;if(!c)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Xt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((n=c.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new Xt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((a=c.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Xt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((o=c.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new Xt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new Xt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new Xt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return c.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new Xt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new Xt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const u=window.location.hostname;if(Z_(u)){if(c.rp.id!==u)return new Xt({message:`The RP ID "${c.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(c.user.id.byteLength<1||c.user.id.byteLength>64)return new Xt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new Xt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function nj({error:r,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new Xt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new Xt({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const a=window.location.hostname;if(Z_(a)){if(n.rpId!==a)return new Xt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new Xt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new Xt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new Xt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class sj{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const rj=new sj;function aj(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:n,excludeCredentials:a}=r,o=$d(r,["challenge","user","excludeCredentials"]),c=No(e).buffer,u=Object.assign(Object.assign({},n),{id:No(n.id).buffer}),f=Object.assign(Object.assign({},o),{challenge:c,user:u});if(a&&a.length>0){f.excludeCredentials=new Array(a.length);for(let m=0;m<a.length;m++){const b=a[m];f.excludeCredentials[m]=Object.assign(Object.assign({},b),{id:No(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return f}function ij(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:n}=r,a=$d(r,["challenge","allowCredentials"]),o=No(e).buffer,c=Object.assign(Object.assign({},a),{challenge:o});if(n&&n.length>0){c.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];c.allowCredentials[u]=Object.assign(Object.assign({},f),{id:No(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return c}function oj(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r;return{id:r.id,rawId:r.id,response:{attestationObject:ii(new Uint8Array(r.response.attestationObject)),clientDataJSON:ii(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function lj(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const n=r,a=r.getClientExtensionResults(),o=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:ii(new Uint8Array(o.authenticatorData)),clientDataJSON:ii(new Uint8Array(o.clientDataJSON)),signature:ii(new Uint8Array(o.signature)),userHandle:o.userHandle?ii(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:a,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Z_(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function Fv(){var r,e;return!!(bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function cj(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dd("Browser returned unexpected credential type",e)}:{data:null,error:new Dd("Empty credential response",e)}}catch(e){return{data:null,error:tj({error:e,options:r})}}}async function uj(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Dd("Browser returned unexpected credential type",e)}:{data:null,error:new Dd("Empty credential response",e)}}catch(e){return{data:null,error:nj({error:e,options:r})}}}const dj={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},hj={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Od(...r){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),a={};for(const o of r)if(o)for(const c in o){const u=o[c];if(u!==void 0)if(Array.isArray(u))a[c]=u;else if(n(u))a[c]=u;else if(e(u)){const f=a[c];e(f)?a[c]=Od(f,u):a[c]=Od(u)}else a[c]=u}return a}function fj(r,e){return Od(dj,r,e||{})}function pj(r,e){return Od(hj,r,e||{})}class mj{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:a,signal:o},c){var u;try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!f)return{data:null,error:m};const b=o??rj.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:x}=f.webauthn.credential_options.publicKey;if(!x.name){const _=a;if(_)x.name=`${x.id}:${_}`;else{const y=(await this.client.getUser()).data.user,A=((u=y==null?void 0:y.user_metadata)===null||u===void 0?void 0:u.name)||(y==null?void 0:y.email)||(y==null?void 0:y.id)||"User";x.name=`${x.id}:${A}`}}x.displayName||(x.displayName=x.name)}switch(f.webauthn.type){case"create":{const x=fj(f.webauthn.credential_options.publicKey,c==null?void 0:c.create),{data:_,error:E}=await cj({publicKey:x,signal:b});return _?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}case"request":{const x=pj(f.webauthn.credential_options.publicKey,c==null?void 0:c.request),{data:_,error:E}=await uj(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:x,signal:b}));return _?{data:{factorId:e,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:_}},error:null}:{data:null,error:E}}}}catch(f){return $e(f)?{data:null,error:f}:{data:null,error:new si("Unexpected error in challenge",f)}}}async _verify({challengeId:e,factorId:n,webauthn:a}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:a})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new dc("rpId is required for WebAuthn authentication")};try{if(!Fv())return{data:null,error:new si("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:a},signal:o},{request:c});if(!u)return{data:null,error:f};const{webauthn:m}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:m.type,rpId:n,rpOrigins:a,credential_response:m.credential_response}})}catch(u){return $e(u)?{data:null,error:u}:{data:null,error:new si("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:a=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},c){if(!n)return{data:null,error:new dc("rpId is required for WebAuthn registration")};try{if(!Fv())return{data:null,error:new si("Browser does not support WebAuthn",null)};const{data:u,error:f}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(x=>{var _;return(_=x.data)===null||_===void 0?void 0:_.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(x=>x?this.client.mfa.unenroll({factorId:x==null?void 0:x.id}):void 0),{data:null,error:f};const{data:m,error:b}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:a},signal:o},{create:c});return m?this._verify({factorId:u.id,challengeId:m.challengeId,webauthn:{rpId:n,rpOrigins:a,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:b}}catch(u){return $e(u)?{data:null,error:u}:{data:null,error:new si("Unexpected error in register",u)}}}}XC();const gj={url:hC,storageKey:fC,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:pC,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Vv(r,e,n){return await n()}const go={};class hc{get jwks(){var e,n;return(n=(e=go[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){go[this.storageKey]=Object.assign(Object.assign({},go[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=go[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){go[this.storageKey]=Object.assign(Object.assign({},go[this.storageKey]),{cachedAt:e})}constructor(e){var n,a,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const c=Object.assign(Object.assign({},gj),e);if(this.storageKey=c.storageKey,this.instanceID=(n=hc.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,hc.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!c.debug,typeof c.debug=="function"&&(this.logger=c.debug),this.instanceID>0&&bn()){const u=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(u),this.logDebugMessages&&console.trace(u)}if(this.persistSession=c.persistSession,this.autoRefreshToken=c.autoRefreshToken,this.admin=new JC({url:c.url,headers:c.headers,fetch:c.fetch}),this.url=c.url,this.headers=c.headers,this.fetch=Y_(c.fetch),this.lock=c.lock||Vv,this.detectSessionInUrl=c.detectSessionInUrl,this.flowType=c.flowType,this.hasCustomAuthorizationHeader=c.hasCustomAuthorizationHeader,this.throwOnError=c.throwOnError,this.lockAcquireTimeout=c.lockAcquireTimeout,c.lock?this.lock=c.lock:this.persistSession&&bn()&&(!((a=globalThis==null?void 0:globalThis.navigator)===null||a===void 0)&&a.locks)?this.lock=WC:this.lock=Vv,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new mj(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(c.storage?this.storage=c.storage:J_()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=$v(this.memoryStorage)),c.userStorage&&(this.userStorage=c.userStorage)):(this.memoryStorage={},this.storage=$v(this.memoryStorage)),bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(u){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",u)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async u=>{this._debug("received broadcast notification from other tab or client",u);try{await this._notifyAllSubscribers(u.data.event,u.data.session,!1)}catch(f){this._debug("#broadcastChannel","error",f)}})}this.initialize().catch(u=>{this._debug("#initialize()","error",u)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${q_}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},a="none";if(bn()&&(n=NC(window.location.href),this._isImplicitGrantCallback(n)?a="implicit":await this._isPKCECallback(n)&&(a="pkce")),bn()&&this.detectSessionInUrl&&a!=="none"){const{data:o,error:c}=await this._getSessionFromURL(n,a);if(c){if(this._debug("#_initialize()","error detecting session from URL",c),vC(c)){const m=(e=c.details)===null||e===void 0?void 0:e.code;if(m==="identity_already_exists"||m==="identity_not_found"||m==="single_identity_not_deletable")return{error:c}}return{error:c}}const{session:u,redirectType:f}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",f),await this._saveSession(u),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return $e(n)?this._returnResult({error:n}):this._returnResult({error:new si("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,a,o;try{const c=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(a=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&a!==void 0?a:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:_s}),{data:u,error:f}=c;if(f||!u)return this._returnResult({data:{user:null,session:null},error:f});const m=u.session,b=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:b,session:m},error:null})}catch(c){if($e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signUp(e){var n,a,o;try{let c;if("email"in e){const{email:x,password:_,options:E}=e;let y=null,A=null;this.flowType==="pkce"&&([y,A]=await fo(this.storage,this.storageKey)),c=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:x,password:_,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:y,code_challenge_method:A},xform:_s})}else if("phone"in e){const{phone:x,password:_,options:E}=e;c=await qe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:x,password:_,data:(a=E==null?void 0:E.data)!==null&&a!==void 0?a:{},channel:(o=E==null?void 0:E.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:_s})}else throw new id("You must provide either an email or phone number and a password");const{data:u,error:f}=c;if(f||!u)return await gn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const m=u.session,b=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",m)),this._returnResult({data:{user:b,session:m},error:null})}catch(c){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async signInWithPassword(e){try{let n;if("email"in e){const{email:c,password:u,options:f}=e;n=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zv})}else if("phone"in e){const{phone:c,password:u,options:f}=e;n=await qe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:c,password:u,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:zv})}else throw new id("You must provide either an email or phone number and a password");const{data:a,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!a||!a.session||!a.user){const c=new ho;return this._returnResult({data:{user:null,session:null},error:c})}return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),this._returnResult({data:Object.assign({user:a.user,session:a.session},a.weak_password?{weakPassword:a.weak_password}:null),error:o})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,a,o,c;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(c=e.options)===null||c===void 0?void 0:c.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,a,o,c,u,f,m,b,x,_,E;let y,A;if("message"in e)y=e.message,A=e.signature;else{const{chain:k,wallet:N,statement:C,options:I}=e;let z;if(bn())if(typeof N=="object")z=N;else{const O=window;if("ethereum"in O&&typeof O.ethereum=="object"&&"request"in O.ethereum&&typeof O.ethereum.request=="function")z=O.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=N}const V=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href),H=await z.request({method:"eth_requestAccounts"}).then(O=>O).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const G=X_(H[0]);let M=(a=I==null?void 0:I.signInWithEthereum)===null||a===void 0?void 0:a.chainId;if(!M){const O=await z.request({method:"eth_chainId"});M=ZC(O)}const j={domain:V.host,address:G,statement:C,uri:V.href,version:"1",chainId:M,nonce:(o=I==null?void 0:I.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(c=I==null?void 0:I.signInWithEthereum)===null||c===void 0?void 0:c.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(f=I==null?void 0:I.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(m=I==null?void 0:I.signInWithEthereum)===null||m===void 0?void 0:m.notBefore,requestId:(b=I==null?void 0:I.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(x=I==null?void 0:I.signInWithEthereum)===null||x===void 0?void 0:x.resources};y=ej(j),A=await z.request({method:"personal_sign",params:[QC(y),G]})}try{const{data:k,error:N}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:y,signature:A},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:_s});if(N)throw N;if(!k||!k.session||!k.user){const C=new ho;return this._returnResult({data:{user:null,session:null},error:C})}return k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:N})}catch(k){if($e(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}}async signInWithSolana(e){var n,a,o,c,u,f,m,b,x,_,E,y;let A,k;if("message"in e)A=e.message,k=e.signature;else{const{chain:N,wallet:C,statement:I,options:z}=e;let V;if(bn())if(typeof C=="object")V=C;else{const G=window;if("solana"in G&&typeof G.solana=="object"&&("signIn"in G.solana&&typeof G.solana.signIn=="function"||"signMessage"in G.solana&&typeof G.solana.signMessage=="function"))V=G.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof C!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=C}const H=new URL((n=z==null?void 0:z.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in V&&V.signIn){const G=await V.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z==null?void 0:z.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),I?{statement:I}:null));let M;if(Array.isArray(G)&&G[0]&&typeof G[0]=="object")M=G[0];else if(G&&typeof G=="object"&&"signedMessage"in G&&"signature"in G)M=G;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in M&&"signature"in M&&(typeof M.signedMessage=="string"||M.signedMessage instanceof Uint8Array)&&M.signature instanceof Uint8Array)A=typeof M.signedMessage=="string"?M.signedMessage:new TextDecoder().decode(M.signedMessage),k=M.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in V)||typeof V.signMessage!="function"||!("publicKey"in V)||typeof V!="object"||!V.publicKey||!("toBase58"in V.publicKey)||typeof V.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");A=[`${H.host} wants you to sign in with your Solana account:`,V.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(o=(a=z==null?void 0:z.signInWithSolana)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((c=z==null?void 0:z.signInWithSolana)===null||c===void 0)&&c.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((u=z==null?void 0:z.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((f=z==null?void 0:z.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((m=z==null?void 0:z.signInWithSolana)===null||m===void 0)&&m.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((b=z==null?void 0:z.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((_=(x=z==null?void 0:z.signInWithSolana)===null||x===void 0?void 0:x.resources)===null||_===void 0)&&_.length?["Resources",...z.signInWithSolana.resources.map(M=>`- ${M}`)]:[]].join(`
`);const G=await V.signMessage(new TextEncoder().encode(A),"utf8");if(!G||!(G instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");k=G}}try{const{data:N,error:C}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:A,signature:ii(k)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:_s});if(C)throw C;if(!N||!N.session||!N.user){const I=new ho;return this._returnResult({data:{user:null,session:null},error:I})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:C})}catch(N){if($e(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const n=await Za(this.storage,`${this.storageKey}-code-verifier`),[a,o]=(n??"").split("/");try{if(!a&&this.flowType==="pkce")throw new _C;const{data:c,error:u}=await qe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:a},xform:_s});if(await gn(this.storage,`${this.storageKey}-code-verifier`),u)throw u;if(!c||!c.session||!c.user){const f=new ho;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign(Object.assign({},c),{redirectType:o??null}),error:u})}catch(c){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:{user:null,session:null,redirectType:null},error:c});throw c}}async signInWithIdToken(e){try{const{options:n,provider:a,token:o,access_token:c,nonce:u}=e,f=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:a,id_token:o,access_token:c,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:_s}),{data:m,error:b}=f;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!m||!m.session||!m.user){const x=new ho;return this._returnResult({data:{user:null,session:null},error:x})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:m,error:b})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,a,o,c,u;try{if("email"in e){const{email:f,options:m}=e;let b=null,x=null;this.flowType==="pkce"&&([b,x]=await fo(this.storage,this.storageKey));const{error:_}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},create_user:(a=m==null?void 0:m.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:b,code_challenge_method:x},redirectTo:m==null?void 0:m.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){const{phone:f,options:m}=e,{data:b,error:x}=await qe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(o=m==null?void 0:m.data)!==null&&o!==void 0?o:{},create_user:(c=m==null?void 0:m.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},channel:(u=m==null?void 0:m.channel)!==null&&u!==void 0?u:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b==null?void 0:b.message_id},error:x})}throw new id("You must provide either an email or phone number.")}catch(f){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(e){var n,a;try{let o,c;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,c=(a=e.options)===null||a===void 0?void 0:a.captchaToken);const{data:u,error:f}=await qe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:c}}),redirectTo:o,xform:_s});if(f)throw f;if(!u)throw new Error("An error occurred on token verification.");const m=u.session,b=u.user;return m!=null&&m.access_token&&(await this._saveSession(m),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",m)),this._returnResult({data:{user:b,session:m},error:null})}catch(o){if($e(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,a,o,c,u;try{let f=null,m=null;this.flowType==="pkce"&&([f,m]=await fo(this.storage,this.storageKey));const b=await qe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(a=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&a!==void 0?a:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:m}),headers:this.headers,xform:qC});return!((c=b.data)===null||c===void 0)&&c.url&&bn()&&!(!((u=e.options)===null||u===void 0)&&u.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(f){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:a}=e;if(a)throw a;if(!n)throw new Vn;const{error:o}=await qe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if($e(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:a,type:o,options:c}=e,{error:u}=await qe(this.fetch,"POST",n,{headers:this.headers,body:{email:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},redirectTo:c==null?void 0:c.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:u})}else if("phone"in e){const{phone:a,type:o,options:c}=e,{data:u,error:f}=await qe(this.fetch,"POST",n,{headers:this.headers,body:{phone:a,type:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:f})}throw new id("You must provide either an email or phone number and a type")}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const a=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await a,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const a=n();for(this.pendingInLock.push((async()=>{try{await a}catch{}})()),await a;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await a}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Za(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const a=e.expires_at?e.expires_at*1e3-Date.now()<dp:!1;if(this._debug("#__loadSession()",`session has${a?"":" not"} expired`,"expires_at",e.expires_at),!a){if(this.userStorage){const u=await Za(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=pp()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=$C(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{session:null},error:c}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:_a}):await this._useSession(async n=>{var a,o,c;const{data:u,error:f}=n;if(f)throw f;return!(!((a=u.session)===null||a===void 0)&&a.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Vn}:await qe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(c=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&c!==void 0?c:void 0,xform:_a})})}catch(n){if($e(n))return hp(n)&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async a=>{const{data:o,error:c}=a;if(c)throw c;if(!o.session)throw new Vn;const u=o.session;let f=null,m=null;this.flowType==="pkce"&&e.email!=null&&([f,m]=await fo(this.storage,this.storageKey));const{data:b,error:x}=await qe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:f,code_challenge_method:m}),jwt:u.access_token,xform:_a});if(x)throw x;return u.user=b.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),this._returnResult({data:{user:u.user},error:null})})}catch(a){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(a))return this._returnResult({data:{user:null},error:a});throw a}}async setSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Vn;const n=Date.now()/1e3;let a=n,o=!0,c=null;const{payload:u}=ld(e.access_token);if(u.exp&&(a=u.exp,o=a<=n),o){const{data:f,error:m}=await this._callRefreshToken(e.refresh_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!f)return{data:{user:null,session:null},error:null};c=f}else{const{data:f,error:m}=await this._getUser(e.access_token);if(m)return this._returnResult({data:{user:null,session:null},error:m});c={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:a-n,expires_at:a},await this._saveSession(c),await this._notifyAllSubscribers("SIGNED_IN",c)}return this._returnResult({data:{user:c.user,session:c},error:null})}catch(n){if($e(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var a;if(!e){const{data:u,error:f}=n;if(f)throw f;e=(a=u.session)!==null&&a!==void 0?a:void 0}if(!(e!=null&&e.refresh_token))throw new Vn;const{data:o,error:c}=await this._callRefreshToken(e.refresh_token);return c?this._returnResult({data:{user:null,session:null},error:c}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if($e(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!bn())throw new od("No browser detected.");if(e.error||e.error_description||e.error_code)throw new od(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Dv("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new od("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Dv("No code detected.");const{data:I,error:z}=await this._exchangeCodeForSession(e.code);if(z)throw z;const V=new URL(window.location.href);return V.searchParams.delete("code"),window.history.replaceState(window.history.state,"",V.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:a,provider_refresh_token:o,access_token:c,refresh_token:u,expires_in:f,expires_at:m,token_type:b}=e;if(!c||!f||!u||!b)throw new od("No session defined in URL");const x=Math.round(Date.now()/1e3),_=parseInt(f);let E=x+_;m&&(E=parseInt(m));const y=E-x;y*1e3<=vo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${y}s, should have been closer to ${_}s`);const A=E-_;x-A>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",A,E,x):x-A<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",A,E,x);const{data:k,error:N}=await this._getUser(c);if(N)throw N;const C={provider_token:a,provider_refresh_token:o,access_token:c,expires_in:_,expires_at:E,refresh_token:u,token_type:b,user:k.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:C,redirectType:e.type},error:null})}catch(a){if($e(a))return this._returnResult({data:{session:null,redirectType:null},error:a});throw a}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Za(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var a;const{data:o,error:c}=n;if(c&&!hp(c))return this._returnResult({error:c});const u=(a=o.session)===null||a===void 0?void 0:a.access_token;if(u){const{error:f}=await this.admin.signOut(u,e);if(f&&!(yC(f)&&(f.status===404||f.status===401||f.status===403)||hp(f)))return this._returnResult({error:f})}return e!=="others"&&(await this._removeSession(),await gn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=TC(),a={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,a),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:a}}}async _emitInitialSession(e){return await this._useSession(async n=>{var a,o;try{const{data:{session:c},error:u}=n;if(u)throw u;await((a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",c)),this._debug("INITIAL_SESSION","callback id",e,"session",c)}catch(c){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",c),console.error(c)}})}async resetPasswordForEmail(e,n={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=await fo(this.storage,this.storageKey,!0));try{return await qe(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(c){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(c))return this._returnResult({data:null,error:c});throw c}}async getUserIdentities(){var e;try{const{data:n,error:a}=await this.getUser();if(a)throw a;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:a,error:o}=await this._useSession(async c=>{var u,f,m,b,x;const{data:_,error:E}=c;if(E)throw E;const y=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(f=e.options)===null||f===void 0?void 0:f.scopes,queryParams:(m=e.options)===null||m===void 0?void 0:m.queryParams,skipBrowserRedirect:!0});return await qe(this.fetch,"GET",y,{headers:this.headers,jwt:(x=(b=_.session)===null||b===void 0?void 0:b.access_token)!==null&&x!==void 0?x:void 0})});if(o)throw o;return bn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(a==null?void 0:a.url),this._returnResult({data:{provider:e.provider,url:a==null?void 0:a.url},error:null})}catch(a){if($e(a))return this._returnResult({data:{provider:e.provider,url:null},error:a});throw a}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var a;try{const{error:o,data:{session:c}}=n;if(o)throw o;const{options:u,provider:f,token:m,access_token:b,nonce:x}=e,_=await qe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(a=c==null?void 0:c.access_token)!==null&&a!==void 0?a:void 0,body:{provider:f,id_token:m,access_token:b,nonce:x,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:_s}),{data:E,error:y}=_;return y?this._returnResult({data:{user:null,session:null},error:y}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new ho}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:y}))}catch(o){if(await gn(this.storage,`${this.storageKey}-code-verifier`),$e(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var a,o;const{data:c,error:u}=n;if(u)throw u;return await qe(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const a=Date.now();return await RC(async o=>(o>0&&await jC(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await qe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_s})),(o,c)=>{const u=200*Math.pow(2,o);return c&&fp(c)&&Date.now()+u-a<vo})}catch(a){if(this._debug(n,"error",a),$e(a))return this._returnResult({data:{session:null,user:null},error:a});throw a}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const a=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",a),bn()&&!n.skipBrowserRedirect&&window.location.assign(a),{data:{provider:e,url:a},error:null}}async _recoverAndRefresh(){var e,n;const a="#_recoverAndRefresh()";this._debug(a,"begin");try{const o=await Za(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Za(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await _o(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:pp()}else if(o&&!o.user&&!o.user){const u=await Za(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await gn(this.storage,this.storageKey+"-user"),await _o(this.storage,this.storageKey,o)):o.user=pp()}if(this._debug(a,"session from storage",o),!this._isValidSession(o)){this._debug(a,"session is not valid"),o!==null&&await this._removeSession();return}const c=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<dp;if(this._debug(a,`session has${c?"":" not"} expired with margin of ${dp}s`),c){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),fp(u)||(this._debug(a,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:f}=await this._getUser(o.access_token);!f&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(a,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(a,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(a,"error",o),console.error(o);return}finally{this._debug(a,"end")}}async _callRefreshToken(e){var n,a;if(!e)throw new Vn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Hd;const{data:c,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!c.session)throw new Vn;await this._saveSession(c.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",c.session);const f={data:c.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(c){if(this._debug(o,"error",c),$e(c)){const u={data:null,error:c};return fp(c)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(a=this.refreshingDeferred)===null||a===void 0||a.reject(c),c}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,a=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${a}`);try{this.broadcastChannel&&a&&this.broadcastChannel.postMessage({event:e,session:n});const c=[],u=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(e,n)}catch(m){c.push(m)}});if(await Promise.all(u),c.length>0){for(let f=0;f<c.length;f+=1)console.error(c[f]);throw c[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await gn(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),a=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!a&&n.user&&await _o(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const c=Mv(o);await _o(this.storage,this.storageKey,c)}else{const o=Mv(n);await _o(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await gn(this.storage,this.storageKey),await gn(this.storage,this.storageKey+"-code-verifier"),await gn(this.storage,this.storageKey+"-user"),this.userStorage&&await gn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&bn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vo);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);const n=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);const n=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,n&&clearTimeout(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:a}}=n;if(!a||!a.refresh_token||!a.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((a.expires_at*1e3-e)/vo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${vo}ms, refresh threshold is ${zp} ticks`),o<=zp&&await this._callRefreshToken(a.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof W_)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}},window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,a){const o=[`provider=${encodeURIComponent(n)}`];if(a!=null&&a.redirectTo&&o.push(`redirect_to=${encodeURIComponent(a.redirectTo)}`),a!=null&&a.scopes&&o.push(`scopes=${encodeURIComponent(a.scopes)}`),this.flowType==="pkce"){const[c,u]=await fo(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(c)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(f.toString())}if(a!=null&&a.queryParams){const c=new URLSearchParams(a.queryParams);o.push(c.toString())}return a!=null&&a.skipBrowserRedirect&&o.push(`skip_http_redirect=${a.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var a;const{data:o,error:c}=n;return c?this._returnResult({data:null,error:c}):await qe(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var a,o;const{data:c,error:u}=n;if(u)return this._returnResult({data:null,error:u});const f=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:m,error:b}=await qe(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(a=c==null?void 0:c.session)===null||a===void 0?void 0:a.access_token});return b?this._returnResult({data:null,error:b}):(e.factorType==="totp"&&m.type==="totp"&&(!((o=m==null?void 0:m.totp)===null||o===void 0)&&o.qr_code)&&(m.totp.qr_code=`data:image/svg+xml;utf-8,${m.totp.qr_code}`),this._returnResult({data:m,error:null}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var a;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?oj(e.webauthn.credential_response):lj(e.webauthn.credential_response)})}:{code:e.code}),{data:f,error:m}=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});return m?this._returnResult({data:null,error:m}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:m}))})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async n=>{var a;const{data:o,error:c}=n;if(c)return this._returnResult({data:null,error:c});const u=await qe(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(a=o==null?void 0:o.session)===null||a===void 0?void 0:a.access_token});if(u.error)return u;const{data:f}=u;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:aj(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:ij(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:a}=await this._challenge({factorId:e.factorId});return a?this._returnResult({data:null,error:a}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:a}=await this.getUser();if(a)return{data:null,error:a};const o={all:[],phone:[],totp:[],webauthn:[]};for(const c of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(c),c.status==="verified"&&o[c.factor_type].push(c);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(e){var n,a,o,c;if(e)try{const{payload:y}=ld(e);let A=null;y.aal&&(A=y.aal);let k=A;const{data:{user:N},error:C}=await this.getUser(e);if(C)return this._returnResult({data:null,error:C});((a=(n=N==null?void 0:N.factors)===null||n===void 0?void 0:n.filter(V=>V.status==="verified"))!==null&&a!==void 0?a:[]).length>0&&(k="aal2");const z=y.amr||[];return{data:{currentLevel:A,nextLevel:k,currentAuthenticationMethods:z},error:null}}catch(y){if($e(y))return this._returnResult({data:null,error:y});throw y}const{data:{session:u},error:f}=await this.getSession();if(f)return this._returnResult({data:null,error:f});if(!u)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:m}=ld(u.access_token);let b=null;m.aal&&(b=m.aal);let x=b;((c=(o=u.user.factors)===null||o===void 0?void 0:o.filter(y=>y.status==="verified"))!==null&&c!==void 0?c:[]).length>0&&(x="aal2");const E=m.amr||[];return{data:{currentLevel:b,nextLevel:x,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;return o?this._returnResult({data:null,error:o}):a?await qe(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:a.access_token,xform:c=>({data:c,error:null})}):this._returnResult({data:null,error:new Vn})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Vn});const u=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&bn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async _denyAuthorization(e,n){try{return await this._useSession(async a=>{const{data:{session:o},error:c}=a;if(c)return this._returnResult({data:null,error:c});if(!o)return this._returnResult({data:null,error:new Vn});const u=await qe(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return u.data&&u.data.redirect_url&&bn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:a}=e;return a?this._returnResult({data:null,error:a}):n?await qe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Vn})})}catch(e){if($e(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:a},error:o}=n;return o?this._returnResult({data:null,error:o}):a?(await qe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:a.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Vn})})}catch(n){if($e(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let a=n.keys.find(f=>f.kid===e);if(a)return a;const o=Date.now();if(a=this.jwks.keys.find(f=>f.kid===e),a&&this.jwks_cached_at+gC>o)return a;const{data:c,error:u}=await qe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!c.keys||c.keys.length===0||(this.jwks=c,this.jwks_cached_at=o,a=c.keys.find(f=>f.kid===e),!a)?null:a}async getClaims(e,n={}){try{let a=e;if(!a){const{data:y,error:A}=await this.getSession();if(A||!y.session)return this._returnResult({data:null,error:A});a=y.session.access_token}const{header:o,payload:c,signature:u,raw:{header:f,payload:m}}=ld(a);n!=null&&n.allowExpired||PC(c.exp);const b=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!b){const{error:y}=await this.getUser(a);if(y)throw y;return{data:{claims:c,header:o,signature:u},error:null}}const x=zC(o.alg),_=await crypto.subtle.importKey("jwk",b,x,!0,["verify"]);if(!await crypto.subtle.verify(x,_,u,EC(`${f}.${m}`)))throw new Fp("Invalid JWT signature");return{data:{claims:c,header:o,signature:u},error:null}}catch(a){if($e(a))return this._returnResult({data:null,error:a});throw a}}}hc.nextInstanceID={};const bj=hc,yj="2.93.3";let Hl="";typeof Deno<"u"?Hl="deno":typeof document<"u"?Hl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Hl="react-native":Hl="node";const vj={"X-Client-Info":`supabase-js-${Hl}/${yj}`},_j={headers:vj},xj={schema:"public"},wj={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kj={};function fc(r){"@babel/helpers - typeof";return fc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fc(r)}function Sj(r,e){if(fc(r)!="object"||!r)return r;var n=r[Symbol.toPrimitive];if(n!==void 0){var a=n.call(r,e);if(fc(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function Ej(r){var e=Sj(r,"string");return fc(e)=="symbol"?e:e+""}function Aj(r,e,n){return(e=Ej(e))in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Hv(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),n.push.apply(n,a)}return n}function zt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hv(Object(n),!0).forEach(function(a){Aj(r,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hv(Object(n)).forEach(function(a){Object.defineProperty(r,a,Object.getOwnPropertyDescriptor(n,a))})}return r}const Tj=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Nj=()=>Headers,Cj=(r,e,n)=>{const a=Tj(n),o=Nj();return async(c,u)=>{var f;const m=(f=await e())!==null&&f!==void 0?f:r;let b=new o(u==null?void 0:u.headers);return b.has("apikey")||b.set("apikey",r),b.has("Authorization")||b.set("Authorization",`Bearer ${m}`),a(c,zt(zt({},u),{},{headers:b}))}};function jj(r){return r.endsWith("/")?r:r+"/"}function Rj(r,e){var n,a;const{db:o,auth:c,realtime:u,global:f}=r,{db:m,auth:b,realtime:x,global:_}=e,E={db:zt(zt({},m),o),auth:zt(zt({},b),c),realtime:zt(zt({},x),u),storage:{},global:zt(zt(zt({},_),f),{},{headers:zt(zt({},(n=_==null?void 0:_.headers)!==null&&n!==void 0?n:{}),(a=f==null?void 0:f.headers)!==null&&a!==void 0?a:{})}),accessToken:async()=>""};return r.accessToken?E.accessToken=r.accessToken:delete E.accessToken,E}function Dj(r){const e=r==null?void 0:r.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(jj(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Oj=class extends bj{constructor(r){super(r)}},Ij=class{constructor(r,e,n){var a,o;this.supabaseUrl=r,this.supabaseKey=e;const c=Dj(r);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,f={db:xj,realtime:kj,auth:zt(zt({},wj),{},{storageKey:u}),global:_j},m=Rj(n??{},f);if(this.storageKey=(a=m.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(o=m.global.headers)!==null&&o!==void 0?o:{},m.accessToken)this.accessToken=m.accessToken,this.auth=new Proxy({},{get:(x,_)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=m.auth)!==null&&b!==void 0?b:{},this.headers,m.global.fetch)}this.fetch=Cj(e,this._getAccessToken.bind(this),m.global.fetch),this.realtime=this._initRealtimeClient(zt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},m.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(x=>this.realtime.setAuth(x)).catch(x=>console.warn("Failed to set initial Realtime auth token:",x)),this.rest=new y4(new URL("rest/v1",c).href,{headers:this.headers,schema:m.db.schema,fetch:this.fetch}),this.storage=new dC(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),m.accessToken||this._listenForAuthEvents()}get functions(){return new f4(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(r){return this.rest.from(r)}schema(r){return this.rest.schema(r)}rpc(r,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(r,e,n)}channel(r,e={config:{}}){return this.realtime.channel(r,e)}getChannels(){return this.realtime.getChannels()}removeChannel(r){return this.realtime.removeChannel(r)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var r=this,e,n;if(r.accessToken)return await r.accessToken();const{data:a}=await r.auth.getSession();return(e=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:r.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:r,persistSession:e,detectSessionInUrl:n,storage:a,userStorage:o,storageKey:c,flowType:u,lock:f,debug:m,throwOnError:b},x,_){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Oj({url:this.authUrl.href,headers:zt(zt({},E),x),storageKey:c,autoRefreshToken:r,persistSession:e,detectSessionInUrl:n,storage:a,userStorage:o,flowType:u,lock:f,debug:m,throwOnError:b,fetch:_,hasCustomAuthorizationHeader:Object.keys(this.headers).some(y=>y.toLowerCase()==="authorization")})}_initRealtimeClient(r){return new L4(this.realtimeUrl.href,zt(zt({},r),{},{params:zt(zt({},{apikey:this.supabaseKey}),r==null?void 0:r.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,e)=>{this._handleTokenChanged(r,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(r,e,n){(r==="TOKEN_REFRESHED"||r==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):r==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Lj=(r,e,n)=>new Ij(r,e,n);function Uj(){if(typeof window<"u")return!1;const r=globalThis.process;if(!r)return!1;const e=r.version;if(e==null)return!1;const n=e.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}Uj()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Mj="https://placeholder.supabase.co",Pj="placeholder-anon-key";console.warn(" Missing Supabase environment variables. Auth and database features will not work correctly. Please set VITE_SUPABASE_URL and VITE_SUPABASE_ANON_KEY in your .env.local file.");const qv=Lj(Mj,Pj),zj=({isOpen:r,onClose:e,mode:n="modal"})=>{const[a,o]=K.useState([]),[c,u]=K.useState(null),[f,m]=K.useState(null),[b,x]=K.useState(""),[_,E]=K.useState(""),[y,A]=K.useState(""),[k,N]=K.useState(""),[C,I]=K.useState("reader"),[z,V]=K.useState(!1),[H,G]=K.useState(!1),[M,j]=K.useState(""),[O,F]=K.useState(""),[q,D]=K.useState(""),[L,R]=K.useState("reader"),[ge,Q]=K.useState({}),[X,_e]=K.useState({}),[re,te]=K.useState({}),[W,Z]=K.useState({}),[pe,ne]=K.useState(()=>Gy().slice(0,30));K.useEffect(()=>{(r||n==="inline")&&ie()},[r,n]);const ie=()=>{const U=bo(),B=Ll(),J=ai(),de=new Set([...Object.keys(U),...Object.keys(B),...Object.keys(J)]),we=Array.from(de).map(je=>{const Ne=je.toLowerCase(),Pe=B[Ne]||{firstName:"",lastName:""},et=J[Ne]||{blocked:!1,forcePasswordChange:!1,lastAccessAt:null};return{email:Ne,role:U[Ne]||"reader",firstName:Pe.firstName,lastName:Pe.lastName,password:"",blocked:!!et.blocked,forcePasswordChange:!!et.forcePasswordChange,lastAccessAt:et.lastAccessAt??null}}).sort((je,Ne)=>je.email.localeCompare(Ne.email));o(we);const oe={};we.forEach(je=>{oe[je.email]={firstName:je.firstName,lastName:je.lastName}}),_e(oe);const Ce={};we.forEach(je=>{Ce[je.email]=je.password}),te(Ce),ne(Gy().slice(0,30))},Ae=async()=>{var U;if(!b.trim()||!_.trim()||!y.trim()||!k.trim()){u("Nombre, apellido, email y contrasea son requeridos");return}if(k.length<6){u("La contrasea debe tener al menos 6 caracteres");return}G(!0),u(null),m(null);try{const B=y.trim().toLowerCase(),J=b.trim(),de=_.trim(),{error:we}=await qv.auth.signUp({email:B,password:k,options:{emailRedirectTo:window.location.origin,data:{role:C,first_name:J,last_name:de,full_name:`${J} ${de}`.trim()}}});if(we)throw we;const oe=bo();oe[B]=C,Zu(oe);const Ce=Ll();Ce[B]={firstName:J,lastName:de},Qu(Ce);const je=ai();je[B]={blocked:!1,forcePasswordChange:!1,lastAccessAt:null},Wl(je),Dn({scope:"admin",action:"create_user",actor:"admin",target:B,details:`Creado con rol ${C}`}),ie(),m(`Usuario ${B} creado exitosamente como ${Vl[C]}`),x(""),E(""),A(""),N(""),I("reader"),V(!1)}catch(B){(U=B.message)!=null&&U.includes("already registered")?u("Este email ya est registrado"):u(B.message||"Error al crear usuario")}finally{G(!1)}},ke=(U,B)=>{const J=bo();J[U.toLowerCase()]=B,Zu(J),Dn({scope:"admin",action:"change_role",actor:"admin",target:U,details:`Rol actualizado a ${B}`}),ie(),m(`Rol de ${U} cambiado a ${Vl[B]}`)},ae=U=>{if(U.toLowerCase()==="mguzmanahumada@gmail.com"){u("No puedes eliminar al administrador principal");return}const B=bo();delete B[U.toLowerCase()],Zu(B);const J=Ll();delete J[U.toLowerCase()],Qu(J);const de=ai();delete de[U.toLowerCase()],Wl(de),Dn({scope:"admin",action:"remove_user",actor:"admin",target:U,details:"Usuario eliminado del panel"}),ie(),m(`Usuario ${U} eliminado de la gestin de roles`)},Re=()=>{if(!q.trim()){u("Ingresa un email");return}if(!M.trim()||!O.trim()){u("Ingresa nombre y apellido del usuario");return}const U=q.trim().toLowerCase(),B=M.trim(),J=O.trim(),de=bo();if(de[U]){u("Este usuario ya est en la lista");return}de[U]=L,Zu(de);const we=Ll();we[U]={firstName:B,lastName:J},Qu(we);const oe=ai();oe[U]||(oe[U]={blocked:!1,forcePasswordChange:!1,lastAccessAt:null}),Wl(oe),Dn({scope:"admin",action:"add_existing_user",actor:"admin",target:U,details:`Asignado como ${L}`}),ie(),m(`Usuario ${U} aadido como ${Vl[L]}`),j(""),F(""),D(""),R("reader")},Te=(U,B,J)=>{_e(de=>({...de,[U]:{...de[U]||{firstName:"",lastName:""},[B]:J}}))},Ie=U=>{const B=X[U]||{firstName:"",lastName:""},J=B.firstName.trim(),de=B.lastName.trim();if(!J||!de){u("Nombre y apellido no pueden quedar vacos");return}const we=Ll();we[U.toLowerCase()]={firstName:J,lastName:de},Qu(we),Dn({scope:"admin",action:"update_profile",actor:"admin",target:U,details:`Nombre actualizado a ${J} ${de}`}),ie(),m(`Datos actualizados para ${U}`)},Be=async U=>{const B=U.toLowerCase();u(null),m(null),Q(J=>({...J,[B]:!0}));try{const{error:J}=await qv.auth.resetPasswordForEmail(B,{redirectTo:`${window.location.origin}/reset-password`});if(J)throw J;pd(B,{forcePasswordChange:!1}),Dn({scope:"admin",action:"reset_password_email",actor:"admin",target:B,details:"Envio de email de restablecimiento"}),m(`Se envi un enlace de restablecimiento de contrasea a ${B}`)}catch(J){u(J.message||"No se pudo iniciar el restablecimiento de contrasea")}finally{Q(J=>({...J,[B]:!1}))}},Ue=(U,B)=>{pd(U,{blocked:B}),Dn({scope:"admin",action:B?"block_user":"unblock_user",actor:"admin",target:U,details:B?"Cuenta bloqueada":"Cuenta desbloqueada"}),ie(),m(B?`Usuario ${U} bloqueado`:`Usuario ${U} desbloqueado`)},S=(U,B)=>{pd(U,{forcePasswordChange:B}),Dn({scope:"admin",action:B?"force_password_change_on":"force_password_change_off",actor:"admin",target:U,details:B?"Cambio de contrasea obligatorio activado":"Cambio de contrasea obligatorio desactivado"}),ie(),m(B?`Se exigir cambio de contrasea a ${U}`:`Se quit la exigencia de cambio para ${U}`)},ve=()=>h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-5 border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(hv,{className:"w-5 h-5 text-indigo-500"}),h.jsx("h3",{className:"font-black text-slate-900 dark:text-white",children:"Crear Nuevo Usuario"})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Nombre"}),h.jsx("input",{type:"text",value:b,onChange:U=>x(U.target.value),placeholder:"Ej: Juan",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Apellido"}),h.jsx("input",{type:"text",value:_,onChange:U=>E(U.target.value),placeholder:"Ej: Perez",className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Email"}),h.jsxs("div",{className:"relative",children:[h.jsx(m0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),h.jsx("input",{type:"email",value:y,onChange:U=>A(U.target.value),placeholder:"usuario@email.com",className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Contrasea"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:z?"text":"password",value:k,onChange:U=>N(U.target.value),placeholder:"Mnimo 6 caracteres",className:"w-full pl-4 pr-11 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500"}),h.jsx("button",{type:"button",onClick:()=>V(U=>!U),className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",title:z?"Ocultar contrasea":"Mostrar contrasea",children:z?h.jsx(x_,{size:16}):h.jsx(ac,{size:16})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-xs font-bold text-slate-500 dark:text-slate-400 uppercase tracking-wider mb-2",children:"Rol"}),h.jsxs("select",{value:C,onChange:U=>I(U.target.value),className:"w-full px-4 py-2.5 bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[h.jsx("option",{value:"reader",children:"Lector"}),h.jsx("option",{value:"editor",children:"Editor"}),h.jsx("option",{value:"admin",children:"Administrador"})]})]}),h.jsx("div",{className:"flex items-end",children:h.jsx("button",{onClick:Ae,disabled:H,className:"w-full py-2.5 bg-indigo-600 hover:bg-indigo-700 disabled:bg-slate-400 text-white font-bold rounded-xl transition-colors flex items-center justify-center gap-2",children:H?h.jsxs(h.Fragment,{children:[h.jsx(Nd,{className:"w-4 h-4 animate-spin"})," Creando..."]}):h.jsxs(h.Fragment,{children:[h.jsx(hv,{className:"w-4 h-4"})," Crear Usuario"]})})})]}),h.jsx("p",{className:"text-xs text-slate-400 mt-3",children:"Se creara el usuario con nombre, apellido y rol. Supabase enviara confirmacion por correo si esta habilitada."})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[h.jsx(jd,{className:"w-5 h-5 text-indigo-500"}),h.jsx("h3",{className:"font-black text-slate-900 dark:text-white",children:"Usuarios Registrados"}),h.jsx("span",{className:"px-2 py-0.5 bg-slate-200 dark:bg-slate-700 text-slate-600 dark:text-slate-300 rounded-full text-xs font-bold",children:a.length})]}),h.jsxs("div",{className:"space-y-2",children:[a.map(U=>{var B,J;return h.jsxs("div",{className:"p-4 bg-white dark:bg-slate-900/50 border border-slate-200 dark:border-slate-700 rounded-xl space-y-3",children:[h.jsxs("div",{className:"flex items-center justify-between gap-3",children:[h.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[h.jsx("div",{className:`w-10 h-10 rounded-xl flex items-center justify-center ${U.role==="admin"?"bg-purple-100 dark:bg-purple-900/40":"bg-slate-100 dark:bg-slate-800"}`,children:U.role==="admin"?h.jsx(pN,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}):h.jsx(ac,{className:"w-5 h-5 text-slate-500 dark:text-slate-400"})}),h.jsxs("div",{className:"min-w-0",children:[h.jsx("p",{className:"font-bold text-sm text-slate-900 dark:text-white truncate",children:U.firstName||U.lastName?`${U.firstName} ${U.lastName}`.trim():"Sin nombre configurado"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:U.email}),h.jsxs("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 flex items-center gap-1 mt-0.5",children:[h.jsx(cv,{className:"w-3 h-3"}),U.lastAccessAt?`ltimo acceso: ${new Date(U.lastAccessAt).toLocaleString("es-CL")}`:"Sin accesos registrados"]}),h.jsx("span",{className:`inline-flex mt-1 px-2 py-0.5 rounded-md text-[10px] font-black uppercase tracking-wider ${Tp[U.role].bg} ${Tp[U.role].text}`,children:Vl[U.role]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("select",{value:U.role,onChange:de=>ke(U.email,de.target.value),disabled:U.email.toLowerCase()==="mguzmanahumada@gmail.com",className:"px-3 py-1.5 bg-slate-100 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-xs font-bold disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx("option",{value:"reader",children:"Lector"}),h.jsx("option",{value:"editor",children:"Editor"}),h.jsx("option",{value:"admin",children:"Admin"})]}),U.email.toLowerCase()!=="mguzmanahumada@gmail.com"&&h.jsx("button",{onClick:()=>ae(U.email),className:"p-2 text-red-400 hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/30 rounded-lg transition-colors",title:"Eliminar de la gestin",children:h.jsx(T_,{className:"w-4 h-4"})})]})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-[1fr_1fr_auto] gap-2",children:[h.jsx("input",{type:"text",value:((B=X[U.email])==null?void 0:B.firstName)??"",onChange:de=>Te(U.email,"firstName",de.target.value),placeholder:"Nombre",className:"px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm"}),h.jsx("input",{type:"text",value:((J=X[U.email])==null?void 0:J.lastName)??"",onChange:de=>Te(U.email,"lastName",de.target.value),placeholder:"Apellido",className:"px-3 py-2 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-lg text-sm"}),h.jsxs("button",{onClick:()=>Ie(U.email),className:"px-3 py-2 bg-slate-800 hover:bg-slate-900 dark:bg-slate-700 dark:hover:bg-slate-600 text-white rounded-lg text-xs font-bold flex items-center justify-center gap-1.5",children:[h.jsx(Rp,{size:13})," Guardar"]})]}),h.jsx("div",{className:"flex justify-end mt-1",children:h.jsx("button",{onClick:()=>Be(U.email),disabled:!!ge[U.email],className:"px-3 py-2 bg-indigo-50 hover:bg-indigo-100 dark:bg-indigo-900/30 dark:hover:bg-indigo-900/50 text-indigo-700 dark:text-indigo-300 rounded-lg text-xs font-bold flex items-center gap-2 disabled:opacity-60",children:ge[U.email]?h.jsxs(h.Fragment,{children:[h.jsx(Nd,{className:"w-4 h-4 animate-spin"})," Enviando..."]}):h.jsxs(h.Fragment,{children:[h.jsx(PN,{className:"w-4 h-4"})," Restablecer por Email"]})})}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[h.jsxs("button",{onClick:()=>Ue(U.email,!U.blocked),className:`px-3 py-2 rounded-lg text-xs font-bold flex items-center justify-center gap-2 ${U.blocked?"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/30 dark:text-emerald-300":"bg-red-50 text-red-700 dark:bg-red-900/30 dark:text-red-300"}`,children:[h.jsx(h5,{className:"w-4 h-4"}),U.blocked?"Desbloquear usuario":"Bloquear usuario"]}),h.jsx("button",{onClick:()=>S(U.email,!U.forcePasswordChange),className:`px-3 py-2 rounded-lg text-xs font-bold ${U.forcePasswordChange?"bg-amber-50 text-amber-700 dark:bg-amber-900/30 dark:text-amber-300":"bg-slate-100 text-slate-700 dark:bg-slate-700 dark:text-slate-200"}`,children:U.forcePasswordChange?"Quitar cambio obligatorio":"Forzar cambio de contrasea"})]})]},U.email)}),a.length===0&&h.jsxs("div",{className:"text-center py-8 text-slate-400",children:[h.jsx(jd,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),h.jsx("p",{className:"text-sm",children:"No hay usuarios registrados"})]})]})]}),h.jsxs("div",{className:"bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-2xl p-5",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(g0,{className:"w-5 h-5 text-amber-600"}),h.jsx("h3",{className:"font-black text-amber-800 dark:text-amber-300",children:"Asignar Rol a Usuario Existente"})]}),h.jsx("p",{className:"text-xs text-amber-700 dark:text-amber-400 mb-4",children:"Si el usuario ya tiene cuenta en Supabase, puedes registrarlo en este panel con su nombre, apellido y rol."}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[h.jsx("input",{type:"text",value:M,onChange:U=>j(U.target.value),placeholder:"Nombre",className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-lg text-sm"}),h.jsx("input",{type:"text",value:O,onChange:U=>F(U.target.value),placeholder:"Apellido",className:"px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-lg text-sm"}),h.jsx("input",{type:"email",value:q,onChange:U=>D(U.target.value),placeholder:"email@existente.com",className:"sm:col-span-2 px-4 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-lg text-sm"})]}),h.jsxs("div",{className:"flex gap-2 mt-2",children:[h.jsxs("select",{value:L,onChange:U=>R(U.target.value),className:"px-3 py-2 bg-white dark:bg-slate-800 border border-amber-300 dark:border-amber-700 rounded-lg text-sm",children:[h.jsx("option",{value:"reader",children:"Lector"}),h.jsx("option",{value:"editor",children:"Editor"}),h.jsx("option",{value:"admin",children:"Admin"})]}),h.jsx("button",{onClick:Re,className:"px-4 py-2 bg-amber-600 hover:bg-amber-700 text-white font-bold rounded-lg text-sm",children:"Anadir"})]})]}),h.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-2xl p-5 border border-slate-200 dark:border-slate-700",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx(cv,{className:"w-5 h-5 text-indigo-500"}),h.jsx("h3",{className:"font-black text-slate-900 dark:text-white",children:"Auditora reciente"})]}),h.jsxs("div",{className:"space-y-2 max-h-56 overflow-y-auto custom-scrollbar",children:[pe.length===0&&h.jsx("p",{className:"text-xs text-slate-500",children:"Sin eventos registrados."}),pe.map(U=>h.jsxs("div",{className:"p-2.5 rounded-lg bg-white dark:bg-slate-800 border border-slate-200 dark:border-slate-700",children:[h.jsxs("p",{className:"text-xs font-bold text-slate-700 dark:text-slate-200",children:[U.action," ",U.target?` ${U.target}`:""]}),h.jsx("p",{className:"text-[11px] text-slate-500 dark:text-slate-400",children:U.details||"Sin detalle"}),h.jsx("p",{className:"text-[10px] text-slate-400 dark:text-slate-500 mt-1",children:new Date(U.timestamp).toLocaleString("es-CL")})]},U.id))]})]})]}),me=()=>h.jsxs(h.Fragment,{children:[c&&h.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl flex items-start gap-3",children:[h.jsx(Oo,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-sm text-red-700 dark:text-red-400",children:c}),h.jsx("button",{onClick:()=>u(null),className:"ml-auto text-red-400 hover:text-red-600",children:h.jsx(Gn,{size:16})})]}),f&&h.jsxs("div",{className:"p-4 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl flex items-start gap-3",children:[h.jsx(Sc,{className:"w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5"}),h.jsx("p",{className:"text-sm text-emerald-700 dark:text-emerald-400",children:f}),h.jsx("button",{onClick:()=>m(null),className:"ml-auto text-emerald-400 hover:text-emerald-600",children:h.jsx(Gn,{size:16})})]})]});return n!=="inline"&&!r?null:n==="inline"?h.jsxs("div",{className:"space-y-6",children:[me(),ve()]}):h.jsxs("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4",children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm",onClick:e}),h.jsxs("div",{className:"relative w-full max-w-2xl max-h-[90vh] bg-white dark:bg-slate-800 rounded-3xl shadow-2xl overflow-hidden flex flex-col",children:[h.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 px-6 py-5 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center",children:h.jsx(oc,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-black text-white",children:"Panel de Administracin"}),h.jsx("p",{className:"text-xs text-white/70",children:"Gestin de usuarios y roles"})]})]}),h.jsx("button",{onClick:e,className:"p-2 hover:bg-white/20 rounded-lg transition-colors",children:h.jsx(Gn,{className:"w-5 h-5 text-white"})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[me(),ve()]})]})]})},Bj=({isOpen:r,onClose:e,records:n,employees:a,onNavigate:o,onNewDecree:c,onSelectEmployee:u,onSelectRecord:f,onExportData:m})=>{const[b,x]=K.useState(""),[_,E]=K.useState(0),y=K.useRef(null),A=K.useRef(null);K.useEffect(()=>{r&&(x(""),E(0),setTimeout(()=>{var G;return(G=y.current)==null?void 0:G.focus()},50))},[r]);const k=K.useMemo(()=>[{id:"new-pa",type:"action",icon:h.jsx(uv,{className:"w-4 h-4"}),title:"Nuevo Permiso Administrativo",subtitle:"Crear un nuevo decreto de PA",keywords:["nuevo","crear","permiso","administrativo","pa"],action:()=>{c("PA"),e()},shortcut:"N"},{id:"new-fl",type:"action",icon:h.jsx(uv,{className:"w-4 h-4"}),title:"Nuevo Feriado Legal",subtitle:"Crear un nuevo decreto de FL",keywords:["nuevo","crear","feriado","legal","fl","vacaciones"],action:()=>{c("FL"),e()},shortcut:"F"},{id:"nav-dashboard",type:"navigation",icon:h.jsx(b_,{className:"w-4 h-4"}),title:"Ir al Dashboard",subtitle:"Ver estadsticas y reportes",keywords:["dashboard","estadisticas","reportes","graficos"],action:()=>{o("dashboard"),e()},shortcut:"D"},{id:"nav-calendar",type:"navigation",icon:h.jsx(gi,{className:"w-4 h-4"}),title:"Ver Calendario",subtitle:"Visualizar decretos en calendario",keywords:["calendario","fechas","mes","semana"],action:()=>{o("calendar"),e()},shortcut:"C"},{id:"nav-employees",type:"navigation",icon:h.jsx(ci,{className:"w-4 h-4"}),title:"Lista de Funcionarios",subtitle:"Gestionar empleados",keywords:["funcionarios","empleados","personas","lista"],action:()=>{o("employees"),e()},shortcut:"E"},{id:"nav-settings",type:"navigation",icon:h.jsx(oc,{className:"w-4 h-4"}),title:"Configuracin",subtitle:"Preferencias y administracin",keywords:["configuracion","ajustes","settings","admin"],action:()=>{o("settings"),e()},shortcut:"S"},{id:"export-data",type:"action",icon:h.jsx(__,{className:"w-4 h-4"}),title:"Exportar Datos",subtitle:"Descargar datos a Excel",keywords:["exportar","descargar","excel","datos"],action:()=>{m(),e()},shortcut:"X"}],[c,o,m,e]),N=K.useMemo(()=>a.map(G=>({id:`emp-${G.rut}`,type:"employee",icon:h.jsx(ci,{className:"w-4 h-4"}),title:G.nombre,subtitle:`RUT: ${G.rut}`,keywords:[G.nombre.toLowerCase(),G.rut.toLowerCase()],action:()=>{u(G),e()}})),[a,u,e]),C=K.useMemo(()=>n.slice().sort((G,M)=>mi(G,M)).slice(0,120).map(G=>({id:`rec-${G.id}`,type:"decree",icon:h.jsx(ic,{className:"w-4 h-4"}),title:`${G.solicitudType} N ${G.acto}`,subtitle:`${G.funcionario}  ${G.cantidadDias} das`,keywords:[G.funcionario.toLowerCase(),G.acto.toLowerCase(),G.solicitudType.toLowerCase(),G.rut.toLowerCase()],action:()=>{f(G),e()}})),[n,f,e]),I=K.useMemo(()=>{const G=b.toLowerCase().trim().split(/\s+/);return b.trim()?[...k,...N,...C].filter(j=>{var F;const O=[j.title.toLowerCase(),((F=j.subtitle)==null?void 0:F.toLowerCase())||"",...j.keywords||[]].join(" ");return G.every(q=>O.includes(q))}).slice(0,60):k},[b,k,N,C]),z=K.useCallback(G=>{switch(G.key){case"ArrowDown":G.preventDefault(),E(M=>M<I.length-1?M+1:0);break;case"ArrowUp":G.preventDefault(),E(M=>M>0?M-1:I.length-1);break;case"Enter":G.preventDefault(),I[_]&&I[_].action();break;case"Escape":G.preventDefault(),e();break}},[I,_,e]);if(K.useEffect(()=>{var M;const G=(M=A.current)==null?void 0:M.children[_];G&&G.scrollIntoView({block:"nearest",behavior:"smooth"})},[_]),K.useEffect(()=>{E(0)},[b]),!r)return null;const V=G=>{switch(G){case"action":return"ACCIN";case"employee":return"FUNCIONARIO";case"decree":return"DECRETO";case"navigation":return"NAVEGACIN"}},H=G=>{switch(G){case"action":return"bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-400";case"employee":return"bg-blue-100 text-blue-700 dark:bg-blue-900/50 dark:text-blue-400";case"decree":return"bg-purple-100 text-purple-700 dark:bg-purple-900/50 dark:text-purple-400";case"navigation":return"bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-400"}};return h.jsxs("div",{className:"fixed inset-0 z-[300] flex items-start justify-center pt-[15vh]",onClick:e,children:[h.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),h.jsxs("div",{className:"relative w-full max-w-2xl bg-white dark:bg-slate-800 rounded-2xl shadow-2xl overflow-hidden mx-4 animate-in zoom-in-95 slide-in-from-top-4 duration-200",onClick:G=>G.stopPropagation(),children:[h.jsxs("div",{className:"flex items-center gap-3 px-5 py-4 border-b border-slate-200 dark:border-slate-700",children:[h.jsx(Dp,{className:"w-5 h-5 text-slate-400 flex-shrink-0"}),h.jsx("input",{ref:y,type:"text",value:b,onChange:G=>x(G.target.value),onKeyDown:z,placeholder:"Buscar decretos, funcionarios o comandos...",className:"flex-1 bg-transparent text-slate-900 dark:text-white text-base placeholder-slate-400 dark:placeholder-slate-500 outline-none"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("kbd",{className:"hidden sm:flex items-center gap-0.5 px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 uppercase",children:[h.jsx(hN,{className:"w-3 h-3"}),"K"]}),h.jsx("button",{onClick:e,className:"p-1.5 hover:bg-slate-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:h.jsx(Gn,{className:"w-4 h-4 text-slate-400"})})]})]}),h.jsx("div",{ref:A,className:"max-h-[50vh] overflow-y-auto custom-scrollbar",children:I.length>0?h.jsx("div",{className:"py-2",children:I.map((G,M)=>h.jsxs("button",{onClick:G.action,onMouseEnter:()=>E(M),className:`w-full flex items-center gap-3 px-5 py-3 text-left transition-colors ${M===_?"bg-indigo-50 dark:bg-indigo-900/30":"hover:bg-slate-50 dark:hover:bg-slate-700/50"}`,children:[h.jsx("div",{className:`p-2 rounded-xl ${M===_?"bg-indigo-100 text-indigo-600 dark:bg-indigo-900/50 dark:text-indigo-400":"bg-slate-100 text-slate-500 dark:bg-slate-700 dark:text-slate-400"}`,children:G.icon}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsx("p",{className:`text-sm font-semibold truncate ${M===_?"text-indigo-900 dark:text-indigo-100":"text-slate-800 dark:text-slate-200"}`,children:G.title}),G.subtitle&&h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate mt-0.5",children:G.subtitle})]}),h.jsx("span",{className:`hidden sm:inline-block px-2 py-0.5 rounded-full text-[9px] font-black uppercase tracking-wider ${H(G.type)}`,children:V(G.type)}),G.shortcut&&h.jsx("kbd",{className:"hidden sm:block px-2 py-1 bg-slate-100 dark:bg-slate-700 rounded text-[10px] font-bold text-slate-500 dark:text-slate-400 font-mono",children:G.shortcut}),h.jsx(p_,{className:`w-4 h-4 flex-shrink-0 transition-transform ${M===_?"text-indigo-500 translate-x-0.5":"text-slate-300 dark:text-slate-600"}`})]},G.id))}):h.jsxs("div",{className:"py-12 text-center",children:[h.jsx(w_,{className:"w-10 h-10 text-slate-200 dark:text-slate-700 mx-auto mb-3"}),h.jsxs("p",{className:"text-sm font-bold text-slate-400 dark:text-slate-500",children:['Sin resultados para "',b,'"']}),h.jsx("p",{className:"text-xs text-slate-400 dark:text-slate-600 mt-1",children:"Intenta con otro trmino de bsqueda"})]})}),h.jsxs("div",{className:"px-5 py-3 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 flex items-center justify-between",children:[h.jsxs("div",{className:"flex items-center gap-4 text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:[h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 dark:bg-slate-700 rounded text-[9px]",children:""}),"Navegar"]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 dark:bg-slate-700 rounded text-[9px]",children:""}),"Seleccionar"]}),h.jsxs("span",{className:"flex items-center gap-1",children:[h.jsx("kbd",{className:"px-1.5 py-0.5 bg-slate-200 dark:bg-slate-700 rounded text-[9px]",children:"ESC"}),"Cerrar"]})]}),h.jsx("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider",children:"GDP Cloud v2.5"})]})]})]})},$j=({userName:r,totalRecords:e,totalEmployees:n,criticalAlerts:a,onClickDecrees:o,onClickEmployees:c,onClickUrgent:u})=>{const[f,m]=K.useState(!1),[b,x]=K.useState(!1);K.useEffect(()=>{const k=`gdp-banner-dismissed-${new Date().toDateString()}`;localStorage.getItem(k)&&m(!0)},[]);const _=()=>{x(!0);const k=`gdp-banner-dismissed-${new Date().toDateString()}`;localStorage.setItem(k,"true"),setTimeout(()=>m(!0),300)},E=K.useMemo(()=>{const k=new Date().getHours();return k<12?"Buenos das":k<18?"Buenas tardes":"Buenas noches"},[]),y=K.useMemo(()=>new Date().toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),[]),A=(r==null?void 0:r.trim())||null;return f?null:h.jsxs("div",{className:`relative overflow-hidden rounded-2xl p-5 page-fade-in ${b?"toast-exit":""}`,children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-indigo-500/5 via-purple-500/5 to-pink-500/5 dark:from-indigo-500/10 dark:via-purple-500/10 dark:to-pink-500/10"}),h.jsx("div",{className:"absolute inset-0 border border-indigo-100/50 dark:border-indigo-800/30 rounded-2xl"}),h.jsxs("div",{className:"relative flex items-start justify-between gap-4",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[h.jsx(zd,{className:"w-4 h-4 text-indigo-500"}),h.jsx("span",{className:"text-[10px] font-black text-indigo-500/70 dark:text-indigo-400/70 uppercase tracking-widest",children:y})]}),h.jsxs("h2",{className:"text-base sm:text-lg font-black text-slate-800 dark:text-white tracking-tight",children:[E,A?`, ${A}`:""]}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 mt-1 leading-relaxed max-w-lg",children:a>0?`Tienes ${a} alerta${a>1?"s":""} que requiere${a>1?"n":""} atencin.`:"Todo en orden. Los saldos y registros estn actualizados."}),h.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[h.jsxs("button",{type:"button",onClick:o,title:"Ver decretos","aria-label":"Ver decretos",className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-white/80 dark:bg-slate-800/80 border border-slate-200/50 dark:border-slate-700/50 rounded-lg text-[10px] font-bold text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[h.jsx(w5,{className:"w-3 h-3 text-indigo-500"}),e," decretos"]}),h.jsxs("button",{type:"button",onClick:c,title:"Ver funcionarios","aria-label":"Ver funcionarios",className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-white/80 dark:bg-slate-800/80 border border-slate-200/50 dark:border-slate-700/50 rounded-lg text-[10px] font-bold text-slate-600 dark:text-slate-300 hover:bg-white dark:hover:bg-slate-800 transition-colors",children:[h.jsx(g0,{className:"w-3 h-3 text-emerald-500"}),n," funcionarios"]}),a>0&&h.jsxs("button",{type:"button",onClick:u,title:"Ver alertas urgentes","aria-label":"Ver alertas urgentes",className:"inline-flex items-center gap-1.5 px-2.5 py-1 bg-red-50 dark:bg-red-900/20 border border-red-200/50 dark:border-red-800/50 rounded-lg text-[10px] font-bold text-red-600 dark:text-red-400 hover:bg-red-100/70 dark:hover:bg-red-900/30 transition-colors",children:[h.jsx(f0,{className:"w-3 h-3"}),a," urgente",a>1?"s":""]})]})]}),h.jsx("button",{onClick:_,className:"p-1.5 rounded-lg hover:bg-slate-200/50 dark:hover:bg-slate-700/50 transition-colors text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 shrink-0","aria-label":"Cerrar banner",children:h.jsx(Gn,{className:"w-4 h-4"})})]})]})},gp=yi.create("ExcelExport"),Fj=async r=>{const e=r.filter(a=>a.solicitudType==="PA"),n=r.filter(a=>a.solicitudType==="FL");if(e.length+n.length===0)return{success:!1,error:"No hay datos para exportar"};try{gp.info(`Iniciando exportacin de ${r.length} registros...`);const a=await cs(()=>import("./xlsx-CkFp8p6R.js"),[]),o=new Date().toLocaleString(),c=a.utils.book_new();if(e.length>0){const m=e.map((_,E)=>[E+1,_.solicitudType,_.acto,_.materia||"Decreto Exento",_.funcionario,_.rut,_.periodo,_.cantidadDias,Ts(_.fechaInicio),_.tipoJornada,_.diasHaber,Yy(_.fechaDecreto),_.diasHaber-_.cantidadDias,_.ra,_.emite]),b=a.utils.aoa_to_sheet([[fv],[`Generado el ${o}`],[],z5,...m]),x=a.utils.decode_range(b["!ref"]||"A1:O1");for(let _=4;_<=x.e.r;++_){const E=b[a.utils.encode_cell({r:_,c:7})];E&&(E.t="n");const y=b[a.utils.encode_cell({r:_,c:10})];y&&(y.t="n");const A=b[a.utils.encode_cell({r:_,c:12})];A&&(A.t="n")}a.utils.book_append_sheet(c,b,"PA")}if(n.length>0){const m=["#","Tipo","Acto","Materia","Funcionario","RUT","Cantidad de das","Perodo 1","Saldo Disp P1","Solicitado P1","Saldo Final P1","Perodo 2","Saldo Disp P2","Solicitado P2","Saldo Final P2","Fecha inicio","Fecha trmino","Fecha decreto","R.A","Emite"],b=n.map((y,A)=>{const k=y.saldoFinalP1??(y.saldoDisponibleP1||0)-(y.solicitadoP1||0),N=y.saldoFinalP2??(y.saldoDisponibleP2||0)-(y.solicitadoP2||0);return[A+1,y.solicitudType,y.acto,y.materia||"Decreto Exento",y.funcionario,y.rut,y.cantidadDias,y.periodo1||"",y.saldoDisponibleP1||0,y.solicitadoP1||0,k,y.periodo2||"",y.saldoDisponibleP2||0,y.solicitadoP2||0,N,Ts(y.fechaInicio),Ts(y.fechaTermino||""),Yy(y.fechaDecreto),y.ra,y.emite]}),x=a.utils.aoa_to_sheet([[fv],[`Generado el ${o}`],[],m,...b]),_=a.utils.decode_range(x["!ref"]||"A1:T1"),E=[6,8,9,10,12,13,14];for(let y=4;y<=_.e.r;++y)E.forEach(A=>{const k=x[a.utils.encode_cell({r:y,c:A})];k&&(k.t="n")});a.utils.book_append_sheet(c,x,"FL")}const f=`Planilla_Decretos_${new Date().toISOString().split("T")[0]}.xlsx`;return a.writeFile(c,f),gp.info(`Exportacin completada: ${f}`),{success:!0,filename:f}}catch(a){const o=a instanceof Error?a.message:"Error desconocido al exportar";return gp.error("Error en exportacin Excel:",a),{success:!1,error:o}}},Vj=/^\d{4}-\d{2}-\d{2}$/,Id=r=>{if(!Vj.test(r))return!1;const[e,n,a]=r.split("-").map(Number),o=new Date(e,n-1,a);return Number.isFinite(e)&&Number.isFinite(n)&&Number.isFinite(a)&&o.getFullYear()===e&&o.getMonth()===n-1&&o.getDate()===a},pc=r=>{if(!Id(r))return new Date(Number.NaN);const[e,n,a]=r.split("-").map(Number);return new Date(e,n-1,a)},d6=(r,e="short")=>{if(!r||!Id(r))return"";const n=pc(r);return e==="long"?n.toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):e==="medium"?n.toLocaleDateString("es-CL",{day:"numeric",month:"short",year:"numeric"}):n.toLocaleDateString("es-CL",{day:"2-digit",month:"2-digit",year:"numeric"})},h6=()=>{const r=new Date;return`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`},Vp=r=>`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`,Hj=(r,e,n,a)=>{if(!r||!e||!Id(r)||!Id(e))return 0;const o=pc(r),c=pc(e);if(Number.isNaN(o.getTime())||Number.isNaN(c.getTime())||c<o)return 0;if(r===e&&a!==It.JC)return .5;const u=new Date(o);let f=0;for(;u<=c;){const m=Vp(u),b=u.getDay(),x=b===0||b===6,_=F5.includes(m);n===Ct.LEGAL_HOLIDAY||n===Ct.ADMINISTRATIVE?!x&&!_&&f++:f++,u.setDate(u.getDate()+1)}return f},f6=r=>{switch(r){case It.JM:return"Jornada Maana";case It.JT:return"Jornada Tarde";default:return"Jornada Completa"}},Gv=()=>({vacation:0,administrative:0,sickLeave:0}),Pl=(r,e,n=new Date().getFullYear())=>{const a=new Map,o=new Date(n,0,1),c=new Date(n,11,31);return e.forEach(u=>{if(u.status!==To.APPROVED)return;const f=pc(u.startDate),m=pc(u.endDate);if(Number.isNaN(f.getTime())||Number.isNaN(m.getTime())||f>c||m<o)return;const b=f<o?o:f,x=m>c?c:m,_=Hj(Vp(b),Vp(x),u.type,u.shift);if(_<=0)return;const E=a.get(u.employeeId)||Gv();u.type===Ct.LEGAL_HOLIDAY?E.vacation+=_:u.type===Ct.ADMINISTRATIVE?E.administrative+=_:u.type===Ct.SICK_LEAVE&&(E.sickLeave+=_),a.set(u.employeeId,E)}),r.map(u=>{const f=a.get(u.id)||Gv();return{...u,usedVacationDays:f.vacation,usedAdminDays:f.administrative,usedSickLeaveDays:f.sickLeave}})},qj=K.lazy(()=>cs(()=>import("./EmployeeListModal-CJpOoM4S.js"),__vite__mapDeps([0,1,2,3,4]))),Kv=K.lazy(()=>cs(()=>import("./Dashboard-DpbXo4cz.js"),__vite__mapDeps([5,3,2,4]))),Gj=K.lazy(()=>cs(()=>import("./LowBalanceModal-DxlctVa5.js"),__vite__mapDeps([6,2,3,4]))),Kj=K.lazy(()=>cs(()=>import("./DecreeBookModal-DStNvdRD.js"),__vite__mapDeps([7,3,4]))),Jv=K.lazy(()=>cs(()=>import("./CalendarView-CefPYSli.js"),__vite__mapDeps([8,3,4]))),Jj=K.lazy(()=>cs(()=>import("./ThemeSelector-BrsyILku.js"),__vite__mapDeps([9,10,3,4]))),Yj=K.lazy(()=>cs(()=>import("./Settings-BUrAzoWq.js"),__vite__mapDeps([11,1,3,4])).then(r=>({default:r.Settings}))),Wj=K.lazy(()=>cs(()=>import("./Reports-CHxXZtXc.js"),__vite__mapDeps([12,13,10,3,4])).then(r=>({default:r.Reports}))),Xj=K.lazy(()=>cs(()=>import("./AIAssistant-CJwteysE.js"),__vite__mapDeps([14,3,4])).then(r=>({default:r.AIAssistant}))),Zj=K.lazy(()=>cs(()=>import("./LeaveRequests-DcWd6PlC.js"),__vite__mapDeps([15,13,10,3,4])).then(r=>({default:r.LeaveRequests}))),Qj=K.lazy(()=>cs(()=>import("./EmployeeList-C8JLAxWY.js"),__vite__mapDeps([16,3,4])).then(r=>({default:r.EmployeeList}))),zl=()=>h.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-slate-900/50 backdrop-blur-md notification-backdrop-enter",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 p-8 rounded-3xl shadow-2xl page-fade-in",children:[h.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mx-auto shadow-lg",children:h.jsx("div",{className:"animate-spin w-5 h-5 border-2 border-white border-t-transparent rounded-full"})}),h.jsx("p",{className:"text-sm font-bold text-slate-600 dark:text-slate-300 mt-4 text-center",children:"Cargando"}),h.jsxs("div",{className:"flex justify-center gap-1.5 mt-2",children:[h.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full loading-dot"}),h.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full loading-dot"}),h.jsx("span",{className:"w-1.5 h-1.5 bg-indigo-400 rounded-full loading-dot"})]})]})}),pa=({view:r})=>h.jsxs("div",{className:"space-y-6 animate-pulse",children:[h.jsx("div",{className:"h-8 bg-slate-200 dark:bg-slate-700 rounded-lg w-1/3"}),h.jsx("div",{className:"h-64 bg-slate-200 dark:bg-slate-700 rounded-2xl"}),h.jsx("div",{className:"h-32 bg-slate-200 dark:bg-slate-700 rounded-2xl"})]}),Bl=()=>new Date().getFullYear(),Yv=r=>r.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().replace(/\s+/g," ").trim(),Q_=(r,e)=>{const n=Yv(r),a=Yv(e);if(n===a||n.length>3&&a.length>3&&(n.startsWith(a)||a.startsWith(n)))return!0;const o=n.split(" "),c=a.split(" ");if(o.length>=2&&c.length>=2&&o[0]===c[0]&&o[1]===c[1])return!0;const[u,f]=o.length<=c.length?[o,c]:[c,o];return!!(u.length>=2&&u.every(m=>f.includes(m)))},Wv=r=>{const e=[],n=new Set;for(let a=0;a<r.length;a++){if(n.has(a))continue;let o={...r[a]};const c=`${r[a].firstName} ${r[a].lastName}`.trim();for(let u=a+1;u<r.length;u++){if(n.has(u))continue;const f=`${r[u].firstName} ${r[u].lastName}`.trim();if(o.rut&&r[u].rut&&o.rut===r[u].rut||Q_(c,f)){n.add(u);const m=r[u];!o.rut&&m.rut&&(o.rut=m.rut);const b=`${o.firstName} ${o.lastName}`.trim();`${m.firstName} ${m.lastName}`.trim().length>b.length&&(o.firstName=m.firstName,o.lastName=m.lastName,o.avatarUrl=m.avatarUrl),o.position==="Funcionario"&&m.position!=="Funcionario"&&(o.position=m.position),o.department==="General"&&m.department!=="General"&&(o.department=m.department),o.email.includes("@institucion.cl")&&!m.email.includes("@institucion.cl")&&(o.email=m.email),m.usedVacationDays>o.usedVacationDays&&(o.totalVacationDays=m.totalVacationDays,o.usedVacationDays=m.usedVacationDays),m.usedAdminDays>o.usedAdminDays&&(o.totalAdminDays=m.totalAdminDays,o.usedAdminDays=m.usedAdminDays),m.usedSickLeaveDays>o.usedSickLeaveDays&&(o.totalSickLeaveDays=m.totalSickLeaveDays,o.usedSickLeaveDays=m.usedSickLeaveDays)}}o.firstName=o.firstName.toUpperCase(),o.lastName=o.lastName.toUpperCase(),e.push(o)}return e},e6=()=>{const{user:r,signOut:e,permissions:n,role:a,roleLabel:o,roleColors:c}=d0(),[u,f]=K.useState("decretos"),[m,b]=K.useState(!1),[x,_]=K.useState(()=>{try{const fe=localStorage.getItem("gdp_unified_employees_v2");if(fe){const Le=JSON.parse(fe);if(Array.isArray(Le)&&Le.length>0)return Wv(Le)}}catch{}return Pl(V5,pv,Bl())}),[E,y]=K.useState(()=>{try{const fe=localStorage.getItem("gdp_unified_requests_v2");if(fe){const Le=JSON.parse(fe);if(Array.isArray(Le)&&Le.length>0)return Le}}catch{}return pv}),[A,k]=K.useState(()=>{try{const fe=localStorage.getItem("gdp_unified_config_v2");if(fe)return{...mv,...JSON.parse(fe)}}catch{}return mv}),[N,C]=K.useState(null),I=K.useMemo(()=>x.map(fe=>({nombre:`${fe.firstName} ${fe.lastName}`.trim().toUpperCase(),rut:fe.rut||""})).filter(fe=>fe.nombre).sort((fe,Le)=>fe.nombre.localeCompare(Le.nombre)),[x]),{employees:z}=wT(()=>{},fe=>console.warn("Error empleados:",fe)),V=K.useRef(!1);K.useEffect(()=>{z.length===0||V.current||(V.current=!0,_(fe=>{let Le=!1;for(const Fe of z){if(!Fe.rut||!Fe.nombre||fe.find(jt=>jt.rut===Fe.rut))continue;const tt=fe.find(jt=>Q_(`${jt.firstName} ${jt.lastName}`.trim(),Fe.nombre));if(tt){tt.rut||(tt.rut=Fe.rut,Le=!0);continue}const On=Fe.nombre.split(" "),Lt=On[0]||"",Qt=On.slice(1).join(" ")||"";fe=[...fe,{id:crypto.randomUUID(),firstName:Lt,lastName:Qt,rut:Fe.rut,email:`${Lt.toLowerCase()}.${Qt.toLowerCase().replace(/ /g,"")}@institucion.cl`,position:"Funcionario",department:"General",totalVacationDays:A.defaultVacationDays,usedVacationDays:0,totalAdminDays:A.defaultAdminDays,usedAdminDays:0,totalSickLeaveDays:A.defaultSickLeaveDays,usedSickLeaveDays:0,avatarUrl:`https://ui-avatars.com/api/?name=${Lt}+${Qt}&background=random&color=fff`}],Le=!0}return Le?Wv([...fe]):fe}))},[z,A]);const[H,G]=K.useState(null),[M,j]=K.useState("ALL"),[O,F]=K.useState(!1),[q,D]=K.useState(""),[L,R]=K.useState(null),[ge,Q]=K.useState(!1),[X,_e]=K.useState(null),{modals:re,openModal:te,closeModal:W}=lT(),Z=K.useRef(null),{isDark:pe,toggle:ne}=oT(),{toasts:ie,toast:Ae,removeToast:ke}=I5(),{records:ae,setRecords:Re,isSyncing:Te,syncError:Ie,lastSync:Be,isOnline:Ue,syncWarnings:S,pendingSync:ve,isRetryScheduled:me,fetchFromCloud:U,syncToCloud:B,undo:J,canUndo:de}=xT(()=>Ae.success("Sincronizado","Datos actualizados correctamente"),fe=>Ae.error("Error de sincronizacion",fe)),we=K.useRef("");K.useEffect(()=>{if(S.length===0)return;const fe=S.join("|");if(fe===we.current)return;we.current=fe;const Le=S.slice(0,3).join(" . "),Fe=S.length>3?` (+${S.length-3} mas)`:"";Ae.warning("Datos con formato inesperado",`${Le}${Fe}`)},[S,Ae]),K.useEffect(()=>{const fe=sessionStorage.getItem("hrAppToken");fe&&C(fe)},[]),K.useEffect(()=>{try{localStorage.setItem("gdp_unified_employees_v2",JSON.stringify(x))}catch{}},[x]),K.useEffect(()=>{try{localStorage.setItem("gdp_unified_requests_v2",JSON.stringify(E))}catch{}},[E]),K.useEffect(()=>{try{localStorage.setItem("gdp_unified_config_v2",JSON.stringify(A))}catch{}},[A]);const oe=K.useMemo(()=>{const fe=new Date().getFullYear();return fT(ae,fe)},[ae]),Ce=K.useMemo(()=>{let fe=0;return I.forEach(Le=>{const Fe=ae.filter(tt=>tt.rut===Le.rut&&tt.solicitudType==="PA");if(Fe.length>0){const tt=[...Fe].sort((Lt,Qt)=>Qt.createdAt-Lt.createdAt);tt[0].diasHaber-tt[0].cantidadDias<=0&&fe++}const Ye=ae.filter(tt=>tt.rut===Le.rut&&tt.solicitudType==="FL");if(Ye.length>0){const tt=[...Ye].sort((Lt,Qt)=>Qt.createdAt-Lt.createdAt);Bd(tt[0],0)<=0&&fe++}}),fe},[ae,I]),je=fe=>{const Le=(r==null?void 0:r.email)||"sistema";let Fe;H?(Fe=ae.map(Ye=>Ye.id===H.id?{...fe,id:Ye.id,createdAt:Ye.createdAt}:Ye),G(null),Ae.success("Decreto actualizado",`${fe.acto} modificado correctamente`),Dn({scope:"decree",action:"update_decree",actor:Le,target:`${fe.solicitudType} ${fe.acto}`,details:`Funcionario: ${fe.funcionario}`})):(Fe=[...ae,{...fe,id:crypto.randomUUID(),createdAt:Date.now()}],Ae.success("Decreto emitido",`Resolucion ${fe.acto} creada exitosamente`),Dn({scope:"decree",action:"create_decree",actor:Le,target:`${fe.solicitudType} ${fe.acto}`,details:`Funcionario: ${fe.funcionario}`})),Re(Fe),B(Fe)},Ne=fe=>{R(fe),te("confirmDelete")},Pe=K.useCallback(()=>{if(L){const fe=ae.find(Fe=>Fe.id===L),Le=ae.filter(Fe=>Fe.id!==L);Re(Le),B(Le),Ae.warning("Decreto eliminado","Puedes deshacer esta accion"),Dn({scope:"decree",action:"delete_decree",actor:(r==null?void 0:r.email)||"sistema",target:fe?`${fe.solicitudType} ${fe.acto}`:L,details:fe?`Funcionario: ${fe.funcionario}`:"Eliminado por ID"}),R(null)}},[L,ae,Re,B,Ae,r==null?void 0:r.email]),et=()=>{J(),Ae.info("Accion deshecha","Se restauro el estado anterior")},Je=fe=>{D(fe),f("decretos")},sn=fe=>{const Le=I.find(Fe=>Fe.rut===fe);D((Le==null?void 0:Le.nombre)||fe),te("employeeList")},Kn=fe=>{var Le;f("decretos"),(Le=Z.current)==null||Le.scrollIntoView({behavior:"smooth"}),Ae.info("Nuevo decreto",`Preparando decreto para ${fe.nombre}`)},Vt=K.useCallback(async()=>{if(!n.canExportExcel){Ae.warning("Sin permiso","Tu rol no permite exportar a Excel");return}const fe=await Fj(ae);fe.success?Ae.success("Exportado","Excel generado"):Ae.error("Error",fe.error||"No se pudo exportar")},[n.canExportExcel,ae,Ae]),ds=fe=>{var Le;if(!n.canCreateDecree){Ae.warning("Sin permiso","Tu rol no permite crear decretos");return}f("decretos"),fe&&_e(fe),(Le=Z.current)==null||Le.scrollIntoView({behavior:"smooth"}),Ae.info("Nuevo decreto",fe?`Preparando ${fe==="PA"?"Permiso Administrativo":"Feriado Legal"}`:"Preparando nuevo decreto")},ot=fe=>{f("decretos"),j(fe.solicitudType),D(fe.acto||fe.funcionario)},nt=K.useCallback((fe,Le="info")=>{Le==="success"?Ae.success("Exito",fe):Le==="error"?Ae.error("Error",fe):Ae.info("Info",fe)},[Ae]),rn=K.useCallback(fe=>{const Le=fe.nombre.toUpperCase().split(" "),Fe=Le[0]||"",Ye=Le.slice(1).join(" ")||"",tt={id:crypto.randomUUID(),firstName:Fe,lastName:Ye,rut:fe.rut,email:`${Fe.toLowerCase()}.${Ye.toLowerCase().replace(/ /g,"")}@institucion.cl`,position:"Funcionario",department:"General",totalVacationDays:A.defaultVacationDays,usedVacationDays:0,totalAdminDays:A.defaultAdminDays,usedAdminDays:0,totalSickLeaveDays:A.defaultSickLeaveDays,usedSickLeaveDays:0,avatarUrl:`https://ui-avatars.com/api/?name=${Fe}+${Ye}&background=random&color=fff`};_(On=>[...On,tt]),nt("Funcionario agregado exitosamente","success")},[A,nt]),ht=K.useCallback((fe,Le)=>{const Fe=Le.nombre.toUpperCase().split(" "),Ye=Fe[0]||"",tt=Fe.slice(1).join(" ")||"";_(On=>On.map(Lt=>Lt.rut===fe?{...Lt,firstName:Ye,lastName:tt,rut:Le.rut,avatarUrl:`https://ui-avatars.com/api/?name=${Ye}+${tt}&background=random&color=fff`}:Lt)),nt("Funcionario actualizado","success")},[nt]),nr=K.useCallback(fe=>{const Le=x.find(Fe=>Fe.rut===fe);Le&&(_(Fe=>Fe.filter(Ye=>Ye.rut!==fe)),y(Fe=>Fe.filter(Ye=>Ye.employeeId!==Le.id)),nt("Funcionario eliminado","info"))},[x,nt]),sr=fe=>{const Le={id:crypto.randomUUID(),firstName:fe.firstName.toUpperCase(),lastName:fe.lastName.toUpperCase(),email:fe.email,position:fe.position,department:fe.department,totalVacationDays:A.defaultVacationDays,usedVacationDays:0,totalAdminDays:A.defaultAdminDays,usedAdminDays:0,totalSickLeaveDays:A.defaultSickLeaveDays,usedSickLeaveDays:0,avatarUrl:`https://ui-avatars.com/api/?name=${fe.firstName}+${fe.lastName}&background=random&color=fff`};_(Fe=>[...Fe,Le]),nt("Funcionario registrado con exito","success")},Ir=(fe,Le)=>{_(Fe=>Fe.map(Ye=>Ye.id===fe?{...Ye,...Le,firstName:Le.firstName.toUpperCase(),lastName:Le.lastName.toUpperCase(),avatarUrl:`https://ui-avatars.com/api/?name=${Le.firstName}+${Le.lastName}&background=random&color=fff`}:Ye)),nt("Datos del funcionario actualizados","success")},kn=fe=>{window.confirm("Estas seguro de que deseas eliminar este funcionario?")&&(y(Le=>{const Fe=Le.filter(Ye=>Ye.employeeId!==fe);return _(Ye=>Pl(Ye.filter(tt=>tt.id!==fe),Fe,Bl())),Fe}),nt("Funcionario eliminado","info"))},Jn=(fe,Le)=>{y(Fe=>{const Ye=Fe.map(tt=>tt.id===fe?{...tt,status:Le}:tt);return _(tt=>Pl(tt,Ye,Bl())),Ye}),nt(`Solicitud ${Le===To.APPROVED?"aprobada":"rechazada"}`,Le===To.APPROVED?"success":"info")},xt=fe=>{const Le={...fe,id:crypto.randomUUID(),status:To.PENDING};y(Fe=>{const Ye=[Le,...Fe];return _(tt=>Pl(tt,Ye,Bl())),Ye}),nt("Solicitud creada correctamente","success")},un=(fe,Le)=>{k(fe),Le?(_(Fe=>Fe.map(Ye=>({...Ye,totalVacationDays:fe.defaultVacationDays,totalAdminDays:fe.defaultAdminDays,totalSickLeaveDays:fe.defaultSickLeaveDays}))),nt("Configuracion aplicada a todos los funcionarios","success")):nt("Configuracion guardada","success")},Yn=fe=>{y(fe.requests||E),k(fe.config||A),_(Pl(fe.employees||x,fe.requests||E,Bl())),nt("Datos importados correctamente","success")},Sn=K.useCallback(async()=>{sessionStorage.removeItem("hrAppToken"),C(null),e()},[e]),vi=K.useMemo(()=>[{key:"n",ctrlKey:!0,action:()=>{var fe;f("decretos"),(fe=Z.current)==null||fe.scrollIntoView({behavior:"smooth"})},description:"Nuevo decreto"},{key:"s",ctrlKey:!0,action:()=>U(),description:"Sincronizar"},{key:"e",ctrlKey:!0,action:Vt,description:"Exportar Excel"},{key:"d",ctrlKey:!0,action:ne,description:"Cambiar tema"},{key:"b",ctrlKey:!0,action:()=>te("decreeBook"),description:"Libro de decretos"},{key:"g",ctrlKey:!0,action:()=>F(fe=>!fe),description:"Ver graficos"},{key:"c",ctrlKey:!0,action:()=>te("calendar"),description:"Calendario"},{key:"z",ctrlKey:!0,action:et,description:"Deshacer"},{key:"k",ctrlKey:!0,action:()=>Q(!0),description:"Buscar comandos"},{key:"?",action:()=>te("shortcuts"),description:"Mostrar atajos"}],[U,Vt,ne,te,et]);D5(vi);const _i=Te?"Sincronizando...":Ue?Ie?"Error de sincronizacion":ve?me?"Reintentando...":"Pendiente":"Sincronizado":ve?"Pendiente (offline)":"Offline",Wn=Te?"bg-indigo-500 animate-ping":ve?"bg-amber-500":Ie?"bg-red-500":Ue?"bg-emerald-500":"bg-red-500",rr=K.useMemo(()=>r!=null&&r.displayName?r.displayName:r==null?void 0:r.email,[r]),Lo=()=>{switch(u){case"decretos":return h.jsxs("div",{className:"space-y-10 sm:space-y-12",children:[h.jsx(U_,{records:ae,totalDatabaseEmployees:I.length}),O&&h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"dashboard"}),children:h.jsx(Kv,{records:ae,employees:I,hrEmployees:x,hrRequests:E,onViewLowBalance:()=>te("lowBalance"),onNavigate:fe=>f(fe),baseDaysPA:A.defaultAdminDays})}),n.canCreateDecree&&h.jsx("section",{ref:Z,children:h.jsx(J5,{onSubmit:je,editingRecord:H,onCancelEdit:()=>G(null),nextCorrelatives:oe,employees:I,records:ae,requestedSolicitudType:X,onRequestedSolicitudTypeHandled:()=>_e(null),baseDaysPA:A.defaultAdminDays})}),!n.canCreateDecree&&h.jsx("div",{className:"bg-sky-50 dark:bg-sky-900/20 border border-sky-200 dark:border-sky-800 rounded-2xl p-6",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:`px-3 py-1 rounded-lg text-xs font-black uppercase tracking-wider ${c.bg} ${c.text}`,children:o}),h.jsxs("p",{className:"text-sm text-sky-700 dark:text-sky-300",children:["Tu rol es de ",h.jsx("strong",{children:"lectura"}),". Puedes consultar los registros y generar documentos PDF, pero no crear ni modificar decretos."]})]})}),h.jsxs("section",{className:"space-y-6 sm:space-y-8",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 sm:gap-6",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 bg-indigo-600 rounded-xl flex items-center justify-center text-white shadow-lg shadow-indigo-100 dark:shadow-indigo-900/50",children:h.jsx(S_,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-base sm:text-lg font-black text-slate-900 dark:text-white tracking-tight",children:"Registro de Decretos"}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"text-[10px] sm:text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5",children:"Historial Institucional"}),Be&&!Te&&h.jsxs("span",{className:"hidden sm:flex items-center gap-1 px-2 py-0.5 bg-emerald-50 dark:bg-emerald-900/30 text-emerald-600 dark:text-emerald-400 border border-emerald-100 dark:border-emerald-800 rounded-full text-[8px] font-black uppercase tracking-tighter",children:[h.jsx(Sc,{className:"w-2.5 h-2.5"})," Sincronizado"]})]})]})]}),h.jsx("div",{className:"flex bg-slate-100/80 dark:bg-slate-800/80 backdrop-blur p-1.5 rounded-2xl gap-1 border border-slate-200/50 dark:border-slate-700 shadow-inner w-full sm:w-auto",children:["ALL","PA","FL"].map(fe=>h.jsx("button",{onClick:()=>j(fe),className:`flex-1 sm:flex-none px-3 sm:px-6 lg:px-8 py-2 sm:py-2.5 rounded-xl text-[10px] sm:text-[11px] font-black tracking-wider sm:tracking-widest transition-all duration-300 uppercase ${M===fe?"bg-white dark:bg-slate-700 text-indigo-600 dark:text-indigo-400 shadow-md ring-1 ring-slate-200 dark:ring-slate-600":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:fe==="ALL"?"Todos":fe==="PA"?"Permisos":"Feriados"},fe))})]}),h.jsx(s4,{data:ae,activeTab:M,onDelete:Ne,onEdit:G,searchTerm:q,onSearchTermChange:D,canEdit:n.canEditDecree,canDelete:n.canDeleteDecree})]})]});case"dashboard":return h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"dashboard"}),children:h.jsx(Kv,{records:ae,employees:I,hrEmployees:x,hrRequests:E,onViewLowBalance:()=>te("lowBalance"),onNavigate:fe=>f(fe),baseDaysPA:A.defaultAdminDays})});case"calendar":return h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"calendar"}),children:h.jsx(Jv,{isOpen:!0,onClose:()=>f("decretos"),records:ae})});case"employees":return h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"employees"}),children:h.jsx(Qj,{employees:x,onAddEmployee:sr,onEditEmployee:Ir,onDeleteEmployee:kn,onViewProfile:()=>{}})});case"requests":return h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"requests"}),children:h.jsx(Zj,{requests:E,employees:x,updateRequestStatus:Jn,addNewRequest:xt,onError:fe=>nt(fe,"error")})});case"reports":return h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"reports"}),children:h.jsx(Wj,{employees:x,requests:E,config:A})});case"ai-assistant":return h.jsx(K.Suspense,{fallback:h.jsx(pa,{view:"ai-assistant"}),children:h.jsx(Xj,{employees:x,requests:E,sessionToken:N||""})});case"settings":return h.jsxs(K.Suspense,{fallback:h.jsx(pa,{view:"settings"}),children:[h.jsx(Yj,{config:A,employees:x,requests:E,onSave:un,onImport:Yn}),a==="admin"&&h.jsx("div",{className:"max-w-5xl mx-auto mt-8 mb-8",children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-2xl shadow-sm border border-slate-200 dark:border-slate-700 p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center",children:h.jsx(oc,{className:"w-5 h-5 text-white"})}),h.jsxs("div",{children:[h.jsx("h2",{className:"text-lg font-black text-slate-900 dark:text-white",children:"Panel de Administracin"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Gestin de usuarios y roles"})]})]}),h.jsx(zj,{isOpen:!0,onClose:()=>{},mode:"inline"})]})})]});default:return null}};return h.jsxs("div",{className:"flex h-screen bg-slate-50 dark:bg-slate-900",children:[m&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 lg:hidden",onClick:()=>b(!1)}),h.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-64 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static ${m?"translate-x-0":"-translate-x-full"}`,children:h.jsx(L5,{currentView:u,setView:fe=>{f(fe),b(!1)},onLogout:Sn,isSyncing:Te})}),h.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[h.jsxs("header",{className:"sticky top-0 z-[100] w-full border-b border-slate-200 dark:border-slate-700 bg-white/75 dark:bg-slate-900/75 backdrop-blur-xl",children:[h.jsxs("div",{className:"px-4 sm:px-6 h-16 flex items-center justify-between",children:[h.jsx("button",{onClick:()=>b(!m),className:"lg:hidden p-2 rounded-lg text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800",children:m?h.jsx(Gn,{className:"w-5 h-5"}):h.jsx(XN,{className:"w-5 h-5"})}),h.jsxs("div",{className:"hidden sm:flex items-center gap-2",children:[h.jsx("span",{className:`w-2 h-2 rounded-full ${Wn}`}),h.jsx("span",{className:"text-xs font-medium text-slate-500 dark:text-slate-400",children:_i})]}),h.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[h.jsx("button",{onClick:()=>U(),disabled:Te,className:`p-2 rounded-lg transition-all ${Te?"text-slate-300 dark:text-slate-600":Ie?"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/30":"text-indigo-600 dark:text-indigo-400 hover:bg-indigo-50 dark:hover:bg-indigo-900/30"}`,title:"Sincronizar datos",children:Ie?h.jsx(Oo,{className:"w-4 h-4"}):h.jsx(A_,{className:`w-4 h-4 ${Te?"animate-spin":""}`})}),de&&h.jsx("button",{onClick:et,className:"p-2 rounded-lg text-amber-600 dark:text-amber-400 hover:bg-amber-50 dark:hover:bg-amber-900/30 transition-all",title:"Deshacer",children:h.jsx(E5,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>F(fe=>!fe),className:`hidden sm:flex p-2 rounded-lg transition-all ${O?"bg-indigo-100 dark:bg-indigo-900/50 text-indigo-600 dark:text-indigo-400":"text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800"}`,title:"Panel de estadisticas",children:h.jsx(b_,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>te("decreeBook"),className:"hidden sm:flex p-2 rounded-lg text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",title:"Libro de decretos",children:h.jsx(m_,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>te("calendar"),className:"hidden sm:flex p-2 rounded-lg text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",title:"Calendario",children:h.jsx(g_,{className:"w-4 h-4"})}),h.jsx("button",{onClick:Vt,className:"hidden md:flex p-2 rounded-lg text-emerald-600 dark:text-emerald-400 hover:bg-emerald-100 dark:hover:bg-emerald-900/30 transition-all",title:"Exportar a Excel",children:h.jsx(EN,{className:"w-4 h-4"})}),h.jsx("button",{onClick:ne,className:"p-2 rounded-lg text-slate-400 hover:text-slate-600 dark:hover:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",title:pe?"Modo claro":"Modo oscuro",children:pe?h.jsx(Cd,{className:"w-4 h-4"}):h.jsx(QN,{className:"w-4 h-4"})}),h.jsx("button",{onClick:()=>te("themeSelector"),className:"hidden sm:flex p-2 rounded-lg text-slate-400 hover:text-violet-600 dark:hover:text-violet-400 hover:bg-slate-100 dark:hover:bg-slate-800 transition-all",title:"Personalizar tema",children:h.jsx(t5,{className:"w-4 h-4"})}),h.jsx(o4,{records:ae,employees:I,onViewEmployee:sn}),h.jsx("div",{className:"w-px h-6 bg-slate-300 dark:bg-slate-600 mx-1"}),h.jsx("span",{className:`hidden sm:inline-flex px-2 py-0.5 rounded-md text-[9px] font-black uppercase tracking-wider ${c.bg} ${c.text}`,children:o}),a==="admin"&&h.jsx("button",{onClick:()=>{f("settings"),b(!1)},className:"p-2 rounded-lg text-purple-500 hover:text-purple-600 dark:hover:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/30 transition-all",title:"Configuracin y Administracin",children:h.jsx(oc,{className:"w-4 h-4"})}),h.jsx("button",{onClick:Sn,className:"p-2 rounded-lg text-red-400 hover:text-red-600 dark:hover:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/30 transition-all",title:"Cerrar sesion",children:h.jsx(E_,{className:"w-4 h-4"})})]})]}),Te&&h.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[3px] bg-indigo-50 dark:bg-indigo-900/50 overflow-hidden",children:h.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-600 via-sky-400 to-indigo-600 bg-[length:200%_100%] animate-sync-progress"})})]}),h.jsx("main",{className:"flex-1 overflow-auto p-4 sm:p-6 lg:p-8",children:h.jsxs("div",{className:"max-w-7xl mx-auto page-fade-in",children:[u==="decretos"&&h.jsx("div",{className:"mb-8",children:h.jsx($j,{userName:rr,totalRecords:ae.length,totalEmployees:I.length,criticalAlerts:Ce,onClickDecrees:()=>{},onClickEmployees:()=>te("employeeList"),onClickUrgent:()=>te("lowBalance")})}),Lo()]})}),u==="decretos"&&h.jsx("footer",{className:"px-4 sm:px-6 py-6 border-t border-slate-200 dark:border-slate-700",children:h.jsxs("div",{className:"max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-4 opacity-40 hover:opacity-100 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(v_,{className:"w-5 h-5 text-indigo-600"}),h.jsx("span",{className:"text-[10px] font-black text-slate-600 dark:text-slate-400 uppercase tracking-[0.2em]",children:"GDP Cloud Engine 2026"})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:()=>te("shortcuts"),className:"hidden sm:flex items-center gap-1.5 text-[9px] font-bold text-slate-400 hover:text-indigo-600 transition-colors uppercase tracking-wider",children:[h.jsx(k_,{className:"w-3 h-3"})," Atajos"]}),h.jsx("p",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-[0.1em] text-center",children:"Desarrollado por Maximiliano Guzman"})]})]})})]}),re.employeeList&&h.jsx(K.Suspense,{fallback:h.jsx(zl,{}),children:h.jsx(qj,{isOpen:re.employeeList,onClose:()=>W("employeeList"),employees:I,records:ae,onAddEmployee:n.canManageEmployees?rn:void 0,onUpdateEmployee:n.canManageEmployees?ht:void 0,onDeleteEmployee:n.canManageEmployees?nr:void 0,onFilterByEmployee:Je,onQuickDecree:n.canCreateDecree?Kn:void 0})}),re.lowBalance&&h.jsx(K.Suspense,{fallback:h.jsx(zl,{}),children:h.jsx(Gj,{isOpen:re.lowBalance,onClose:()=>W("lowBalance"),records:ae})}),re.decreeBook&&h.jsx(K.Suspense,{fallback:h.jsx(zl,{}),children:h.jsx(Kj,{isOpen:re.decreeBook,onClose:()=>W("decreeBook"),records:ae})}),h.jsx(O5,{isOpen:re.shortcuts,onClose:()=>W("shortcuts"),shortcuts:vi}),re.calendar&&h.jsx(K.Suspense,{fallback:h.jsx(zl,{}),children:h.jsx(Jv,{isOpen:re.calendar,onClose:()=>W("calendar"),records:ae})}),h.jsx(c4,{isOpen:re.confirmDelete,onClose:()=>{W("confirmDelete"),R(null)},onConfirm:Pe,title:"Eliminar decreto",message:"Estas seguro de que deseas eliminar este decreto? Esta accion se puede deshacer.",confirmText:"Eliminar",cancelText:"Cancelar",variant:"danger"}),h.jsx(Bj,{isOpen:ge,onClose:()=>Q(!1),records:ae,employees:I,onNavigate:fe=>{fe==="dashboard"?f("dashboard"):fe==="calendar"?f("calendar"):fe==="employees"?f("employees"):fe==="settings"&&f("settings")},onNewDecree:ds,onSelectEmployee:fe=>Je(fe.nombre),onSelectRecord:ot,onExportData:Vt}),re.themeSelector&&h.jsx(K.Suspense,{fallback:h.jsx(zl,{}),children:h.jsx(Jj,{isOpen:re.themeSelector,onClose:()=>W("themeSelector")})}),h.jsx(C_,{toasts:ie,onRemove:ke}),h.jsx(P5,{})]})},t6=()=>{const{user:r,loading:e}=d0();return e?h.jsx("div",{className:"min-h-screen bg-slate-100 dark:bg-slate-900 flex items-center justify-center",children:h.jsxs("div",{className:"text-center page-fade-in",children:[h.jsx("div",{className:"w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center mx-auto shadow-xl",children:h.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full"})}),h.jsx("p",{className:"text-sm font-bold text-slate-500 dark:text-slate-400 mt-4",children:"Verificando sesion"})]})}):r?h.jsx(e6,{}):h.jsx(M5,{})},n6=()=>h.jsx(iT,{children:h.jsx(U5,{children:h.jsx(rT,{children:h.jsx(t6,{})})})}),s6=zw.createRoot(document.getElementById("root"));s6.render(h.jsx(Qs.StrictMode,{children:h.jsx(n6,{})}));export{d6 as $,CT as A,m_ as B,gi as C,__ as D,ac as E,ic as F,ci as G,o5 as H,c6 as I,t5 as J,aT as K,To as L,Hj as M,pc as N,Id as O,uv as P,Ct as Q,Qs as R,Cd as S,jo as T,jd as U,m0 as V,It as W,Gn as X,EN as Y,f6 as Z,cs as _,f0 as a,h6 as a0,DN as a1,zd as a2,OT as a3,hv as a4,y_ as b,Oe as c,mi as d,Td as e,Dp as f,Bd as g,Sc as h,oN as i,h as j,lv as k,h0 as l,sp as m,Rp as n,T_ as o,KT as p,yi as q,K as r,w5 as s,i6 as t,Nd as u,xN as v,rv as w,g_ as x,u6 as y,Oo as z};
