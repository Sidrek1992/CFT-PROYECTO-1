import{c as v,r as o,j as t,F as w,X as k,C as D,g as F,m as L}from"./index-CfPzR3wC.js";import"./vendor--Eh9ivFN.js";import"./genai-IPx1z701.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],h=v("printer",$),C=({isOpen:p,onClose:m,records:r})=>{const c=new Date().getFullYear(),u=new Date().getMonth(),[d,b]=o.useState(c),[n,g]=o.useState(u),[i,f]=o.useState("ALL"),x=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],j=o.useMemo(()=>{const e=new Set([c]);return r.forEach(s=>s.fechaDecreto&&e.add(new Date(s.fechaDecreto).getFullYear())),Array.from(e).sort((s,a)=>a-s)},[r,c]),l=o.useMemo(()=>r.filter(e=>{if(!e.fechaDecreto)return!1;const s=new Date(e.fechaDecreto+"T12:00:00");return s.getFullYear()===d&&s.getMonth()===n&&(i==="ALL"||e.solicitudType===i)}).sort((e,s)=>(parseInt(e.acto)||0)-(parseInt(s.acto)||0)),[r,d,n,i]),N=()=>{const e=window.open("","_blank");if(!e)return;const s=`<!DOCTYPE html><html><head><title>Libro ${x[n]} ${d}</title>
      <style>body{font-family:system-ui;font-size:11px}h1{text-align:center}table{width:100%;border-collapse:collapse}
      th{background:#1e293b;color:#fff;padding:8px;text-align:left;font-size:9px}td{padding:6px;border-bottom:1px solid #e2e8f0}</style></head>
      <body><h1>Libro de Decretos - ${x[n]} ${d}</h1>
      <table><tr><th>N°</th><th>Tipo</th><th>Funcionario</th><th>RUT</th><th>Días</th><th>Fecha</th><th>Saldo</th></tr>
      ${l.map(a=>{const y=a.solicitudType==="FL"?F(a,0):a.diasHaber-a.cantidadDias;return`<tr><td>${a.acto}</td><td>${a.solicitudType}</td><td>${a.funcionario}</td><td>${a.rut}</td>
      <td>${a.cantidadDias}</td><td>${L(a.fechaInicio)}</td><td>${Number(y).toFixed(1)}</td></tr>`}).join("")}
      </table></body></html>`;e.document.write(s),e.document.close(),setTimeout(()=>e.print(),300)};return p?t.jsxs("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4",onClick:m,children:[t.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm"}),t.jsxs("div",{className:"relative w-full max-w-3xl max-h-[85vh] bg-white dark:bg-slate-800 rounded-2xl sm:rounded-3xl shadow-2xl overflow-hidden flex flex-col",onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-4 sm:p-6 text-white flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2 sm:gap-3",children:[t.jsx(w,{className:"w-5 h-5 sm:w-6 sm:h-6"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-base sm:text-lg font-bold",children:"Libro de Decretos"}),t.jsx("p",{className:"text-[10px] sm:text-xs opacity-80",children:"Resumen mensual"})]})]}),t.jsx("button",{onClick:m,className:"p-2 hover:bg-white/20 rounded-xl",children:t.jsx(k,{})})]}),t.jsxs("div",{className:"p-3 sm:p-4 border-b border-slate-200 dark:border-slate-700 flex flex-wrap gap-2 sm:gap-3 items-center",children:[t.jsx("select",{value:d,onChange:e=>b(+e.target.value),className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-slate-50 dark:bg-slate-700 border rounded-xl text-xs sm:text-sm font-bold",children:j.map(e=>t.jsx("option",{value:e,children:e},e))}),t.jsx("select",{value:n,onChange:e=>g(+e.target.value),className:"px-2 sm:px-3 py-1.5 sm:py-2 bg-slate-50 dark:bg-slate-700 border rounded-xl text-xs sm:text-sm font-bold",children:x.map((e,s)=>t.jsx("option",{value:s,children:e},s))}),t.jsx("div",{className:"flex gap-1 bg-slate-100 dark:bg-slate-700 p-1 rounded-lg",children:["ALL","PA","FL"].map(e=>t.jsx("button",{onClick:()=>f(e),className:`px-2 sm:px-3 py-1 sm:py-1.5 rounded text-[10px] sm:text-xs font-bold ${i===e?"bg-white dark:bg-slate-600 text-indigo-600":"text-slate-500"}`,children:e==="ALL"?"Todos":e},e))}),t.jsx("div",{className:"flex-1"}),t.jsxs("button",{onClick:N,disabled:!l.length,className:"flex items-center gap-1.5 sm:gap-2 px-3 sm:px-4 py-1.5 sm:py-2 bg-indigo-600 text-white rounded-xl text-xs sm:text-sm font-bold disabled:opacity-50",children:[t.jsx(h,{size:14,className:"sm:hidden"}),t.jsx(h,{size:16,className:"hidden sm:block"})," Imprimir"]})]}),t.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:l.length===0?t.jsxs("div",{className:"py-12 text-center text-slate-400",children:[t.jsx(D,{className:"w-10 h-10 mx-auto mb-3"}),"Sin decretos"]}):t.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-4 text-center",children:[t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-3",children:[t.jsx("p",{className:"text-xl font-bold",children:l.length}),t.jsx("p",{className:"text-[10px] text-slate-400",children:"Decretos"})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-3",children:[t.jsx("p",{className:"text-xl font-bold",children:l.reduce((e,s)=>e+s.cantidadDias,0)}),t.jsx("p",{className:"text-[10px] text-slate-400",children:"Días"})]}),t.jsxs("div",{className:"bg-slate-50 dark:bg-slate-700 rounded-xl p-3",children:[t.jsx("p",{className:"text-xl font-bold",children:new Set(l.map(e=>e.rut)).size}),t.jsx("p",{className:"text-[10px] text-slate-400",children:"Funcionarios"})]})]})})]})]}):null};export{C as default};
